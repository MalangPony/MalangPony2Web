/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/bsky-embed@0.2.7/dist/bsky-embed.es.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function tb(e){return Object.keys(e).reduce(((t,r)=>{const i=e[r];return t[r]=Object.assign({},i),Uf(i.value)&&!ab(i.value)&&!Array.isArray(i.value)&&(t[r].value=Object.assign({},i.value)),Array.isArray(i.value)&&(t[r].value=i.value.slice(0)),t}),{})}function rb(e){return e?Object.keys(e).reduce(((t,r)=>{const i=e[r];return t[r]=Uf(i)&&"value"in i?i:{value:i},t[r].attribute||(t[r].attribute=sb(r)),t[r].parse="parse"in t[r]?t[r].parse:"string"!=typeof t[r].value,t}),{}):{}}function ib(e){return Object.keys(e).reduce(((t,r)=>(t[r]=e[r].value,t)),{})}function nb(e,t){const r=tb(t);return Object.keys(t).forEach((t=>{const i=r[t],o=e.getAttribute(i.attribute),n=e[t];null!=o&&(i.value=i.parse?If(o):o),null!=n&&(i.value=Array.isArray(n)?n.slice(0):n),i.reflect&&_d(e,i.attribute,i.value,!!i.parse),Object.defineProperty(e,t,{get:()=>i.value,set(e){const r=i.value;i.value=e,i.reflect&&_d(this,i.attribute,i.value,!!i.parse);for(let i=0,o=this.__propertyChangedCallbacks.length;i<o;i++)this.__propertyChangedCallbacks[i](t,e,r)},enumerable:!0,configurable:!0})})),r}function If(e){if(e)try{return JSON.parse(e)}catch{return e}}function _d(e,t,r,i){if(null==r||!1===r)return e.removeAttribute(t);let o=i?JSON.stringify(r):r;e.__updating[t]=!0,"true"===o&&(o=""),e.setAttribute(t,o),Promise.resolve().then((()=>delete e.__updating[t]))}function sb(e){return e.replace(/\.?([A-Z]+)/g,((e,t)=>"-"+t.toLowerCase())).replace("_","-").replace(/^-/,"")}function Uf(e){return null!=e&&("object"==typeof e||"function"==typeof e)}function ab(e){return"[object Function]"===Object.prototype.toString.call(e)}function ob(e){return"function"==typeof e&&0===e.toString().indexOf("class")}let ac;function lb(e,t){const r=Object.keys(t);return class extends e{static get observedAttributes(){return r.map((e=>t[e].attribute))}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(this.__initialized)return;this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=nb(this,t);const e=ib(this.props),r=this.Component,i=ac;try{ac=this,this.__initialized=!0,ob(r)?new r(e,{element:this}):r(e,{element:this})}finally{ac=i}}async disconnectedCallback(){if(await Promise.resolve(),this.isConnected)return;this.__propertyChangedCallbacks.length=0;let e=null;for(;e=this.__releaseCallbacks.pop();)e(this);delete this.__initialized,this.__released=!0}attributeChangedCallback(e,r,i){if(this.__initialized&&!this.__updating[e]&&(e=this.lookupProp(e))in t){if(null==i&&!this[e])return;this[e]=t[e].parse?If(i):i}}lookupProp(e){if(t)return r.find((r=>e===r||e===t[r].attribute))}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(e){this.__releaseCallbacks.push(e)}addPropertyChangedCallback(e){this.__propertyChangedCallbacks.push(e)}}}function ub(e,t={},r={}){const{BaseElement:i=HTMLElement,extension:o,customElements:n=window.customElements}=r;return r=>{let s=n.get(e);return s?(s.prototype.Component=r,s):(s=lb(i,rb(t)),s.prototype.Component=r,s.prototype.registeredTag=e,n.define(e,s,o),s)}}const cb=(e,t)=>e===t,Rc=Symbol("solid-proxy"),db="function"==typeof Proxy,ou={equals:cb};let Of=jf;const vn=1,lu=2,Kf={owned:null,cleanups:null,context:null,owner:null};var sr=null;let oc=null,fb=null,Tt=null,Qt=null,Oi=null,Lu=0;function pb(e,t){const r=Tt,i=sr,o=0===e.length,n=void 0===t?i:t,s=o?Kf:{owned:null,cleanups:null,context:n?n.context:null,owner:n},a=o?e:()=>e((()=>Ra((()=>oa(s)))));sr=s,Tt=null;try{return _a(a,!0)}finally{Tt=r,sr=i}}function ia(e,t){const r={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},ou,t):ou).equals||void 0};return[Nf.bind(r),e=>("function"==typeof e&&(e=e(r.value)),Vf(r,e))]}function Er(e,t,r){Aa(Pc(e,t,!1,1))}function Mf(e,t,r){Of=bb;const i=Pc(e,t,!1,1);i.user=!0,Oi?Oi.push(i):Aa(i)}function Kr(e,t,r){r=r?Object.assign({},ou,r):ou;const i=Pc(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=r.equals||void 0,Aa(i),Nf.bind(i)}function Ra(e){if(null===Tt)return e();const t=Tt;Tt=null;try{return e()}finally{Tt=t}}function hb(e){Mf((()=>Ra(e)))}function Nf(){if(this.sources&&this.state)if(1===this.state)Aa(this);else{const e=Qt;Qt=null,_a((()=>cu(this)),!1),Qt=e}if(Tt){const e=this.observers?this.observers.length:0;Tt.sources?(Tt.sources.push(this),Tt.sourceSlots.push(e)):(Tt.sources=[this],Tt.sourceSlots=[e]),this.observers?(this.observers.push(Tt),this.observerSlots.push(Tt.sources.length-1)):(this.observers=[Tt],this.observerSlots=[Tt.sources.length-1])}return this.value}function Vf(e,t,r){let i=e.value;return(!e.comparator||!e.comparator(i,t))&&(e.value=t,e.observers&&e.observers.length&&_a((()=>{for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t],i=oc&&oc.running;i&&oc.disposed.has(r),(i?!r.tState:!r.state)&&(r.pure?Qt.push(r):Oi.push(r),r.observers&&Ff(r)),i||(r.state=1)}if(Qt.length>1e6)throw Qt=[],new Error}),!1)),t}function Aa(e){if(!e.fn)return;oa(e);const t=Lu;mb(e,e.value,t)}function mb(e,t,r){let i;const o=sr,n=Tt;Tt=sr=e;try{i=e.fn(t)}catch(t){return e.pure&&(e.state=1,e.owned&&e.owned.forEach(oa),e.owned=null),e.updatedAt=r+1,$f(t)}finally{Tt=n,sr=o}(!e.updatedAt||e.updatedAt<=r)&&(null!=e.updatedAt&&"observers"in e?Vf(e,i):e.value=i,e.updatedAt=r)}function Pc(e,t,r,i=1,o){const n={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:sr,context:sr?sr.context:null,pure:r};return null===sr||sr!==Kf&&(sr.owned?sr.owned.push(n):sr.owned=[n]),n}function uu(e){if(0===e.state)return;if(2===e.state)return cu(e);if(e.suspense&&Ra(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Lu);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(1===(e=t[r]).state)Aa(e);else if(2===e.state){const r=Qt;Qt=null,_a((()=>cu(e,t[0])),!1),Qt=r}}function _a(e,t){if(Qt)return e();let r=!1;t||(Qt=[]),Oi?r=!0:Oi=[],Lu++;try{const t=e();return yb(r),t}catch(e){r||(Oi=null),Qt=null,$f(e)}}function yb(e){if(Qt&&(jf(Qt),Qt=null),e)return;const t=Oi;Oi=null,t.length&&_a((()=>Of(t)),!1)}function jf(e){for(let t=0;t<e.length;t++)uu(e[t])}function bb(e){let t,r=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[r++]=i:uu(i)}for(t=0;t<r;t++)uu(e[t])}function cu(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const i=e.sources[r];if(i.sources){const e=i.state;1===e?i!==t&&(!i.updatedAt||i.updatedAt<Lu)&&uu(i):2===e&&cu(i,t)}}}function Ff(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=2,r.pure?Qt.push(r):Oi.push(r),r.observers&&Ff(r))}}function oa(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),r=e.sourceSlots.pop(),i=t.observers;if(i&&i.length){const e=i.pop(),o=t.observerSlots.pop();r<i.length&&(e.sourceSlots[o]=r,i[r]=e,t.observerSlots[r]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)oa(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)oa(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function gb(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}function $f(e,t=sr){throw gb(e)}function Gf(e,t){return Ra((()=>e(t||{})))}function Yl(){return!0}const xb={get:(e,t,r)=>t===Rc?r:e.get(t),has:(e,t)=>t===Rc||e.has(t),set:Yl,deleteProperty:Yl,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:Yl,deleteProperty:Yl}),ownKeys:e=>e.keys()};function lc(e){return(e="function"==typeof e?e():e)?e:{}}function Eb(){for(let e=0,t=this.length;e<t;++e){const t=this[e]();if(void 0!==t)return t}}function vb(...e){let t=!1;for(let r=0;r<e.length;r++){const i=e[r];t=t||!!i&&Rc in i,e[r]="function"==typeof i?(t=!0,Kr(i)):i}if(db&&t)return new Proxy({get(t){for(let r=e.length-1;r>=0;r--){const i=lc(e[r])[t];if(void 0!==i)return i}},has(t){for(let r=e.length-1;r>=0;r--)if(t in lc(e[r]))return!0;return!1},keys(){const t=[];for(let r=0;r<e.length;r++)t.push(...Object.keys(lc(e[r])));return[...new Set(t)]}},xb);const r={},i=Object.create(null);for(let t=e.length-1;t>=0;t--){const o=e[t];if(!o)continue;const n=Object.getOwnPropertyNames(o);for(let e=n.length-1;e>=0;e--){const t=n[e];if("__proto__"===t||"constructor"===t)continue;const s=Object.getOwnPropertyDescriptor(o,t);if(i[t]){const e=r[t];e&&(s.get?e.push(s.get.bind(o)):void 0!==s.value&&e.push((()=>s.value)))}else i[t]=s.get?{enumerable:!0,configurable:!0,get:Eb.bind(r[t]=[s.get.bind(o)])}:void 0!==s.value?s:void 0}}const o={},n=Object.keys(i);for(let e=n.length-1;e>=0;e--){const t=n[e],r=i[t];r&&r.get?Object.defineProperty(o,t,r):o[t]=r?r.value:void 0}return o}function Rb(e,t,r){let i=r.length,o=t.length,n=i,s=0,a=0,d=t[o-1].nextSibling,c=null;for(;s<o||a<n;)if(t[s]!==r[a]){for(;t[o-1]===r[n-1];)o--,n--;if(o===s){const t=n<i?a?r[a-1].nextSibling:r[n-a]:d;for(;a<n;)e.insertBefore(r[a++],t)}else if(n===a)for(;s<o;)(!c||!c.has(t[s]))&&t[s].remove(),s++;else if(t[s]===r[n-1]&&r[a]===t[o-1]){const i=t[--o].nextSibling;e.insertBefore(r[a++],t[s++].nextSibling),e.insertBefore(r[--n],i),t[o]=r[n]}else{if(!c){c=new Map;let e=a;for(;e<n;)c.set(r[e],e++)}const i=c.get(t[s]);if(null!=i)if(a<i&&i<n){let d,l=s,p=1;for(;++l<o&&l<n&&null!=(d=c.get(t[l]))&&d===i+p;)p++;if(p>i-a){const o=t[s];for(;a<i;)e.insertBefore(r[a++],o)}else e.replaceChild(r[a++],t[s++])}else s++;else t[s++].remove()}}else s++,a++}const wd="_$DX_DELEGATE";function qt(e,t,r){let i;const o=()=>(i||(i=(()=>{const t=document.createElement("template");return t.innerHTML=e,t.content.firstChild})())).cloneNode(!0);return o.cloneNode=o,o}function qf(e,t=window.document){const r=t[wd]||(t[wd]=new Set);for(let i=0,o=e.length;i<o;i++){const o=e[i];r.has(o)||(r.add(o),t.addEventListener(o,Ab))}}function kt(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}function zf(e,t){null==t?e.removeAttribute("class"):e.className=t}function Ac(e,t,r){return Ra((()=>e(t,r)))}function st(e,t,r,i){if(void 0!==r&&!i&&(i=[]),"function"!=typeof t)return du(e,t,i,r);Er((i=>du(e,t(),i,r)),i)}function Ab(e){let t=e.target;const r=`$$${e.type}`,i=e.target,o=e.currentTarget,n=t=>Object.defineProperty(e,"target",{configurable:!0,value:t}),s=()=>{const i=t[r];if(i&&!t.disabled){const o=t[`${r}Data`];if(void 0!==o?i.call(t,o,e):i.call(t,e),e.cancelBubble)return}return t.host&&"string"!=typeof t.host&&!t.host._$host&&t.contains(e.target)&&n(t.host),!0},a=()=>{for(;s()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>t||document}),e.composedPath){const r=e.composedPath();n(r[0]);for(let e=0;e<r.length-2&&(t=r[e],s());e++){if(t._$host){t=t._$host,a();break}if(t.parentNode===o)break}}else a();n(i)}function du(e,t,r,i,o){for(;"function"==typeof r;)r=r();if(t===r)return r;const n=typeof t,s=void 0!==i;if(e=s&&r[0]&&r[0].parentNode||e,"string"===n||"number"===n){if("number"===n&&(t=t.toString())===r)return r;if(s){let o=r[0];o&&3===o.nodeType?o.data!==t&&(o.data=t):o=document.createTextNode(t),r=ps(e,r,i,o)}else r=""!==r&&"string"==typeof r?e.firstChild.data=t:e.textContent=t}else if(null==t||"boolean"===n)r=ps(e,r,i);else{if("function"===n)return Er((()=>{let o=t();for(;"function"==typeof o;)o=o();r=du(e,o,r,i)})),()=>r;if(Array.isArray(t)){const n=[],a=r&&Array.isArray(r);if(_c(n,t,r,o))return Er((()=>r=du(e,n,r,i,!0))),()=>r;if(0===n.length){if(r=ps(e,r,i),s)return r}else a?0===r.length?Td(e,n,i):Rb(e,r,n):(r&&ps(e),Td(e,n));r=n}else if(t.nodeType){if(Array.isArray(r)){if(s)return r=ps(e,r,i,t);ps(e,r,null,t)}else null!=r&&""!==r&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);r=t}}return r}function _c(e,t,r,i){let o=!1;for(let n=0,s=t.length;n<s;n++){let s,a=t[n],d=r&&r[e.length];if(null!=a&&!0!==a&&!1!==a)if("object"==(s=typeof a)&&a.nodeType)e.push(a);else if(Array.isArray(a))o=_c(e,a,d)||o;else if("function"===s)if(i){for(;"function"==typeof a;)a=a();o=_c(e,Array.isArray(a)?a:[a],Array.isArray(d)?d:[d])||o}else e.push(a),o=!0;else{const t=String(a);d&&3===d.nodeType&&d.data===t?e.push(d):e.push(document.createTextNode(t))}}return o}function Td(e,t,r=null){for(let i=0,o=t.length;i<o;i++)e.insertBefore(t[i],r)}function ps(e,t,r,i){if(void 0===r)return e.textContent="";const o=i||document.createTextNode("");if(t.length){let i=!1;for(let n=t.length-1;n>=0;n--){const s=t[n];if(o!==s){const t=s.parentNode===e;i||n?t&&s.remove():t?e.replaceChild(o,s):e.insertBefore(o,r)}else i=!0}}else e.insertBefore(o,r);return[o]}function _b(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const[o,n]=ia(e[t[i]]);Object.defineProperty(r,t[i],{get:o,set(e){n((()=>e))}})}return r}function wb(e){if(e.assignedSlot&&e.assignedSlot._$owner)return e.assignedSlot._$owner;let t=e.parentNode;for(;t&&!t._$owner&&(!t.assignedSlot||!t.assignedSlot._$owner);)t=t.parentNode;return t&&t.assignedSlot?t.assignedSlot._$owner:e._$owner}function Tb(e){return(t,r)=>{const{element:i}=r;return pb((o=>{const n=_b(t);i.addPropertyChangedCallback(((e,t)=>n[e]=t)),i.addReleaseCallback((()=>{i.renderRoot.textContent="",o()}));const s=e(n,r);return st(i.renderRoot,s)}),wb(i))}}function Sb(e,t,r){return 2===arguments.length&&(r=t,t={}),ub(e,t)(Tb(r))}const Cb='*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.visible{visibility:visible}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.right-5{right:1.25rem}.top-5{top:1.25rem}.col-span-2{grid-column:span 2 / span 2}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:.25rem}.mb-16{margin-bottom:4rem}.ml-10{margin-left:2.5rem}.mr-1{margin-right:.25rem}.mt-4{margin-top:1rem}.mt-8{margin-top:2rem}.block{display:block}.inline{display:inline}.flex{display:flex}.grid{display:grid}.h-10{height:2.5rem}.h-14{height:3.5rem}.h-2{height:.5rem}.h-4{height:1rem}.h-full{height:100%}.max-h-\\[90vh\\]{max-height:90vh}.w-10{width:2.5rem}.w-14{width:3.5rem}.w-4{width:1rem}.w-full{width:100%}.max-w-\\[calc\\(100\\%-70px\\)\\]{max-width:calc(100% - 70px)}.max-w-screen-sm{max-width:640px}.flex-1{flex:1 1 0%}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-4{gap:1rem}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.text-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-md{border-radius:.375rem}.rounded-t-md{border-top-left-radius:.375rem;border-top-right-radius:.375rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-slate-300{--tw-border-opacity: 1;border-color:rgb(203 213 225 / var(--tw-border-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.bg-slate-100{--tw-bg-opacity: 1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}.bg-slate-200{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.bg-slate-900{--tw-bg-opacity: 1;background-color:rgb(15 23 42 / var(--tw-bg-opacity, 1))}.object-cover{-o-object-fit:cover;object-fit:cover}.p-3{padding:.75rem}.p-4{padding:1rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity: 1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.text-slate-600{--tw-text-opacity: 1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop\\:bg-gray-800::backdrop{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.backdrop\\:opacity-90::backdrop{opacity:.9}.hover\\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\\:underline:hover{text-decoration-line:underline}.dark\\:border-slate-800:where(.dark,.dark *){--tw-border-opacity: 1;border-color:rgb(30 41 59 / var(--tw-border-opacity, 1))}.dark\\:bg-slate-800:where(.dark,.dark *){--tw-bg-opacity: 1;background-color:rgb(30 41 59 / var(--tw-bg-opacity, 1))}.dark\\:text-slate-400:where(.dark,.dark *){--tw-text-opacity: 1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.dark\\:text-white:where(.dark,.dark *){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}';var se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xf(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})})),r}var Bc={},as={},Ic={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DisallowedDomainError=e.UnsupportedDomainError=e.ReservedHandleError=e.InvalidHandleError=e.isValidTld=e.isValidHandle=e.normalizeAndEnsureValidHandle=e.normalizeHandle=e.ensureValidHandleRegex=e.ensureValidHandle=e.DISALLOWED_TLDS=e.INVALID_HANDLE=void 0,e.INVALID_HANDLE="handle.invalid",e.DISALLOWED_TLDS=[".local",".arpa",".invalid",".localhost",".internal",".example",".alt",".onion"];e.ensureValidHandle=e=>{if(!/^[a-zA-Z0-9.-]*$/.test(e))throw new t("Disallowed characters in handle (ASCII letters, digits, dashes, periods only)");if(e.length>253)throw new t("Handle is too long (253 chars max)");const r=e.split(".");if(r.length<2)throw new t("Handle domain needs at least two parts");for(let e=0;e<r.length;e++){const i=r[e];if(i.length<1)throw new t("Handle parts can not be empty");if(i.length>63)throw new t("Handle part too long (max 63 chars)");if(i.endsWith("-")||i.startsWith("-"))throw new t("Handle parts can not start or end with hyphens");if(e+1===r.length&&!/^[a-zA-Z]/.test(i))throw new t("Handle final component (TLD) must start with ASCII letter")}};e.ensureValidHandleRegex=e=>{if(!/^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?$/.test(e))throw new t("Handle didn't validate via regex");if(e.length>253)throw new t("Handle is too long (253 chars max)")};e.normalizeHandle=e=>e.toLowerCase();e.normalizeAndEnsureValidHandle=t=>{const r=(0,e.normalizeHandle)(t);return(0,e.ensureValidHandle)(r),r};e.isValidHandle=r=>{try{(0,e.ensureValidHandle)(r)}catch(e){if(e instanceof t)return!1;throw e}return!0};e.isValidTld=t=>!e.DISALLOWED_TLDS.some((e=>t.endsWith(e)));class t extends Error{}e.InvalidHandleError=t;class r extends Error{}e.ReservedHandleError=r;class i extends Error{}e.UnsupportedDomainError=i;class o extends Error{}e.DisallowedDomainError=o}(Ic);var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.InvalidDidError=Ki.ensureValidDidRegex=Ki.ensureValidDid=void 0;const kb=e=>{if(!e.startsWith("did:"))throw new Bi('DID requires "did:" prefix');if(!/^[a-zA-Z0-9._:%-]*$/.test(e))throw new Bi("Disallowed characters in DID (ASCII letters, digits, and a couple other characters only)");const{length:t,1:r}=e.split(":");if(t<3)throw new Bi("DID requires prefix, method, and method-specific content");if(!/^[a-z]+$/.test(r))throw new Bi("DID method must be lower-case letters");if(e.endsWith(":")||e.endsWith("%"))throw new Bi('DID can not end with ":" or "%"');if(e.length>2048)throw new Bi("DID is too long (2048 chars max)")};Ki.ensureValidDid=kb;const Db=e=>{if(!/^did:[a-z]+:[a-zA-Z0-9._:%-]*[a-zA-Z0-9._-]$/.test(e))throw new Bi("DID didn't validate via regex");if(e.length>2048)throw new Bi("DID is too long (2048 chars max)")};Ki.ensureValidDidRegex=Db;class Bi extends Error{}Ki.InvalidDidError=Bi;var Uc={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InvalidNsidError=e.ensureValidNsidRegex=e.ensureValidNsid=e.NSID=void 0;class t{static parse(e){return new t(e)}static create(e,r){const i=[...e.split(".").reverse(),r].join(".");return new t(i)}static isValid(e){try{return t.parse(e),!0}catch{return!1}}constructor(t){Object.defineProperty(this,"segments",{enumerable:!0,configurable:!0,writable:!0,value:[]}),(0,e.ensureValidNsid)(t),this.segments=t.split(".")}get authority(){return this.segments.slice(0,this.segments.length-1).reverse().join(".")}get name(){return this.segments.at(this.segments.length-1)}toString(){return this.segments.join(".")}}e.NSID=t;e.ensureValidNsid=e=>{const t=e;if(!/^[a-zA-Z0-9.-]*$/.test(t))throw new r("Disallowed characters in NSID (ASCII letters, digits, dashes, periods only)");if(t.length>317)throw new r("NSID is too long (317 chars max)");const i=t.split(".");if(i.length<3)throw new r("NSID needs at least three parts");for(let e=0;e<i.length;e++){const t=i[e];if(t.length<1)throw new r("NSID parts can not be empty");if(t.length>63)throw new r("NSID part too long (max 63 chars)");if(t.endsWith("-")||t.startsWith("-"))throw new r("NSID parts can not start or end with hyphen");if(/^[0-9]/.test(t)&&0===e)throw new r("NSID first part may not start with a digit");if(!/^[a-zA-Z]+$/.test(t)&&e+1===i.length)throw new r("NSID name part must be only letters")}};e.ensureValidNsidRegex=e=>{if(!/^[a-zA-Z]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(\.[a-zA-Z]([a-zA-Z]{0,61}[a-zA-Z])?)$/.test(e))throw new r("NSID didn't validate via regex");if(e.length>317)throw new r("NSID is too long (317 chars max)")};class r extends Error{}e.InvalidNsidError=r}(Uc);var Hf={},Es={};Object.defineProperty(Es,"__esModule",{value:!0}),Es.ensureValidAtUriRegex=Es.ensureValidAtUri=void 0;const Zf=Ic,Wf=Ki,Yf=Uc,Pb=e=>{const t=e.split("#");if(t.length>2)throw new Error('ATURI can have at most one "#", separating fragment out');const r=t[1]||null;if(e=t[0],!/^[a-zA-Z0-9._~:@!$&')(*+,;=%/-]*$/.test(e))throw new Error("Disallowed characters in ATURI (ASCII)");const i=e.split("/");if(i.length>=3&&("at:"!==i[0]||0!==i[1].length))throw new Error('ATURI must start with "at://"');if(i.length<3)throw new Error("ATURI requires at least method and authority sections");try{i[2].startsWith("did:")?(0,Wf.ensureValidDid)(i[2]):(0,Zf.ensureValidHandle)(i[2])}catch{throw new Error("ATURI authority must be a valid handle or DID")}if(i.length>=4){if(0===i[3].length)throw new Error("ATURI can not have a slash after authority without a path segment");try{(0,Yf.ensureValidNsid)(i[3])}catch{throw new Error("ATURI requires first path segment (if supplied) to be valid NSID")}}if(i.length>=5&&0===i[4].length)throw new Error("ATURI can not have a slash after collection, unless record key is provided");if(i.length>=6)throw new Error("ATURI path can have at most two parts, and no trailing slash");if(t.length>=2&&null==r)throw new Error("ATURI fragment must be non-empty and start with slash");if(null!=r){if(0===r.length||"/"!==r[0])throw new Error("ATURI fragment must be non-empty and start with slash");if(!/^\/[a-zA-Z0-9._~:@!$&')(*+,;=%[\]/-]*$/.test(r))throw new Error("Disallowed characters in ATURI fragment (ASCII)")}if(e.length>8192)throw new Error("ATURI is far too long")};Es.ensureValidAtUri=Pb;const Bb=e=>{const t=e.match(/^at:\/\/(?<authority>[a-zA-Z0-9._:%-]+)(\/(?<collection>[a-zA-Z0-9-.]+)(\/(?<rkey>[a-zA-Z0-9._~:@!$&%')(*+,;=-]+))?)?(#(?<fragment>\/[a-zA-Z0-9._~:@!$&%')(*+,;=\-[\]/\\]*))?$/);if(!t||!t.groups)throw new Error("ATURI didn't validate via regex");const r=t.groups;try{(0,Zf.ensureValidHandleRegex)(r.authority)}catch{try{(0,Wf.ensureValidDidRegex)(r.authority)}catch{throw new Error("ATURI authority must be a valid handle or DID")}}if(r.collection)try{(0,Yf.ensureValidNsidRegex)(r.collection)}catch{throw new Error("ATURI collection path segment must be a valid NSID")}if(e.length>8192)throw new Error("ATURI is far too long")};Es.ensureValidAtUriRegex=Bb,function(e){var t=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=se&&se.__exportStar||function(e,r){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(r,i)&&t(r,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.AtUri=e.ATP_URI_REGEX=void 0,r(Es,e),e.ATP_URI_REGEX=/^(at:\/\/)?((?:did:[a-z0-9:%-]+)|(?:[a-z0-9][a-z0-9.:-]*))(\/[^?#\s]*)?(\?[^#\s]+)?(#[^\s]+)?$/i;const i=/^(\/[^?#\s]*)?(\?[^#\s]+)?(#[^\s]+)?$/i;class o{constructor(e,t){let r;if(Object.defineProperty(this,"hash",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"host",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pathname",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"searchParams",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t){if(r=n(t),!r)throw new Error(`Invalid at uri: ${t}`);const o=function(e){const t=i.exec(e);if(t)return{hash:t[3]||"",pathname:t[1]||"",searchParams:new URLSearchParams(t[2]||"")}}(e);if(!o)throw new Error(`Invalid path: ${e}`);Object.assign(r,o)}else if(r=n(e),!r)throw new Error(`Invalid at uri: ${e}`);this.hash=r.hash,this.host=r.host,this.pathname=r.pathname,this.searchParams=r.searchParams}static make(e,t,r){let i=e;return t&&(i+="/"+t),r&&(i+="/"+r),new o(i)}get protocol(){return"at:"}get origin(){return`at://${this.host}`}get hostname(){return this.host}set hostname(e){this.host=e}get search(){return this.searchParams.toString()}set search(e){this.searchParams=new URLSearchParams(e)}get collection(){return this.pathname.split("/").filter(Boolean)[0]||""}set collection(e){const t=this.pathname.split("/").filter(Boolean);t[0]=e,this.pathname=t.join("/")}get rkey(){return this.pathname.split("/").filter(Boolean)[1]||""}set rkey(e){const t=this.pathname.split("/").filter(Boolean);t[0]||(t[0]="undefined"),t[1]=e,this.pathname=t.join("/")}get href(){return this.toString()}toString(){let e=this.pathname||"/";e.startsWith("/")||(e=`/${e}`);let t=this.searchParams.toString();t&&!t.startsWith("?")&&(t=`?${t}`);let r=this.hash;return r&&!r.startsWith("#")&&(r=`#${r}`),`at://${this.host}${e}${t}${r}`}}function n(t){const r=e.ATP_URI_REGEX.exec(t);if(r)return{hash:r[5]||"",host:r[2]||"",pathname:r[3]||"",searchParams:new URLSearchParams(r[4]||"")}}e.AtUri=o}(Hf);var Jf={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InvalidTidError=e.isValidTid=e.ensureValidTid=void 0;e.ensureValidTid=e=>{if(13!==e.length)throw new t("TID must be 13 characters");if(!/^[234567abcdefghij][234567abcdefghijklmnopqrstuvwxyz]{12}$/.test(e))throw new t("TID syntax not valid (regex)")};e.isValidTid=r=>{try{(0,e.ensureValidTid)(r)}catch(e){if(e instanceof t)return!1;throw e}return!0};class t extends Error{}e.InvalidTidError=t}(Jf);var Qf={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InvalidRecordKeyError=e.isValidRecordKey=e.ensureValidRecordKey=void 0;e.ensureValidRecordKey=e=>{if(e.length>512||e.length<1)throw new t("record key must be 1 to 512 characters");if(!/^[a-zA-Z0-9_~.:-]{1,512}$/.test(e))throw new t("record key syntax not valid (regex)");if("."===e||".."===e)throw new t('record key can not be "." or ".."')};e.isValidRecordKey=r=>{try{(0,e.ensureValidRecordKey)(r)}catch(e){if(e instanceof t)return!1;throw e}return!0};class t extends Error{}e.InvalidRecordKeyError=t}(Qf);var ep={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InvalidDatetimeError=e.normalizeDatetimeAlways=e.normalizeDatetime=e.isValidDatetime=e.ensureValidDatetime=void 0;e.ensureValidDatetime=e=>{const r=new Date(e);if(isNaN(r.getTime()))throw new t("datetime did not parse as ISO 8601");if(r.toISOString().startsWith("-"))throw new t("datetime normalized to a negative time");if(!/^[0-9]{4}-[01][0-9]-[0-3][0-9]T[0-2][0-9]:[0-6][0-9]:[0-6][0-9](.[0-9]{1,20})?(Z|([+-][0-2][0-9]:[0-5][0-9]))$/.test(e))throw new t("datetime didn't validate via regex");if(e.length>64)throw new t("datetime is too long (64 chars max)");if(e.endsWith("-00:00"))throw new t('datetime can not use "-00:00" for UTC timezone');if(e.startsWith("000"))throw new t("datetime so close to year zero not allowed")};e.isValidDatetime=r=>{try{(0,e.ensureValidDatetime)(r)}catch(e){if(e instanceof t)return!1;throw e}return!0};e.normalizeDatetime=r=>{if((0,e.isValidDatetime)(r)){const t=new Date(r).toISOString();if((0,e.isValidDatetime)(t))return t}if(!/.*(([+-]\d\d:?\d\d)|[a-zA-Z])$/.test(r)){const t=new Date(r+"Z");if(!isNaN(t.getTime())){const r=t.toISOString();if((0,e.isValidDatetime)(r))return r}}const i=new Date(r);if(isNaN(i.getTime()))throw new t("datetime did not parse as any timestamp format");const o=i.toISOString();if((0,e.isValidDatetime)(o))return o;throw new t("datetime normalized to invalid timestamp string")};e.normalizeDatetimeAlways=r=>{try{return(0,e.normalizeDatetime)(r)}catch(e){if(e instanceof t)return new Date(0).toISOString();throw e}};class t extends Error{}e.InvalidDatetimeError=t}(ep),function(e){var t=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=se&&se.__exportStar||function(e,r){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(r,i)&&t(r,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ic,e),r(Ki,e),r(Uc,e),r(Hf,e),r(Jf,e),r(Qf,e),r(ep,e)}(as);var wa={},Rn={},os={},wc={},ci={},ku={},Ta={};!function(e){var t,r,i;Object.defineProperty(e,"__esModule",{value:!0}),e.getParsedType=e.ZodParsedType=e.objectUtil=e.util=void 0,(r=t||(e.util=t={})).assertEqual=e=>e,r.assertIs=function(e){},r.assertNever=function(e){throw new Error},r.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},r.getValidEnumValues=e=>{const t=r.objectKeys(e).filter((t=>"number"!=typeof e[e[t]])),i={};for(const r of t)i[r]=e[r];return r.objectValues(i)},r.objectValues=e=>r.objectKeys(e).map((function(t){return e[t]})),r.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},r.find=(e,t)=>{for(const r of e)if(t(r))return r},r.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,r.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},r.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,function(e){e.mergeShapes=(e,t)=>({...e,...t})}(i||(e.objectUtil=i={})),e.ZodParsedType=t.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);e.getParsedType=t=>{switch(typeof t){case"undefined":return e.ZodParsedType.undefined;case"string":return e.ZodParsedType.string;case"number":return isNaN(t)?e.ZodParsedType.nan:e.ZodParsedType.number;case"boolean":return e.ZodParsedType.boolean;case"function":return e.ZodParsedType.function;case"bigint":return e.ZodParsedType.bigint;case"symbol":return e.ZodParsedType.symbol;case"object":return Array.isArray(t)?e.ZodParsedType.array:null===t?e.ZodParsedType.null:t.then&&"function"==typeof t.then&&t.catch&&"function"==typeof t.catch?e.ZodParsedType.promise:typeof Map<"u"&&t instanceof Map?e.ZodParsedType.map:typeof Set<"u"&&t instanceof Set?e.ZodParsedType.set:typeof Date<"u"&&t instanceof Date?e.ZodParsedType.date:e.ZodParsedType.object;default:return e.ZodParsedType.unknown}}}(Ta);var di={};Object.defineProperty(di,"__esModule",{value:!0}),di.ZodError=di.quotelessJson=di.ZodIssueCode=void 0;const tp=Ta;di.ZodIssueCode=tp.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);const Ib=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");di.quotelessJson=Ib;class la extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},i=e=>{for(const o of e.issues)if("invalid_union"===o.code)o.unionErrors.map(i);else if("invalid_return_type"===o.code)i(o.returnTypeError);else if("invalid_arguments"===o.code)i(o.argumentsError);else if(0===o.path.length)r._errors.push(t(o));else{let e=r,i=0;for(;i<o.path.length;){const r=o.path[i];i===o.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(o))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(this),r}static assert(e){if(!(e instanceof la))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,tp.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}di.ZodError=la,la.create=e=>new la(e),Object.defineProperty(ku,"__esModule",{value:!0});const Bn=Ta,Zt=di,Ub=(e,t)=>{let r;switch(e.code){case Zt.ZodIssueCode.invalid_type:r=e.received===Bn.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Zt.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Bn.util.jsonStringifyReplacer)}`;break;case Zt.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${Bn.util.joinValues(e.keys,", ")}`;break;case Zt.ZodIssueCode.invalid_union:r="Invalid input";break;case Zt.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Bn.util.joinValues(e.options)}`;break;case Zt.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${Bn.util.joinValues(e.options)}, received '${e.received}'`;break;case Zt.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case Zt.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case Zt.ZodIssueCode.invalid_date:r="Invalid date";break;case Zt.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Bn.util.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Zt.ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case Zt.ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case Zt.ZodIssueCode.custom:r="Invalid input";break;case Zt.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case Zt.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Zt.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,Bn.util.assertNever(e)}return{message:r}};ku.default=Ub;var Ob=se&&se.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ci,"__esModule",{value:!0}),ci.getErrorMap=ci.setErrorMap=ci.defaultErrorMap=void 0;const rp=Ob(ku);ci.defaultErrorMap=rp.default;let ip=rp.default;function Kb(e){ip=e}function Mb(){return ip}ci.setErrorMap=Kb,ci.getErrorMap=Mb;var Oc={};!function(e){var t=se&&se.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.isAsync=e.isValid=e.isDirty=e.isAborted=e.OK=e.DIRTY=e.INVALID=e.ParseStatus=e.addIssueToContext=e.EMPTY_PATH=e.makeIssue=void 0;const r=ci,i=t(ku);e.makeIssue=e=>{const{data:t,path:r,errorMaps:i,issueData:o}=e,n=[...r,...o.path||[]],s={...o,path:n};if(void 0!==o.message)return{...o,path:n,message:o.message};let a="";const d=i.filter((e=>!!e)).slice().reverse();for(const e of d)a=e(s,{data:t,defaultError:a}).message;return{...o,path:n,message:a}},e.EMPTY_PATH=[],e.addIssueToContext=function(t,o){const n=(0,r.getErrorMap)(),s=(0,e.makeIssue)({issueData:o,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===i.default?void 0:i.default].filter((e=>!!e))});t.common.issues.push(s)};class o{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(t,r){const i=[];for(const o of r){if("aborted"===o.status)return e.INVALID;"dirty"===o.status&&t.dirty(),i.push(o.value)}return{status:t.value,value:i}}static async mergeObjectAsync(e,t){const r=[];for(const e of t){const t=await e.key,i=await e.value;r.push({key:t,value:i})}return o.mergeObjectSync(e,r)}static mergeObjectSync(t,r){const i={};for(const o of r){const{key:r,value:n}=o;if("aborted"===r.status||"aborted"===n.status)return e.INVALID;"dirty"===r.status&&t.dirty(),"dirty"===n.status&&t.dirty(),"__proto__"!==r.value&&(typeof n.value<"u"||o.alwaysSet)&&(i[r.value]=n.value)}return{status:t.value,value:i}}}e.ParseStatus=o,e.INVALID=Object.freeze({status:"aborted"});e.DIRTY=e=>({status:"dirty",value:e});e.OK=e=>({status:"valid",value:e});e.isAborted=e=>"aborted"===e.status;e.isDirty=e=>"dirty"===e.status;e.isValid=e=>"valid"===e.status;e.isAsync=e=>typeof Promise<"u"&&e instanceof Promise}(Oc);var np={};Object.defineProperty(np,"__esModule",{value:!0});var Sd,j={},Du={};Object.defineProperty(Du,"__esModule",{value:!0}),Du.errorUtil=void 0,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(Sd||(Du.errorUtil=Sd={}));var na,sa,fu=se&&se.__classPrivateFieldGet||function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)},sp=se&&se.__classPrivateFieldSet||function(e,t,r,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,r):o?o.value=r:t.set(e,r),r};Object.defineProperty(j,"__esModule",{value:!0}),j.boolean=j.bigint=j.array=j.any=j.coerce=j.ZodFirstPartyTypeKind=j.late=j.ZodSchema=j.Schema=j.custom=j.ZodReadonly=j.ZodPipeline=j.ZodBranded=j.BRAND=j.ZodNaN=j.ZodCatch=j.ZodDefault=j.ZodNullable=j.ZodOptional=j.ZodTransformer=j.ZodEffects=j.ZodPromise=j.ZodNativeEnum=j.ZodEnum=j.ZodLiteral=j.ZodLazy=j.ZodFunction=j.ZodSet=j.ZodMap=j.ZodRecord=j.ZodTuple=j.ZodIntersection=j.ZodDiscriminatedUnion=j.ZodUnion=j.ZodObject=j.ZodArray=j.ZodVoid=j.ZodNever=j.ZodUnknown=j.ZodAny=j.ZodNull=j.ZodUndefined=j.ZodSymbol=j.ZodDate=j.ZodBoolean=j.ZodBigInt=j.ZodNumber=j.ZodString=j.datetimeRegex=j.ZodType=void 0,j.NEVER=j.void=j.unknown=j.union=j.undefined=j.tuple=j.transformer=j.symbol=j.string=j.strictObject=j.set=j.record=j.promise=j.preprocess=j.pipeline=j.ostring=j.optional=j.onumber=j.oboolean=j.object=j.number=j.nullable=j.null=j.never=j.nativeEnum=j.nan=j.map=j.literal=j.lazy=j.intersection=j.instanceof=j.function=j.enum=j.effect=j.discriminatedUnion=j.date=void 0;const Jl=ci,ve=Du,$=Oc,me=Ta,de=di;class pi{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Cd=(e,t)=>{if((0,$.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new de.ZodError(e.common.issues);return this._error=t,this._error}}};function Me(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:i,description:o}=e;if(t&&(r||i))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:o}:{errorMap:(t,o)=>{var n,s;const{message:a}=e;return"invalid_enum_value"===t.code?{message:a??o.defaultError}:typeof o.data>"u"?{message:null!==(n=a??i)&&void 0!==n?n:o.defaultError}:"invalid_type"!==t.code?{message:o.defaultError}:{message:null!==(s=a??r)&&void 0!==s?s:o.defaultError}},description:o}}class je{get description(){return this._def.description}_getType(e){return(0,me.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,me.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new $.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,me.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if((0,$.isAsync)(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const i={common:{issues:[],async:null!==(r=t?.async)&&void 0!==r&&r,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,me.getParsedType)(e)},o=this._parseSync({data:e,path:i.path,parent:i});return Cd(i,o)}"~validate"(e){var t,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,me.getParsedType)(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:i});return(0,$.isValid)(t)?{value:t.value}:{issues:i.common.issues}}catch(e){!(null===(r=null===(t=e?.message)||void 0===t?void 0:t.toLowerCase())||void 0===r)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then((e=>(0,$.isValid)(e)?{value:e.value}:{issues:i.common.issues}))}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,me.getParsedType)(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await((0,$.isAsync)(i)?i:Promise.resolve(i));return Cd(r,o)}refine(e,t){const r=e=>"string"==typeof t||typeof t>"u"?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,i)=>{const o=e(t),n=()=>i.addIssue({code:de.ZodIssueCode.custom,...r(t)});return typeof Promise<"u"&&o instanceof Promise?o.then((e=>!!e||(n(),!1))):!!o||(n(),!1)}))}refinement(e,t){return this._refinement(((r,i)=>!!e(r)||(i.addIssue("function"==typeof t?t(r,i):t),!1)))}_refinement(e){return new qr({schema:this,typeName:ke.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return fi.create(this,this._def)}nullable(){return hn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Gr.create(this)}promise(){return Rs.create(this,this._def)}or(e){return fa.create([this,e],this._def)}and(e){return pa.create(this,e,this._def)}transform(e){return new qr({...Me(this._def),schema:this,typeName:ke.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ga({...Me(this._def),innerType:this,defaultValue:t,typeName:ke.ZodDefault})}brand(){return new Kc({typeName:ke.ZodBranded,type:this,...Me(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new xa({...Me(this._def),innerType:this,catchValue:t,typeName:ke.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Sa.create(this,e)}readonly(){return Ea.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}j.ZodType=je,j.Schema=je,j.ZodSchema=je;const Nb=/^c[^\s-]{8,}$/i,Vb=/^[0-9a-z]+$/,jb=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Fb=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$b=/^[a-z0-9_-]{21}$/i,Gb=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,qb=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zb=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Xb="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let uc;const Hb=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Zb=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Wb=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Yb=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Jb=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Qb=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ap="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eg=new RegExp(`^${ap}$`);function op(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function tg(e){return new RegExp(`^${op(e)}$`)}function lp(e){let t=`${ap}T${op(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function rg(e,t){return!(("v4"!==t&&t||!Hb.test(e))&&("v6"!==t&&t||!Wb.test(e)))}function ig(e,t){if(!Gb.test(e))return!1;try{const[r]=e.split("."),i=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(i));return!("object"!=typeof o||null===o||!o.typ||!o.alg||t&&o.alg!==t)}catch{return!1}}function ng(e,t){return!(("v4"!==t&&t||!Zb.test(e))&&("v6"!==t&&t||!Yb.test(e)))}j.datetimeRegex=lp;class Mr extends je{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==me.ZodParsedType.string){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.string,received:t.parsedType}),$.INVALID}const t=new $.ParseStatus;let r;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const o=e.data.length>i.value,n=e.data.length<i.value;(o||n)&&(r=this._getOrReturnCtx(e,r),o?(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):n&&(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)zb.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"email",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)uc||(uc=new RegExp(Xb,"u")),uc.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"emoji",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)Fb.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"uuid",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty());else if("nanoid"===i.kind)$b.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"nanoid",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)Nb.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"cuid",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)Vb.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"cuid2",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)jb.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"ulid",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"url",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"regex",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty()):"datetime"===i.kind?lp(i).test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.invalid_string,validation:"datetime",message:i.message}),t.dirty()):"date"===i.kind?eg.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.invalid_string,validation:"date",message:i.message}),t.dirty()):"time"===i.kind?tg(i).test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.invalid_string,validation:"time",message:i.message}),t.dirty()):"duration"===i.kind?qb.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"duration",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty()):"ip"===i.kind?rg(e.data,i.version)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"ip",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty()):"jwt"===i.kind?ig(e.data,i.alg)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"jwt",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty()):"cidr"===i.kind?ng(e.data,i.version)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"cidr",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty()):"base64"===i.kind?Jb.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"base64",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty()):"base64url"===i.kind?Qb.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{validation:"base64url",code:de.ZodIssueCode.invalid_string,message:i.message}),t.dirty()):me.util.assertNever(i);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:de.ZodIssueCode.invalid_string,...ve.errorUtil.errToObj(r)})}_addCheck(e){return new Mr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ve.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ve.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ve.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ve.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ve.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ve.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ve.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ve.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ve.errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ve.errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ve.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ve.errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ve.errorUtil.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:null!==(t=e?.offset)&&void 0!==t&&t,local:null!==(r=e?.local)&&void 0!==r&&r,...ve.errorUtil.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ve.errorUtil.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ve.errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ve.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...ve.errorUtil.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ve.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ve.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ve.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ve.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ve.errorUtil.errToObj(t)})}nonempty(e){return this.min(1,ve.errorUtil.errToObj(e))}trim(){return new Mr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Mr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Mr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function sg(e,t){const r=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,o=r>i?r:i;return parseInt(e.toFixed(o).replace(".",""))%parseInt(t.toFixed(o).replace(".",""))/Math.pow(10,o)}j.ZodString=Mr,Mr.create=e=>{var t;return new Mr({checks:[],typeName:ke.ZodString,coerce:null!==(t=e?.coerce)&&void 0!==t&&t,...Me(e)})};class dn extends je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==me.ZodParsedType.number){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.number,received:t.parsedType}),$.INVALID}let t;const r=new $.ParseStatus;for(const i of this._def.checks)"int"===i.kind?me.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"multipleOf"===i.kind?0!==sg(e.data,i.value)&&(t=this._getOrReturnCtx(e,t),(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.not_finite,message:i.message}),r.dirty()):me.util.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ve.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ve.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ve.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ve.errorUtil.toString(t))}setLimit(e,t,r,i){return new dn({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ve.errorUtil.toString(i)}]})}_addCheck(e){return new dn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ve.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ve.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ve.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ve.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ve.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ve.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ve.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ve.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ve.errorUtil.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&me.util.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}j.ZodNumber=dn,dn.create=e=>new dn({checks:[],typeName:ke.ZodNumber,coerce:e?.coerce||!1,...Me(e)});class fn extends je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==me.ZodParsedType.bigint)return this._getInvalidInput(e);let t;const r=new $.ParseStatus;for(const i of this._def.checks)"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):me.util.assertNever(i);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.bigint,received:t.parsedType}),$.INVALID}gte(e,t){return this.setLimit("min",e,!0,ve.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ve.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ve.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ve.errorUtil.toString(t))}setLimit(e,t,r,i){return new fn({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ve.errorUtil.toString(i)}]})}_addCheck(e){return new fn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ve.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ve.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ve.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ve.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ve.errorUtil.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}j.ZodBigInt=fn,fn.create=e=>{var t;return new fn({checks:[],typeName:ke.ZodBigInt,coerce:null!==(t=e?.coerce)&&void 0!==t&&t,...Me(e)})};class ua extends je{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==me.ZodParsedType.boolean){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.boolean,received:t.parsedType}),$.INVALID}return(0,$.OK)(e.data)}}j.ZodBoolean=ua,ua.create=e=>new ua({typeName:ke.ZodBoolean,coerce:e?.coerce||!1,...Me(e)});class Kn extends je{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==me.ZodParsedType.date){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.date,received:t.parsedType}),$.INVALID}if(isNaN(e.data.getTime())){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_date}),$.INVALID}const t=new $.ParseStatus;let r;for(const i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),t.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(r=this._getOrReturnCtx(e,r),(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),t.dirty()):me.util.assertNever(i);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Kn({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ve.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ve.errorUtil.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}j.ZodDate=Kn,Kn.create=e=>new Kn({checks:[],coerce:e?.coerce||!1,typeName:ke.ZodDate,...Me(e)});class pu extends je{_parse(e){if(this._getType(e)!==me.ZodParsedType.symbol){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.symbol,received:t.parsedType}),$.INVALID}return(0,$.OK)(e.data)}}j.ZodSymbol=pu,pu.create=e=>new pu({typeName:ke.ZodSymbol,...Me(e)});class ca extends je{_parse(e){if(this._getType(e)!==me.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.undefined,received:t.parsedType}),$.INVALID}return(0,$.OK)(e.data)}}j.ZodUndefined=ca,ca.create=e=>new ca({typeName:ke.ZodUndefined,...Me(e)});class da extends je{_parse(e){if(this._getType(e)!==me.ZodParsedType.null){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.null,received:t.parsedType}),$.INVALID}return(0,$.OK)(e.data)}}j.ZodNull=da,da.create=e=>new da({typeName:ke.ZodNull,...Me(e)});class vs extends je{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,$.OK)(e.data)}}j.ZodAny=vs,vs.create=e=>new vs({typeName:ke.ZodAny,...Me(e)});class On extends je{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,$.OK)(e.data)}}j.ZodUnknown=On,On.create=e=>new On({typeName:ke.ZodUnknown,...Me(e)});class en extends je{_parse(e){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.never,received:t.parsedType}),$.INVALID}}j.ZodNever=en,en.create=e=>new en({typeName:ke.ZodNever,...Me(e)});class hu extends je{_parse(e){if(this._getType(e)!==me.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.void,received:t.parsedType}),$.INVALID}return(0,$.OK)(e.data)}}j.ZodVoid=hu,hu.create=e=>new hu({typeName:ke.ZodVoid,...Me(e)});class Gr extends je{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==me.ZodParsedType.array)return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.array,received:t.parsedType}),$.INVALID;if(null!==i.exactLength){const e=t.data.length>i.exactLength.value,o=t.data.length<i.exactLength.value;(e||o)&&((0,$.addIssueToContext)(t,{code:e?de.ZodIssueCode.too_big:de.ZodIssueCode.too_small,minimum:o?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&((0,$.addIssueToContext)(t,{code:de.ZodIssueCode.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&((0,$.addIssueToContext)(t,{code:de.ZodIssueCode.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>i.type._parseAsync(new pi(t,e,t.path,r))))).then((e=>$.ParseStatus.mergeArray(r,e)));const o=[...t.data].map(((e,r)=>i.type._parseSync(new pi(t,e,t.path,r))));return $.ParseStatus.mergeArray(r,o)}get element(){return this._def.type}min(e,t){return new Gr({...this._def,minLength:{value:e,message:ve.errorUtil.toString(t)}})}max(e,t){return new Gr({...this._def,maxLength:{value:e,message:ve.errorUtil.toString(t)}})}length(e,t){return new Gr({...this._def,exactLength:{value:e,message:ve.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}function ys(e){if(e instanceof yt){const t={};for(const r in e.shape){const i=e.shape[r];t[r]=fi.create(ys(i))}return new yt({...e._def,shape:()=>t})}return e instanceof Gr?new Gr({...e._def,type:ys(e.element)}):e instanceof fi?fi.create(ys(e.unwrap())):e instanceof hn?hn.create(ys(e.unwrap())):e instanceof hi?hi.create(e.items.map((e=>ys(e)))):e}j.ZodArray=Gr,Gr.create=(e,t)=>new Gr({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ke.ZodArray,...Me(t)});class yt extends je{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=me.util.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==me.ZodParsedType.object){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.object,received:t.parsedType}),$.INVALID}const{status:t,ctx:r}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),n=[];if(!(this._def.catchall instanceof en&&"strip"===this._def.unknownKeys))for(const e in r.data)o.includes(e)||n.push(e);const s=[];for(const e of o){const t=i[e],o=r.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new pi(r,o,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof en){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of n)s.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)n.length>0&&((0,$.addIssueToContext)(r,{code:de.ZodIssueCode.unrecognized_keys,keys:n}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of n){const i=r.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new pi(r,i,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const r=await t.key,i=await t.value;e.push({key:r,value:i,alwaysSet:t.alwaysSet})}return e})).then((e=>$.ParseStatus.mergeObjectSync(t,e))):$.ParseStatus.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return ve.errorUtil.errToObj,new yt({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var i,o,n,s;const a=null!==(n=null===(o=(i=this._def).errorMap)||void 0===o?void 0:o.call(i,t,r).message)&&void 0!==n?n:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=ve.errorUtil.errToObj(e).message)&&void 0!==s?s:a}:{message:a}}}:{}})}strip(){return new yt({...this._def,unknownKeys:"strip"})}passthrough(){return new yt({...this._def,unknownKeys:"passthrough"})}extend(e){return new yt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new yt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ke.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new yt({...this._def,catchall:e})}pick(e){const t={};return me.util.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new yt({...this._def,shape:()=>t})}omit(e){const t={};return me.util.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new yt({...this._def,shape:()=>t})}deepPartial(){return ys(this)}partial(e){const t={};return me.util.objectKeys(this.shape).forEach((r=>{const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()})),new yt({...this._def,shape:()=>t})}required(e){const t={};return me.util.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof fi;)e=e._def.innerType;t[r]=e}})),new yt({...this._def,shape:()=>t})}keyof(){return up(me.util.objectKeys(this.shape))}}j.ZodObject=yt,yt.create=(e,t)=>new yt({shape:()=>e,unknownKeys:"strip",catchall:en.create(),typeName:ke.ZodObject,...Me(t)}),yt.strictCreate=(e,t)=>new yt({shape:()=>e,unknownKeys:"strict",catchall:en.create(),typeName:ke.ZodObject,...Me(t)}),yt.lazycreate=(e,t)=>new yt({shape:e,unknownKeys:"strip",catchall:en.create(),typeName:ke.ZodObject,...Me(t)});class fa extends je{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new de.ZodError(e.ctx.common.issues)));return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_union,unionErrors:r}),$.INVALID}));{let e;const i=[];for(const o of r){const r={...t,common:{...t.common,issues:[]},parent:null},n=o._parseSync({data:t.data,path:t.path,parent:r});if("valid"===n.status)return n;"dirty"===n.status&&!e&&(e={result:n,ctx:r}),r.common.issues.length&&i.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const o=i.map((e=>new de.ZodError(e)));return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_union,unionErrors:o}),$.INVALID}}get options(){return this._def.options}}j.ZodUnion=fa,fa.create=(e,t)=>new fa({options:e,typeName:ke.ZodUnion,...Me(t)});const ki=e=>e instanceof ma?ki(e.schema):e instanceof qr?ki(e.innerType()):e instanceof ya?[e.value]:e instanceof pn?e.options:e instanceof ba?me.util.objectValues(e.enum):e instanceof ga?ki(e._def.innerType):e instanceof ca?[void 0]:e instanceof da?[null]:e instanceof fi?[void 0,...ki(e.unwrap())]:e instanceof hn?[null,...ki(e.unwrap())]:e instanceof Kc||e instanceof Ea?ki(e.unwrap()):e instanceof xa?ki(e._def.innerType):[];class Pu extends je{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==me.ZodParsedType.object)return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.object,received:t.parsedType}),$.INVALID;const r=this.discriminator,i=t.data[r],o=this.optionsMap.get(i);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):((0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),$.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const i=new Map;for(const r of t){const t=ki(r.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of t){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,r)}}return new Pu({typeName:ke.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...Me(r)})}}function Tc(e,t){const r=(0,me.getParsedType)(e),i=(0,me.getParsedType)(t);if(e===t)return{valid:!0,data:e};if(r===me.ZodParsedType.object&&i===me.ZodParsedType.object){const r=me.util.objectKeys(t),i=me.util.objectKeys(e).filter((e=>-1!==r.indexOf(e))),o={...e,...t};for(const r of i){const i=Tc(e[r],t[r]);if(!i.valid)return{valid:!1};o[r]=i.data}return{valid:!0,data:o}}if(r===me.ZodParsedType.array&&i===me.ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let i=0;i<e.length;i++){const o=Tc(e[i],t[i]);if(!o.valid)return{valid:!1};r.push(o.data)}return{valid:!0,data:r}}return r===me.ZodParsedType.date&&i===me.ZodParsedType.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}j.ZodDiscriminatedUnion=Pu;class pa extends je{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(e,i)=>{if((0,$.isAborted)(e)||(0,$.isAborted)(i))return $.INVALID;const o=Tc(e.value,i.value);return o.valid?(((0,$.isDirty)(e)||(0,$.isDirty)(i))&&t.dirty(),{status:t.value,value:o.data}):((0,$.addIssueToContext)(r,{code:de.ZodIssueCode.invalid_intersection_types}),$.INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>i(e,t))):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}j.ZodIntersection=pa,pa.create=(e,t,r)=>new pa({left:e,right:t,typeName:ke.ZodIntersection,...Me(r)});class hi extends je{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.ZodParsedType.array)return(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.array,received:r.parsedType}),$.INVALID;if(r.data.length<this._def.items.length)return(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$.INVALID;!this._def.rest&&r.data.length>this._def.items.length&&((0,$.addIssueToContext)(r,{code:de.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map(((e,t)=>{const i=this._def.items[t]||this._def.rest;return i?i._parse(new pi(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(i).then((e=>$.ParseStatus.mergeArray(t,e))):$.ParseStatus.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new hi({...this._def,rest:e})}}j.ZodTuple=hi,hi.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new hi({items:e,typeName:ke.ZodTuple,rest:null,...Me(t)})};class ha extends je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.ZodParsedType.object)return(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.object,received:r.parsedType}),$.INVALID;const i=[],o=this._def.keyType,n=this._def.valueType;for(const e in r.data)i.push({key:o._parse(new pi(r,e,r.path,e)),value:n._parse(new pi(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?$.ParseStatus.mergeObjectAsync(t,i):$.ParseStatus.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return new ha(t instanceof je?{keyType:e,valueType:t,typeName:ke.ZodRecord,...Me(r)}:{keyType:Mr.create(),valueType:e,typeName:ke.ZodRecord,...Me(t)})}}j.ZodRecord=ha;class mu extends je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.ZodParsedType.map)return(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.map,received:r.parsedType}),$.INVALID;const i=this._def.keyType,o=this._def.valueType,n=[...r.data.entries()].map((([e,t],n)=>({key:i._parse(new pi(r,e,r.path,[n,"key"])),value:o._parse(new pi(r,t,r.path,[n,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of n){const i=await r.key,o=await r.value;if("aborted"===i.status||"aborted"===o.status)return $.INVALID;("dirty"===i.status||"dirty"===o.status)&&t.dirty(),e.set(i.value,o.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of n){const i=r.key,o=r.value;if("aborted"===i.status||"aborted"===o.status)return $.INVALID;("dirty"===i.status||"dirty"===o.status)&&t.dirty(),e.set(i.value,o.value)}return{status:t.value,value:e}}}}j.ZodMap=mu,mu.create=(e,t,r)=>new mu({valueType:t,keyType:e,typeName:ke.ZodMap,...Me(r)});class Mn extends je{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==me.ZodParsedType.set)return(0,$.addIssueToContext)(r,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.set,received:r.parsedType}),$.INVALID;const i=this._def;null!==i.minSize&&r.data.size<i.minSize.value&&((0,$.addIssueToContext)(r,{code:de.ZodIssueCode.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&r.data.size>i.maxSize.value&&((0,$.addIssueToContext)(r,{code:de.ZodIssueCode.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const o=this._def.valueType;function n(e){const r=new Set;for(const i of e){if("aborted"===i.status)return $.INVALID;"dirty"===i.status&&t.dirty(),r.add(i.value)}return{status:t.value,value:r}}const s=[...r.data.values()].map(((e,t)=>o._parse(new pi(r,e,r.path,t))));return r.common.async?Promise.all(s).then((e=>n(e))):n(s)}min(e,t){return new Mn({...this._def,minSize:{value:e,message:ve.errorUtil.toString(t)}})}max(e,t){return new Mn({...this._def,maxSize:{value:e,message:ve.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}j.ZodSet=Mn,Mn.create=(e,t)=>new Mn({valueType:e,minSize:null,maxSize:null,typeName:ke.ZodSet,...Me(t)});class xs extends je{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==me.ZodParsedType.function)return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.function,received:t.parsedType}),$.INVALID;function r(e,r){return(0,$.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,Jl.getErrorMap)(),Jl.defaultErrorMap].filter((e=>!!e)),issueData:{code:de.ZodIssueCode.invalid_arguments,argumentsError:r}})}function i(e,r){return(0,$.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,Jl.getErrorMap)(),Jl.defaultErrorMap].filter((e=>!!e)),issueData:{code:de.ZodIssueCode.invalid_return_type,returnTypeError:r}})}const o={errorMap:t.common.contextualErrorMap},n=t.data;if(this._def.returns instanceof Rs){const e=this;return(0,$.OK)((async function(...t){const s=new de.ZodError([]),a=await e._def.args.parseAsync(t,o).catch((e=>{throw s.addIssue(r(t,e)),s})),d=await Reflect.apply(n,this,a);return await e._def.returns._def.type.parseAsync(d,o).catch((e=>{throw s.addIssue(i(d,e)),s}))}))}{const e=this;return(0,$.OK)((function(...t){const s=e._def.args.safeParse(t,o);if(!s.success)throw new de.ZodError([r(t,s.error)]);const a=Reflect.apply(n,this,s.data),d=e._def.returns.safeParse(a,o);if(!d.success)throw new de.ZodError([i(a,d.error)]);return d.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new xs({...this._def,args:hi.create(e).rest(On.create())})}returns(e){return new xs({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new xs({args:e||hi.create([]).rest(On.create()),returns:t||On.create(),typeName:ke.ZodFunction,...Me(r)})}}j.ZodFunction=xs;class ma extends je{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}j.ZodLazy=ma,ma.create=(e,t)=>new ma({getter:e,typeName:ke.ZodLazy,...Me(t)});class ya extends je{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{received:t.data,code:de.ZodIssueCode.invalid_literal,expected:this._def.value}),$.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function up(e,t){return new pn({values:e,typeName:ke.ZodEnum,...Me(t)})}j.ZodLiteral=ya,ya.create=(e,t)=>new ya({value:e,typeName:ke.ZodLiteral,...Me(t)});class pn extends je{constructor(){super(...arguments),na.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return(0,$.addIssueToContext)(t,{expected:me.util.joinValues(r),received:t.parsedType,code:de.ZodIssueCode.invalid_type}),$.INVALID}if(fu(this,na,"f")||sp(this,na,new Set(this._def.values),"f"),!fu(this,na,"f").has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return(0,$.addIssueToContext)(t,{received:t.data,code:de.ZodIssueCode.invalid_enum_value,options:r}),$.INVALID}return(0,$.OK)(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return pn.create(e,{...this._def,...t})}exclude(e,t=this._def){return pn.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}j.ZodEnum=pn,na=new WeakMap,pn.create=up;class ba extends je{constructor(){super(...arguments),sa.set(this,void 0)}_parse(e){const t=me.util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==me.ZodParsedType.string&&r.parsedType!==me.ZodParsedType.number){const e=me.util.objectValues(t);return(0,$.addIssueToContext)(r,{expected:me.util.joinValues(e),received:r.parsedType,code:de.ZodIssueCode.invalid_type}),$.INVALID}if(fu(this,sa,"f")||sp(this,sa,new Set(me.util.getValidEnumValues(this._def.values)),"f"),!fu(this,sa,"f").has(e.data)){const e=me.util.objectValues(t);return(0,$.addIssueToContext)(r,{received:r.data,code:de.ZodIssueCode.invalid_enum_value,options:e}),$.INVALID}return(0,$.OK)(e.data)}get enum(){return this._def.values}}j.ZodNativeEnum=ba,sa=new WeakMap,ba.create=(e,t)=>new ba({values:e,typeName:ke.ZodNativeEnum,...Me(t)});class Rs extends je{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==me.ZodParsedType.promise&&!1===t.common.async)return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.promise,received:t.parsedType}),$.INVALID;const r=t.parsedType===me.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,$.OK)(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}j.ZodPromise=Rs,Rs.create=(e,t)=>new Rs({type:e,typeName:ke.ZodPromise,...Me(t)});class qr extends je{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ke.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:e=>{(0,$.addIssueToContext)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),"preprocess"===i.type){const e=i.transform(r.data,o);if(r.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return $.INVALID;const i=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===i.status?$.INVALID:"dirty"===i.status||"dirty"===t.value?(0,$.DIRTY)(i.value):i}));{if("aborted"===t.value)return $.INVALID;const i=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===i.status?$.INVALID:"dirty"===i.status||"dirty"===t.value?(0,$.DIRTY)(i.value):i}}if("refinement"===i.type){const e=e=>{const t=i.refinement(e,o);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===i.status?$.INVALID:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?$.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===i.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,$.isValid)(e))return e;const n=i.transform(e.value,o);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>(0,$.isValid)(e)?Promise.resolve(i.transform(e.value,o)).then((e=>({status:t.value,value:e}))):e))}me.util.assertNever(i)}}j.ZodEffects=qr,j.ZodTransformer=qr,qr.create=(e,t,r)=>new qr({schema:e,typeName:ke.ZodEffects,effect:t,...Me(r)}),qr.createWithPreprocess=(e,t,r)=>new qr({schema:t,effect:{type:"preprocess",transform:e},typeName:ke.ZodEffects,...Me(r)});class fi extends je{_parse(e){return this._getType(e)===me.ZodParsedType.undefined?(0,$.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}j.ZodOptional=fi,fi.create=(e,t)=>new fi({innerType:e,typeName:ke.ZodOptional,...Me(t)});class hn extends je{_parse(e){return this._getType(e)===me.ZodParsedType.null?(0,$.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}j.ZodNullable=hn,hn.create=(e,t)=>new hn({innerType:e,typeName:ke.ZodNullable,...Me(t)});class ga extends je{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===me.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}j.ZodDefault=ga,ga.create=(e,t)=>new ga({innerType:e,typeName:ke.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Me(t)});class xa extends je{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,$.isAsync)(i)?i.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new de.ZodError(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new de.ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}j.ZodCatch=xa,xa.create=(e,t)=>new xa({innerType:e,typeName:ke.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Me(t)});class yu extends je{_parse(e){if(this._getType(e)!==me.ZodParsedType.nan){const t=this._getOrReturnCtx(e);return(0,$.addIssueToContext)(t,{code:de.ZodIssueCode.invalid_type,expected:me.ZodParsedType.nan,received:t.parsedType}),$.INVALID}return{status:"valid",value:e.data}}}j.ZodNaN=yu,yu.create=e=>new yu({typeName:ke.ZodNaN,...Me(e)}),j.BRAND=Symbol("zod_brand");class Kc extends je{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}j.ZodBranded=Kc;class Sa extends je{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?$.INVALID:"dirty"===e.status?(t.dirty(),(0,$.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?$.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new Sa({in:e,out:t,typeName:ke.ZodPipeline})}}j.ZodPipeline=Sa;class Ea extends je{_parse(e){const t=this._def.innerType._parse(e),r=e=>((0,$.isValid)(e)&&(e.value=Object.freeze(e.value)),e);return(0,$.isAsync)(t)?t.then((e=>r(e))):r(t)}unwrap(){return this._def.innerType}}function cp(e,t={},r){return e?vs.create().superRefine(((i,o)=>{var n,s;if(!e(i)){const e="function"==typeof t?t(i):"string"==typeof t?{message:t}:t,a=null===(s=null!==(n=e.fatal)&&void 0!==n?n:r)||void 0===s||s,d="string"==typeof e?{message:e}:e;o.addIssue({code:"custom",...d,fatal:a})}})):vs.create()}var ke;j.ZodReadonly=Ea,Ea.create=(e,t)=>new Ea({innerType:e,typeName:ke.ZodReadonly,...Me(t)}),j.custom=cp,j.late={object:yt.lazycreate},function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(ke||(j.ZodFirstPartyTypeKind=ke={}));const ag=(e,t={message:`Input not instance of ${e.name}`})=>cp((t=>t instanceof e),t);j.instanceof=ag;const dp=Mr.create;j.string=dp;const fp=dn.create;j.number=fp;const og=yu.create;j.nan=og;const lg=fn.create;j.bigint=lg;const pp=ua.create;j.boolean=pp;const ug=Kn.create;j.date=ug;const cg=pu.create;j.symbol=cg;const dg=ca.create;j.undefined=dg;const fg=da.create;j.null=fg;const pg=vs.create;j.any=pg;const hg=On.create;j.unknown=hg;const mg=en.create;j.never=mg;const yg=hu.create;j.void=yg;const bg=Gr.create;j.array=bg;const gg=yt.create;j.object=gg;const xg=yt.strictCreate;j.strictObject=xg;const Eg=fa.create;j.union=Eg;const vg=Pu.create;j.discriminatedUnion=vg;const Rg=pa.create;j.intersection=Rg;const Ag=hi.create;j.tuple=Ag;const _g=ha.create;j.record=_g;const wg=mu.create;j.map=wg;const Tg=Mn.create;j.set=Tg;const Sg=xs.create;j.function=Sg;const Cg=ma.create;j.lazy=Cg;const Lg=ya.create;j.literal=Lg;const kg=pn.create;j.enum=kg;const Dg=ba.create;j.nativeEnum=Dg;const Pg=Rs.create;j.promise=Pg;const hp=qr.create;j.effect=hp,j.transformer=hp;const Bg=fi.create;j.optional=Bg;const Ig=hn.create;j.nullable=Ig;const Ug=qr.createWithPreprocess;j.preprocess=Ug;const Og=Sa.create;j.pipeline=Og;const Kg=()=>dp().optional();j.ostring=Kg;const Mg=()=>fp().optional();j.onumber=Mg;const Ng=()=>pp().optional();j.oboolean=Ng,j.coerce={string:e=>Mr.create({...e,coerce:!0}),number:e=>dn.create({...e,coerce:!0}),boolean:e=>ua.create({...e,coerce:!0}),bigint:e=>fn.create({...e,coerce:!0}),date:e=>Kn.create({...e,coerce:!0})},j.NEVER=$.INVALID,function(e){var t=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=se&&se.__exportStar||function(e,r){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(r,i)&&t(r,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(ci,e),r(Oc,e),r(np,e),r(Ta,e),r(j,e),r(di,e)}(wc),function(e){var t=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=se&&se.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=se&&se.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(i,e,o);return r(i,e),i},o=se&&se.__exportStar||function(e,r){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(r,i)&&t(r,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.z=void 0;const n=i(wc);e.z=n,o(wc,e),e.default=n}(os);var ls={};Object.defineProperty(ls,"__esModule",{value:!0}),ls.toLexUri=Vg,ls.toConcreteTypes=jg,ls.requiredPropertiesRefinement=Fg;const cc=os;function Vg(e,t){if(e.split("#").length>2)throw new Error("Uri can only have one hash segment");if(e.startsWith("lex:"))return e;if(e.startsWith("#")){if(!t)throw new Error(`Unable to resolve uri without anchor: ${e}`);return`${t}${e}`}return`lex:${e}`}function jg(e,t){return"ref"===t.type?[e.getDefOrThrow(t.ref)]:"union"===t.type?t.refs.map((t=>e.getDefOrThrow(t))).flat():[t]}function Fg(e,t){if(void 0!==e.required){if(!Array.isArray(e.required))return void t.addIssue({code:cc.z.ZodIssueCode.invalid_type,received:typeof e.required,expected:"array"});if(void 0===e.properties)return void(e.required.length>0&&t.addIssue({code:cc.z.ZodIssueCode.custom,message:"Required fields defined but no properties defined"}));for(const r of e.required)void 0===e.properties[r]&&t.addIssue({code:cc.z.ZodIssueCode.custom,message:`Required field "${r}" not defined`})}}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LexiconDefNotFoundError=e.InvalidLexiconError=e.ValidationError=e.discriminatedObject=e.lexiconDoc=e.lexUserType=e.lexRecord=e.lexXrpcSubscription=e.lexXrpcProcedure=e.lexXrpcQuery=e.lexXrpcError=e.lexXrpcSubscriptionMessage=e.lexXrpcBody=e.lexXrpcParameters=e.lexObject=e.lexToken=e.lexPrimitiveArray=e.lexArray=e.lexBlob=e.lexRefVariant=e.lexRefUnion=e.lexRef=e.lexIpldType=e.lexCidLink=e.lexBytes=e.lexPrimitive=e.lexUnknown=e.lexString=e.lexStringFormat=e.lexInteger=e.lexBoolean=void 0,e.isValidLexiconDoc=function(t){return e.lexiconDoc.safeParse(t).success},e.isObj=function(e){return null!==e&&"object"==typeof e},e.hasProp=function(e,t){return t in e},e.isDiscriminatedObject=function(t){return e.discriminatedObject.safeParse(t).success},e.parseLexiconDoc=function(t){return e.lexiconDoc.parse(t),t};const t=os,r=as,i=ls;e.lexBoolean=t.z.object({type:t.z.literal("boolean"),description:t.z.string().optional(),default:t.z.boolean().optional(),const:t.z.boolean().optional()}).strict(),e.lexInteger=t.z.object({type:t.z.literal("integer"),description:t.z.string().optional(),default:t.z.number().int().optional(),minimum:t.z.number().int().optional(),maximum:t.z.number().int().optional(),enum:t.z.number().int().array().optional(),const:t.z.number().int().optional()}).strict(),e.lexStringFormat=t.z.enum(["datetime","uri","at-uri","did","handle","at-identifier","nsid","cid","language","tid","record-key"]),e.lexString=t.z.object({type:t.z.literal("string"),format:e.lexStringFormat.optional(),description:t.z.string().optional(),default:t.z.string().optional(),minLength:t.z.number().int().optional(),maxLength:t.z.number().int().optional(),minGraphemes:t.z.number().int().optional(),maxGraphemes:t.z.number().int().optional(),enum:t.z.string().array().optional(),const:t.z.string().optional(),knownValues:t.z.string().array().optional()}).strict(),e.lexUnknown=t.z.object({type:t.z.literal("unknown"),description:t.z.string().optional()}).strict(),e.lexPrimitive=t.z.discriminatedUnion("type",[e.lexBoolean,e.lexInteger,e.lexString,e.lexUnknown]),e.lexBytes=t.z.object({type:t.z.literal("bytes"),description:t.z.string().optional(),maxLength:t.z.number().optional(),minLength:t.z.number().optional()}).strict(),e.lexCidLink=t.z.object({type:t.z.literal("cid-link"),description:t.z.string().optional()}).strict(),e.lexIpldType=t.z.discriminatedUnion("type",[e.lexBytes,e.lexCidLink]),e.lexRef=t.z.object({type:t.z.literal("ref"),description:t.z.string().optional(),ref:t.z.string()}).strict(),e.lexRefUnion=t.z.object({type:t.z.literal("union"),description:t.z.string().optional(),refs:t.z.string().array(),closed:t.z.boolean().optional()}).strict(),e.lexRefVariant=t.z.discriminatedUnion("type",[e.lexRef,e.lexRefUnion]),e.lexBlob=t.z.object({type:t.z.literal("blob"),description:t.z.string().optional(),accept:t.z.string().array().optional(),maxSize:t.z.number().optional()}).strict(),e.lexArray=t.z.object({type:t.z.literal("array"),description:t.z.string().optional(),items:t.z.discriminatedUnion("type",[e.lexBoolean,e.lexInteger,e.lexString,e.lexUnknown,e.lexBytes,e.lexCidLink,e.lexRef,e.lexRefUnion,e.lexBlob]),minLength:t.z.number().int().optional(),maxLength:t.z.number().int().optional()}).strict(),e.lexPrimitiveArray=e.lexArray.merge(t.z.object({items:e.lexPrimitive}).strict()),e.lexToken=t.z.object({type:t.z.literal("token"),description:t.z.string().optional()}).strict(),e.lexObject=t.z.object({type:t.z.literal("object"),description:t.z.string().optional(),required:t.z.string().array().optional(),nullable:t.z.string().array().optional(),properties:t.z.record(t.z.discriminatedUnion("type",[e.lexArray,e.lexBoolean,e.lexInteger,e.lexString,e.lexUnknown,e.lexBytes,e.lexCidLink,e.lexRef,e.lexRefUnion,e.lexBlob]))}).strict().superRefine(i.requiredPropertiesRefinement),e.lexXrpcParameters=t.z.object({type:t.z.literal("params"),description:t.z.string().optional(),required:t.z.string().array().optional(),properties:t.z.record(t.z.discriminatedUnion("type",[e.lexPrimitiveArray,e.lexBoolean,e.lexInteger,e.lexString,e.lexUnknown]))}).strict().superRefine(i.requiredPropertiesRefinement),e.lexXrpcBody=t.z.object({description:t.z.string().optional(),encoding:t.z.string(),schema:t.z.union([e.lexRefVariant,e.lexObject]).optional()}).strict(),e.lexXrpcSubscriptionMessage=t.z.object({description:t.z.string().optional(),schema:t.z.union([e.lexRefVariant,e.lexObject]).optional()}).strict(),e.lexXrpcError=t.z.object({name:t.z.string(),description:t.z.string().optional()}).strict(),e.lexXrpcQuery=t.z.object({type:t.z.literal("query"),description:t.z.string().optional(),parameters:e.lexXrpcParameters.optional(),output:e.lexXrpcBody.optional(),errors:e.lexXrpcError.array().optional()}).strict(),e.lexXrpcProcedure=t.z.object({type:t.z.literal("procedure"),description:t.z.string().optional(),parameters:e.lexXrpcParameters.optional(),input:e.lexXrpcBody.optional(),output:e.lexXrpcBody.optional(),errors:e.lexXrpcError.array().optional()}).strict(),e.lexXrpcSubscription=t.z.object({type:t.z.literal("subscription"),description:t.z.string().optional(),parameters:e.lexXrpcParameters.optional(),message:e.lexXrpcSubscriptionMessage.optional(),errors:e.lexXrpcError.array().optional()}).strict(),e.lexRecord=t.z.object({type:t.z.literal("record"),description:t.z.string().optional(),key:t.z.string().optional(),record:e.lexObject}).strict(),e.lexUserType=t.z.custom((t=>{if(t&&"object"==typeof t&&void 0!==t.type)switch(t.type){case"record":return e.lexRecord.parse(t);case"query":return e.lexXrpcQuery.parse(t);case"procedure":return e.lexXrpcProcedure.parse(t);case"subscription":return e.lexXrpcSubscription.parse(t);case"blob":return e.lexBlob.parse(t);case"array":return e.lexArray.parse(t);case"token":return e.lexToken.parse(t);case"object":return e.lexObject.parse(t);case"boolean":return e.lexBoolean.parse(t);case"integer":return e.lexInteger.parse(t);case"string":return e.lexString.parse(t);case"bytes":return e.lexBytes.parse(t);case"cid-link":return e.lexCidLink.parse(t);case"unknown":return e.lexUnknown.parse(t)}}),(e=>e&&"object"==typeof e?void 0===e.type?{message:"Must have a type",fatal:!0}:"string"!=typeof e.type?{message:"Type property must be a string",fatal:!0}:{message:`Invalid type: ${e.type} must be one of: record, query, procedure, subscription, blob, array, token, object, boolean, integer, string, bytes, cid-link, unknown`,fatal:!0}:{message:"Must be an object",fatal:!0})),e.lexiconDoc=t.z.object({lexicon:t.z.literal(1),id:t.z.string().refine((e=>r.NSID.isValid(e)),{message:"Must be a valid NSID"}),revision:t.z.number().optional(),description:t.z.string().optional(),defs:t.z.record(e.lexUserType)}).strict().superRefine(((e,r)=>{for(const i in e.defs){const o=e.defs[i];"main"!==i&&("record"===o.type||"procedure"===o.type||"query"===o.type||"subscription"===o.type)&&r.addIssue({code:t.z.ZodIssueCode.custom,message:"Records, procedures, queries, and subscriptions must be the main definition."})}})),e.discriminatedObject=t.z.object({$type:t.z.string()});class o extends Error{}e.ValidationError=o;class n extends Error{}e.InvalidLexiconError=n;class s extends Error{}e.LexiconDefNotFoundError=s}(Rn);var Bu={},us={},An={},Mc={},Iu={},vi={},ri={};Object.defineProperty(ri,"__esModule",{value:!0}),ri.isObject=ri.assure=ri.create=ri.is=void 0;const $g=(e,t)=>t.safeParse(e).success;ri.is=$g;const Gg=e=>t=>e.safeParse(t).success;ri.create=Gg;const qg=(e,t)=>e.parse(t);ri.assure=qg;const zg=e=>"object"==typeof e&&null!==e;ri.isObject=zg;var As={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseIntWithFallback=e.dedupeStrs=e.range=e.chunkArray=e.errHasMsg=e.isErrnoException=e.asyncFilter=e.s32decode=e.s32encode=e.streamToBuffer=e.flattenUint8Arrays=e.bailableWait=e.wait=e.jitter=e.omit=e.noUndefinedVals=void 0;e.noUndefinedVals=e=>(Object.keys(e).forEach((t=>{void 0===e[t]&&delete e[t]})),e),e.omit=function(e,t){return e&&Object.fromEntries(Object.entries(e).filter((e=>!t.includes(e[0]))))};e.jitter=e=>Math.round((Math.random()-.5)*e*2);e.wait=e=>new Promise((t=>setTimeout(t,e)));e.bailableWait=e=>{let t;const r=new Promise((r=>{const i=setTimeout(r,e);t=()=>{clearTimeout(i),r()}}));return{bail:t,wait:()=>r}};e.flattenUint8Arrays=e=>{const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let i=0;return e.forEach((e=>{r.set(e,i),i+=e.length})),r};e.streamToBuffer=async t=>{const r=[];for await(const e of t)r.push(e);return(0,e.flattenUint8Arrays)(r)};const t="234567abcdefghijklmnopqrstuvwxyz";e.s32encode=e=>{let r="";for(;e;){const i=e%32;e=Math.floor(e/32),r=t.charAt(i)+r}return r};e.s32decode=e=>{let r=0;for(const i of e)r=32*r+t.indexOf(i);return r};e.asyncFilter=async(e,t)=>{const r=await Promise.all(e.map((e=>t(e))));return e.filter(((e,t)=>r[t]))};e.isErrnoException=e=>!!e&&e.code;e.errHasMsg=(e,t)=>!!e&&"object"==typeof e&&e.message===t;e.chunkArray=(e,t)=>e.reduce(((e,r,i)=>{const o=Math.floor(i/t);return e[o]||(e[o]=[]),e[o].push(r),e}),[]);e.range=e=>{const t=[];for(let r=0;r<e;r++)t.push(r);return t};e.dedupeStrs=e=>[...new Set(e)];e.parseIntWithFallback=(e,t)=>{const r=parseInt(e||"",10);return isNaN(r)?t:r}}(As);var _s={};Object.defineProperty(_s,"__esModule",{value:!0}),_s.mapDefined=_s.keyBy=void 0;const Xg=(e,t)=>e.reduce(((e,r)=>(e[r[t]]=r,e)),{});_s.keyBy=Xg;const Hg=(e,t)=>{const r=[];for(const i of e){const e=t(i);void 0!==e&&r.push(e)}return r};_s.mapDefined=Hg;var mp={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.handleAllSettledErrors=e.AsyncBufferFullError=e.AsyncBuffer=e.allComplete=e.createDeferrables=e.createDeferrable=e.readFromGenerator=void 0;const t=As;e.readFromGenerator=async(e,r,i=Promise.resolve(),o=Number.MAX_SAFE_INTEGER)=>{const n=[];let s,a=!1;const d=async()=>{if(await r(n.at(-1)))return!0;const e=(0,t.bailableWait)(20);return await e.wait(),s=e.bail,!a&&await d()},c=new Promise((e=>{i.then((()=>{d().then((()=>e()))}))}));try{for(;n.length<o;){const t=await Promise.race([e.next(),c]);if(!t)break;const r=t;if(r.done)break;n.push(r.value)}}finally{a=!0,s&&s()}return n};e.createDeferrable=()=>{let e;const t=new Promise((t=>{e=()=>t()}));return{resolve:e,complete:t}};e.createDeferrables=t=>{const r=[];for(let i=0;i<t;i++)r.push((0,e.createDeferrable)());return r};e.allComplete=async e=>{await Promise.all(e.map((e=>e.complete)))};e.AsyncBuffer=class{constructor(e){Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"buffer",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"promise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolve",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"toThrow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.promise=Promise.resolve(),this.resolve=()=>null,this.resetPromise()}get curr(){return this.buffer}get size(){return this.buffer.length}get isClosed(){return this.closed}resetPromise(){this.promise=new Promise((e=>this.resolve=e))}push(e){this.buffer.push(e),this.resolve()}pushMany(e){e.forEach((e=>this.buffer.push(e))),this.resolve()}async*events(){for(;;){if(this.closed&&0===this.buffer.length){if(this.toThrow)throw this.toThrow;return}if(await this.promise,this.toThrow)throw this.toThrow;if(this.maxSize&&this.size>this.maxSize)throw new r(this.maxSize);const[e,...t]=this.buffer;e?(this.buffer=t,yield e):this.resetPromise()}}throw(e){this.toThrow=e,this.closed=!0,this.resolve()}close(){this.closed=!0,this.resolve()}};class r extends Error{constructor(e){super(`ReachedMaxBufferSize: ${e}`)}}e.AsyncBufferFullError=r;e.handleAllSettledErrors=e=>{const t=e.filter(i).map((e=>e.reason));if(0!==t.length)throw 1===t.length?t[0]:new AggregateError(t,"Multiple errors: "+t.map((e=>e?.message)).join("\n"))};const i=e=>"rejected"===e.status}(mp);var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.TID=void 0;const Ql=As,Ld=13;let dc=0,kd=0,eu=null;function Dd(e){return e.replaceAll("-","")}class Ii{constructor(e){Object.defineProperty(this,"str",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const t=Dd(e);if(13!==t.length)throw new Error(`Poorly formatted TID: ${t.length} length`);this.str=t}static next(e){const t=Math.max(Date.now(),dc);t===dc&&kd++,dc=t;const r=1e3*t+kd;null===eu&&(eu=Math.floor(32*Math.random()));const i=Ii.fromTime(r,eu);return!e||i.newerThan(e)?i:Ii.fromTime(e.timestamp()+1,eu)}static nextStr(e){return Ii.next(e?new Ii(e):void 0).toString()}static fromTime(e,t){const r=`${(0,Ql.s32encode)(e)}${(0,Ql.s32encode)(t).padStart(2,"2")}`;return new Ii(r)}static fromStr(e){return new Ii(e)}static oldestFirst(e,t){return e.compareTo(t)}static newestFirst(e,t){return t.compareTo(e)}static is(e){return 13===Dd(e).length}timestamp(){return(0,Ql.s32decode)(this.str.slice(0,11))}clockid(){return(0,Ql.s32decode)(this.str.slice(11,13))}formatted(){const e=this.toString();return`${e.slice(0,4)}-${e.slice(4,7)}-${e.slice(7,11)}-${e.slice(11,13)}`}toString(){return this.str}compareTo(e){return this.str>e.str?1:this.str<e.str?-1:0}equals(e){return this.str===e.str}newerThan(e){return this.compareTo(e)>0}olderThan(e){return this.compareTo(e)<0}}Ca.TID=Ii,Ca.default=Ii;var yp={},Zg=bp,Pd=128,Wg=127,Yg=~Wg,Jg=Math.pow(2,31);function bp(e,t,r){t=t||[];for(var i=r=r||0;e>=Jg;)t[r++]=255&e|Pd,e/=128;for(;e&Yg;)t[r++]=255&e|Pd,e>>>=7;return t[r]=0|e,bp.bytes=r-i+1,t}var Qg=Sc,ex=128,Bd=127;function Sc(e,t){var r,i=0,o=0,n=t=t||0,s=e.length;do{if(n>=s)throw Sc.bytes=0,new RangeError("Could not decode varint");r=e[n++],i+=o<28?(r&Bd)<<o:(r&Bd)*Math.pow(2,o),o+=7}while(r>=ex);return Sc.bytes=n-t,i}var tx=Math.pow(2,7),rx=Math.pow(2,14),ix=Math.pow(2,21),nx=Math.pow(2,28),sx=Math.pow(2,35),ax=Math.pow(2,42),ox=Math.pow(2,49),lx=Math.pow(2,56),ux=Math.pow(2,63),cx=function(e){return e<tx?1:e<rx?2:e<ix?3:e<nx?4:e<sx?5:e<ax?6:e<ox?7:e<lx?8:e<ux?9:10},dx={encode:Zg,decode:Qg,encodingLength:cx},bu=dx;const Cc=(e,t=0)=>[bu.decode(e,t),bu.decode.bytes],gu=(e,t,r=0)=>(bu.encode(e,t,r),t),xu=e=>bu.encodingLength(e),fx=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},Nc=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},px=e=>(new TextEncoder).encode(e),hx=e=>(new TextDecoder).decode(e),mx=(e,t)=>{const r=t.byteLength,i=xu(e),o=i+xu(r),n=new Uint8Array(o+r);return gu(e,n,0),gu(r,n,i),n.set(t,o),new Vc(e,r,t,n)},yx=e=>{const t=Nc(e),[r,i]=Cc(t),[o,n]=Cc(t.subarray(i)),s=t.subarray(i+n);if(s.byteLength!==o)throw new Error("Incorrect length");return new Vc(r,o,s,t)},bx=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&fx(e.bytes,t.bytes);class Vc{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}function gx(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var o=0;o<e.length;o++){var n=e.charAt(o),s=n.charCodeAt(0);if(255!==r[s])throw new TypeError(n+" is ambiguous");r[s]=o}var a=e.length,d=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function p(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var i=0,o=0;e[t]===d;)i++,t++;for(var n=(e.length-t)*c+1>>>0,s=new Uint8Array(n);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var p=0,u=n-1;(0!==l||p<o)&&-1!==u;u--,p++)l+=a*s[u]>>>0,s[u]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");o=p,t++}if(" "!==e[t]){for(var f=n-o;f!==n&&0===s[f];)f++;for(var h=new Uint8Array(i+(n-f)),m=i;f!==n;)h[m++]=s[f++];return h}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,o=0,n=t.length;o!==n&&0===t[o];)o++,r++;for(var s=(n-o)*l+1>>>0,c=new Uint8Array(s);o!==n;){for(var p=t[o],u=0,f=s-1;(0!==p||u<i)&&-1!==f;f--,u++)p+=256*c[f]>>>0,c[f]=p%a>>>0,p=p/a>>>0;if(0!==p)throw new Error("Non-zero carry");i=u,o++}for(var h=s-i;h!==s&&0===c[h];)h++;for(var m=d.repeat(r);h<s;++h)m+=e.charAt(c[h]);return m},decodeUnsafe:p,decode:function(e){var r=p(e);if(r)return r;throw new Error(`Non-${t} character`)}}}var xx=gx,Ex=xx;class vx{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Rx{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return gp(this,e)}}class Ax{constructor(e){this.decoders=e}or(e){return gp(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const gp=(e,t)=>new Ax({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class _x{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new vx(e,t,r),this.decoder=new Rx(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Uu=({name:e,prefix:t,encode:r,decode:i})=>new _x(e,t,r,i),La=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:o}=Ex(r,t);return Uu({prefix:e,name:t,encode:i,decode:e=>Nc(o(e))})},wx=(e,t,r,i)=>{const o={};for(let e=0;e<t.length;++e)o[t[e]]=e;let n=e.length;for(;"="===e[n-1];)--n;const s=new Uint8Array(n*r/8|0);let a=0,d=0,c=0;for(let t=0;t<n;++t){const n=o[e[t]];if(void 0===n)throw new SyntaxError(`Non-${i} character`);d=d<<r|n,a+=r,a>=8&&(a-=8,s[c++]=255&d>>a)}if(a>=r||255&d<<8-a)throw new SyntaxError("Unexpected end of data");return s},Tx=(e,t,r)=>{const i="="===t[t.length-1],o=(1<<r)-1;let n="",s=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],s+=8;s>r;)s-=r,n+=t[o&a>>s];if(s&&(n+=t[o&a<<r-s]),i)for(;n.length*r&7;)n+="=";return n},zt=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>Uu({prefix:t,name:e,encode:e=>Tx(e,i,r),decode:t=>wx(t,i,r,e)}),Ui=La({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Sx=La({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Cx=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Ui,base58flickr:Sx},Symbol.toStringTag,{value:"Module"})),aa=zt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Lx=zt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),kx=zt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Dx=zt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Px=zt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Bx=zt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ix=zt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ux=zt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ox=zt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Kx=Object.freeze(Object.defineProperty({__proto__:null,base32:aa,base32hex:Px,base32hexpad:Ix,base32hexpadupper:Ux,base32hexupper:Bx,base32pad:kx,base32padupper:Dx,base32upper:Lx,base32z:Ox},Symbol.toStringTag,{value:"Module"}));class Wt{constructor(e,t,r,i){this.code=t,this.version=e,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:ru,byteLength:ru,code:tu,version:tu,multihash:tu,bytes:tu,_baseCache:ru,asCID:ru})}toV0(){if(0===this.version)return this;{const{code:e,multihash:t}=this;if(e!==Qs)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==jx)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Wt.createV0(t)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=mx(e,t);return Wt.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&bx(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:i}=this;return 0===r?Nx(t,i,e||Ui.encoder):Vx(t,i,e||aa.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return $x(/^0\.0/,Gx),!(!e||!e[Ud]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Wt)return e;if(null!=e&&e.asCID===e){const{version:t,code:r,multihash:i,bytes:o}=e;return new Wt(t,r,i,o||Id(t,r,i.bytes))}if(null!=e&&!0===e[Ud]){const{version:t,multihash:r,code:i}=e,o=yx(r);return Wt.create(t,i,o)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==Qs)throw new Error(`Version 0 CID must use dag-pb (code: ${Qs}) block encoding`);return new Wt(e,t,r,r.bytes);case 1:{const i=Id(e,t,r.bytes);return new Wt(e,t,r,i)}default:throw new Error("Invalid version")}}static createV0(e){return Wt.create(0,Qs,e)}static createV1(e,t){return Wt.create(1,e,t)}static decode(e){const[t,r]=Wt.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Wt.inspectBytes(e),r=t.size-t.multihashSize,i=Nc(e.subarray(r,r+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=i.subarray(t.multihashSize-t.digestSize),n=new Vc(t.multihashCode,t.digestSize,o,i);return[0===t.version?Wt.createV0(n):Wt.createV1(t.codec,n),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,i]=Cc(e.subarray(t));return t+=i,r};let i=r(),o=Qs;if(18===i?(i=0,t=0):1===i&&(o=r()),0!==i&&1!==i)throw new RangeError(`Invalid CID version ${i}`);const n=t,s=r(),a=r(),d=t+a;return{version:i,codec:o,multihashCode:s,digestSize:a,multihashSize:d-n,size:d}}static parse(e,t){const[r,i]=Mx(e,t),o=Wt.decode(i);return o._baseCache.set(r,e),o}}const Mx=(e,t)=>{switch(e[0]){case"Q":{const r=t||Ui;return[Ui.prefix,r.decode(`${Ui.prefix}${e}`)]}case Ui.prefix:{const r=t||Ui;return[Ui.prefix,r.decode(e)]}case aa.prefix:{const r=t||aa;return[aa.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Nx=(e,t,r)=>{const{prefix:i}=r;if(i!==Ui.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const o=t.get(i);if(null==o){const o=r.encode(e).slice(1);return t.set(i,o),o}return o},Vx=(e,t,r)=>{const{prefix:i}=r,o=t.get(i);if(null==o){const o=r.encode(e);return t.set(i,o),o}return o},Qs=112,jx=18,Id=(e,t,r)=>{const i=xu(e),o=i+xu(t),n=new Uint8Array(o+r.byteLength);return gu(e,n,0),gu(t,n,i),n.set(r,o),n},Ud=Symbol.for("@ipld/js-cid/CID"),tu={writable:!1,configurable:!1,enumerable:!0},ru={writable:!1,enumerable:!1,configurable:!1},Fx="0.0.0-dev",$x=(e,t)=>{if(!e.test(Fx))throw new Error(t);console.warn(t)},Gx="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n",qx=Object.freeze(Object.defineProperty({__proto__:null,CID:Wt},Symbol.toStringTag,{value:"Module"})),$s=Xf(qx);function zx(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}function Xx(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let i=0;for(const t of e)r.set(t,i),i+=t.length;return r}function Hx(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}const Zx=Uu({prefix:"\0",name:"identity",encode:e=>hx(e),decode:e=>px(e)}),Wx=Object.freeze(Object.defineProperty({__proto__:null,identity:Zx},Symbol.toStringTag,{value:"Module"})),Yx=zt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Jx=Object.freeze(Object.defineProperty({__proto__:null,base2:Yx},Symbol.toStringTag,{value:"Module"})),Qx=zt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),eE=Object.freeze(Object.defineProperty({__proto__:null,base8:Qx},Symbol.toStringTag,{value:"Module"})),tE=La({prefix:"9",name:"base10",alphabet:"0123456789"}),rE=Object.freeze(Object.defineProperty({__proto__:null,base10:tE},Symbol.toStringTag,{value:"Module"})),iE=zt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),nE=zt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),sE=Object.freeze(Object.defineProperty({__proto__:null,base16:iE,base16upper:nE},Symbol.toStringTag,{value:"Module"})),aE=La({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),oE=La({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),lE=Object.freeze(Object.defineProperty({__proto__:null,base36:aE,base36upper:oE},Symbol.toStringTag,{value:"Module"})),uE=zt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cE=zt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),dE=zt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),fE=zt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),pE=Object.freeze(Object.defineProperty({__proto__:null,base64:uE,base64pad:cE,base64url:dE,base64urlpad:fE},Symbol.toStringTag,{value:"Module"})),xp=Array.from(""),hE=xp.reduce(((e,t,r)=>(e[r]=t,e)),[]),mE=xp.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);function yE(e){return e.reduce(((e,t)=>e+=hE[t]),"")}function bE(e){const t=[];for(const r of e){const e=mE[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}const gE=Uu({prefix:"",name:"base256emoji",encode:yE,decode:bE}),xE=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:gE},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const Od={...Wx,...Jx,...eE,...rE,...sE,...Kx,...lE,...Cx,...pE,...xE};function Ep(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const Kd=Ep("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),fc=Ep("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),vp={utf8:Kd,"utf-8":Kd,hex:Od.base16,latin1:fc,ascii:fc,binary:fc,...Od};function EE(e,t="utf8"){const r=vp[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}function vE(e,t="utf8"){const r=vp[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}function RE(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e[i]^t[i];return r}const AE=Object.freeze(Object.defineProperty({__proto__:null,compare:zx,concat:Xx,equals:Hx,fromString:EE,toString:vE,xor:RE},Symbol.toStringTag,{value:"Module"})),Rp=Xf(AE);!function(e){var t=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=se&&se.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=se&&se.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(i,e,o);return r(i,e),i};Object.defineProperty(e,"__esModule",{value:!0}),e.ipldEquals=e.ipldToJson=e.jsonToIpld=void 0;const o=$s,n=i(Rp);e.jsonToIpld=t=>{if(Array.isArray(t))return t.map((t=>(0,e.jsonToIpld)(t)));if(t&&"object"==typeof t){if("string"==typeof t.$link&&1===Object.keys(t).length)return o.CID.parse(t.$link);if("string"==typeof t.$bytes&&1===Object.keys(t).length)return n.fromString(t.$bytes,"base64");const r={};for(const i of Object.keys(t))r[i]=(0,e.jsonToIpld)(t[i]);return r}return t};e.ipldToJson=t=>{if(Array.isArray(t))return t.map((t=>(0,e.ipldToJson)(t)));if(t&&"object"==typeof t){if(t instanceof Uint8Array)return{$bytes:n.toString(t,"base64")};if(o.CID.asCID(t))return{$link:t.toString()};const r={};for(const i of Object.keys(t))r[i]=(0,e.ipldToJson)(t[i]);return r}return t};e.ipldEquals=(t,r)=>{if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(!(0,e.ipldEquals)(t[i],r[i]))return!1;return!0}if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t instanceof Uint8Array&&r instanceof Uint8Array)return n.equals(t,r);if(o.CID.asCID(t)&&o.CID.asCID(r))return o.CID.asCID(t)?.equals(o.CID.asCID(r));if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const i of Object.keys(t))if(!(0,e.ipldEquals)(t[i],r[i]))return!1;return!0}return t===r}}(yp);var ws={};Object.defineProperty(ws,"__esModule",{value:!0}),ws.backoffMs=ws.retry=void 0;const _E=As;async function wE(e,t={}){const{maxRetries:r=3,retryable:i=()=>!0,getWaitMs:o=Ap}=t;let n,s=0;for(;!n;)try{return await e()}catch(e){const t=o(s);s<r&&null!==t&&i(e)?(s+=1,0!==t&&await(0,_E.wait)(t)):n=e}throw n}function Ap(e,t=100,r=1e3){const i=Math.pow(2,e)*t;return TE(Math.min(i,r))}function TE(e){const t=.15*e;return e+SE(-t,t)}function SE(e,t){return Math.random()*(t-e)+e}ws.retry=wE,ws.backoffMs=Ap;var _p={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.def=e.schema=void 0;const t=$s,r=os,i=r.z.any().refine((e=>null!==t.CID.asCID(e)),{message:"Not a CID"}).transform((e=>t.CID.asCID(e)));e.schema={cid:i,bytes:r.z.instanceof(Uint8Array),string:r.z.string(),array:r.z.array(r.z.unknown()),map:r.z.record(r.z.string(),r.z.unknown()),unknown:r.z.unknown()},e.def={cid:{name:"cid",schema:e.schema.cid},bytes:{name:"bytes",schema:e.schema.bytes},string:{name:"string",schema:e.schema.string},map:{name:"map",schema:e.schema.map},unknown:{name:"unknown",schema:e.schema.unknown}}}(_p);var wp={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.addHoursToDate=e.lessThanAgoMs=e.DAY=e.HOUR=e.MINUTE=e.SECOND=void 0,e.SECOND=1e3,e.MINUTE=60*e.SECOND,e.HOUR=60*e.MINUTE,e.DAY=24*e.HOUR;e.lessThanAgoMs=(e,t)=>Date.now()<e.getTime()+t;e.addHoursToDate=(e,t)=>{const r=t?new Date(t):new Date;return r.setHours(r.getHours()+e),r}}(wp);var yr={},jc={},Fc={},$c={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.EXTENDED_PICTOGRAPHIC=e.CLUSTER_BREAK=void 0,(t=e.CLUSTER_BREAK||(e.CLUSTER_BREAK={}))[t.CR=0]="CR",t[t.LF=1]="LF",t[t.CONTROL=2]="CONTROL",t[t.EXTEND=3]="EXTEND",t[t.REGIONAL_INDICATOR=4]="REGIONAL_INDICATOR",t[t.SPACINGMARK=5]="SPACINGMARK",t[t.L=6]="L",t[t.V=7]="V",t[t.T=8]="T",t[t.LV=9]="LV",t[t.LVT=10]="LVT",t[t.OTHER=11]="OTHER",t[t.PREPEND=12]="PREPEND",t[t.E_BASE=13]="E_BASE",t[t.E_MODIFIER=14]="E_MODIFIER",t[t.ZWJ=15]="ZWJ",t[t.GLUE_AFTER_ZWJ=16]="GLUE_AFTER_ZWJ",t[t.E_BASE_GAZ=17]="E_BASE_GAZ",e.EXTENDED_PICTOGRAPHIC=101}($c);var Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});const ze=$c,Li=0,pc=1,CE=2,LE=3,kE=4;class DE{static isSurrogate(e,t){return 55296<=e.charCodeAt(t)&&e.charCodeAt(t)<=56319&&56320<=e.charCodeAt(t+1)&&e.charCodeAt(t+1)<=57343}static codePointAt(e,t){void 0===t&&(t=0);const r=e.charCodeAt(t);if(55296<=r&&r<=56319&&t<e.length-1){const i=r,o=e.charCodeAt(t+1);return 56320<=o&&o<=57343?1024*(i-55296)+(o-56320)+65536:i}if(56320<=r&&r<=57343&&t>=1){const i=e.charCodeAt(t-1);return 55296<=i&&i<=56319?1024*(i-55296)+(r-56320)+65536:r}return r}static shouldBreak(e,t,r,i,o,n){const s=[e].concat(t).concat([r]),a=[i].concat(o).concat([n]),d=s[s.length-2],c=r,l=n,p=s.lastIndexOf(ze.CLUSTER_BREAK.REGIONAL_INDICATOR);if(p>0&&s.slice(1,p).every((function(e){return e===ze.CLUSTER_BREAK.REGIONAL_INDICATOR}))&&-1===[ze.CLUSTER_BREAK.PREPEND,ze.CLUSTER_BREAK.REGIONAL_INDICATOR].indexOf(d))return s.filter((function(e){return e===ze.CLUSTER_BREAK.REGIONAL_INDICATOR})).length%2==1?3:4;if(d===ze.CLUSTER_BREAK.CR&&c===ze.CLUSTER_BREAK.LF)return 0;if(d===ze.CLUSTER_BREAK.CONTROL||d===ze.CLUSTER_BREAK.CR||d===ze.CLUSTER_BREAK.LF)return 1;if(c===ze.CLUSTER_BREAK.CONTROL||c===ze.CLUSTER_BREAK.CR||c===ze.CLUSTER_BREAK.LF)return 1;if(d===ze.CLUSTER_BREAK.L&&(c===ze.CLUSTER_BREAK.L||c===ze.CLUSTER_BREAK.V||c===ze.CLUSTER_BREAK.LV||c===ze.CLUSTER_BREAK.LVT))return 0;if(!(d!==ze.CLUSTER_BREAK.LV&&d!==ze.CLUSTER_BREAK.V||c!==ze.CLUSTER_BREAK.V&&c!==ze.CLUSTER_BREAK.T))return 0;if((d===ze.CLUSTER_BREAK.LVT||d===ze.CLUSTER_BREAK.T)&&c===ze.CLUSTER_BREAK.T)return 0;if(c===ze.CLUSTER_BREAK.EXTEND||c===ze.CLUSTER_BREAK.ZWJ)return 0;if(c===ze.CLUSTER_BREAK.SPACINGMARK)return 0;if(d===ze.CLUSTER_BREAK.PREPEND)return 0;const u=a.slice(0,-1).lastIndexOf(ze.EXTENDED_PICTOGRAPHIC);return-1!==u&&a[u]===ze.EXTENDED_PICTOGRAPHIC&&s.slice(u+1,-2).every((function(e){return e===ze.CLUSTER_BREAK.EXTEND}))&&d===ze.CLUSTER_BREAK.ZWJ&&l===ze.EXTENDED_PICTOGRAPHIC?0:-1!==t.indexOf(ze.CLUSTER_BREAK.REGIONAL_INDICATOR)?2:d===ze.CLUSTER_BREAK.REGIONAL_INDICATOR&&c===ze.CLUSTER_BREAK.REGIONAL_INDICATOR?0:1}}Gc.default=DE;var qc={};Object.defineProperty(qc,"__esModule",{value:!0});class PE{constructor(e,t){this._index=0,this._str=e,this._nextBreak=t}[Symbol.iterator](){return this}next(){let e;if((e=this._nextBreak(this._str,this._index))<this._str.length){const t=this._str.slice(this._index,e);return this._index=e,{value:t,done:!1}}if(this._index<this._str.length){const e=this._str.slice(this._index);return this._index=this._str.length,{value:e,done:!1}}return{value:void 0,done:!0}}}qc.default=PE;var Tp=se&&se.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fc,"__esModule",{value:!0});const n=$c,iu=Tp(Gc),BE=Tp(qc);class Pi{static nextBreak(e,t){if(void 0===t&&(t=0),t<0)return 0;if(t>=e.length-1)return e.length;const r=iu.default.codePointAt(e,t),i=Pi.getGraphemeBreakProperty(r),o=Pi.getEmojiProperty(r),n=[],s=[];for(let r=t+1;r<e.length;r++){if(iu.default.isSurrogate(e,r-1))continue;const t=iu.default.codePointAt(e,r),a=Pi.getGraphemeBreakProperty(t),d=Pi.getEmojiProperty(t);if(iu.default.shouldBreak(i,n,a,o,s,d))return r;n.push(a),s.push(d)}return e.length}splitGraphemes(e){const t=[];let r,i=0;for(;(r=Pi.nextBreak(e,i))<e.length;)t.push(e.slice(i,r)),i=r;return i<e.length&&t.push(e.slice(i)),t}iterateGraphemes(e){return new BE.default(e,Pi.nextBreak)}countGraphemes(e){let t,r=0,i=0;for(;(t=Pi.nextBreak(e,i))<e.length;)i=t,r++;return i<e.length&&r++,r}static getGraphemeBreakProperty(e){if(e<48905){if(e<44116){if(e<4141){if(e<2818){if(e<2363)if(e<1759){if(e<1471){if(e<127){if(e<11){if(e<10){if(0<=e&&e<=9)return n.CLUSTER_BREAK.CONTROL}else if(10===e)return n.CLUSTER_BREAK.LF}else if(e<13){if(11<=e&&e<=12)return n.CLUSTER_BREAK.CONTROL}else if(e<14){if(13===e)return n.CLUSTER_BREAK.CR}else if(14<=e&&e<=31)return n.CLUSTER_BREAK.CONTROL}else if(e<768){if(e<173){if(127<=e&&e<=159)return n.CLUSTER_BREAK.CONTROL}else if(173===e)return n.CLUSTER_BREAK.CONTROL}else if(e<1155){if(768<=e&&e<=879)return n.CLUSTER_BREAK.EXTEND}else if(e<1425){if(1155<=e&&e<=1161)return n.CLUSTER_BREAK.EXTEND}else if(1425<=e&&e<=1469)return n.CLUSTER_BREAK.EXTEND}else if(e<1552){if(e<1476){if(e<1473){if(1471===e)return n.CLUSTER_BREAK.EXTEND}else if(1473<=e&&e<=1474)return n.CLUSTER_BREAK.EXTEND}else if(e<1479){if(1476<=e&&e<=1477)return n.CLUSTER_BREAK.EXTEND}else if(e<1536){if(1479===e)return n.CLUSTER_BREAK.EXTEND}else if(1536<=e&&e<=1541)return n.CLUSTER_BREAK.PREPEND}else if(e<1648){if(e<1564){if(1552<=e&&e<=1562)return n.CLUSTER_BREAK.EXTEND}else if(e<1611){if(1564===e)return n.CLUSTER_BREAK.CONTROL}else if(1611<=e&&e<=1631)return n.CLUSTER_BREAK.EXTEND}else if(e<1750){if(1648===e)return n.CLUSTER_BREAK.EXTEND}else if(e<1757){if(1750<=e&&e<=1756)return n.CLUSTER_BREAK.EXTEND}else if(1757===e)return n.CLUSTER_BREAK.PREPEND}else if(e<2075){if(e<1840)if(e<1770){if(e<1767){if(1759<=e&&e<=1764)return n.CLUSTER_BREAK.EXTEND}else if(1767<=e&&e<=1768)return n.CLUSTER_BREAK.EXTEND}else if(e<1807){if(1770<=e&&e<=1773)return n.CLUSTER_BREAK.EXTEND}else{if(1807===e)return n.CLUSTER_BREAK.PREPEND;if(1809===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2027){if(e<1958){if(1840<=e&&e<=1866)return n.CLUSTER_BREAK.EXTEND}else if(1958<=e&&e<=1968)return n.CLUSTER_BREAK.EXTEND}else if(e<2045){if(2027<=e&&e<=2035)return n.CLUSTER_BREAK.EXTEND}else if(e<2070){if(2045===e)return n.CLUSTER_BREAK.EXTEND}else if(2070<=e&&e<=2073)return n.CLUSTER_BREAK.EXTEND}else if(e<2200){if(e<2089){if(e<2085){if(2075<=e&&e<=2083)return n.CLUSTER_BREAK.EXTEND}else if(2085<=e&&e<=2087)return n.CLUSTER_BREAK.EXTEND}else if(e<2137){if(2089<=e&&e<=2093)return n.CLUSTER_BREAK.EXTEND}else if(e<2192){if(2137<=e&&e<=2139)return n.CLUSTER_BREAK.EXTEND}else if(2192<=e&&e<=2193)return n.CLUSTER_BREAK.PREPEND}else if(e<2275){if(e<2250){if(2200<=e&&e<=2207)return n.CLUSTER_BREAK.EXTEND}else if(e<2274){if(2250<=e&&e<=2273)return n.CLUSTER_BREAK.EXTEND}else if(2274===e)return n.CLUSTER_BREAK.PREPEND}else if(e<2307){if(2275<=e&&e<=2306)return n.CLUSTER_BREAK.EXTEND}else{if(2307===e)return n.CLUSTER_BREAK.SPACINGMARK;if(2362===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2561){if(e<2434){if(e<2381){if(e<2366){if(2363===e)return n.CLUSTER_BREAK.SPACINGMARK;if(2364===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2369){if(2366<=e&&e<=2368)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<2377){if(2369<=e&&e<=2376)return n.CLUSTER_BREAK.EXTEND}else if(2377<=e&&e<=2380)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<2385){if(e<2382){if(2381===e)return n.CLUSTER_BREAK.EXTEND}else if(2382<=e&&e<=2383)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<2402){if(2385<=e&&e<=2391)return n.CLUSTER_BREAK.EXTEND}else if(e<2433){if(2402<=e&&e<=2403)return n.CLUSTER_BREAK.EXTEND}else if(2433===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2503){if(e<2494){if(e<2492){if(2434<=e&&e<=2435)return n.CLUSTER_BREAK.SPACINGMARK}else if(2492===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2495){if(2494===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2497){if(2495<=e&&e<=2496)return n.CLUSTER_BREAK.SPACINGMARK}else if(2497<=e&&e<=2500)return n.CLUSTER_BREAK.EXTEND}else if(e<2519){if(e<2507){if(2503<=e&&e<=2504)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<2509){if(2507<=e&&e<=2508)return n.CLUSTER_BREAK.SPACINGMARK}else if(2509===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2530){if(2519===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2558){if(2530<=e&&e<=2531)return n.CLUSTER_BREAK.EXTEND}else if(2558===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2691){if(e<2631){if(e<2620){if(e<2563){if(2561<=e&&e<=2562)return n.CLUSTER_BREAK.EXTEND}else if(2563===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<2622){if(2620===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2625){if(2622<=e&&e<=2624)return n.CLUSTER_BREAK.SPACINGMARK}else if(2625<=e&&e<=2626)return n.CLUSTER_BREAK.EXTEND}else if(e<2672){if(e<2635){if(2631<=e&&e<=2632)return n.CLUSTER_BREAK.EXTEND}else if(e<2641){if(2635<=e&&e<=2637)return n.CLUSTER_BREAK.EXTEND}else if(2641===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2677){if(2672<=e&&e<=2673)return n.CLUSTER_BREAK.EXTEND}else if(e<2689){if(2677===e)return n.CLUSTER_BREAK.EXTEND}else if(2689<=e&&e<=2690)return n.CLUSTER_BREAK.EXTEND}else if(e<2761){if(e<2750){if(2691===e)return n.CLUSTER_BREAK.SPACINGMARK;if(2748===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2753){if(2750<=e&&e<=2752)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<2759){if(2753<=e&&e<=2757)return n.CLUSTER_BREAK.EXTEND}else if(2759<=e&&e<=2760)return n.CLUSTER_BREAK.EXTEND}else if(e<2786){if(e<2763){if(2761===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<2765){if(2763<=e&&e<=2764)return n.CLUSTER_BREAK.SPACINGMARK}else if(2765===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2810){if(2786<=e&&e<=2787)return n.CLUSTER_BREAK.EXTEND}else if(e<2817){if(2810<=e&&e<=2815)return n.CLUSTER_BREAK.EXTEND}else if(2817===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3315){if(e<3076){if(e<2946){if(e<2887){if(e<2878){if(e<2876){if(2818<=e&&e<=2819)return n.CLUSTER_BREAK.SPACINGMARK}else if(2876===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2880){if(2878<=e&&e<=2879)return n.CLUSTER_BREAK.EXTEND}else if(e<2881){if(2880===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(2881<=e&&e<=2884)return n.CLUSTER_BREAK.EXTEND}else if(e<2893){if(e<2891){if(2887<=e&&e<=2888)return n.CLUSTER_BREAK.SPACINGMARK}else if(2891<=e&&e<=2892)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<2901){if(2893===e)return n.CLUSTER_BREAK.EXTEND}else if(e<2914){if(2901<=e&&e<=2903)return n.CLUSTER_BREAK.EXTEND}else if(2914<=e&&e<=2915)return n.CLUSTER_BREAK.EXTEND}else if(e<3014){if(e<3007){if(2946===e||3006===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3008){if(3007===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3009){if(3008===e)return n.CLUSTER_BREAK.EXTEND}else if(3009<=e&&e<=3010)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3031){if(e<3018){if(3014<=e&&e<=3016)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3021){if(3018<=e&&e<=3020)return n.CLUSTER_BREAK.SPACINGMARK}else if(3021===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3072){if(3031===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3073){if(3072===e)return n.CLUSTER_BREAK.EXTEND}else if(3073<=e&&e<=3075)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3262){if(e<3146){if(e<3134){if(3076===e||3132===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3137){if(3134<=e&&e<=3136)return n.CLUSTER_BREAK.EXTEND}else if(e<3142){if(3137<=e&&e<=3140)return n.CLUSTER_BREAK.SPACINGMARK}else if(3142<=e&&e<=3144)return n.CLUSTER_BREAK.EXTEND}else if(e<3201){if(e<3157){if(3146<=e&&e<=3149)return n.CLUSTER_BREAK.EXTEND}else if(e<3170){if(3157<=e&&e<=3158)return n.CLUSTER_BREAK.EXTEND}else if(3170<=e&&e<=3171)return n.CLUSTER_BREAK.EXTEND}else if(e<3202){if(3201===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3260){if(3202<=e&&e<=3203)return n.CLUSTER_BREAK.SPACINGMARK}else if(3260===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3270){if(e<3264){if(3262===e)return n.CLUSTER_BREAK.SPACINGMARK;if(3263===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3266){if(3264<=e&&e<=3265)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3267){if(3266===e)return n.CLUSTER_BREAK.EXTEND}else if(3267<=e&&e<=3268)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3276){if(e<3271){if(3270===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3274){if(3271<=e&&e<=3272)return n.CLUSTER_BREAK.SPACINGMARK}else if(3274<=e&&e<=3275)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3285){if(3276<=e&&e<=3277)return n.CLUSTER_BREAK.EXTEND}else if(e<3298){if(3285<=e&&e<=3286)return n.CLUSTER_BREAK.EXTEND}else if(3298<=e&&e<=3299)return n.CLUSTER_BREAK.EXTEND}else if(e<3551){if(e<3406){if(e<3391){if(e<3330){if(e<3328){if(3315===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(3328<=e&&e<=3329)return n.CLUSTER_BREAK.EXTEND}else if(e<3387){if(3330<=e&&e<=3331)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3390){if(3387<=e&&e<=3388)return n.CLUSTER_BREAK.EXTEND}else if(3390===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3398){if(e<3393){if(3391<=e&&e<=3392)return n.CLUSTER_BREAK.SPACINGMARK}else if(3393<=e&&e<=3396)return n.CLUSTER_BREAK.EXTEND}else if(e<3402){if(3398<=e&&e<=3400)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3405){if(3402<=e&&e<=3404)return n.CLUSTER_BREAK.SPACINGMARK}else if(3405===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3530){if(e<3426){if(3406===e)return n.CLUSTER_BREAK.PREPEND;if(3415===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3457){if(3426<=e&&e<=3427)return n.CLUSTER_BREAK.EXTEND}else if(e<3458){if(3457===e)return n.CLUSTER_BREAK.EXTEND}else if(3458<=e&&e<=3459)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3538){if(e<3535){if(3530===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3536){if(3535===e)return n.CLUSTER_BREAK.EXTEND}else if(3536<=e&&e<=3537)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3542){if(3538<=e&&e<=3540)return n.CLUSTER_BREAK.EXTEND}else if(e<3544){if(3542===e)return n.CLUSTER_BREAK.EXTEND}else if(3544<=e&&e<=3550)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3893){if(e<3655){if(e<3633){if(e<3570){if(3551===e)return n.CLUSTER_BREAK.EXTEND}else if(3570<=e&&e<=3571)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3635){if(3633===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3636){if(3635===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(3636<=e&&e<=3642)return n.CLUSTER_BREAK.EXTEND}else if(e<3764)if(e<3761){if(3655<=e&&e<=3662)return n.CLUSTER_BREAK.EXTEND}else{if(3761===e)return n.CLUSTER_BREAK.EXTEND;if(3763===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3784){if(3764<=e&&e<=3772)return n.CLUSTER_BREAK.EXTEND}else if(e<3864){if(3784<=e&&e<=3790)return n.CLUSTER_BREAK.EXTEND}else if(3864<=e&&e<=3865)return n.CLUSTER_BREAK.EXTEND}else if(e<3967){if(e<3897){if(3893===e||3895===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3902){if(3897===e)return n.CLUSTER_BREAK.EXTEND}else if(e<3953){if(3902<=e&&e<=3903)return n.CLUSTER_BREAK.SPACINGMARK}else if(3953<=e&&e<=3966)return n.CLUSTER_BREAK.EXTEND}else if(e<3981){if(e<3968){if(3967===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<3974){if(3968<=e&&e<=3972)return n.CLUSTER_BREAK.EXTEND}else if(3974<=e&&e<=3975)return n.CLUSTER_BREAK.EXTEND}else if(e<3993){if(3981<=e&&e<=3991)return n.CLUSTER_BREAK.EXTEND}else if(e<4038){if(3993<=e&&e<=4028)return n.CLUSTER_BREAK.EXTEND}else if(4038===e)return n.CLUSTER_BREAK.EXTEND}else if(e<7204){if(e<6448){if(e<5938){if(e<4226){if(e<4157){if(e<4146){if(e<4145){if(4141<=e&&e<=4144)return n.CLUSTER_BREAK.EXTEND}else if(4145===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<4153){if(4146<=e&&e<=4151)return n.CLUSTER_BREAK.EXTEND}else if(e<4155){if(4153<=e&&e<=4154)return n.CLUSTER_BREAK.EXTEND}else if(4155<=e&&e<=4156)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<4184){if(e<4182){if(4157<=e&&e<=4158)return n.CLUSTER_BREAK.EXTEND}else if(4182<=e&&e<=4183)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<4190){if(4184<=e&&e<=4185)return n.CLUSTER_BREAK.EXTEND}else if(e<4209){if(4190<=e&&e<=4192)return n.CLUSTER_BREAK.EXTEND}else if(4209<=e&&e<=4212)return n.CLUSTER_BREAK.EXTEND}else if(e<4352){if(e<4229){if(4226===e)return n.CLUSTER_BREAK.EXTEND;if(4228===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<4237){if(4229<=e&&e<=4230)return n.CLUSTER_BREAK.EXTEND}else if(4237===e||4253===e)return n.CLUSTER_BREAK.EXTEND}else if(e<4957){if(e<4448){if(4352<=e&&e<=4447)return n.CLUSTER_BREAK.L}else if(e<4520){if(4448<=e&&e<=4519)return n.CLUSTER_BREAK.V}else if(4520<=e&&e<=4607)return n.CLUSTER_BREAK.T}else if(e<5906){if(4957<=e&&e<=4959)return n.CLUSTER_BREAK.EXTEND}else if(e<5909){if(5906<=e&&e<=5908)return n.CLUSTER_BREAK.EXTEND}else if(5909===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<6089){if(e<6070){if(e<5970){if(e<5940){if(5938<=e&&e<=5939)return n.CLUSTER_BREAK.EXTEND}else if(5940===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<6002){if(5970<=e&&e<=5971)return n.CLUSTER_BREAK.EXTEND}else if(e<6068){if(6002<=e&&e<=6003)return n.CLUSTER_BREAK.EXTEND}else if(6068<=e&&e<=6069)return n.CLUSTER_BREAK.EXTEND}else if(e<6078){if(e<6071){if(6070===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(6071<=e&&e<=6077)return n.CLUSTER_BREAK.EXTEND}else if(e<6086){if(6078<=e&&e<=6085)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<6087){if(6086===e)return n.CLUSTER_BREAK.EXTEND}else if(6087<=e&&e<=6088)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<6277)if(e<6155){if(e<6109){if(6089<=e&&e<=6099)return n.CLUSTER_BREAK.EXTEND}else if(6109===e)return n.CLUSTER_BREAK.EXTEND}else if(e<6158){if(6155<=e&&e<=6157)return n.CLUSTER_BREAK.EXTEND}else{if(6158===e)return n.CLUSTER_BREAK.CONTROL;if(6159===e)return n.CLUSTER_BREAK.EXTEND}else if(e<6435){if(e<6313){if(6277<=e&&e<=6278)return n.CLUSTER_BREAK.EXTEND}else if(e<6432){if(6313===e)return n.CLUSTER_BREAK.EXTEND}else if(6432<=e&&e<=6434)return n.CLUSTER_BREAK.EXTEND}else if(e<6439){if(6435<=e&&e<=6438)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<6441){if(6439<=e&&e<=6440)return n.CLUSTER_BREAK.EXTEND}else if(6441<=e&&e<=6443)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<6971){if(e<6744)if(e<6681){if(e<6451){if(e<6450){if(6448<=e&&e<=6449)return n.CLUSTER_BREAK.SPACINGMARK}else if(6450===e)return n.CLUSTER_BREAK.EXTEND}else if(e<6457){if(6451<=e&&e<=6456)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<6679){if(6457<=e&&e<=6459)return n.CLUSTER_BREAK.EXTEND}else if(6679<=e&&e<=6680)return n.CLUSTER_BREAK.EXTEND}else if(e<6741){if(e<6683){if(6681<=e&&e<=6682)return n.CLUSTER_BREAK.SPACINGMARK}else if(6683===e)return n.CLUSTER_BREAK.EXTEND}else if(e<6742){if(6741===e)return n.CLUSTER_BREAK.SPACINGMARK}else{if(6742===e)return n.CLUSTER_BREAK.EXTEND;if(6743===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<6771){if(e<6754){if(e<6752){if(6744<=e&&e<=6750)return n.CLUSTER_BREAK.EXTEND}else if(6752===e)return n.CLUSTER_BREAK.EXTEND}else if(e<6757){if(6754===e)return n.CLUSTER_BREAK.EXTEND}else if(e<6765){if(6757<=e&&e<=6764)return n.CLUSTER_BREAK.EXTEND}else if(6765<=e&&e<=6770)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<6912){if(e<6783){if(6771<=e&&e<=6780)return n.CLUSTER_BREAK.EXTEND}else if(e<6832){if(6783===e)return n.CLUSTER_BREAK.EXTEND}else if(6832<=e&&e<=6862)return n.CLUSTER_BREAK.EXTEND}else if(e<6916){if(6912<=e&&e<=6915)return n.CLUSTER_BREAK.EXTEND}else if(e<6964){if(6916===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(6964<=e&&e<=6970)return n.CLUSTER_BREAK.EXTEND}else if(e<7080){if(e<7019){if(e<6973){if(6971===e)return n.CLUSTER_BREAK.SPACINGMARK;if(6972===e)return n.CLUSTER_BREAK.EXTEND}else if(e<6978){if(6973<=e&&e<=6977)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<6979){if(6978===e)return n.CLUSTER_BREAK.EXTEND}else if(6979<=e&&e<=6980)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<7073){if(e<7040){if(7019<=e&&e<=7027)return n.CLUSTER_BREAK.EXTEND}else if(e<7042){if(7040<=e&&e<=7041)return n.CLUSTER_BREAK.EXTEND}else if(7042===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<7074){if(7073===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<7078){if(7074<=e&&e<=7077)return n.CLUSTER_BREAK.EXTEND}else if(7078<=e&&e<=7079)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<7144)if(e<7083){if(e<7082){if(7080<=e&&e<=7081)return n.CLUSTER_BREAK.EXTEND}else if(7082===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<7142){if(7083<=e&&e<=7085)return n.CLUSTER_BREAK.EXTEND}else{if(7142===e)return n.CLUSTER_BREAK.EXTEND;if(7143===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<7150){if(e<7146){if(7144<=e&&e<=7145)return n.CLUSTER_BREAK.EXTEND}else if(e<7149){if(7146<=e&&e<=7148)return n.CLUSTER_BREAK.SPACINGMARK}else if(7149===e)return n.CLUSTER_BREAK.EXTEND}else if(e<7151){if(7150===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<7154){if(7151<=e&&e<=7153)return n.CLUSTER_BREAK.EXTEND}else if(7154<=e&&e<=7155)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<43346){if(e<11647){if(e<7415){if(e<7380){if(e<7220){if(e<7212){if(7204<=e&&e<=7211)return n.CLUSTER_BREAK.SPACINGMARK}else if(7212<=e&&e<=7219)return n.CLUSTER_BREAK.EXTEND}else if(e<7222){if(7220<=e&&e<=7221)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<7376){if(7222<=e&&e<=7223)return n.CLUSTER_BREAK.EXTEND}else if(7376<=e&&e<=7378)return n.CLUSTER_BREAK.EXTEND}else if(e<7394){if(e<7393){if(7380<=e&&e<=7392)return n.CLUSTER_BREAK.EXTEND}else if(7393===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<7405){if(7394<=e&&e<=7400)return n.CLUSTER_BREAK.EXTEND}else if(7405===e||7412===e)return n.CLUSTER_BREAK.EXTEND}else if(e<8205)if(e<7616){if(e<7416){if(7415===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(7416<=e&&e<=7417)return n.CLUSTER_BREAK.EXTEND}else if(e<8203){if(7616<=e&&e<=7679)return n.CLUSTER_BREAK.EXTEND}else{if(8203===e)return n.CLUSTER_BREAK.CONTROL;if(8204===e)return n.CLUSTER_BREAK.EXTEND}else if(e<8288){if(e<8206){if(8205===e)return n.CLUSTER_BREAK.ZWJ}else if(e<8232){if(8206<=e&&e<=8207)return n.CLUSTER_BREAK.CONTROL}else if(8232<=e&&e<=8238)return n.CLUSTER_BREAK.CONTROL}else if(e<8400){if(8288<=e&&e<=8303)return n.CLUSTER_BREAK.CONTROL}else if(e<11503){if(8400<=e&&e<=8432)return n.CLUSTER_BREAK.EXTEND}else if(11503<=e&&e<=11505)return n.CLUSTER_BREAK.EXTEND}else if(e<43043){if(e<42612){if(e<12330){if(e<11744){if(11647===e)return n.CLUSTER_BREAK.EXTEND}else if(11744<=e&&e<=11775)return n.CLUSTER_BREAK.EXTEND}else if(e<12441){if(12330<=e&&e<=12335)return n.CLUSTER_BREAK.EXTEND}else if(e<42607){if(12441<=e&&e<=12442)return n.CLUSTER_BREAK.EXTEND}else if(42607<=e&&e<=42610)return n.CLUSTER_BREAK.EXTEND}else if(e<43010){if(e<42654){if(42612<=e&&e<=42621)return n.CLUSTER_BREAK.EXTEND}else if(e<42736){if(42654<=e&&e<=42655)return n.CLUSTER_BREAK.EXTEND}else if(42736<=e&&e<=42737)return n.CLUSTER_BREAK.EXTEND}else if(e<43014){if(43010===e)return n.CLUSTER_BREAK.EXTEND}else if(43014===e||43019===e)return n.CLUSTER_BREAK.EXTEND}else if(e<43188){if(e<43047){if(e<43045){if(43043<=e&&e<=43044)return n.CLUSTER_BREAK.SPACINGMARK}else if(43045<=e&&e<=43046)return n.CLUSTER_BREAK.EXTEND}else if(e<43052){if(43047===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<43136){if(43052===e)return n.CLUSTER_BREAK.EXTEND}else if(43136<=e&&e<=43137)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<43263){if(e<43204){if(43188<=e&&e<=43203)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<43232){if(43204<=e&&e<=43205)return n.CLUSTER_BREAK.EXTEND}else if(43232<=e&&e<=43249)return n.CLUSTER_BREAK.EXTEND}else if(e<43302){if(43263===e)return n.CLUSTER_BREAK.EXTEND}else if(e<43335){if(43302<=e&&e<=43309)return n.CLUSTER_BREAK.EXTEND}else if(43335<=e&&e<=43345)return n.CLUSTER_BREAK.EXTEND}else if(e<43698){if(e<43493){if(e<43444)if(e<43392){if(e<43360){if(43346<=e&&e<=43347)return n.CLUSTER_BREAK.SPACINGMARK}else if(43360<=e&&e<=43388)return n.CLUSTER_BREAK.L}else if(e<43395){if(43392<=e&&e<=43394)return n.CLUSTER_BREAK.EXTEND}else{if(43395===e)return n.CLUSTER_BREAK.SPACINGMARK;if(43443===e)return n.CLUSTER_BREAK.EXTEND}else if(e<43450){if(e<43446){if(43444<=e&&e<=43445)return n.CLUSTER_BREAK.SPACINGMARK}else if(43446<=e&&e<=43449)return n.CLUSTER_BREAK.EXTEND}else if(e<43452){if(43450<=e&&e<=43451)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<43454){if(43452<=e&&e<=43453)return n.CLUSTER_BREAK.EXTEND}else if(43454<=e&&e<=43456)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<43573){if(e<43567){if(e<43561){if(43493===e)return n.CLUSTER_BREAK.EXTEND}else if(43561<=e&&e<=43566)return n.CLUSTER_BREAK.EXTEND}else if(e<43569){if(43567<=e&&e<=43568)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<43571){if(43569<=e&&e<=43570)return n.CLUSTER_BREAK.EXTEND}else if(43571<=e&&e<=43572)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<43597){if(e<43587){if(43573<=e&&e<=43574)return n.CLUSTER_BREAK.EXTEND}else if(43587===e||43596===e)return n.CLUSTER_BREAK.EXTEND}else if(e<43644){if(43597===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(43644===e||43696===e)return n.CLUSTER_BREAK.EXTEND}else if(e<44006){if(e<43756)if(e<43710){if(e<43703){if(43698<=e&&e<=43700)return n.CLUSTER_BREAK.EXTEND}else if(43703<=e&&e<=43704)return n.CLUSTER_BREAK.EXTEND}else if(e<43713){if(43710<=e&&e<=43711)return n.CLUSTER_BREAK.EXTEND}else{if(43713===e)return n.CLUSTER_BREAK.EXTEND;if(43755===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<43766){if(e<43758){if(43756<=e&&e<=43757)return n.CLUSTER_BREAK.EXTEND}else if(e<43765){if(43758<=e&&e<=43759)return n.CLUSTER_BREAK.SPACINGMARK}else if(43765===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<44003){if(43766===e)return n.CLUSTER_BREAK.EXTEND}else if(e<44005){if(44003<=e&&e<=44004)return n.CLUSTER_BREAK.SPACINGMARK}else if(44005===e)return n.CLUSTER_BREAK.EXTEND}else if(e<44032)if(e<44009){if(e<44008){if(44006<=e&&e<=44007)return n.CLUSTER_BREAK.SPACINGMARK}else if(44008===e)return n.CLUSTER_BREAK.EXTEND}else if(e<44012){if(44009<=e&&e<=44010)return n.CLUSTER_BREAK.SPACINGMARK}else{if(44012===e)return n.CLUSTER_BREAK.SPACINGMARK;if(44013===e)return n.CLUSTER_BREAK.EXTEND}else if(e<44061){if(e<44033){if(44032===e)return n.CLUSTER_BREAK.LV}else if(e<44060){if(44033<=e&&e<=44059)return n.CLUSTER_BREAK.LVT}else if(44060===e)return n.CLUSTER_BREAK.LV}else if(e<44088){if(44061<=e&&e<=44087)return n.CLUSTER_BREAK.LVT}else if(e<44089){if(44088===e)return n.CLUSTER_BREAK.LV}else if(44089<=e&&e<=44115)return n.CLUSTER_BREAK.LVT}else if(e<46497){if(e<45293){if(e<44704){if(e<44397){if(e<44256){if(e<44173){if(e<44144){if(e<44117){if(44116===e)return n.CLUSTER_BREAK.LV}else if(44117<=e&&e<=44143)return n.CLUSTER_BREAK.LVT}else if(e<44145){if(44144===e)return n.CLUSTER_BREAK.LV}else if(e<44172){if(44145<=e&&e<=44171)return n.CLUSTER_BREAK.LVT}else if(44172===e)return n.CLUSTER_BREAK.LV}else if(e<44201){if(e<44200){if(44173<=e&&e<=44199)return n.CLUSTER_BREAK.LVT}else if(44200===e)return n.CLUSTER_BREAK.LV}else if(e<44228){if(44201<=e&&e<=44227)return n.CLUSTER_BREAK.LVT}else if(e<44229){if(44228===e)return n.CLUSTER_BREAK.LV}else if(44229<=e&&e<=44255)return n.CLUSTER_BREAK.LVT}else if(e<44313){if(e<44284){if(e<44257){if(44256===e)return n.CLUSTER_BREAK.LV}else if(44257<=e&&e<=44283)return n.CLUSTER_BREAK.LVT}else if(e<44285){if(44284===e)return n.CLUSTER_BREAK.LV}else if(e<44312){if(44285<=e&&e<=44311)return n.CLUSTER_BREAK.LVT}else if(44312===e)return n.CLUSTER_BREAK.LV}else if(e<44368){if(e<44340){if(44313<=e&&e<=44339)return n.CLUSTER_BREAK.LVT}else if(e<44341){if(44340===e)return n.CLUSTER_BREAK.LV}else if(44341<=e&&e<=44367)return n.CLUSTER_BREAK.LVT}else if(e<44369){if(44368===e)return n.CLUSTER_BREAK.LV}else if(e<44396){if(44369<=e&&e<=44395)return n.CLUSTER_BREAK.LVT}else if(44396===e)return n.CLUSTER_BREAK.LV}else if(e<44537){if(e<44480){if(e<44425){if(e<44424){if(44397<=e&&e<=44423)return n.CLUSTER_BREAK.LVT}else if(44424===e)return n.CLUSTER_BREAK.LV}else if(e<44452){if(44425<=e&&e<=44451)return n.CLUSTER_BREAK.LVT}else if(e<44453){if(44452===e)return n.CLUSTER_BREAK.LV}else if(44453<=e&&e<=44479)return n.CLUSTER_BREAK.LVT}else if(e<44508){if(e<44481){if(44480===e)return n.CLUSTER_BREAK.LV}else if(44481<=e&&e<=44507)return n.CLUSTER_BREAK.LVT}else if(e<44509){if(44508===e)return n.CLUSTER_BREAK.LV}else if(e<44536){if(44509<=e&&e<=44535)return n.CLUSTER_BREAK.LVT}else if(44536===e)return n.CLUSTER_BREAK.LV}else if(e<44620){if(e<44565){if(e<44564){if(44537<=e&&e<=44563)return n.CLUSTER_BREAK.LVT}else if(44564===e)return n.CLUSTER_BREAK.LV}else if(e<44592){if(44565<=e&&e<=44591)return n.CLUSTER_BREAK.LVT}else if(e<44593){if(44592===e)return n.CLUSTER_BREAK.LV}else if(44593<=e&&e<=44619)return n.CLUSTER_BREAK.LVT}else if(e<44649){if(e<44621){if(44620===e)return n.CLUSTER_BREAK.LV}else if(e<44648){if(44621<=e&&e<=44647)return n.CLUSTER_BREAK.LVT}else if(44648===e)return n.CLUSTER_BREAK.LV}else if(e<44676){if(44649<=e&&e<=44675)return n.CLUSTER_BREAK.LVT}else if(e<44677){if(44676===e)return n.CLUSTER_BREAK.LV}else if(44677<=e&&e<=44703)return n.CLUSTER_BREAK.LVT}else if(e<44985){if(e<44844){if(e<44761){if(e<44732){if(e<44705){if(44704===e)return n.CLUSTER_BREAK.LV}else if(44705<=e&&e<=44731)return n.CLUSTER_BREAK.LVT}else if(e<44733){if(44732===e)return n.CLUSTER_BREAK.LV}else if(e<44760){if(44733<=e&&e<=44759)return n.CLUSTER_BREAK.LVT}else if(44760===e)return n.CLUSTER_BREAK.LV}else if(e<44789){if(e<44788){if(44761<=e&&e<=44787)return n.CLUSTER_BREAK.LVT}else if(44788===e)return n.CLUSTER_BREAK.LV}else if(e<44816){if(44789<=e&&e<=44815)return n.CLUSTER_BREAK.LVT}else if(e<44817){if(44816===e)return n.CLUSTER_BREAK.LV}else if(44817<=e&&e<=44843)return n.CLUSTER_BREAK.LVT}else if(e<44901){if(e<44872){if(e<44845){if(44844===e)return n.CLUSTER_BREAK.LV}else if(44845<=e&&e<=44871)return n.CLUSTER_BREAK.LVT}else if(e<44873){if(44872===e)return n.CLUSTER_BREAK.LV}else if(e<44900){if(44873<=e&&e<=44899)return n.CLUSTER_BREAK.LVT}else if(44900===e)return n.CLUSTER_BREAK.LV}else if(e<44956){if(e<44928){if(44901<=e&&e<=44927)return n.CLUSTER_BREAK.LVT}else if(e<44929){if(44928===e)return n.CLUSTER_BREAK.LV}else if(44929<=e&&e<=44955)return n.CLUSTER_BREAK.LVT}else if(e<44957){if(44956===e)return n.CLUSTER_BREAK.LV}else if(e<44984){if(44957<=e&&e<=44983)return n.CLUSTER_BREAK.LVT}else if(44984===e)return n.CLUSTER_BREAK.LV}else if(e<45152){if(e<45068){if(e<45013){if(e<45012){if(44985<=e&&e<=45011)return n.CLUSTER_BREAK.LVT}else if(45012===e)return n.CLUSTER_BREAK.LV}else if(e<45040){if(45013<=e&&e<=45039)return n.CLUSTER_BREAK.LVT}else if(e<45041){if(45040===e)return n.CLUSTER_BREAK.LV}else if(45041<=e&&e<=45067)return n.CLUSTER_BREAK.LVT}else if(e<45097){if(e<45069){if(45068===e)return n.CLUSTER_BREAK.LV}else if(e<45096){if(45069<=e&&e<=45095)return n.CLUSTER_BREAK.LVT}else if(45096===e)return n.CLUSTER_BREAK.LV}else if(e<45124){if(45097<=e&&e<=45123)return n.CLUSTER_BREAK.LVT}else if(e<45125){if(45124===e)return n.CLUSTER_BREAK.LV}else if(45125<=e&&e<=45151)return n.CLUSTER_BREAK.LVT}else if(e<45209){if(e<45180){if(e<45153){if(45152===e)return n.CLUSTER_BREAK.LV}else if(45153<=e&&e<=45179)return n.CLUSTER_BREAK.LVT}else if(e<45181){if(45180===e)return n.CLUSTER_BREAK.LV}else if(e<45208){if(45181<=e&&e<=45207)return n.CLUSTER_BREAK.LVT}else if(45208===e)return n.CLUSTER_BREAK.LV}else if(e<45264){if(e<45236){if(45209<=e&&e<=45235)return n.CLUSTER_BREAK.LVT}else if(e<45237){if(45236===e)return n.CLUSTER_BREAK.LV}else if(45237<=e&&e<=45263)return n.CLUSTER_BREAK.LVT}else if(e<45265){if(45264===e)return n.CLUSTER_BREAK.LV}else if(e<45292){if(45265<=e&&e<=45291)return n.CLUSTER_BREAK.LVT}else if(45292===e)return n.CLUSTER_BREAK.LV}else if(e<45908){if(e<45600){if(e<45433){if(e<45376){if(e<45321){if(e<45320){if(45293<=e&&e<=45319)return n.CLUSTER_BREAK.LVT}else if(45320===e)return n.CLUSTER_BREAK.LV}else if(e<45348){if(45321<=e&&e<=45347)return n.CLUSTER_BREAK.LVT}else if(e<45349){if(45348===e)return n.CLUSTER_BREAK.LV}else if(45349<=e&&e<=45375)return n.CLUSTER_BREAK.LVT}else if(e<45404){if(e<45377){if(45376===e)return n.CLUSTER_BREAK.LV}else if(45377<=e&&e<=45403)return n.CLUSTER_BREAK.LVT}else if(e<45405){if(45404===e)return n.CLUSTER_BREAK.LV}else if(e<45432){if(45405<=e&&e<=45431)return n.CLUSTER_BREAK.LVT}else if(45432===e)return n.CLUSTER_BREAK.LV}else if(e<45516){if(e<45461){if(e<45460){if(45433<=e&&e<=45459)return n.CLUSTER_BREAK.LVT}else if(45460===e)return n.CLUSTER_BREAK.LV}else if(e<45488){if(45461<=e&&e<=45487)return n.CLUSTER_BREAK.LVT}else if(e<45489){if(45488===e)return n.CLUSTER_BREAK.LV}else if(45489<=e&&e<=45515)return n.CLUSTER_BREAK.LVT}else if(e<45545){if(e<45517){if(45516===e)return n.CLUSTER_BREAK.LV}else if(e<45544){if(45517<=e&&e<=45543)return n.CLUSTER_BREAK.LVT}else if(45544===e)return n.CLUSTER_BREAK.LV}else if(e<45572){if(45545<=e&&e<=45571)return n.CLUSTER_BREAK.LVT}else if(e<45573){if(45572===e)return n.CLUSTER_BREAK.LV}else if(45573<=e&&e<=45599)return n.CLUSTER_BREAK.LVT}else if(e<45741){if(e<45657){if(e<45628){if(e<45601){if(45600===e)return n.CLUSTER_BREAK.LV}else if(45601<=e&&e<=45627)return n.CLUSTER_BREAK.LVT}else if(e<45629){if(45628===e)return n.CLUSTER_BREAK.LV}else if(e<45656){if(45629<=e&&e<=45655)return n.CLUSTER_BREAK.LVT}else if(45656===e)return n.CLUSTER_BREAK.LV}else if(e<45712){if(e<45684){if(45657<=e&&e<=45683)return n.CLUSTER_BREAK.LVT}else if(e<45685){if(45684===e)return n.CLUSTER_BREAK.LV}else if(45685<=e&&e<=45711)return n.CLUSTER_BREAK.LVT}else if(e<45713){if(45712===e)return n.CLUSTER_BREAK.LV}else if(e<45740){if(45713<=e&&e<=45739)return n.CLUSTER_BREAK.LVT}else if(45740===e)return n.CLUSTER_BREAK.LV}else if(e<45824){if(e<45769){if(e<45768){if(45741<=e&&e<=45767)return n.CLUSTER_BREAK.LVT}else if(45768===e)return n.CLUSTER_BREAK.LV}else if(e<45796){if(45769<=e&&e<=45795)return n.CLUSTER_BREAK.LVT}else if(e<45797){if(45796===e)return n.CLUSTER_BREAK.LV}else if(45797<=e&&e<=45823)return n.CLUSTER_BREAK.LVT}else if(e<45853){if(e<45825){if(45824===e)return n.CLUSTER_BREAK.LV}else if(e<45852){if(45825<=e&&e<=45851)return n.CLUSTER_BREAK.LVT}else if(45852===e)return n.CLUSTER_BREAK.LV}else if(e<45880){if(45853<=e&&e<=45879)return n.CLUSTER_BREAK.LVT}else if(e<45881){if(45880===e)return n.CLUSTER_BREAK.LV}else if(45881<=e&&e<=45907)return n.CLUSTER_BREAK.LVT}else if(e<46189){if(e<46048){if(e<45965){if(e<45936){if(e<45909){if(45908===e)return n.CLUSTER_BREAK.LV}else if(45909<=e&&e<=45935)return n.CLUSTER_BREAK.LVT}else if(e<45937){if(45936===e)return n.CLUSTER_BREAK.LV}else if(e<45964){if(45937<=e&&e<=45963)return n.CLUSTER_BREAK.LVT}else if(45964===e)return n.CLUSTER_BREAK.LV}else if(e<45993){if(e<45992){if(45965<=e&&e<=45991)return n.CLUSTER_BREAK.LVT}else if(45992===e)return n.CLUSTER_BREAK.LV}else if(e<46020){if(45993<=e&&e<=46019)return n.CLUSTER_BREAK.LVT}else if(e<46021){if(46020===e)return n.CLUSTER_BREAK.LV}else if(46021<=e&&e<=46047)return n.CLUSTER_BREAK.LVT}else if(e<46105){if(e<46076){if(e<46049){if(46048===e)return n.CLUSTER_BREAK.LV}else if(46049<=e&&e<=46075)return n.CLUSTER_BREAK.LVT}else if(e<46077){if(46076===e)return n.CLUSTER_BREAK.LV}else if(e<46104){if(46077<=e&&e<=46103)return n.CLUSTER_BREAK.LVT}else if(46104===e)return n.CLUSTER_BREAK.LV}else if(e<46160){if(e<46132){if(46105<=e&&e<=46131)return n.CLUSTER_BREAK.LVT}else if(e<46133){if(46132===e)return n.CLUSTER_BREAK.LV}else if(46133<=e&&e<=46159)return n.CLUSTER_BREAK.LVT}else if(e<46161){if(46160===e)return n.CLUSTER_BREAK.LV}else if(e<46188){if(46161<=e&&e<=46187)return n.CLUSTER_BREAK.LVT}else if(46188===e)return n.CLUSTER_BREAK.LV}else if(e<46356){if(e<46272){if(e<46217){if(e<46216){if(46189<=e&&e<=46215)return n.CLUSTER_BREAK.LVT}else if(46216===e)return n.CLUSTER_BREAK.LV}else if(e<46244){if(46217<=e&&e<=46243)return n.CLUSTER_BREAK.LVT}else if(e<46245){if(46244===e)return n.CLUSTER_BREAK.LV}else if(46245<=e&&e<=46271)return n.CLUSTER_BREAK.LVT}else if(e<46301){if(e<46273){if(46272===e)return n.CLUSTER_BREAK.LV}else if(e<46300){if(46273<=e&&e<=46299)return n.CLUSTER_BREAK.LVT}else if(46300===e)return n.CLUSTER_BREAK.LV}else if(e<46328){if(46301<=e&&e<=46327)return n.CLUSTER_BREAK.LVT}else if(e<46329){if(46328===e)return n.CLUSTER_BREAK.LV}else if(46329<=e&&e<=46355)return n.CLUSTER_BREAK.LVT}else if(e<46413){if(e<46384){if(e<46357){if(46356===e)return n.CLUSTER_BREAK.LV}else if(46357<=e&&e<=46383)return n.CLUSTER_BREAK.LVT}else if(e<46385){if(46384===e)return n.CLUSTER_BREAK.LV}else if(e<46412){if(46385<=e&&e<=46411)return n.CLUSTER_BREAK.LVT}else if(46412===e)return n.CLUSTER_BREAK.LV}else if(e<46468){if(e<46440){if(46413<=e&&e<=46439)return n.CLUSTER_BREAK.LVT}else if(e<46441){if(46440===e)return n.CLUSTER_BREAK.LV}else if(46441<=e&&e<=46467)return n.CLUSTER_BREAK.LVT}else if(e<46469){if(46468===e)return n.CLUSTER_BREAK.LV}else if(e<46496){if(46469<=e&&e<=46495)return n.CLUSTER_BREAK.LVT}else if(46496===e)return n.CLUSTER_BREAK.LV}else if(e<47701){if(e<47112){if(e<46804){if(e<46637){if(e<46580){if(e<46525){if(e<46524){if(46497<=e&&e<=46523)return n.CLUSTER_BREAK.LVT}else if(46524===e)return n.CLUSTER_BREAK.LV}else if(e<46552){if(46525<=e&&e<=46551)return n.CLUSTER_BREAK.LVT}else if(e<46553){if(46552===e)return n.CLUSTER_BREAK.LV}else if(46553<=e&&e<=46579)return n.CLUSTER_BREAK.LVT}else if(e<46608){if(e<46581){if(46580===e)return n.CLUSTER_BREAK.LV}else if(46581<=e&&e<=46607)return n.CLUSTER_BREAK.LVT}else if(e<46609){if(46608===e)return n.CLUSTER_BREAK.LV}else if(e<46636){if(46609<=e&&e<=46635)return n.CLUSTER_BREAK.LVT}else if(46636===e)return n.CLUSTER_BREAK.LV}else if(e<46720){if(e<46665){if(e<46664){if(46637<=e&&e<=46663)return n.CLUSTER_BREAK.LVT}else if(46664===e)return n.CLUSTER_BREAK.LV}else if(e<46692){if(46665<=e&&e<=46691)return n.CLUSTER_BREAK.LVT}else if(e<46693){if(46692===e)return n.CLUSTER_BREAK.LV}else if(46693<=e&&e<=46719)return n.CLUSTER_BREAK.LVT}else if(e<46749){if(e<46721){if(46720===e)return n.CLUSTER_BREAK.LV}else if(e<46748){if(46721<=e&&e<=46747)return n.CLUSTER_BREAK.LVT}else if(46748===e)return n.CLUSTER_BREAK.LV}else if(e<46776){if(46749<=e&&e<=46775)return n.CLUSTER_BREAK.LVT}else if(e<46777){if(46776===e)return n.CLUSTER_BREAK.LV}else if(46777<=e&&e<=46803)return n.CLUSTER_BREAK.LVT}else if(e<46945){if(e<46861){if(e<46832){if(e<46805){if(46804===e)return n.CLUSTER_BREAK.LV}else if(46805<=e&&e<=46831)return n.CLUSTER_BREAK.LVT}else if(e<46833){if(46832===e)return n.CLUSTER_BREAK.LV}else if(e<46860){if(46833<=e&&e<=46859)return n.CLUSTER_BREAK.LVT}else if(46860===e)return n.CLUSTER_BREAK.LV}else if(e<46916){if(e<46888){if(46861<=e&&e<=46887)return n.CLUSTER_BREAK.LVT}else if(e<46889){if(46888===e)return n.CLUSTER_BREAK.LV}else if(46889<=e&&e<=46915)return n.CLUSTER_BREAK.LVT}else if(e<46917){if(46916===e)return n.CLUSTER_BREAK.LV}else if(e<46944){if(46917<=e&&e<=46943)return n.CLUSTER_BREAK.LVT}else if(46944===e)return n.CLUSTER_BREAK.LV}else if(e<47028){if(e<46973){if(e<46972){if(46945<=e&&e<=46971)return n.CLUSTER_BREAK.LVT}else if(46972===e)return n.CLUSTER_BREAK.LV}else if(e<47e3){if(46973<=e&&e<=46999)return n.CLUSTER_BREAK.LVT}else if(e<47001){if(47e3===e)return n.CLUSTER_BREAK.LV}else if(47001<=e&&e<=47027)return n.CLUSTER_BREAK.LVT}else if(e<47057){if(e<47029){if(47028===e)return n.CLUSTER_BREAK.LV}else if(e<47056){if(47029<=e&&e<=47055)return n.CLUSTER_BREAK.LVT}else if(47056===e)return n.CLUSTER_BREAK.LV}else if(e<47084){if(47057<=e&&e<=47083)return n.CLUSTER_BREAK.LVT}else if(e<47085){if(47084===e)return n.CLUSTER_BREAK.LV}else if(47085<=e&&e<=47111)return n.CLUSTER_BREAK.LVT}else if(e<47393){if(e<47252){if(e<47169){if(e<47140){if(e<47113){if(47112===e)return n.CLUSTER_BREAK.LV}else if(47113<=e&&e<=47139)return n.CLUSTER_BREAK.LVT}else if(e<47141){if(47140===e)return n.CLUSTER_BREAK.LV}else if(e<47168){if(47141<=e&&e<=47167)return n.CLUSTER_BREAK.LVT}else if(47168===e)return n.CLUSTER_BREAK.LV}else if(e<47197){if(e<47196){if(47169<=e&&e<=47195)return n.CLUSTER_BREAK.LVT}else if(47196===e)return n.CLUSTER_BREAK.LV}else if(e<47224){if(47197<=e&&e<=47223)return n.CLUSTER_BREAK.LVT}else if(e<47225){if(47224===e)return n.CLUSTER_BREAK.LV}else if(47225<=e&&e<=47251)return n.CLUSTER_BREAK.LVT}else if(e<47309){if(e<47280){if(e<47253){if(47252===e)return n.CLUSTER_BREAK.LV}else if(47253<=e&&e<=47279)return n.CLUSTER_BREAK.LVT}else if(e<47281){if(47280===e)return n.CLUSTER_BREAK.LV}else if(e<47308){if(47281<=e&&e<=47307)return n.CLUSTER_BREAK.LVT}else if(47308===e)return n.CLUSTER_BREAK.LV}else if(e<47364){if(e<47336){if(47309<=e&&e<=47335)return n.CLUSTER_BREAK.LVT}else if(e<47337){if(47336===e)return n.CLUSTER_BREAK.LV}else if(47337<=e&&e<=47363)return n.CLUSTER_BREAK.LVT}else if(e<47365){if(47364===e)return n.CLUSTER_BREAK.LV}else if(e<47392){if(47365<=e&&e<=47391)return n.CLUSTER_BREAK.LVT}else if(47392===e)return n.CLUSTER_BREAK.LV}else if(e<47560){if(e<47476){if(e<47421){if(e<47420){if(47393<=e&&e<=47419)return n.CLUSTER_BREAK.LVT}else if(47420===e)return n.CLUSTER_BREAK.LV}else if(e<47448){if(47421<=e&&e<=47447)return n.CLUSTER_BREAK.LVT}else if(e<47449){if(47448===e)return n.CLUSTER_BREAK.LV}else if(47449<=e&&e<=47475)return n.CLUSTER_BREAK.LVT}else if(e<47505){if(e<47477){if(47476===e)return n.CLUSTER_BREAK.LV}else if(e<47504){if(47477<=e&&e<=47503)return n.CLUSTER_BREAK.LVT}else if(47504===e)return n.CLUSTER_BREAK.LV}else if(e<47532){if(47505<=e&&e<=47531)return n.CLUSTER_BREAK.LVT}else if(e<47533){if(47532===e)return n.CLUSTER_BREAK.LV}else if(47533<=e&&e<=47559)return n.CLUSTER_BREAK.LVT}else if(e<47617){if(e<47588){if(e<47561){if(47560===e)return n.CLUSTER_BREAK.LV}else if(47561<=e&&e<=47587)return n.CLUSTER_BREAK.LVT}else if(e<47589){if(47588===e)return n.CLUSTER_BREAK.LV}else if(e<47616){if(47589<=e&&e<=47615)return n.CLUSTER_BREAK.LVT}else if(47616===e)return n.CLUSTER_BREAK.LV}else if(e<47672){if(e<47644){if(47617<=e&&e<=47643)return n.CLUSTER_BREAK.LVT}else if(e<47645){if(47644===e)return n.CLUSTER_BREAK.LV}else if(47645<=e&&e<=47671)return n.CLUSTER_BREAK.LVT}else if(e<47673){if(47672===e)return n.CLUSTER_BREAK.LV}else if(e<47700){if(47673<=e&&e<=47699)return n.CLUSTER_BREAK.LVT}else if(47700===e)return n.CLUSTER_BREAK.LV}else if(e<48316){if(e<48008){if(e<47841){if(e<47784){if(e<47729){if(e<47728){if(47701<=e&&e<=47727)return n.CLUSTER_BREAK.LVT}else if(47728===e)return n.CLUSTER_BREAK.LV}else if(e<47756){if(47729<=e&&e<=47755)return n.CLUSTER_BREAK.LVT}else if(e<47757){if(47756===e)return n.CLUSTER_BREAK.LV}else if(47757<=e&&e<=47783)return n.CLUSTER_BREAK.LVT}else if(e<47812){if(e<47785){if(47784===e)return n.CLUSTER_BREAK.LV}else if(47785<=e&&e<=47811)return n.CLUSTER_BREAK.LVT}else if(e<47813){if(47812===e)return n.CLUSTER_BREAK.LV}else if(e<47840){if(47813<=e&&e<=47839)return n.CLUSTER_BREAK.LVT}else if(47840===e)return n.CLUSTER_BREAK.LV}else if(e<47924){if(e<47869){if(e<47868){if(47841<=e&&e<=47867)return n.CLUSTER_BREAK.LVT}else if(47868===e)return n.CLUSTER_BREAK.LV}else if(e<47896){if(47869<=e&&e<=47895)return n.CLUSTER_BREAK.LVT}else if(e<47897){if(47896===e)return n.CLUSTER_BREAK.LV}else if(47897<=e&&e<=47923)return n.CLUSTER_BREAK.LVT}else if(e<47953){if(e<47925){if(47924===e)return n.CLUSTER_BREAK.LV}else if(e<47952){if(47925<=e&&e<=47951)return n.CLUSTER_BREAK.LVT}else if(47952===e)return n.CLUSTER_BREAK.LV}else if(e<47980){if(47953<=e&&e<=47979)return n.CLUSTER_BREAK.LVT}else if(e<47981){if(47980===e)return n.CLUSTER_BREAK.LV}else if(47981<=e&&e<=48007)return n.CLUSTER_BREAK.LVT}else if(e<48149){if(e<48065){if(e<48036){if(e<48009){if(48008===e)return n.CLUSTER_BREAK.LV}else if(48009<=e&&e<=48035)return n.CLUSTER_BREAK.LVT}else if(e<48037){if(48036===e)return n.CLUSTER_BREAK.LV}else if(e<48064){if(48037<=e&&e<=48063)return n.CLUSTER_BREAK.LVT}else if(48064===e)return n.CLUSTER_BREAK.LV}else if(e<48120){if(e<48092){if(48065<=e&&e<=48091)return n.CLUSTER_BREAK.LVT}else if(e<48093){if(48092===e)return n.CLUSTER_BREAK.LV}else if(48093<=e&&e<=48119)return n.CLUSTER_BREAK.LVT}else if(e<48121){if(48120===e)return n.CLUSTER_BREAK.LV}else if(e<48148){if(48121<=e&&e<=48147)return n.CLUSTER_BREAK.LVT}else if(48148===e)return n.CLUSTER_BREAK.LV}else if(e<48232){if(e<48177){if(e<48176){if(48149<=e&&e<=48175)return n.CLUSTER_BREAK.LVT}else if(48176===e)return n.CLUSTER_BREAK.LV}else if(e<48204){if(48177<=e&&e<=48203)return n.CLUSTER_BREAK.LVT}else if(e<48205){if(48204===e)return n.CLUSTER_BREAK.LV}else if(48205<=e&&e<=48231)return n.CLUSTER_BREAK.LVT}else if(e<48261){if(e<48233){if(48232===e)return n.CLUSTER_BREAK.LV}else if(e<48260){if(48233<=e&&e<=48259)return n.CLUSTER_BREAK.LVT}else if(48260===e)return n.CLUSTER_BREAK.LV}else if(e<48288){if(48261<=e&&e<=48287)return n.CLUSTER_BREAK.LVT}else if(e<48289){if(48288===e)return n.CLUSTER_BREAK.LV}else if(48289<=e&&e<=48315)return n.CLUSTER_BREAK.LVT}else if(e<48597){if(e<48456){if(e<48373){if(e<48344){if(e<48317){if(48316===e)return n.CLUSTER_BREAK.LV}else if(48317<=e&&e<=48343)return n.CLUSTER_BREAK.LVT}else if(e<48345){if(48344===e)return n.CLUSTER_BREAK.LV}else if(e<48372){if(48345<=e&&e<=48371)return n.CLUSTER_BREAK.LVT}else if(48372===e)return n.CLUSTER_BREAK.LV}else if(e<48401){if(e<48400){if(48373<=e&&e<=48399)return n.CLUSTER_BREAK.LVT}else if(48400===e)return n.CLUSTER_BREAK.LV}else if(e<48428){if(48401<=e&&e<=48427)return n.CLUSTER_BREAK.LVT}else if(e<48429){if(48428===e)return n.CLUSTER_BREAK.LV}else if(48429<=e&&e<=48455)return n.CLUSTER_BREAK.LVT}else if(e<48513){if(e<48484){if(e<48457){if(48456===e)return n.CLUSTER_BREAK.LV}else if(48457<=e&&e<=48483)return n.CLUSTER_BREAK.LVT}else if(e<48485){if(48484===e)return n.CLUSTER_BREAK.LV}else if(e<48512){if(48485<=e&&e<=48511)return n.CLUSTER_BREAK.LVT}else if(48512===e)return n.CLUSTER_BREAK.LV}else if(e<48568){if(e<48540){if(48513<=e&&e<=48539)return n.CLUSTER_BREAK.LVT}else if(e<48541){if(48540===e)return n.CLUSTER_BREAK.LV}else if(48541<=e&&e<=48567)return n.CLUSTER_BREAK.LVT}else if(e<48569){if(48568===e)return n.CLUSTER_BREAK.LV}else if(e<48596){if(48569<=e&&e<=48595)return n.CLUSTER_BREAK.LVT}else if(48596===e)return n.CLUSTER_BREAK.LV}else if(e<48764){if(e<48680){if(e<48625){if(e<48624){if(48597<=e&&e<=48623)return n.CLUSTER_BREAK.LVT}else if(48624===e)return n.CLUSTER_BREAK.LV}else if(e<48652){if(48625<=e&&e<=48651)return n.CLUSTER_BREAK.LVT}else if(e<48653){if(48652===e)return n.CLUSTER_BREAK.LV}else if(48653<=e&&e<=48679)return n.CLUSTER_BREAK.LVT}else if(e<48709){if(e<48681){if(48680===e)return n.CLUSTER_BREAK.LV}else if(e<48708){if(48681<=e&&e<=48707)return n.CLUSTER_BREAK.LVT}else if(48708===e)return n.CLUSTER_BREAK.LV}else if(e<48736){if(48709<=e&&e<=48735)return n.CLUSTER_BREAK.LVT}else if(e<48737){if(48736===e)return n.CLUSTER_BREAK.LV}else if(48737<=e&&e<=48763)return n.CLUSTER_BREAK.LVT}else if(e<48821){if(e<48792){if(e<48765){if(48764===e)return n.CLUSTER_BREAK.LV}else if(48765<=e&&e<=48791)return n.CLUSTER_BREAK.LVT}else if(e<48793){if(48792===e)return n.CLUSTER_BREAK.LV}else if(e<48820){if(48793<=e&&e<=48819)return n.CLUSTER_BREAK.LVT}else if(48820===e)return n.CLUSTER_BREAK.LV}else if(e<48876){if(e<48848){if(48821<=e&&e<=48847)return n.CLUSTER_BREAK.LVT}else if(e<48849){if(48848===e)return n.CLUSTER_BREAK.LV}else if(48849<=e&&e<=48875)return n.CLUSTER_BREAK.LVT}else if(e<48877){if(48876===e)return n.CLUSTER_BREAK.LV}else if(e<48904){if(48877<=e&&e<=48903)return n.CLUSTER_BREAK.LVT}else if(48904===e)return n.CLUSTER_BREAK.LV}else if(e<53720){if(e<51312){if(e<50108){if(e<49493){if(e<49212){if(e<49045){if(e<48988){if(e<48933){if(e<48932){if(48905<=e&&e<=48931)return n.CLUSTER_BREAK.LVT}else if(48932===e)return n.CLUSTER_BREAK.LV}else if(e<48960){if(48933<=e&&e<=48959)return n.CLUSTER_BREAK.LVT}else if(e<48961){if(48960===e)return n.CLUSTER_BREAK.LV}else if(48961<=e&&e<=48987)return n.CLUSTER_BREAK.LVT}else if(e<49016){if(e<48989){if(48988===e)return n.CLUSTER_BREAK.LV}else if(48989<=e&&e<=49015)return n.CLUSTER_BREAK.LVT}else if(e<49017){if(49016===e)return n.CLUSTER_BREAK.LV}else if(e<49044){if(49017<=e&&e<=49043)return n.CLUSTER_BREAK.LVT}else if(49044===e)return n.CLUSTER_BREAK.LV}else if(e<49128){if(e<49073){if(e<49072){if(49045<=e&&e<=49071)return n.CLUSTER_BREAK.LVT}else if(49072===e)return n.CLUSTER_BREAK.LV}else if(e<49100){if(49073<=e&&e<=49099)return n.CLUSTER_BREAK.LVT}else if(e<49101){if(49100===e)return n.CLUSTER_BREAK.LV}else if(49101<=e&&e<=49127)return n.CLUSTER_BREAK.LVT}else if(e<49157){if(e<49129){if(49128===e)return n.CLUSTER_BREAK.LV}else if(e<49156){if(49129<=e&&e<=49155)return n.CLUSTER_BREAK.LVT}else if(49156===e)return n.CLUSTER_BREAK.LV}else if(e<49184){if(49157<=e&&e<=49183)return n.CLUSTER_BREAK.LVT}else if(e<49185){if(49184===e)return n.CLUSTER_BREAK.LV}else if(49185<=e&&e<=49211)return n.CLUSTER_BREAK.LVT}else if(e<49352){if(e<49269){if(e<49240){if(e<49213){if(49212===e)return n.CLUSTER_BREAK.LV}else if(49213<=e&&e<=49239)return n.CLUSTER_BREAK.LVT}else if(e<49241){if(49240===e)return n.CLUSTER_BREAK.LV}else if(e<49268){if(49241<=e&&e<=49267)return n.CLUSTER_BREAK.LVT}else if(49268===e)return n.CLUSTER_BREAK.LV}else if(e<49297){if(e<49296){if(49269<=e&&e<=49295)return n.CLUSTER_BREAK.LVT}else if(49296===e)return n.CLUSTER_BREAK.LV}else if(e<49324){if(49297<=e&&e<=49323)return n.CLUSTER_BREAK.LVT}else if(e<49325){if(49324===e)return n.CLUSTER_BREAK.LV}else if(49325<=e&&e<=49351)return n.CLUSTER_BREAK.LVT}else if(e<49409){if(e<49380){if(e<49353){if(49352===e)return n.CLUSTER_BREAK.LV}else if(49353<=e&&e<=49379)return n.CLUSTER_BREAK.LVT}else if(e<49381){if(49380===e)return n.CLUSTER_BREAK.LV}else if(e<49408){if(49381<=e&&e<=49407)return n.CLUSTER_BREAK.LVT}else if(49408===e)return n.CLUSTER_BREAK.LV}else if(e<49464){if(e<49436){if(49409<=e&&e<=49435)return n.CLUSTER_BREAK.LVT}else if(e<49437){if(49436===e)return n.CLUSTER_BREAK.LV}else if(49437<=e&&e<=49463)return n.CLUSTER_BREAK.LVT}else if(e<49465){if(49464===e)return n.CLUSTER_BREAK.LV}else if(e<49492){if(49465<=e&&e<=49491)return n.CLUSTER_BREAK.LVT}else if(49492===e)return n.CLUSTER_BREAK.LV}else if(e<49800){if(e<49633){if(e<49576){if(e<49521){if(e<49520){if(49493<=e&&e<=49519)return n.CLUSTER_BREAK.LVT}else if(49520===e)return n.CLUSTER_BREAK.LV}else if(e<49548){if(49521<=e&&e<=49547)return n.CLUSTER_BREAK.LVT}else if(e<49549){if(49548===e)return n.CLUSTER_BREAK.LV}else if(49549<=e&&e<=49575)return n.CLUSTER_BREAK.LVT}else if(e<49604){if(e<49577){if(49576===e)return n.CLUSTER_BREAK.LV}else if(49577<=e&&e<=49603)return n.CLUSTER_BREAK.LVT}else if(e<49605){if(49604===e)return n.CLUSTER_BREAK.LV}else if(e<49632){if(49605<=e&&e<=49631)return n.CLUSTER_BREAK.LVT}else if(49632===e)return n.CLUSTER_BREAK.LV}else if(e<49716){if(e<49661){if(e<49660){if(49633<=e&&e<=49659)return n.CLUSTER_BREAK.LVT}else if(49660===e)return n.CLUSTER_BREAK.LV}else if(e<49688){if(49661<=e&&e<=49687)return n.CLUSTER_BREAK.LVT}else if(e<49689){if(49688===e)return n.CLUSTER_BREAK.LV}else if(49689<=e&&e<=49715)return n.CLUSTER_BREAK.LVT}else if(e<49745){if(e<49717){if(49716===e)return n.CLUSTER_BREAK.LV}else if(e<49744){if(49717<=e&&e<=49743)return n.CLUSTER_BREAK.LVT}else if(49744===e)return n.CLUSTER_BREAK.LV}else if(e<49772){if(49745<=e&&e<=49771)return n.CLUSTER_BREAK.LVT}else if(e<49773){if(49772===e)return n.CLUSTER_BREAK.LV}else if(49773<=e&&e<=49799)return n.CLUSTER_BREAK.LVT}else if(e<49941){if(e<49857){if(e<49828){if(e<49801){if(49800===e)return n.CLUSTER_BREAK.LV}else if(49801<=e&&e<=49827)return n.CLUSTER_BREAK.LVT}else if(e<49829){if(49828===e)return n.CLUSTER_BREAK.LV}else if(e<49856){if(49829<=e&&e<=49855)return n.CLUSTER_BREAK.LVT}else if(49856===e)return n.CLUSTER_BREAK.LV}else if(e<49912){if(e<49884){if(49857<=e&&e<=49883)return n.CLUSTER_BREAK.LVT}else if(e<49885){if(49884===e)return n.CLUSTER_BREAK.LV}else if(49885<=e&&e<=49911)return n.CLUSTER_BREAK.LVT}else if(e<49913){if(49912===e)return n.CLUSTER_BREAK.LV}else if(e<49940){if(49913<=e&&e<=49939)return n.CLUSTER_BREAK.LVT}else if(49940===e)return n.CLUSTER_BREAK.LV}else if(e<50024){if(e<49969){if(e<49968){if(49941<=e&&e<=49967)return n.CLUSTER_BREAK.LVT}else if(49968===e)return n.CLUSTER_BREAK.LV}else if(e<49996){if(49969<=e&&e<=49995)return n.CLUSTER_BREAK.LVT}else if(e<49997){if(49996===e)return n.CLUSTER_BREAK.LV}else if(49997<=e&&e<=50023)return n.CLUSTER_BREAK.LVT}else if(e<50053){if(e<50025){if(50024===e)return n.CLUSTER_BREAK.LV}else if(e<50052){if(50025<=e&&e<=50051)return n.CLUSTER_BREAK.LVT}else if(50052===e)return n.CLUSTER_BREAK.LV}else if(e<50080){if(50053<=e&&e<=50079)return n.CLUSTER_BREAK.LVT}else if(e<50081){if(50080===e)return n.CLUSTER_BREAK.LV}else if(50081<=e&&e<=50107)return n.CLUSTER_BREAK.LVT}else if(e<50697){if(e<50389){if(e<50248){if(e<50165){if(e<50136){if(e<50109){if(50108===e)return n.CLUSTER_BREAK.LV}else if(50109<=e&&e<=50135)return n.CLUSTER_BREAK.LVT}else if(e<50137){if(50136===e)return n.CLUSTER_BREAK.LV}else if(e<50164){if(50137<=e&&e<=50163)return n.CLUSTER_BREAK.LVT}else if(50164===e)return n.CLUSTER_BREAK.LV}else if(e<50193){if(e<50192){if(50165<=e&&e<=50191)return n.CLUSTER_BREAK.LVT}else if(50192===e)return n.CLUSTER_BREAK.LV}else if(e<50220){if(50193<=e&&e<=50219)return n.CLUSTER_BREAK.LVT}else if(e<50221){if(50220===e)return n.CLUSTER_BREAK.LV}else if(50221<=e&&e<=50247)return n.CLUSTER_BREAK.LVT}else if(e<50305){if(e<50276){if(e<50249){if(50248===e)return n.CLUSTER_BREAK.LV}else if(50249<=e&&e<=50275)return n.CLUSTER_BREAK.LVT}else if(e<50277){if(50276===e)return n.CLUSTER_BREAK.LV}else if(e<50304){if(50277<=e&&e<=50303)return n.CLUSTER_BREAK.LVT}else if(50304===e)return n.CLUSTER_BREAK.LV}else if(e<50360){if(e<50332){if(50305<=e&&e<=50331)return n.CLUSTER_BREAK.LVT}else if(e<50333){if(50332===e)return n.CLUSTER_BREAK.LV}else if(50333<=e&&e<=50359)return n.CLUSTER_BREAK.LVT}else if(e<50361){if(50360===e)return n.CLUSTER_BREAK.LV}else if(e<50388){if(50361<=e&&e<=50387)return n.CLUSTER_BREAK.LVT}else if(50388===e)return n.CLUSTER_BREAK.LV}else if(e<50556){if(e<50472){if(e<50417){if(e<50416){if(50389<=e&&e<=50415)return n.CLUSTER_BREAK.LVT}else if(50416===e)return n.CLUSTER_BREAK.LV}else if(e<50444){if(50417<=e&&e<=50443)return n.CLUSTER_BREAK.LVT}else if(e<50445){if(50444===e)return n.CLUSTER_BREAK.LV}else if(50445<=e&&e<=50471)return n.CLUSTER_BREAK.LVT}else if(e<50501){if(e<50473){if(50472===e)return n.CLUSTER_BREAK.LV}else if(e<50500){if(50473<=e&&e<=50499)return n.CLUSTER_BREAK.LVT}else if(50500===e)return n.CLUSTER_BREAK.LV}else if(e<50528){if(50501<=e&&e<=50527)return n.CLUSTER_BREAK.LVT}else if(e<50529){if(50528===e)return n.CLUSTER_BREAK.LV}else if(50529<=e&&e<=50555)return n.CLUSTER_BREAK.LVT}else if(e<50613){if(e<50584){if(e<50557){if(50556===e)return n.CLUSTER_BREAK.LV}else if(50557<=e&&e<=50583)return n.CLUSTER_BREAK.LVT}else if(e<50585){if(50584===e)return n.CLUSTER_BREAK.LV}else if(e<50612){if(50585<=e&&e<=50611)return n.CLUSTER_BREAK.LVT}else if(50612===e)return n.CLUSTER_BREAK.LV}else if(e<50668){if(e<50640){if(50613<=e&&e<=50639)return n.CLUSTER_BREAK.LVT}else if(e<50641){if(50640===e)return n.CLUSTER_BREAK.LV}else if(50641<=e&&e<=50667)return n.CLUSTER_BREAK.LVT}else if(e<50669){if(50668===e)return n.CLUSTER_BREAK.LV}else if(e<50696){if(50669<=e&&e<=50695)return n.CLUSTER_BREAK.LVT}else if(50696===e)return n.CLUSTER_BREAK.LV}else if(e<51004){if(e<50837){if(e<50780){if(e<50725){if(e<50724){if(50697<=e&&e<=50723)return n.CLUSTER_BREAK.LVT}else if(50724===e)return n.CLUSTER_BREAK.LV}else if(e<50752){if(50725<=e&&e<=50751)return n.CLUSTER_BREAK.LVT}else if(e<50753){if(50752===e)return n.CLUSTER_BREAK.LV}else if(50753<=e&&e<=50779)return n.CLUSTER_BREAK.LVT}else if(e<50808){if(e<50781){if(50780===e)return n.CLUSTER_BREAK.LV}else if(50781<=e&&e<=50807)return n.CLUSTER_BREAK.LVT}else if(e<50809){if(50808===e)return n.CLUSTER_BREAK.LV}else if(e<50836){if(50809<=e&&e<=50835)return n.CLUSTER_BREAK.LVT}else if(50836===e)return n.CLUSTER_BREAK.LV}else if(e<50920){if(e<50865){if(e<50864){if(50837<=e&&e<=50863)return n.CLUSTER_BREAK.LVT}else if(50864===e)return n.CLUSTER_BREAK.LV}else if(e<50892){if(50865<=e&&e<=50891)return n.CLUSTER_BREAK.LVT}else if(e<50893){if(50892===e)return n.CLUSTER_BREAK.LV}else if(50893<=e&&e<=50919)return n.CLUSTER_BREAK.LVT}else if(e<50949){if(e<50921){if(50920===e)return n.CLUSTER_BREAK.LV}else if(e<50948){if(50921<=e&&e<=50947)return n.CLUSTER_BREAK.LVT}else if(50948===e)return n.CLUSTER_BREAK.LV}else if(e<50976){if(50949<=e&&e<=50975)return n.CLUSTER_BREAK.LVT}else if(e<50977){if(50976===e)return n.CLUSTER_BREAK.LV}else if(50977<=e&&e<=51003)return n.CLUSTER_BREAK.LVT}else if(e<51145){if(e<51061){if(e<51032){if(e<51005){if(51004===e)return n.CLUSTER_BREAK.LV}else if(51005<=e&&e<=51031)return n.CLUSTER_BREAK.LVT}else if(e<51033){if(51032===e)return n.CLUSTER_BREAK.LV}else if(e<51060){if(51033<=e&&e<=51059)return n.CLUSTER_BREAK.LVT}else if(51060===e)return n.CLUSTER_BREAK.LV}else if(e<51116){if(e<51088){if(51061<=e&&e<=51087)return n.CLUSTER_BREAK.LVT}else if(e<51089){if(51088===e)return n.CLUSTER_BREAK.LV}else if(51089<=e&&e<=51115)return n.CLUSTER_BREAK.LVT}else if(e<51117){if(51116===e)return n.CLUSTER_BREAK.LV}else if(e<51144){if(51117<=e&&e<=51143)return n.CLUSTER_BREAK.LVT}else if(51144===e)return n.CLUSTER_BREAK.LV}else if(e<51228){if(e<51173){if(e<51172){if(51145<=e&&e<=51171)return n.CLUSTER_BREAK.LVT}else if(51172===e)return n.CLUSTER_BREAK.LV}else if(e<51200){if(51173<=e&&e<=51199)return n.CLUSTER_BREAK.LVT}else if(e<51201){if(51200===e)return n.CLUSTER_BREAK.LV}else if(51201<=e&&e<=51227)return n.CLUSTER_BREAK.LVT}else if(e<51257){if(e<51229){if(51228===e)return n.CLUSTER_BREAK.LV}else if(e<51256){if(51229<=e&&e<=51255)return n.CLUSTER_BREAK.LVT}else if(51256===e)return n.CLUSTER_BREAK.LV}else if(e<51284){if(51257<=e&&e<=51283)return n.CLUSTER_BREAK.LVT}else if(e<51285){if(51284===e)return n.CLUSTER_BREAK.LV}else if(51285<=e&&e<=51311)return n.CLUSTER_BREAK.LVT}else if(e<52516){if(e<51901){if(e<51593){if(e<51452){if(e<51369){if(e<51340){if(e<51313){if(51312===e)return n.CLUSTER_BREAK.LV}else if(51313<=e&&e<=51339)return n.CLUSTER_BREAK.LVT}else if(e<51341){if(51340===e)return n.CLUSTER_BREAK.LV}else if(e<51368){if(51341<=e&&e<=51367)return n.CLUSTER_BREAK.LVT}else if(51368===e)return n.CLUSTER_BREAK.LV}else if(e<51397){if(e<51396){if(51369<=e&&e<=51395)return n.CLUSTER_BREAK.LVT}else if(51396===e)return n.CLUSTER_BREAK.LV}else if(e<51424){if(51397<=e&&e<=51423)return n.CLUSTER_BREAK.LVT}else if(e<51425){if(51424===e)return n.CLUSTER_BREAK.LV}else if(51425<=e&&e<=51451)return n.CLUSTER_BREAK.LVT}else if(e<51509){if(e<51480){if(e<51453){if(51452===e)return n.CLUSTER_BREAK.LV}else if(51453<=e&&e<=51479)return n.CLUSTER_BREAK.LVT}else if(e<51481){if(51480===e)return n.CLUSTER_BREAK.LV}else if(e<51508){if(51481<=e&&e<=51507)return n.CLUSTER_BREAK.LVT}else if(51508===e)return n.CLUSTER_BREAK.LV}else if(e<51564){if(e<51536){if(51509<=e&&e<=51535)return n.CLUSTER_BREAK.LVT}else if(e<51537){if(51536===e)return n.CLUSTER_BREAK.LV}else if(51537<=e&&e<=51563)return n.CLUSTER_BREAK.LVT}else if(e<51565){if(51564===e)return n.CLUSTER_BREAK.LV}else if(e<51592){if(51565<=e&&e<=51591)return n.CLUSTER_BREAK.LVT}else if(51592===e)return n.CLUSTER_BREAK.LV}else if(e<51760){if(e<51676){if(e<51621){if(e<51620){if(51593<=e&&e<=51619)return n.CLUSTER_BREAK.LVT}else if(51620===e)return n.CLUSTER_BREAK.LV}else if(e<51648){if(51621<=e&&e<=51647)return n.CLUSTER_BREAK.LVT}else if(e<51649){if(51648===e)return n.CLUSTER_BREAK.LV}else if(51649<=e&&e<=51675)return n.CLUSTER_BREAK.LVT}else if(e<51705){if(e<51677){if(51676===e)return n.CLUSTER_BREAK.LV}else if(e<51704){if(51677<=e&&e<=51703)return n.CLUSTER_BREAK.LVT}else if(51704===e)return n.CLUSTER_BREAK.LV}else if(e<51732){if(51705<=e&&e<=51731)return n.CLUSTER_BREAK.LVT}else if(e<51733){if(51732===e)return n.CLUSTER_BREAK.LV}else if(51733<=e&&e<=51759)return n.CLUSTER_BREAK.LVT}else if(e<51817){if(e<51788){if(e<51761){if(51760===e)return n.CLUSTER_BREAK.LV}else if(51761<=e&&e<=51787)return n.CLUSTER_BREAK.LVT}else if(e<51789){if(51788===e)return n.CLUSTER_BREAK.LV}else if(e<51816){if(51789<=e&&e<=51815)return n.CLUSTER_BREAK.LVT}else if(51816===e)return n.CLUSTER_BREAK.LV}else if(e<51872){if(e<51844){if(51817<=e&&e<=51843)return n.CLUSTER_BREAK.LVT}else if(e<51845){if(51844===e)return n.CLUSTER_BREAK.LV}else if(51845<=e&&e<=51871)return n.CLUSTER_BREAK.LVT}else if(e<51873){if(51872===e)return n.CLUSTER_BREAK.LV}else if(e<51900){if(51873<=e&&e<=51899)return n.CLUSTER_BREAK.LVT}else if(51900===e)return n.CLUSTER_BREAK.LV}else if(e<52208){if(e<52041){if(e<51984){if(e<51929){if(e<51928){if(51901<=e&&e<=51927)return n.CLUSTER_BREAK.LVT}else if(51928===e)return n.CLUSTER_BREAK.LV}else if(e<51956){if(51929<=e&&e<=51955)return n.CLUSTER_BREAK.LVT}else if(e<51957){if(51956===e)return n.CLUSTER_BREAK.LV}else if(51957<=e&&e<=51983)return n.CLUSTER_BREAK.LVT}else if(e<52012){if(e<51985){if(51984===e)return n.CLUSTER_BREAK.LV}else if(51985<=e&&e<=52011)return n.CLUSTER_BREAK.LVT}else if(e<52013){if(52012===e)return n.CLUSTER_BREAK.LV}else if(e<52040){if(52013<=e&&e<=52039)return n.CLUSTER_BREAK.LVT}else if(52040===e)return n.CLUSTER_BREAK.LV}else if(e<52124){if(e<52069){if(e<52068){if(52041<=e&&e<=52067)return n.CLUSTER_BREAK.LVT}else if(52068===e)return n.CLUSTER_BREAK.LV}else if(e<52096){if(52069<=e&&e<=52095)return n.CLUSTER_BREAK.LVT}else if(e<52097){if(52096===e)return n.CLUSTER_BREAK.LV}else if(52097<=e&&e<=52123)return n.CLUSTER_BREAK.LVT}else if(e<52153){if(e<52125){if(52124===e)return n.CLUSTER_BREAK.LV}else if(e<52152){if(52125<=e&&e<=52151)return n.CLUSTER_BREAK.LVT}else if(52152===e)return n.CLUSTER_BREAK.LV}else if(e<52180){if(52153<=e&&e<=52179)return n.CLUSTER_BREAK.LVT}else if(e<52181){if(52180===e)return n.CLUSTER_BREAK.LV}else if(52181<=e&&e<=52207)return n.CLUSTER_BREAK.LVT}else if(e<52349){if(e<52265){if(e<52236){if(e<52209){if(52208===e)return n.CLUSTER_BREAK.LV}else if(52209<=e&&e<=52235)return n.CLUSTER_BREAK.LVT}else if(e<52237){if(52236===e)return n.CLUSTER_BREAK.LV}else if(e<52264){if(52237<=e&&e<=52263)return n.CLUSTER_BREAK.LVT}else if(52264===e)return n.CLUSTER_BREAK.LV}else if(e<52320){if(e<52292){if(52265<=e&&e<=52291)return n.CLUSTER_BREAK.LVT}else if(e<52293){if(52292===e)return n.CLUSTER_BREAK.LV}else if(52293<=e&&e<=52319)return n.CLUSTER_BREAK.LVT}else if(e<52321){if(52320===e)return n.CLUSTER_BREAK.LV}else if(e<52348){if(52321<=e&&e<=52347)return n.CLUSTER_BREAK.LVT}else if(52348===e)return n.CLUSTER_BREAK.LV}else if(e<52432){if(e<52377){if(e<52376){if(52349<=e&&e<=52375)return n.CLUSTER_BREAK.LVT}else if(52376===e)return n.CLUSTER_BREAK.LV}else if(e<52404){if(52377<=e&&e<=52403)return n.CLUSTER_BREAK.LVT}else if(e<52405){if(52404===e)return n.CLUSTER_BREAK.LV}else if(52405<=e&&e<=52431)return n.CLUSTER_BREAK.LVT}else if(e<52461){if(e<52433){if(52432===e)return n.CLUSTER_BREAK.LV}else if(e<52460){if(52433<=e&&e<=52459)return n.CLUSTER_BREAK.LVT}else if(52460===e)return n.CLUSTER_BREAK.LV}else if(e<52488){if(52461<=e&&e<=52487)return n.CLUSTER_BREAK.LVT}else if(e<52489){if(52488===e)return n.CLUSTER_BREAK.LV}else if(52489<=e&&e<=52515)return n.CLUSTER_BREAK.LVT}else if(e<53105){if(e<52797){if(e<52656){if(e<52573){if(e<52544){if(e<52517){if(52516===e)return n.CLUSTER_BREAK.LV}else if(52517<=e&&e<=52543)return n.CLUSTER_BREAK.LVT}else if(e<52545){if(52544===e)return n.CLUSTER_BREAK.LV}else if(e<52572){if(52545<=e&&e<=52571)return n.CLUSTER_BREAK.LVT}else if(52572===e)return n.CLUSTER_BREAK.LV}else if(e<52601){if(e<52600){if(52573<=e&&e<=52599)return n.CLUSTER_BREAK.LVT}else if(52600===e)return n.CLUSTER_BREAK.LV}else if(e<52628){if(52601<=e&&e<=52627)return n.CLUSTER_BREAK.LVT}else if(e<52629){if(52628===e)return n.CLUSTER_BREAK.LV}else if(52629<=e&&e<=52655)return n.CLUSTER_BREAK.LVT}else if(e<52713){if(e<52684){if(e<52657){if(52656===e)return n.CLUSTER_BREAK.LV}else if(52657<=e&&e<=52683)return n.CLUSTER_BREAK.LVT}else if(e<52685){if(52684===e)return n.CLUSTER_BREAK.LV}else if(e<52712){if(52685<=e&&e<=52711)return n.CLUSTER_BREAK.LVT}else if(52712===e)return n.CLUSTER_BREAK.LV}else if(e<52768){if(e<52740){if(52713<=e&&e<=52739)return n.CLUSTER_BREAK.LVT}else if(e<52741){if(52740===e)return n.CLUSTER_BREAK.LV}else if(52741<=e&&e<=52767)return n.CLUSTER_BREAK.LVT}else if(e<52769){if(52768===e)return n.CLUSTER_BREAK.LV}else if(e<52796){if(52769<=e&&e<=52795)return n.CLUSTER_BREAK.LVT}else if(52796===e)return n.CLUSTER_BREAK.LV}else if(e<52964){if(e<52880){if(e<52825){if(e<52824){if(52797<=e&&e<=52823)return n.CLUSTER_BREAK.LVT}else if(52824===e)return n.CLUSTER_BREAK.LV}else if(e<52852){if(52825<=e&&e<=52851)return n.CLUSTER_BREAK.LVT}else if(e<52853){if(52852===e)return n.CLUSTER_BREAK.LV}else if(52853<=e&&e<=52879)return n.CLUSTER_BREAK.LVT}else if(e<52909){if(e<52881){if(52880===e)return n.CLUSTER_BREAK.LV}else if(e<52908){if(52881<=e&&e<=52907)return n.CLUSTER_BREAK.LVT}else if(52908===e)return n.CLUSTER_BREAK.LV}else if(e<52936){if(52909<=e&&e<=52935)return n.CLUSTER_BREAK.LVT}else if(e<52937){if(52936===e)return n.CLUSTER_BREAK.LV}else if(52937<=e&&e<=52963)return n.CLUSTER_BREAK.LVT}else if(e<53021){if(e<52992){if(e<52965){if(52964===e)return n.CLUSTER_BREAK.LV}else if(52965<=e&&e<=52991)return n.CLUSTER_BREAK.LVT}else if(e<52993){if(52992===e)return n.CLUSTER_BREAK.LV}else if(e<53020){if(52993<=e&&e<=53019)return n.CLUSTER_BREAK.LVT}else if(53020===e)return n.CLUSTER_BREAK.LV}else if(e<53076){if(e<53048){if(53021<=e&&e<=53047)return n.CLUSTER_BREAK.LVT}else if(e<53049){if(53048===e)return n.CLUSTER_BREAK.LV}else if(53049<=e&&e<=53075)return n.CLUSTER_BREAK.LVT}else if(e<53077){if(53076===e)return n.CLUSTER_BREAK.LV}else if(e<53104){if(53077<=e&&e<=53103)return n.CLUSTER_BREAK.LVT}else if(53104===e)return n.CLUSTER_BREAK.LV}else if(e<53412){if(e<53245){if(e<53188){if(e<53133){if(e<53132){if(53105<=e&&e<=53131)return n.CLUSTER_BREAK.LVT}else if(53132===e)return n.CLUSTER_BREAK.LV}else if(e<53160){if(53133<=e&&e<=53159)return n.CLUSTER_BREAK.LVT}else if(e<53161){if(53160===e)return n.CLUSTER_BREAK.LV}else if(53161<=e&&e<=53187)return n.CLUSTER_BREAK.LVT}else if(e<53216){if(e<53189){if(53188===e)return n.CLUSTER_BREAK.LV}else if(53189<=e&&e<=53215)return n.CLUSTER_BREAK.LVT}else if(e<53217){if(53216===e)return n.CLUSTER_BREAK.LV}else if(e<53244){if(53217<=e&&e<=53243)return n.CLUSTER_BREAK.LVT}else if(53244===e)return n.CLUSTER_BREAK.LV}else if(e<53328){if(e<53273){if(e<53272){if(53245<=e&&e<=53271)return n.CLUSTER_BREAK.LVT}else if(53272===e)return n.CLUSTER_BREAK.LV}else if(e<53300){if(53273<=e&&e<=53299)return n.CLUSTER_BREAK.LVT}else if(e<53301){if(53300===e)return n.CLUSTER_BREAK.LV}else if(53301<=e&&e<=53327)return n.CLUSTER_BREAK.LVT}else if(e<53357){if(e<53329){if(53328===e)return n.CLUSTER_BREAK.LV}else if(e<53356){if(53329<=e&&e<=53355)return n.CLUSTER_BREAK.LVT}else if(53356===e)return n.CLUSTER_BREAK.LV}else if(e<53384){if(53357<=e&&e<=53383)return n.CLUSTER_BREAK.LVT}else if(e<53385){if(53384===e)return n.CLUSTER_BREAK.LV}else if(53385<=e&&e<=53411)return n.CLUSTER_BREAK.LVT}else if(e<53553){if(e<53469){if(e<53440){if(e<53413){if(53412===e)return n.CLUSTER_BREAK.LV}else if(53413<=e&&e<=53439)return n.CLUSTER_BREAK.LVT}else if(e<53441){if(53440===e)return n.CLUSTER_BREAK.LV}else if(e<53468){if(53441<=e&&e<=53467)return n.CLUSTER_BREAK.LVT}else if(53468===e)return n.CLUSTER_BREAK.LV}else if(e<53524){if(e<53496){if(53469<=e&&e<=53495)return n.CLUSTER_BREAK.LVT}else if(e<53497){if(53496===e)return n.CLUSTER_BREAK.LV}else if(53497<=e&&e<=53523)return n.CLUSTER_BREAK.LVT}else if(e<53525){if(53524===e)return n.CLUSTER_BREAK.LV}else if(e<53552){if(53525<=e&&e<=53551)return n.CLUSTER_BREAK.LVT}else if(53552===e)return n.CLUSTER_BREAK.LV}else if(e<53636){if(e<53581){if(e<53580){if(53553<=e&&e<=53579)return n.CLUSTER_BREAK.LVT}else if(53580===e)return n.CLUSTER_BREAK.LV}else if(e<53608){if(53581<=e&&e<=53607)return n.CLUSTER_BREAK.LVT}else if(e<53609){if(53608===e)return n.CLUSTER_BREAK.LV}else if(53609<=e&&e<=53635)return n.CLUSTER_BREAK.LVT}else if(e<53665){if(e<53637){if(53636===e)return n.CLUSTER_BREAK.LV}else if(e<53664){if(53637<=e&&e<=53663)return n.CLUSTER_BREAK.LVT}else if(53664===e)return n.CLUSTER_BREAK.LV}else if(e<53692){if(53665<=e&&e<=53691)return n.CLUSTER_BREAK.LVT}else if(e<53693){if(53692===e)return n.CLUSTER_BREAK.LV}else if(53693<=e&&e<=53719)return n.CLUSTER_BREAK.LVT}else if(e<70459){if(e<54897){if(e<54308){if(e<54001){if(e<53860){if(e<53777){if(e<53748){if(e<53721){if(53720===e)return n.CLUSTER_BREAK.LV}else if(53721<=e&&e<=53747)return n.CLUSTER_BREAK.LVT}else if(e<53749){if(53748===e)return n.CLUSTER_BREAK.LV}else if(e<53776){if(53749<=e&&e<=53775)return n.CLUSTER_BREAK.LVT}else if(53776===e)return n.CLUSTER_BREAK.LV}else if(e<53805){if(e<53804){if(53777<=e&&e<=53803)return n.CLUSTER_BREAK.LVT}else if(53804===e)return n.CLUSTER_BREAK.LV}else if(e<53832){if(53805<=e&&e<=53831)return n.CLUSTER_BREAK.LVT}else if(e<53833){if(53832===e)return n.CLUSTER_BREAK.LV}else if(53833<=e&&e<=53859)return n.CLUSTER_BREAK.LVT}else if(e<53917){if(e<53888){if(e<53861){if(53860===e)return n.CLUSTER_BREAK.LV}else if(53861<=e&&e<=53887)return n.CLUSTER_BREAK.LVT}else if(e<53889){if(53888===e)return n.CLUSTER_BREAK.LV}else if(e<53916){if(53889<=e&&e<=53915)return n.CLUSTER_BREAK.LVT}else if(53916===e)return n.CLUSTER_BREAK.LV}else if(e<53972){if(e<53944){if(53917<=e&&e<=53943)return n.CLUSTER_BREAK.LVT}else if(e<53945){if(53944===e)return n.CLUSTER_BREAK.LV}else if(53945<=e&&e<=53971)return n.CLUSTER_BREAK.LVT}else if(e<53973){if(53972===e)return n.CLUSTER_BREAK.LV}else if(e<54e3){if(53973<=e&&e<=53999)return n.CLUSTER_BREAK.LVT}else if(54e3===e)return n.CLUSTER_BREAK.LV}else if(e<54141){if(e<54084){if(e<54029){if(e<54028){if(54001<=e&&e<=54027)return n.CLUSTER_BREAK.LVT}else if(54028===e)return n.CLUSTER_BREAK.LV}else if(e<54056){if(54029<=e&&e<=54055)return n.CLUSTER_BREAK.LVT}else if(e<54057){if(54056===e)return n.CLUSTER_BREAK.LV}else if(54057<=e&&e<=54083)return n.CLUSTER_BREAK.LVT}else if(e<54112){if(e<54085){if(54084===e)return n.CLUSTER_BREAK.LV}else if(54085<=e&&e<=54111)return n.CLUSTER_BREAK.LVT}else if(e<54113){if(54112===e)return n.CLUSTER_BREAK.LV}else if(e<54140){if(54113<=e&&e<=54139)return n.CLUSTER_BREAK.LVT}else if(54140===e)return n.CLUSTER_BREAK.LV}else if(e<54224){if(e<54169){if(e<54168){if(54141<=e&&e<=54167)return n.CLUSTER_BREAK.LVT}else if(54168===e)return n.CLUSTER_BREAK.LV}else if(e<54196){if(54169<=e&&e<=54195)return n.CLUSTER_BREAK.LVT}else if(e<54197){if(54196===e)return n.CLUSTER_BREAK.LV}else if(54197<=e&&e<=54223)return n.CLUSTER_BREAK.LVT}else if(e<54253){if(e<54225){if(54224===e)return n.CLUSTER_BREAK.LV}else if(e<54252){if(54225<=e&&e<=54251)return n.CLUSTER_BREAK.LVT}else if(54252===e)return n.CLUSTER_BREAK.LV}else if(e<54280){if(54253<=e&&e<=54279)return n.CLUSTER_BREAK.LVT}else if(e<54281){if(54280===e)return n.CLUSTER_BREAK.LV}else if(54281<=e&&e<=54307)return n.CLUSTER_BREAK.LVT}else if(e<54589){if(e<54448){if(e<54365){if(e<54336){if(e<54309){if(54308===e)return n.CLUSTER_BREAK.LV}else if(54309<=e&&e<=54335)return n.CLUSTER_BREAK.LVT}else if(e<54337){if(54336===e)return n.CLUSTER_BREAK.LV}else if(e<54364){if(54337<=e&&e<=54363)return n.CLUSTER_BREAK.LVT}else if(54364===e)return n.CLUSTER_BREAK.LV}else if(e<54393){if(e<54392){if(54365<=e&&e<=54391)return n.CLUSTER_BREAK.LVT}else if(54392===e)return n.CLUSTER_BREAK.LV}else if(e<54420){if(54393<=e&&e<=54419)return n.CLUSTER_BREAK.LVT}else if(e<54421){if(54420===e)return n.CLUSTER_BREAK.LV}else if(54421<=e&&e<=54447)return n.CLUSTER_BREAK.LVT}else if(e<54505){if(e<54476){if(e<54449){if(54448===e)return n.CLUSTER_BREAK.LV}else if(54449<=e&&e<=54475)return n.CLUSTER_BREAK.LVT}else if(e<54477){if(54476===e)return n.CLUSTER_BREAK.LV}else if(e<54504){if(54477<=e&&e<=54503)return n.CLUSTER_BREAK.LVT}else if(54504===e)return n.CLUSTER_BREAK.LV}else if(e<54560){if(e<54532){if(54505<=e&&e<=54531)return n.CLUSTER_BREAK.LVT}else if(e<54533){if(54532===e)return n.CLUSTER_BREAK.LV}else if(54533<=e&&e<=54559)return n.CLUSTER_BREAK.LVT}else if(e<54561){if(54560===e)return n.CLUSTER_BREAK.LV}else if(e<54588){if(54561<=e&&e<=54587)return n.CLUSTER_BREAK.LVT}else if(54588===e)return n.CLUSTER_BREAK.LV}else if(e<54756){if(e<54672){if(e<54617){if(e<54616){if(54589<=e&&e<=54615)return n.CLUSTER_BREAK.LVT}else if(54616===e)return n.CLUSTER_BREAK.LV}else if(e<54644){if(54617<=e&&e<=54643)return n.CLUSTER_BREAK.LVT}else if(e<54645){if(54644===e)return n.CLUSTER_BREAK.LV}else if(54645<=e&&e<=54671)return n.CLUSTER_BREAK.LVT}else if(e<54701){if(e<54673){if(54672===e)return n.CLUSTER_BREAK.LV}else if(e<54700){if(54673<=e&&e<=54699)return n.CLUSTER_BREAK.LVT}else if(54700===e)return n.CLUSTER_BREAK.LV}else if(e<54728){if(54701<=e&&e<=54727)return n.CLUSTER_BREAK.LVT}else if(e<54729){if(54728===e)return n.CLUSTER_BREAK.LV}else if(54729<=e&&e<=54755)return n.CLUSTER_BREAK.LVT}else if(e<54813){if(e<54784){if(e<54757){if(54756===e)return n.CLUSTER_BREAK.LV}else if(54757<=e&&e<=54783)return n.CLUSTER_BREAK.LVT}else if(e<54785){if(54784===e)return n.CLUSTER_BREAK.LV}else if(e<54812){if(54785<=e&&e<=54811)return n.CLUSTER_BREAK.LVT}else if(54812===e)return n.CLUSTER_BREAK.LV}else if(e<54868){if(e<54840){if(54813<=e&&e<=54839)return n.CLUSTER_BREAK.LVT}else if(e<54841){if(54840===e)return n.CLUSTER_BREAK.LV}else if(54841<=e&&e<=54867)return n.CLUSTER_BREAK.LVT}else if(e<54869){if(54868===e)return n.CLUSTER_BREAK.LV}else if(e<54896){if(54869<=e&&e<=54895)return n.CLUSTER_BREAK.LVT}else if(54896===e)return n.CLUSTER_BREAK.LV}else if(e<69632){if(e<55216){if(e<55037){if(e<54980){if(e<54925){if(e<54924){if(54897<=e&&e<=54923)return n.CLUSTER_BREAK.LVT}else if(54924===e)return n.CLUSTER_BREAK.LV}else if(e<54952){if(54925<=e&&e<=54951)return n.CLUSTER_BREAK.LVT}else if(e<54953){if(54952===e)return n.CLUSTER_BREAK.LV}else if(54953<=e&&e<=54979)return n.CLUSTER_BREAK.LVT}else if(e<55008){if(e<54981){if(54980===e)return n.CLUSTER_BREAK.LV}else if(54981<=e&&e<=55007)return n.CLUSTER_BREAK.LVT}else if(e<55009){if(55008===e)return n.CLUSTER_BREAK.LV}else if(e<55036){if(55009<=e&&e<=55035)return n.CLUSTER_BREAK.LVT}else if(55036===e)return n.CLUSTER_BREAK.LV}else if(e<55120){if(e<55065){if(e<55064){if(55037<=e&&e<=55063)return n.CLUSTER_BREAK.LVT}else if(55064===e)return n.CLUSTER_BREAK.LV}else if(e<55092){if(55065<=e&&e<=55091)return n.CLUSTER_BREAK.LVT}else if(e<55093){if(55092===e)return n.CLUSTER_BREAK.LV}else if(55093<=e&&e<=55119)return n.CLUSTER_BREAK.LVT}else if(e<55149){if(e<55121){if(55120===e)return n.CLUSTER_BREAK.LV}else if(e<55148){if(55121<=e&&e<=55147)return n.CLUSTER_BREAK.LVT}else if(55148===e)return n.CLUSTER_BREAK.LV}else if(e<55176){if(55149<=e&&e<=55175)return n.CLUSTER_BREAK.LVT}else if(e<55177){if(55176===e)return n.CLUSTER_BREAK.LV}else if(55177<=e&&e<=55203)return n.CLUSTER_BREAK.LVT}else if(e<68097){if(e<65279){if(e<64286){if(e<55243){if(55216<=e&&e<=55238)return n.CLUSTER_BREAK.V}else if(55243<=e&&e<=55291)return n.CLUSTER_BREAK.T}else if(e<65024){if(64286===e)return n.CLUSTER_BREAK.EXTEND}else if(e<65056){if(65024<=e&&e<=65039)return n.CLUSTER_BREAK.EXTEND}else if(65056<=e&&e<=65071)return n.CLUSTER_BREAK.EXTEND}else if(e<66045){if(e<65438){if(65279===e)return n.CLUSTER_BREAK.CONTROL}else if(e<65520){if(65438<=e&&e<=65439)return n.CLUSTER_BREAK.EXTEND}else if(65520<=e&&e<=65531)return n.CLUSTER_BREAK.CONTROL}else if(e<66272){if(66045===e)return n.CLUSTER_BREAK.EXTEND}else if(e<66422){if(66272===e)return n.CLUSTER_BREAK.EXTEND}else if(66422<=e&&e<=66426)return n.CLUSTER_BREAK.EXTEND}else if(e<68325){if(e<68108){if(e<68101){if(68097<=e&&e<=68099)return n.CLUSTER_BREAK.EXTEND}else if(68101<=e&&e<=68102)return n.CLUSTER_BREAK.EXTEND}else if(e<68152){if(68108<=e&&e<=68111)return n.CLUSTER_BREAK.EXTEND}else if(e<68159){if(68152<=e&&e<=68154)return n.CLUSTER_BREAK.EXTEND}else if(68159===e)return n.CLUSTER_BREAK.EXTEND}else if(e<69373){if(e<68900){if(68325<=e&&e<=68326)return n.CLUSTER_BREAK.EXTEND}else if(e<69291){if(68900<=e&&e<=68903)return n.CLUSTER_BREAK.EXTEND}else if(69291<=e&&e<=69292)return n.CLUSTER_BREAK.EXTEND}else if(e<69446){if(69373<=e&&e<=69375)return n.CLUSTER_BREAK.EXTEND}else if(e<69506){if(69446<=e&&e<=69456)return n.CLUSTER_BREAK.EXTEND}else if(69506<=e&&e<=69509)return n.CLUSTER_BREAK.EXTEND}else if(e<70016){if(e<69815){if(e<69747){if(e<69634){if(69632===e)return n.CLUSTER_BREAK.SPACINGMARK;if(69633===e)return n.CLUSTER_BREAK.EXTEND}else if(e<69688){if(69634===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<69744){if(69688<=e&&e<=69702)return n.CLUSTER_BREAK.EXTEND}else if(69744===e)return n.CLUSTER_BREAK.EXTEND}else if(e<69762){if(e<69759){if(69747<=e&&e<=69748)return n.CLUSTER_BREAK.EXTEND}else if(69759<=e&&e<=69761)return n.CLUSTER_BREAK.EXTEND}else if(e<69808){if(69762===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<69811){if(69808<=e&&e<=69810)return n.CLUSTER_BREAK.SPACINGMARK}else if(69811<=e&&e<=69814)return n.CLUSTER_BREAK.EXTEND}else if(e<69888)if(e<69821){if(e<69817){if(69815<=e&&e<=69816)return n.CLUSTER_BREAK.SPACINGMARK}else if(69817<=e&&e<=69818)return n.CLUSTER_BREAK.EXTEND}else if(e<69826){if(69821===e)return n.CLUSTER_BREAK.PREPEND}else{if(69826===e)return n.CLUSTER_BREAK.EXTEND;if(69837===e)return n.CLUSTER_BREAK.PREPEND}else if(e<69933){if(e<69927){if(69888<=e&&e<=69890)return n.CLUSTER_BREAK.EXTEND}else if(e<69932){if(69927<=e&&e<=69931)return n.CLUSTER_BREAK.EXTEND}else if(69932===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<69957){if(69933<=e&&e<=69940)return n.CLUSTER_BREAK.EXTEND}else if(e<70003){if(69957<=e&&e<=69958)return n.CLUSTER_BREAK.SPACINGMARK}else if(70003===e)return n.CLUSTER_BREAK.EXTEND}else if(e<70194){if(e<70082){if(e<70067){if(e<70018){if(70016<=e&&e<=70017)return n.CLUSTER_BREAK.EXTEND}else if(70018===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<70070){if(70067<=e&&e<=70069)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<70079){if(70070<=e&&e<=70078)return n.CLUSTER_BREAK.EXTEND}else if(70079<=e&&e<=70080)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<70095){if(e<70089){if(70082<=e&&e<=70083)return n.CLUSTER_BREAK.PREPEND}else if(e<70094){if(70089<=e&&e<=70092)return n.CLUSTER_BREAK.EXTEND}else if(70094===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<70188){if(70095===e)return n.CLUSTER_BREAK.EXTEND}else if(e<70191){if(70188<=e&&e<=70190)return n.CLUSTER_BREAK.SPACINGMARK}else if(70191<=e&&e<=70193)return n.CLUSTER_BREAK.EXTEND}else if(e<70209){if(e<70197){if(e<70196){if(70194<=e&&e<=70195)return n.CLUSTER_BREAK.SPACINGMARK}else if(70196===e)return n.CLUSTER_BREAK.EXTEND}else if(e<70198){if(70197===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<70206){if(70198<=e&&e<=70199)return n.CLUSTER_BREAK.EXTEND}else if(70206===e)return n.CLUSTER_BREAK.EXTEND}else if(e<70371){if(e<70367){if(70209===e)return n.CLUSTER_BREAK.EXTEND}else if(e<70368){if(70367===e)return n.CLUSTER_BREAK.EXTEND}else if(70368<=e&&e<=70370)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<70400){if(70371<=e&&e<=70378)return n.CLUSTER_BREAK.EXTEND}else if(e<70402){if(70400<=e&&e<=70401)return n.CLUSTER_BREAK.EXTEND}else if(70402<=e&&e<=70403)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<72343){if(e<71339){if(e<70841){if(e<70512){if(e<70471){if(e<70463){if(e<70462){if(70459<=e&&e<=70460)return n.CLUSTER_BREAK.EXTEND}else if(70462===e)return n.CLUSTER_BREAK.EXTEND}else if(e<70464){if(70463===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<70465){if(70464===e)return n.CLUSTER_BREAK.EXTEND}else if(70465<=e&&e<=70468)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<70487){if(e<70475){if(70471<=e&&e<=70472)return n.CLUSTER_BREAK.SPACINGMARK}else if(70475<=e&&e<=70477)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<70498){if(70487===e)return n.CLUSTER_BREAK.EXTEND}else if(e<70502){if(70498<=e&&e<=70499)return n.CLUSTER_BREAK.SPACINGMARK}else if(70502<=e&&e<=70508)return n.CLUSTER_BREAK.EXTEND}else if(e<70725){if(e<70712){if(e<70709){if(70512<=e&&e<=70516)return n.CLUSTER_BREAK.EXTEND}else if(70709<=e&&e<=70711)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<70720){if(70712<=e&&e<=70719)return n.CLUSTER_BREAK.EXTEND}else if(e<70722){if(70720<=e&&e<=70721)return n.CLUSTER_BREAK.SPACINGMARK}else if(70722<=e&&e<=70724)return n.CLUSTER_BREAK.EXTEND}else if(e<70832){if(e<70726){if(70725===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(70726===e||70750===e)return n.CLUSTER_BREAK.EXTEND}else if(e<70833){if(70832===e)return n.CLUSTER_BREAK.EXTEND}else if(e<70835){if(70833<=e&&e<=70834)return n.CLUSTER_BREAK.SPACINGMARK}else if(70835<=e&&e<=70840)return n.CLUSTER_BREAK.EXTEND}else if(e<71096){if(e<70847)if(e<70843){if(70841===e)return n.CLUSTER_BREAK.SPACINGMARK;if(70842===e)return n.CLUSTER_BREAK.EXTEND}else if(e<70845){if(70843<=e&&e<=70844)return n.CLUSTER_BREAK.SPACINGMARK}else{if(70845===e)return n.CLUSTER_BREAK.EXTEND;if(70846===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<71087){if(e<70849){if(70847<=e&&e<=70848)return n.CLUSTER_BREAK.EXTEND}else if(e<70850){if(70849===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(70850<=e&&e<=70851)return n.CLUSTER_BREAK.EXTEND}else if(e<71088){if(71087===e)return n.CLUSTER_BREAK.EXTEND}else if(e<71090){if(71088<=e&&e<=71089)return n.CLUSTER_BREAK.SPACINGMARK}else if(71090<=e&&e<=71093)return n.CLUSTER_BREAK.EXTEND}else if(e<71216){if(e<71102){if(e<71100){if(71096<=e&&e<=71099)return n.CLUSTER_BREAK.SPACINGMARK}else if(71100<=e&&e<=71101)return n.CLUSTER_BREAK.EXTEND}else if(e<71103){if(71102===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<71132){if(71103<=e&&e<=71104)return n.CLUSTER_BREAK.EXTEND}else if(71132<=e&&e<=71133)return n.CLUSTER_BREAK.EXTEND}else if(e<71229){if(e<71219){if(71216<=e&&e<=71218)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<71227){if(71219<=e&&e<=71226)return n.CLUSTER_BREAK.EXTEND}else if(71227<=e&&e<=71228)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<71230){if(71229===e)return n.CLUSTER_BREAK.EXTEND}else if(e<71231){if(71230===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(71231<=e&&e<=71232)return n.CLUSTER_BREAK.EXTEND}else if(e<71999)if(e<71463){if(e<71350){if(e<71341){if(71339===e)return n.CLUSTER_BREAK.EXTEND;if(71340===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<71342){if(71341===e)return n.CLUSTER_BREAK.EXTEND}else if(e<71344){if(71342<=e&&e<=71343)return n.CLUSTER_BREAK.SPACINGMARK}else if(71344<=e&&e<=71349)return n.CLUSTER_BREAK.EXTEND}else if(e<71453){if(71350===e)return n.CLUSTER_BREAK.SPACINGMARK;if(71351===e)return n.CLUSTER_BREAK.EXTEND}else if(e<71458){if(71453<=e&&e<=71455)return n.CLUSTER_BREAK.EXTEND}else if(e<71462){if(71458<=e&&e<=71461)return n.CLUSTER_BREAK.EXTEND}else if(71462===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<71984){if(e<71727){if(e<71724){if(71463<=e&&e<=71467)return n.CLUSTER_BREAK.EXTEND}else if(71724<=e&&e<=71726)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<71736){if(71727<=e&&e<=71735)return n.CLUSTER_BREAK.EXTEND}else if(e<71737){if(71736===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(71737<=e&&e<=71738)return n.CLUSTER_BREAK.EXTEND}else if(e<71995){if(e<71985){if(71984===e)return n.CLUSTER_BREAK.EXTEND}else if(e<71991){if(71985<=e&&e<=71989)return n.CLUSTER_BREAK.SPACINGMARK}else if(71991<=e&&e<=71992)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<71997){if(71995<=e&&e<=71996)return n.CLUSTER_BREAK.EXTEND}else{if(71997===e)return n.CLUSTER_BREAK.SPACINGMARK;if(71998===e)return n.CLUSTER_BREAK.EXTEND}else if(e<72193)if(e<72145)if(e<72001){if(71999===e)return n.CLUSTER_BREAK.PREPEND;if(72e3===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<72002){if(72001===e)return n.CLUSTER_BREAK.PREPEND}else{if(72002===e)return n.CLUSTER_BREAK.SPACINGMARK;if(72003===e)return n.CLUSTER_BREAK.EXTEND}else if(e<72156){if(e<72148){if(72145<=e&&e<=72147)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<72154){if(72148<=e&&e<=72151)return n.CLUSTER_BREAK.EXTEND}else if(72154<=e&&e<=72155)return n.CLUSTER_BREAK.EXTEND}else if(e<72160){if(72156<=e&&e<=72159)return n.CLUSTER_BREAK.SPACINGMARK}else{if(72160===e)return n.CLUSTER_BREAK.EXTEND;if(72164===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<72263){if(e<72249){if(e<72243){if(72193<=e&&e<=72202)return n.CLUSTER_BREAK.EXTEND}else if(72243<=e&&e<=72248)return n.CLUSTER_BREAK.EXTEND}else if(e<72250){if(72249===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<72251){if(72250===e)return n.CLUSTER_BREAK.PREPEND}else if(72251<=e&&e<=72254)return n.CLUSTER_BREAK.EXTEND}else if(e<72281){if(e<72273){if(72263===e)return n.CLUSTER_BREAK.EXTEND}else if(e<72279){if(72273<=e&&e<=72278)return n.CLUSTER_BREAK.EXTEND}else if(72279<=e&&e<=72280)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<72324){if(72281<=e&&e<=72283)return n.CLUSTER_BREAK.EXTEND}else if(e<72330){if(72324<=e&&e<=72329)return n.CLUSTER_BREAK.PREPEND}else if(72330<=e&&e<=72342)return n.CLUSTER_BREAK.EXTEND}else if(e<94033){if(e<73104){if(e<72881){if(e<72766){if(e<72751){if(e<72344){if(72343===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(72344<=e&&e<=72345)return n.CLUSTER_BREAK.EXTEND}else if(e<72752){if(72751===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<72760){if(72752<=e&&e<=72758)return n.CLUSTER_BREAK.EXTEND}else if(72760<=e&&e<=72765)return n.CLUSTER_BREAK.EXTEND}else if(e<72850){if(72766===e)return n.CLUSTER_BREAK.SPACINGMARK;if(72767===e)return n.CLUSTER_BREAK.EXTEND}else if(e<72873){if(72850<=e&&e<=72871)return n.CLUSTER_BREAK.EXTEND}else if(e<72874){if(72873===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(72874<=e&&e<=72880)return n.CLUSTER_BREAK.EXTEND}else if(e<73018){if(e<72884){if(e<72882){if(72881===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(72882<=e&&e<=72883)return n.CLUSTER_BREAK.EXTEND}else if(e<72885){if(72884===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<73009){if(72885<=e&&e<=72886)return n.CLUSTER_BREAK.EXTEND}else if(73009<=e&&e<=73014)return n.CLUSTER_BREAK.EXTEND}else if(e<73030){if(e<73020){if(73018===e)return n.CLUSTER_BREAK.EXTEND}else if(e<73023){if(73020<=e&&e<=73021)return n.CLUSTER_BREAK.EXTEND}else if(73023<=e&&e<=73029)return n.CLUSTER_BREAK.EXTEND}else if(e<73031){if(73030===e)return n.CLUSTER_BREAK.PREPEND}else if(e<73098){if(73031===e)return n.CLUSTER_BREAK.EXTEND}else if(73098<=e&&e<=73102)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<73526){if(e<73459)if(e<73109){if(e<73107){if(73104<=e&&e<=73105)return n.CLUSTER_BREAK.EXTEND}else if(73107<=e&&e<=73108)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<73110){if(73109===e)return n.CLUSTER_BREAK.EXTEND}else{if(73110===e)return n.CLUSTER_BREAK.SPACINGMARK;if(73111===e)return n.CLUSTER_BREAK.EXTEND}else if(e<73474){if(e<73461){if(73459<=e&&e<=73460)return n.CLUSTER_BREAK.EXTEND}else if(e<73472){if(73461<=e&&e<=73462)return n.CLUSTER_BREAK.SPACINGMARK}else if(73472<=e&&e<=73473)return n.CLUSTER_BREAK.EXTEND}else if(e<73475){if(73474===e)return n.CLUSTER_BREAK.PREPEND}else if(e<73524){if(73475===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(73524<=e&&e<=73525)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<78896)if(e<73536){if(e<73534){if(73526<=e&&e<=73530)return n.CLUSTER_BREAK.EXTEND}else if(73534<=e&&e<=73535)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<73537){if(73536===e)return n.CLUSTER_BREAK.EXTEND}else{if(73537===e)return n.CLUSTER_BREAK.SPACINGMARK;if(73538===e)return n.CLUSTER_BREAK.EXTEND}else if(e<92912){if(e<78912){if(78896<=e&&e<=78911)return n.CLUSTER_BREAK.CONTROL}else if(e<78919){if(78912===e)return n.CLUSTER_BREAK.EXTEND}else if(78919<=e&&e<=78933)return n.CLUSTER_BREAK.EXTEND}else if(e<92976){if(92912<=e&&e<=92916)return n.CLUSTER_BREAK.EXTEND}else if(e<94031){if(92976<=e&&e<=92982)return n.CLUSTER_BREAK.EXTEND}else if(94031===e)return n.CLUSTER_BREAK.EXTEND}else if(e<121476){if(e<119143)if(e<113824){if(e<94180){if(e<94095){if(94033<=e&&e<=94087)return n.CLUSTER_BREAK.SPACINGMARK}else if(94095<=e&&e<=94098)return n.CLUSTER_BREAK.EXTEND}else if(e<94192){if(94180===e)return n.CLUSTER_BREAK.EXTEND}else if(e<113821){if(94192<=e&&e<=94193)return n.CLUSTER_BREAK.SPACINGMARK}else if(113821<=e&&e<=113822)return n.CLUSTER_BREAK.EXTEND}else if(e<118576){if(e<118528){if(113824<=e&&e<=113827)return n.CLUSTER_BREAK.CONTROL}else if(118528<=e&&e<=118573)return n.CLUSTER_BREAK.EXTEND}else if(e<119141){if(118576<=e&&e<=118598)return n.CLUSTER_BREAK.EXTEND}else{if(119141===e)return n.CLUSTER_BREAK.EXTEND;if(119142===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<119173){if(e<119150){if(e<119149){if(119143<=e&&e<=119145)return n.CLUSTER_BREAK.EXTEND}else if(119149===e)return n.CLUSTER_BREAK.SPACINGMARK}else if(e<119155){if(119150<=e&&e<=119154)return n.CLUSTER_BREAK.EXTEND}else if(e<119163){if(119155<=e&&e<=119162)return n.CLUSTER_BREAK.CONTROL}else if(119163<=e&&e<=119170)return n.CLUSTER_BREAK.EXTEND}else if(e<121344){if(e<119210){if(119173<=e&&e<=119179)return n.CLUSTER_BREAK.EXTEND}else if(e<119362){if(119210<=e&&e<=119213)return n.CLUSTER_BREAK.EXTEND}else if(119362<=e&&e<=119364)return n.CLUSTER_BREAK.EXTEND}else if(e<121403){if(121344<=e&&e<=121398)return n.CLUSTER_BREAK.EXTEND}else if(e<121461){if(121403<=e&&e<=121452)return n.CLUSTER_BREAK.EXTEND}else if(121461===e)return n.CLUSTER_BREAK.EXTEND}else if(e<123628){if(e<122907){if(e<121505){if(e<121499){if(121476===e)return n.CLUSTER_BREAK.EXTEND}else if(121499<=e&&e<=121503)return n.CLUSTER_BREAK.EXTEND}else if(e<122880){if(121505<=e&&e<=121519)return n.CLUSTER_BREAK.EXTEND}else if(e<122888){if(122880<=e&&e<=122886)return n.CLUSTER_BREAK.EXTEND}else if(122888<=e&&e<=122904)return n.CLUSTER_BREAK.EXTEND}else if(e<123023){if(e<122915){if(122907<=e&&e<=122913)return n.CLUSTER_BREAK.EXTEND}else if(e<122918){if(122915<=e&&e<=122916)return n.CLUSTER_BREAK.EXTEND}else if(122918<=e&&e<=122922)return n.CLUSTER_BREAK.EXTEND}else if(e<123184){if(123023===e)return n.CLUSTER_BREAK.EXTEND}else if(e<123566){if(123184<=e&&e<=123190)return n.CLUSTER_BREAK.EXTEND}else if(123566===e)return n.CLUSTER_BREAK.EXTEND}else if(e<127995){if(e<125136){if(e<124140){if(123628<=e&&e<=123631)return n.CLUSTER_BREAK.EXTEND}else if(124140<=e&&e<=124143)return n.CLUSTER_BREAK.EXTEND}else if(e<125252){if(125136<=e&&e<=125142)return n.CLUSTER_BREAK.EXTEND}else if(e<127462){if(125252<=e&&e<=125258)return n.CLUSTER_BREAK.EXTEND}else if(127462<=e&&e<=127487)return n.CLUSTER_BREAK.REGIONAL_INDICATOR}else if(e<917632){if(e<917504){if(127995<=e&&e<=127999)return n.CLUSTER_BREAK.EXTEND}else if(e<917536){if(917504<=e&&e<=917535)return n.CLUSTER_BREAK.CONTROL}else if(917536<=e&&e<=917631)return n.CLUSTER_BREAK.EXTEND}else if(e<917760){if(917632<=e&&e<=917759)return n.CLUSTER_BREAK.CONTROL}else if(e<918e3){if(917760<=e&&e<=917999)return n.CLUSTER_BREAK.EXTEND}else if(918e3<=e&&e<=921599)return n.CLUSTER_BREAK.CONTROL;return n.CLUSTER_BREAK.OTHER}static getEmojiProperty(e){if(e<10160){if(e<9728){if(e<9e3){if(e<8482){if(e<8252){if(169===e||174===e)return n.EXTENDED_PICTOGRAPHIC}else if(8252===e||8265===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<8596){if(8482===e||8505===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<8617){if(8596<=e&&e<=8601)return n.EXTENDED_PICTOGRAPHIC}else if(e<8986){if(8617<=e&&e<=8618)return n.EXTENDED_PICTOGRAPHIC}else if(8986<=e&&e<=8987)return n.EXTENDED_PICTOGRAPHIC}else if(e<9410){if(e<9167){if(9e3===e||9096===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<9193){if(9167===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<9208){if(9193<=e&&e<=9203)return n.EXTENDED_PICTOGRAPHIC}else if(9208<=e&&e<=9210)return n.EXTENDED_PICTOGRAPHIC}else if(e<9654){if(e<9642){if(9410===e)return n.EXTENDED_PICTOGRAPHIC}else if(9642<=e&&e<=9643)return n.EXTENDED_PICTOGRAPHIC}else if(e<9664){if(9654===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<9723){if(9664===e)return n.EXTENDED_PICTOGRAPHIC}else if(9723<=e&&e<=9726)return n.EXTENDED_PICTOGRAPHIC}else if(e<10035){if(e<10004){if(e<9748){if(e<9735){if(9728<=e&&e<=9733)return n.EXTENDED_PICTOGRAPHIC}else if(9735<=e&&e<=9746)return n.EXTENDED_PICTOGRAPHIC}else if(e<9872){if(9748<=e&&e<=9861)return n.EXTENDED_PICTOGRAPHIC}else if(e<9992){if(9872<=e&&e<=9989)return n.EXTENDED_PICTOGRAPHIC}else if(9992<=e&&e<=10002)return n.EXTENDED_PICTOGRAPHIC}else if(e<10013){if(10004===e||10006===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<10017){if(10013===e)return n.EXTENDED_PICTOGRAPHIC}else if(10017===e||10024===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<10067){if(e<10055){if(e<10052){if(10035<=e&&e<=10036)return n.EXTENDED_PICTOGRAPHIC}else if(10052===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<10060){if(10055===e)return n.EXTENDED_PICTOGRAPHIC}else if(10060===e||10062===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<10083){if(e<10071){if(10067<=e&&e<=10069)return n.EXTENDED_PICTOGRAPHIC}else if(10071===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<10133){if(10083<=e&&e<=10087)return n.EXTENDED_PICTOGRAPHIC}else if(e<10145){if(10133<=e&&e<=10135)return n.EXTENDED_PICTOGRAPHIC}else if(10145===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<127489){if(e<12951){if(e<11035){if(e<10548){if(10160===e||10175===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<11013){if(10548<=e&&e<=10549)return n.EXTENDED_PICTOGRAPHIC}else if(11013<=e&&e<=11015)return n.EXTENDED_PICTOGRAPHIC}else if(e<11093){if(e<11088){if(11035<=e&&e<=11036)return n.EXTENDED_PICTOGRAPHIC}else if(11088===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<12336){if(11093===e)return n.EXTENDED_PICTOGRAPHIC}else if(12336===e||12349===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<127340){if(e<126976){if(12951===e||12953===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<127245){if(126976<=e&&e<=127231)return n.EXTENDED_PICTOGRAPHIC}else if(e<127279){if(127245<=e&&e<=127247)return n.EXTENDED_PICTOGRAPHIC}else if(127279===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<127374){if(e<127358){if(127340<=e&&e<=127345)return n.EXTENDED_PICTOGRAPHIC}else if(127358<=e&&e<=127359)return n.EXTENDED_PICTOGRAPHIC}else if(e<127377){if(127374===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<127405){if(127377<=e&&e<=127386)return n.EXTENDED_PICTOGRAPHIC}else if(127405<=e&&e<=127461)return n.EXTENDED_PICTOGRAPHIC}else if(e<128981){if(e<127561){if(e<127535){if(e<127514){if(127489<=e&&e<=127503)return n.EXTENDED_PICTOGRAPHIC}else if(127514===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<127538){if(127535===e)return n.EXTENDED_PICTOGRAPHIC}else if(e<127548){if(127538<=e&&e<=127546)return n.EXTENDED_PICTOGRAPHIC}else if(127548<=e&&e<=127551)return n.EXTENDED_PICTOGRAPHIC}else if(e<128326){if(e<128e3){if(127561<=e&&e<=127994)return n.EXTENDED_PICTOGRAPHIC}else if(128e3<=e&&e<=128317)return n.EXTENDED_PICTOGRAPHIC}else if(e<128640){if(128326<=e&&e<=128591)return n.EXTENDED_PICTOGRAPHIC}else if(e<128884){if(128640<=e&&e<=128767)return n.EXTENDED_PICTOGRAPHIC}else if(128884<=e&&e<=128895)return n.EXTENDED_PICTOGRAPHIC}else if(e<129198){if(e<129096){if(e<129036){if(128981<=e&&e<=129023)return n.EXTENDED_PICTOGRAPHIC}else if(129036<=e&&e<=129039)return n.EXTENDED_PICTOGRAPHIC}else if(e<129114){if(129096<=e&&e<=129103)return n.EXTENDED_PICTOGRAPHIC}else if(e<129160){if(129114<=e&&e<=129119)return n.EXTENDED_PICTOGRAPHIC}else if(129160<=e&&e<=129167)return n.EXTENDED_PICTOGRAPHIC}else if(e<129340){if(e<129292){if(129198<=e&&e<=129279)return n.EXTENDED_PICTOGRAPHIC}else if(129292<=e&&e<=129338)return n.EXTENDED_PICTOGRAPHIC}else if(e<129351){if(129340<=e&&e<=129349)return n.EXTENDED_PICTOGRAPHIC}else if(e<130048){if(129351<=e&&e<=129791)return n.EXTENDED_PICTOGRAPHIC}else if(130048<=e&&e<=131069)return n.EXTENDED_PICTOGRAPHIC;return n.CLUSTER_BREAK.OTHER}}Fc.default=Pi;var IE=se&&se.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jc,"__esModule",{value:!0});const UE=IE(Fc);jc.default=UE.default;var OE=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),KE=se&&se.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ME=se&&se.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&OE(t,e,r);return KE(t,e),t},NE=se&&se.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yr,"__esModule",{value:!0}),yr.validateLanguage=yr.parseLanguage=yr.b64UrlToUtf8=yr.utf8ToB64Url=yr.graphemeLen=yr.utf8Len=void 0;const VE=NE(jc),Eu=ME(Rp),jE=e=>(new TextEncoder).encode(e).byteLength;yr.utf8Len=jE;const FE=e=>(new VE.default).countGraphemes(e);yr.graphemeLen=FE;const $E=e=>Eu.toString(Eu.fromString(e,"utf8"),"base64url");yr.utf8ToB64Url=$E;const GE=e=>Eu.toString(Eu.fromString(e,"base64url"),"utf8");yr.b64UrlToUtf8=GE;const qE=e=>{const t=e.match(Sp);if(!t?.groups)return null;const r=t.groups;return{grandfathered:r.grandfathered,language:r.language,extlang:r.extlang,script:r.script,region:r.region,variant:r.variant,extension:r.extension,privateUse:r.privateUseA||r.privateUseB}};yr.parseLanguage=qE;const zE=e=>Sp.test(e);yr.validateLanguage=zE;const Sp=/^((?<grandfathered>(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))|((?<language>([A-Za-z]{2,3}(-(?<extlang>[A-Za-z]{3}(-[A-Za-z]{3}){0,2}))?)|[A-Za-z]{4}|[A-Za-z]{5,8})(-(?<script>[A-Za-z]{4}))?(-(?<region>[A-Za-z]{2}|[0-9]{3}))?(-(?<variant>[A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*(-(?<extension>[0-9A-WY-Za-wy-z](-[A-Za-z0-9]{2,8})+))*(-(?<privateUseA>x(-[A-Za-z0-9]{1,8})+))?)|(?<privateUseB>x(-[A-Za-z0-9]{1,8})+))$/;var Cp={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.didDocument=e.getServiceEndpoint=e.getNotifEndpoint=e.getFeedGenEndpoint=e.getPdsEndpoint=e.getSigningDidKey=e.getVerificationMaterial=e.getSigningKey=e.getHandle=e.getDid=e.isValidDidDoc=void 0;const t=os;e.isValidDidDoc=t=>e.didDocument.safeParse(t).success;e.getDid=e=>{const t=e.id;if("string"!=typeof t)throw new Error("No `id` on document");return t};e.getHandle=e=>{const t=e.alsoKnownAs;if(t)for(let e=0;e<t.length;e++){const r=t[e];if(r.startsWith("at://"))return r.slice(5)}};e.getSigningKey=t=>(0,e.getVerificationMaterial)(t,"atproto");e.getVerificationMaterial=(e,t)=>{const i=r(e,"verificationMethod",`#${t}`);if(i&&i.publicKeyMultibase)return{type:i.type,publicKeyMultibase:i.publicKeyMultibase}};e.getSigningDidKey=t=>{const r=(0,e.getSigningKey)(t);if(r)return`did:key:${r.publicKeyMultibase}`};e.getPdsEndpoint=t=>(0,e.getServiceEndpoint)(t,{id:"#atproto_pds",type:"AtprotoPersonalDataServer"});e.getFeedGenEndpoint=t=>(0,e.getServiceEndpoint)(t,{id:"#bsky_fg",type:"BskyFeedGenerator"});e.getNotifEndpoint=t=>(0,e.getServiceEndpoint)(t,{id:"#bsky_notif",type:"BskyNotificationService"});function r(e,t,r){const i=e[t];if(i)for(let t=0;t<i.length;t++){const o=i[t],n=o.id;if("#"===n[0]?n===r:n.length===e.id.length+r.length&&"#"===n[e.id.length]&&n.endsWith(r)&&n.startsWith(e.id))return o}}e.getServiceEndpoint=(e,t)=>{const o=r(e,"service",t.id);if(o&&(!t.type||o.type===t.type)&&"string"==typeof o.serviceEndpoint)return i(o.serviceEndpoint)};const i=e=>{if((e.startsWith("http://")||e.startsWith("https://"))&&o(e))return e},o=URL.canParse??(e=>{try{return new URL(e),!0}catch{return!1}}),n=t.z.object({id:t.z.string(),type:t.z.string(),controller:t.z.string(),publicKeyMultibase:t.z.string().optional()}),s=t.z.object({id:t.z.string(),type:t.z.string(),serviceEndpoint:t.z.union([t.z.string(),t.z.record(t.z.unknown())])});e.didDocument=t.z.object({id:t.z.string(),alsoKnownAs:t.z.array(t.z.string()).optional(),verificationMethod:t.z.array(n).optional(),service:t.z.array(s).optional()})}(Cp),function(e){var t=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=se&&se.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=se&&se.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(i,e,o);return r(i,e),i},o=se&&se.__exportStar||function(e,r){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(r,i)&&t(r,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.util=e.check=void 0,e.check=i(ri),e.util=i(As),o(_s,e),o(mp,e),o(As,e),o(Ca,e),o(yp,e),o(ws,e),o(_p,e),o(wp,e),o(yr,e),o(Cp,e)}(vi),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BlobRef=e.jsonBlobRef=e.untypedJsonBlobRef=e.typedJsonBlobRef=void 0;const t=vi,r=$s,i=os;e.typedJsonBlobRef=i.z.object({$type:i.z.literal("blob"),ref:t.schema.cid,mimeType:i.z.string(),size:i.z.number()}).strict(),e.untypedJsonBlobRef=i.z.object({cid:i.z.string(),mimeType:i.z.string()}).strict(),e.jsonBlobRef=i.z.union([e.typedJsonBlobRef,e.untypedJsonBlobRef]);class o{constructor(e,t,r,i){Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"mimeType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"original",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.original=i??{$type:"blob",ref:e,mimeType:t,size:r}}static asBlobRef(r){return t.check.is(r,e.jsonBlobRef)?o.fromJsonRef(r):null}static fromJsonRef(i){return t.check.is(i,e.typedJsonBlobRef)?new o(i.ref,i.mimeType,i.size):new o(r.CID.parse(i.cid),i.mimeType,-1,i)}ipld(){return{$type:"blob",ref:this.ref,mimeType:this.mimeType,size:this.size}}toJSON(){return(0,t.ipldToJson)(this.ipld())}}e.BlobRef=o}(Iu),Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.blob=ZE;const XE=Iu,HE=Rn;function ZE(e,t,r,i){return i&&i instanceof XE.BlobRef?{success:!0,value:i}:{success:!1,error:new HE.ValidationError(`${t} should be a blob ref`)}}var Ri={},Lr={},Lp={};!function(e){(()=>{var t={d:(e,r)=>{for(var i in r)t.o(r,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:r[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};function i(e,t){return void 0===t&&(t="-"),new RegExp("^(?!0{4}"+t+"0{2}"+t+"0{2})((?=[0-9]{4}"+t+"(((0[^2])|1[0-2])|02(?="+t+"(([0-1][0-9])|2[0-8])))"+t+"[0-9]{2})|(?=((([13579][26])|([2468][048])|(0[48]))0{2})|([0-9]{2}((((0|[2468])[48])|[2468][048])|([13579][26])))"+t+"02"+t+"29))([0-9]{4})"+t+"(?!((0[469])|11)"+t+"31)((0[1,3-9]|1[0-2])|(02(?!"+t+"3)))"+t+"(0[1-9]|[1-2][0-9]|3[0-1])$").test(e)}function o(e){var t=/\D/.exec(e);return t?t[0]:""}function n(e,t,r){void 0===t&&(t=":"),void 0===r&&(r=!1);var i=new RegExp("^([0-1]|2(?=([0-3])|4"+t+"00))[0-9]"+t+"[0-5][0-9]("+t+"([0-5]|6(?=0))[0-9])?(.[0-9]{1,9})?$");if(!r||!/[Z+\-]/.test(e))return i.test(e);if(/Z$/.test(e))return i.test(e.replace("Z",""));var n,s,a,d=e.includes("+"),c=e.split(/[+-]/),l=c[0],p=c[1];return i.test(l)&&(n=p,s=d,void 0===(a=o(p))&&(a=":"),new RegExp(s?"^(0(?!(2"+a+"4)|0"+a+"3)|1(?=([0-1]|2(?="+a+"[04])|[34](?="+a+"0))))([03469](?="+a+"[03])|[17](?="+a+"0)|2(?="+a+"[04])|5(?="+a+"[034])|8(?="+a+"[04]))"+a+"([03](?=0)|4(?=5))[05]$":"^(0(?=[^0])|1(?=[0-2]))([39](?="+a+"[03])|[0-24-8](?="+a+"00))"+a+"[03]0$").test(n))}function s(e){var t=e.split("T"),r=t[0],s=t[1],a=i(r,o(r));if(!s)return!1;var d,c=(d=s.match(/([^Z+\-\d])(?=\d+\1)/),Array.isArray(d)?d[0]:"");return a&&n(s,c,!0)}function a(e,t){return void 0===t&&(t="-"),new RegExp("^[0-9]{4}"+t+"(0(?=[^0])|1(?=[0-2]))[0-9]$").test(e)}t.r(r),t.d(r,{isValidDate:()=>i,isValidISODateString:()=>s,isValidTime:()=>n,isValidYearMonth:()=>a});var d=e;for(var c in r)d[c]=r[c];r.__esModule&&Object.defineProperty(d,"__esModule",{value:!0})})()}(Lp),Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.datetime=QE,Lr.uri=ev,Lr.atUri=tv,Lr.did=kp,Lr.handle=Dp,Lr.atIdentifier=rv,Lr.nsid=iv,Lr.cid=nv,Lr.language=sv,Lr.tid=av,Lr.recordKey=ov;const WE=Lp,YE=$s,Xr=Rn,Gs=as,JE=vi;function QE(e,t){try{if(!(0,WE.isValidISODateString)(t))throw new Error}catch{return{success:!1,error:new Xr.ValidationError(`${e} must be an valid atproto datetime (both RFC-3339 and ISO-8601)`)}}return{success:!0,value:t}}function ev(e,t){return null!==t.match(/^\w+:(?:\/\/)?[^\s/][^\s]*$/)?{success:!0,value:t}:{success:!1,error:new Xr.ValidationError(`${e} must be a uri`)}}function tv(e,t){try{(0,Gs.ensureValidAtUri)(t)}catch{return{success:!1,error:new Xr.ValidationError(`${e} must be a valid at-uri`)}}return{success:!0,value:t}}function kp(e,t){try{(0,Gs.ensureValidDid)(t)}catch{return{success:!1,error:new Xr.ValidationError(`${e} must be a valid did`)}}return{success:!0,value:t}}function Dp(e,t){try{(0,Gs.ensureValidHandle)(t)}catch{return{success:!1,error:new Xr.ValidationError(`${e} must be a valid handle`)}}return{success:!0,value:t}}function rv(e,t){if(t.startsWith("did:")){const r=kp(e,t);if(r.success)return r}else{const r=Dp(e,t);if(r.success)return r}return{success:!1,error:new Xr.ValidationError(`${e} must be a valid did or a handle`)}}function iv(e,t){try{(0,Gs.ensureValidNsid)(t)}catch{return{success:!1,error:new Xr.ValidationError(`${e} must be a valid nsid`)}}return{success:!0,value:t}}function nv(e,t){try{YE.CID.parse(t)}catch{return{success:!1,error:new Xr.ValidationError(`${e} must be a cid string`)}}return{success:!0,value:t}}function sv(e,t){return(0,JE.validateLanguage)(t)?{success:!0,value:t}:{success:!1,error:new Xr.ValidationError(`${e} must be a well-formed BCP 47 language tag`)}}function av(e,t){try{(0,Gs.ensureValidTid)(t)}catch{return{success:!1,error:new Xr.ValidationError(`${e} must be a valid TID (timestamp identifier)`)}}return{success:!0,value:t}}function ov(e,t){try{(0,Gs.ensureValidRecordKey)(t)}catch{return{success:!1,error:new Xr.ValidationError(`${e} must be a valid Record Key`)}}return{success:!0,value:t}}var lv=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),uv=se&&se.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),cv=se&&se.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&lv(t,e,r);return uv(t,e),t};Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.validate=fv,Ri.boolean=Pp,Ri.integer=Bp,Ri.string=Ip,Ri.bytes=Up,Ri.cidLink=Op,Ri.unknown=Kp;const Md=vi,dv=$s,Or=cv(Lr),ut=Rn;function fv(e,t,r,i){switch(r.type){case"boolean":return Pp(e,t,r,i);case"integer":return Bp(e,t,r,i);case"string":return Ip(e,t,r,i);case"bytes":return Up(e,t,r,i);case"cid-link":return Op(e,t,r,i);case"unknown":return Kp(e,t,r,i);default:return{success:!1,error:new ut.ValidationError(`Unexpected lexicon type: ${r.type}`)}}}function Pp(e,t,r,i){const o=typeof i;return"undefined"===o?"boolean"==typeof r.default?{success:!0,value:r.default}:{success:!1,error:new ut.ValidationError(`${t} must be a boolean`)}:"boolean"!==o?{success:!1,error:new ut.ValidationError(`${t} must be a boolean`)}:"boolean"==typeof r.const&&i!==r.const?{success:!1,error:new ut.ValidationError(`${t} must be ${r.const}`)}:{success:!0,value:i}}function Bp(e,t,r,i){return void 0===i?"number"==typeof r.default?{success:!0,value:r.default}:{success:!1,error:new ut.ValidationError(`${t} must be an integer`)}:Number.isInteger(i)?"number"==typeof r.const&&i!==r.const?{success:!1,error:new ut.ValidationError(`${t} must be ${r.const}`)}:Array.isArray(r.enum)&&!r.enum.includes(i)?{success:!1,error:new ut.ValidationError(`${t} must be one of (${r.enum.join("|")})`)}:"number"==typeof r.maximum&&i>r.maximum?{success:!1,error:new ut.ValidationError(`${t} can not be greater than ${r.maximum}`)}:"number"==typeof r.minimum&&i<r.minimum?{success:!1,error:new ut.ValidationError(`${t} can not be less than ${r.minimum}`)}:{success:!0,value:i}:{success:!1,error:new ut.ValidationError(`${t} must be an integer`)}}function Ip(e,t,r,i){if(typeof i>"u")return"string"==typeof r.default?{success:!0,value:r.default}:{success:!1,error:new ut.ValidationError(`${t} must be a string`)};if("string"!=typeof i)return{success:!1,error:new ut.ValidationError(`${t} must be a string`)};if("string"==typeof r.const&&i!==r.const)return{success:!1,error:new ut.ValidationError(`${t} must be ${r.const}`)};if(Array.isArray(r.enum)&&!r.enum.includes(i))return{success:!1,error:new ut.ValidationError(`${t} must be one of (${r.enum.join("|")})`)};if("number"==typeof r.minLength||"number"==typeof r.maxLength){if("number"==typeof r.minLength&&3*i.length<r.minLength)return{success:!1,error:new ut.ValidationError(`${t} must not be shorter than ${r.minLength} characters`)};let e=!1;if(typeof r.minLength>"u"&&"number"==typeof r.maxLength&&3*i.length<=r.maxLength&&(e=!0),!e){const e=(0,Md.utf8Len)(i);if("number"==typeof r.maxLength&&e>r.maxLength)return{success:!1,error:new ut.ValidationError(`${t} must not be longer than ${r.maxLength} characters`)};if("number"==typeof r.minLength&&e<r.minLength)return{success:!1,error:new ut.ValidationError(`${t} must not be shorter than ${r.minLength} characters`)}}}if("number"==typeof r.maxGraphemes||"number"==typeof r.minGraphemes){let e=!1,o=!1;if("number"==typeof r.maxGraphemes&&(e=!(i.length<=r.maxGraphemes)),"number"==typeof r.minGraphemes){if(i.length<r.minGraphemes)return{success:!1,error:new ut.ValidationError(`${t} must not be shorter than ${r.minGraphemes} graphemes`)};o=!0}if(e||o){const e=(0,Md.graphemeLen)(i);if("number"==typeof r.maxGraphemes&&e>r.maxGraphemes)return{success:!1,error:new ut.ValidationError(`${t} must not be longer than ${r.maxGraphemes} graphemes`)};if("number"==typeof r.minGraphemes&&e<r.minGraphemes)return{success:!1,error:new ut.ValidationError(`${t} must not be shorter than ${r.minGraphemes} graphemes`)}}}if("string"==typeof r.format)switch(r.format){case"datetime":return Or.datetime(t,i);case"uri":return Or.uri(t,i);case"at-uri":return Or.atUri(t,i);case"did":return Or.did(t,i);case"handle":return Or.handle(t,i);case"at-identifier":return Or.atIdentifier(t,i);case"nsid":return Or.nsid(t,i);case"cid":return Or.cid(t,i);case"language":return Or.language(t,i);case"tid":return Or.tid(t,i);case"record-key":return Or.recordKey(t,i)}return{success:!0,value:i}}function Up(e,t,r,i){return i&&i instanceof Uint8Array?"number"==typeof r.maxLength&&i.byteLength>r.maxLength?{success:!1,error:new ut.ValidationError(`${t} must not be larger than ${r.maxLength} bytes`)}:"number"==typeof r.minLength&&i.byteLength<r.minLength?{success:!1,error:new ut.ValidationError(`${t} must not be smaller than ${r.minLength} bytes`)}:{success:!0,value:i}:{success:!1,error:new ut.ValidationError(`${t} must be a byte array`)}}function Op(e,t,r,i){return null===dv.CID.asCID(i)?{success:!1,error:new ut.ValidationError(`${t} must be a CID`)}:{success:!0,value:i}}function Kp(e,t,r,i){return i&&"object"==typeof i?{success:!0,value:i}:{success:!1,error:new ut.ValidationError(`${t} must be an object`)}}Object.defineProperty(An,"__esModule",{value:!0}),An.validate=Mp,An.array=Np,An.object=zc,An.validateOneOf=Xc;const ii=Rn,Lc=ls,pv=Mc,hs=Ri;function Mp(e,t,r,i){switch(r.type){case"boolean":return(0,hs.boolean)(e,t,r,i);case"integer":return(0,hs.integer)(e,t,r,i);case"string":return(0,hs.string)(e,t,r,i);case"bytes":return(0,hs.bytes)(e,t,r,i);case"cid-link":return(0,hs.cidLink)(e,t,r,i);case"unknown":return(0,hs.unknown)(e,t,r,i);case"object":return zc(e,t,r,i);case"array":return Np(e,t,r,i);case"blob":return(0,pv.blob)(e,t,r,i);default:return{success:!1,error:new ii.ValidationError(`Unexpected lexicon type: ${r.type}`)}}}function Np(e,t,r,i){if(!Array.isArray(i))return{success:!1,error:new ii.ValidationError(`${t} must be an array`)};if("number"==typeof r.maxLength&&i.length>r.maxLength)return{success:!1,error:new ii.ValidationError(`${t} must not have more than ${r.maxLength} elements`)};if("number"==typeof r.minLength&&i.length<r.minLength)return{success:!1,error:new ii.ValidationError(`${t} must not have fewer than ${r.minLength} elements`)};const o=r.items;for(let r=0;r<i.length;r++){const n=Xc(e,`${t}/${r}`,o,i[r]);if(!n.success)return n}return{success:!0,value:i}}function zc(e,t,r,i){if(!i||"object"!=typeof i)return{success:!1,error:new ii.ValidationError(`${t} must be an object`)};const o=new Set(r.required),n=new Set(r.nullable);let s=i;if("object"==typeof r.properties)for(const a in r.properties){if(null===i[a]&&n.has(a))continue;const d=r.properties[a];if(typeof i[a]>"u"&&!o.has(a)){if("integer"!==d.type&&"boolean"!==d.type&&"string"!==d.type)continue;if(typeof d.default>"u")continue}const c=Xc(e,`${t}/${a}`,d,i[a]),l=c.success?c.value:i[a],p=typeof l>"u";if(p&&o.has(a))return{success:!1,error:new ii.ValidationError(`${t} must have the property "${a}"`)};if(!p&&!c.success)return c;l!==i[a]&&(s===i&&(s={...i}),s[a]=l)}return{success:!0,value:s}}function Xc(e,t,r,i,o=!1){let n,s;if("union"===r.type){if(!(0,ii.isDiscriminatedObject)(i))return{success:!1,error:new ii.ValidationError(`${t} must be an object which includes the "$type" property`)};if(!hv(r.refs,i.$type))return r.closed?{success:!1,error:new ii.ValidationError(`${t} $type must be one of ${r.refs.join(", ")}`)}:{success:!0,value:i};s=(0,Lc.toConcreteTypes)(e,{type:"ref",ref:i.$type})}else s=(0,Lc.toConcreteTypes)(e,r);for(const r of s){const s=o?zc(e,t,r,i):Mp(e,t,r,i);if(s.success)return s;n??(n=s.error)}return s.length>1?{success:!1,error:new ii.ValidationError(`${t} did not match any of the expected definitions`)}:{success:!1,error:n}}const hv=(e,t)=>{const r=(0,Lc.toLexUri)(t);return!!e.includes(r)||(r.endsWith("#main")?e.includes(r.replace("#main","")):e.includes(r+"#main"))};var Hc={},mv=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),yv=se&&se.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),bv=se&&se.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&mv(t,e,r);return yv(t,e),t};Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.params=vv;const gv=Rn,xv=bv(Ri),Ev=An;function vv(e,t,r,i){const o=i&&"object"==typeof i?i:{},n=new Set(r.required??[]);let s=o;if("object"==typeof r.properties)for(const i in r.properties){const a=r.properties[i],d="array"===a.type?(0,Ev.array)(e,i,a,o[i]):xv.validate(e,i,a,o[i]),c=d.success?d.value:o[i],l=typeof c>"u";if(l&&n.has(i))return{success:!1,error:new gv.ValidationError(`${t} must have the property "${i}"`)};if(!l&&!d.success)return d;c!==o[i]&&(s===o&&(s={...o}),s[i]=c)}return{success:!0,value:s}}Object.defineProperty(us,"__esModule",{value:!0}),us.assertValidRecord=Av,us.assertValidXrpcParams=_v,us.assertValidXrpcInput=wv,us.assertValidXrpcOutput=Tv,us.assertValidXrpcMessage=Sv;const Vp=An,Rv=Hc;function Av(e,t,r){const i=(0,Vp.object)(e,"Record",t.record,r);if(!i.success)throw i.error;return i.value}function _v(e,t,r){if(t.parameters){const i=(0,Rv.params)(e,"Params",t.parameters,r);if(!i.success)throw i.error;return i.value}}function wv(e,t,r){if(t.input?.schema)return Zc(e,"Input",t.input.schema,r,!0)}function Tv(e,t,r){if(t.output?.schema)return Zc(e,"Output",t.output.schema,r,!0)}function Sv(e,t,r){if(t.message?.schema)return Zc(e,"Message",t.message.schema,r,!0)}function Zc(e,t,r,i,o=!1){const n=(0,Vp.validateOneOf)(e,t,r,i,o);if(!n.success)throw n.error;return n.value}var Cv=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),Lv=se&&se.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),kv=se&&se.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&Cv(t,e,r);return Lv(t,e),t};Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.Lexicons=void 0;const Jr=Rn,ea=us,Yt=ls,Nd=kv(An);class Dv{constructor(e){if(Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"defs",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),e)for(const t of e)this.add(t)}[Symbol.iterator](){return this.docs.values()}add(e){const t=(0,Yt.toLexUri)(e.id);if(this.docs.has(t))throw new Error(`${t} has already been registered`);kc(e,t),this.docs.set(t,e);for(const[t,r]of Vd(e))this.defs.set(t,r)}remove(e){e=(0,Yt.toLexUri)(e);const t=this.docs.get(e);if(!t)throw new Error(`Unable to remove "${e}": does not exist`);for(const[e,r]of Vd(t))this.defs.delete(e);this.docs.delete(e)}get(e){return e=(0,Yt.toLexUri)(e),this.docs.get(e)}getDef(e){return e=(0,Yt.toLexUri)(e),this.defs.get(e)}getDefOrThrow(e,t){const r=this.getDef(e);if(!r)throw new Jr.LexiconDefNotFoundError(`Lexicon not found: ${e}`);if(t&&!t.includes(r.type))throw new Jr.InvalidLexiconError(`Not a ${t.join(" or ")} lexicon: ${e}`);return r}validate(e,t){e=(0,Yt.toLexUri)(e);const r=this.getDefOrThrow(e,["record","object"]);if(!(0,Jr.isObj)(t))throw new Jr.ValidationError("Value must be an object");if("record"===r.type)return Nd.object(this,"Record",r.record,t);if("object"===r.type)return Nd.object(this,"Object",r,t);throw new Jr.InvalidLexiconError("Definition must be a record or object")}assertValidRecord(e,t){e=(0,Yt.toLexUri)(e);const r=this.getDefOrThrow(e,["record"]);if(!(0,Jr.isObj)(t))throw new Jr.ValidationError("Record must be an object");if(!(0,Jr.hasProp)(t,"$type")||"string"!=typeof t.$type)throw new Jr.ValidationError("Record/$type must be a string");const i=t.$type||"";if((0,Yt.toLexUri)(i)!==e)throw new Jr.ValidationError(`Invalid $type: must be ${e}, got ${i}`);return(0,ea.assertValidRecord)(this,r,t)}assertValidXrpcParams(e,t){e=(0,Yt.toLexUri)(e);const r=this.getDefOrThrow(e,["query","procedure","subscription"]);return(0,ea.assertValidXrpcParams)(this,r,t)}assertValidXrpcInput(e,t){e=(0,Yt.toLexUri)(e);const r=this.getDefOrThrow(e,["procedure"]);return(0,ea.assertValidXrpcInput)(this,r,t)}assertValidXrpcOutput(e,t){e=(0,Yt.toLexUri)(e);const r=this.getDefOrThrow(e,["query","procedure"]);return(0,ea.assertValidXrpcOutput)(this,r,t)}assertValidXrpcMessage(e,t){e=(0,Yt.toLexUri)(e);const r=this.getDefOrThrow(e,["subscription"]);return(0,ea.assertValidXrpcMessage)(this,r,t)}resolveLexUri(e,t){return e=(0,Yt.toLexUri)(e),(0,Yt.toLexUri)(t,e)}}function*Vd(e){for(const t in e.defs)yield[`lex:${e.id}#${t}`,e.defs[t]],"main"===t&&(yield[`lex:${e.id}`,e.defs[t]])}function kc(e,t){for(const r in e)"ref"===e.type?e.ref=(0,Yt.toLexUri)(e.ref,t):"union"===e.type?e.refs=e.refs.map((e=>(0,Yt.toLexUri)(e,t))):Array.isArray(e[r])?e[r]=e[r].map((e=>"string"==typeof e?e.startsWith("#")?(0,Yt.toLexUri)(e,t):e:e&&"object"==typeof e?kc(e,t):e)):e[r]&&"object"==typeof e[r]&&(e[r]=kc(e[r],t));return e}Bu.Lexicons=Dv;var jp={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.jsonStringToLex=e.jsonToLex=e.stringifyLex=e.lexToJson=e.ipldToLex=e.lexToIpld=void 0;const t=vi,r=$s,i=Iu;e.lexToIpld=t=>{if(Array.isArray(t))return t.map((t=>(0,e.lexToIpld)(t)));if(t&&"object"==typeof t){if(t instanceof i.BlobRef)return t.original;if(r.CID.asCID(t)||t instanceof Uint8Array)return t;const o={};for(const r of Object.keys(t))o[r]=(0,e.lexToIpld)(t[r]);return o}return t};e.ipldToLex=o=>{if(Array.isArray(o))return o.map((t=>(0,e.ipldToLex)(t)));if(o&&"object"==typeof o){if(("blob"===o.$type||"string"==typeof o.cid&&"string"==typeof o.mimeType)&&t.check.is(o,i.jsonBlobRef))return i.BlobRef.fromJsonRef(o);if(r.CID.asCID(o)||o instanceof Uint8Array)return o;const n={};for(const t of Object.keys(o))n[t]=(0,e.ipldToLex)(o[t]);return n}return o};e.lexToJson=r=>(0,t.ipldToJson)((0,e.lexToIpld)(r));e.stringifyLex=t=>JSON.stringify((0,e.lexToJson)(t));e.jsonToLex=r=>(0,e.ipldToLex)((0,t.jsonToIpld)(r));e.jsonStringToLex=t=>(0,e.jsonToLex)(JSON.parse(t))}(jp),function(e){var t=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=se&&se.__exportStar||function(e,r){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(r,i)&&t(r,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Rn,e),r(Bu,e),r(Iu,e),r(jp,e)}(wa);var Fp={};Object.defineProperty(Fp,"__esModule",{value:!0});var ka={};Object.defineProperty(ka,"__esModule",{value:!0}),ka.BSKY_LABELER_DID=void 0,ka.BSKY_LABELER_DID="did:plc:ar7c4by46qjdydhdevvrndac";var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.validateSavedFeed=Nr.getSavedFeedType=Nr.savedFeedsToUriArrays=Nr.sanitizeMutedWordValue=void 0;const $p=as,Pv=vi;function Bv(e){return e.trim().replace(/^#(?!\ufe0f)/,"").replace(/[\r\n\u00AD\u2060\u200D\u200C\u200B]+/,"")}function Iv(e){const t=[],r=[];for(const i of e)i.pinned&&t.push(i.value),r.push(i.value);return{pinned:t,saved:r}}function Uv(e){switch(new $p.AtUri(e).collection){case"app.bsky.feed.generator":return"feed";case"app.bsky.graph.list":return"list";default:return"unknown"}}function Ov(e){if(new Pv.TID(e.id),["feed","list"].includes(e.type)){const t=new $p.AtUri(e.value),r="app.bsky.feed.generator"===t.collection,i="app.bsky.graph.list"===t.collection;if("feed"===e.type&&!r)throw new Error(`Saved feed of type 'feed' must be a feed, got ${t.collection}`);if("list"===e.type&&!i)throw new Error(`Saved feed of type 'list' must be a list, got ${t.collection}`)}}Nr.sanitizeMutedWordValue=Bv,Nr.savedFeedsToUriArrays=Iv,Nr.getSavedFeedType=Uv,Nr.validateSavedFeed=Ov;var x={},G={},Ou={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.XRPCInvalidResponseError=e.XRPCError=e.XRPCResponse=e.ResponseTypeStrings=e.ResponseTypeNames=e.ResponseType=e.errorResponseBody=void 0;const t=os;var r,i;e.errorResponseBody=t.z.object({error:t.z.string().optional(),message:t.z.string().optional()}),(i=r||(e.ResponseType=r={}))[i.Unknown=1]="Unknown",i[i.InvalidResponse=2]="InvalidResponse",i[i.Success=200]="Success",i[i.InvalidRequest=400]="InvalidRequest",i[i.AuthRequired=401]="AuthRequired",i[i.Forbidden=403]="Forbidden",i[i.XRPCNotSupported=404]="XRPCNotSupported",i[i.PayloadTooLarge=413]="PayloadTooLarge",i[i.RateLimitExceeded=429]="RateLimitExceeded",i[i.InternalServerError=500]="InternalServerError",i[i.MethodNotImplemented=501]="MethodNotImplemented",i[i.UpstreamFailure=502]="UpstreamFailure",i[i.NotEnoughResources=503]="NotEnoughResources",i[i.UpstreamTimeout=504]="UpstreamTimeout",e.ResponseTypeNames={[r.InvalidResponse]:"InvalidResponse",[r.Success]:"Success",[r.InvalidRequest]:"InvalidRequest",[r.AuthRequired]:"AuthenticationRequired",[r.Forbidden]:"Forbidden",[r.XRPCNotSupported]:"XRPCNotSupported",[r.PayloadTooLarge]:"PayloadTooLarge",[r.RateLimitExceeded]:"RateLimitExceeded",[r.InternalServerError]:"InternalServerError",[r.MethodNotImplemented]:"MethodNotImplemented",[r.UpstreamFailure]:"UpstreamFailure",[r.NotEnoughResources]:"NotEnoughResources",[r.UpstreamTimeout]:"UpstreamTimeout"},e.ResponseTypeStrings={[r.InvalidResponse]:"Invalid Response",[r.Success]:"Success",[r.InvalidRequest]:"Invalid Request",[r.AuthRequired]:"Authentication Required",[r.Forbidden]:"Forbidden",[r.XRPCNotSupported]:"XRPC Not Supported",[r.PayloadTooLarge]:"Payload Too Large",[r.RateLimitExceeded]:"Rate Limit Exceeded",[r.InternalServerError]:"Internal Server Error",[r.MethodNotImplemented]:"Method Not Implemented",[r.UpstreamFailure]:"Upstream Failure",[r.NotEnoughResources]:"Not Enough Resources",[r.UpstreamTimeout]:"Upstream Timeout"};e.XRPCResponse=class{constructor(e,t){Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"success",{enumerable:!0,configurable:!0,writable:!0,value:!0})}};class o extends Error{constructor(t,r,i,o){super(i||r||e.ResponseTypeStrings[t]),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"success",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.error||(this.error=e.ResponseTypeNames[t]),this.headers=o}}e.XRPCError=o;e.XRPCInvalidResponseError=class extends o{constructor(t,i,o){super(r.InvalidResponse,e.ResponseTypeStrings[r.InvalidResponse],"The server gave an invalid response and may be out of date."),Object.defineProperty(this,"lexiconNsid",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"validationError",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"responseBody",{enumerable:!0,configurable:!0,writable:!0,value:o})}}}(Ou);var Mi={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.httpResponseBodyParse=Ot.httpResponseCodeToEnum=Ot.encodeMethodCallBody=Ot.constructMethodCallHeaders=Ot.normalizeHeaders=Ot.encodeQueryParam=Ot.constructMethodCallUri=Ot.getMethodSchemaHTTPMethod=void 0;const Gp=wa,ti=Ou;function Kv(e){return"procedure"===e.type?"post":"get"}function Mv(e,t,r,i){const o=new URL(r);if(o.pathname=`/xrpc/${e}`,i)for(const[e,r]of Object.entries(i)){const i=t.parameters?.properties?.[e];if(!i)throw new Error(`Invalid query parameter: ${e}`);void 0!==r&&("array"===i.type?[].concat(r).forEach((t=>{o.searchParams.append(e,Dc(i.items.type,t))})):o.searchParams.set(e,Dc(i.type,r)))}return o.toString()}function Dc(e,t){if("string"===e||"unknown"===e)return String(t);if("float"===e)return String(Number(t));if("integer"===e)return String(0|Number(t));if("boolean"===e)return t?"true":"false";if("datetime"===e)return t instanceof Date?t.toISOString():String(t);throw new Error(`Unsupported query param type: ${e}`)}function Nv(e){const t={};for(const[r,i]of Object.entries(e))t[r.toLowerCase()]=i;return t}function Vv(e,t,r){const i=r?.headers||{};return"procedure"===e.type&&(r?.encoding&&(i["Content-Type"]=r.encoding),t&&"object"==typeof t&&(i["Content-Type"]||(i["Content-Type"]="application/json"))),i}function jv(e,t){if(e["content-type"]&&!(typeof t>"u"))return t instanceof ArrayBuffer?t:e["content-type"].startsWith("text/")?(new TextEncoder).encode(t.toString()):e["content-type"].startsWith("application/json")?(new TextEncoder).encode((0,Gp.stringifyLex)(t)):t}function Fv(e){let t;return t=e in ti.ResponseType?e:e>=100&&e<200?ti.ResponseType.XRPCNotSupported:e>=200&&e<300?ti.ResponseType.Success:e>=300&&e<400?ti.ResponseType.XRPCNotSupported:e>=400&&e<500?ti.ResponseType.InvalidRequest:ti.ResponseType.InternalServerError,t}function $v(e,t){if(e){if(e.includes("application/json")&&t?.byteLength)try{const e=(new TextDecoder).decode(t);return(0,Gp.jsonStringToLex)(e)}catch(e){throw new ti.XRPCError(ti.ResponseType.InvalidResponse,`Failed to parse response body: ${String(e)}`)}if(e.startsWith("text/")&&t?.byteLength)try{return(new TextDecoder).decode(t)}catch(e){throw new ti.XRPCError(ti.ResponseType.InvalidResponse,`Failed to parse response body: ${String(e)}`)}}return t instanceof ArrayBuffer?new Uint8Array(t):t}Ot.getMethodSchemaHTTPMethod=Kv,Ot.constructMethodCallUri=Mv,Ot.encodeQueryParam=Dc,Ot.normalizeHeaders=Nv,Ot.constructMethodCallHeaders=Vv,Ot.encodeMethodCallBody=jv,Ot.httpResponseCodeToEnum=Fv,Ot.httpResponseBodyParse=$v,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.defaultFetchHandler=Mi.ServiceClient=Mi.Client=void 0;const qp=wa,Un=Ot,un=Ou;class Gv{constructor(){Object.defineProperty(this,"fetch",{enumerable:!0,configurable:!0,writable:!0,value:Xp}),Object.defineProperty(this,"lex",{enumerable:!0,configurable:!0,writable:!0,value:new qp.Lexicons})}async call(e,t,r,i,o){return this.service(e).call(t,r,i,o)}service(e){return new zp(this,e)}addLexicon(e){this.lex.add(e)}addLexicons(e){for(const t of e)this.addLexicon(t)}removeLexicon(e){this.lex.remove(e)}}Mi.Client=Gv;class zp{constructor(e,t){Object.defineProperty(this,"baseClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uri",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this.baseClient=e,this.uri="string"==typeof t?new URL(t):t}setHeader(e,t){this.headers[e]=t}unsetHeader(e){delete this.headers[e]}async call(e,t,r,i){const o=this.baseClient.lex.getDefOrThrow(e);if(!o||"query"!==o.type&&"procedure"!==o.type)throw new Error(`Invalid lexicon: ${e}. Must be a query or procedure.`);const n=(0,Un.getMethodSchemaHTTPMethod)(o),s=(0,Un.constructMethodCallUri)(e,o,this.uri,t),a=(0,Un.constructMethodCallHeaders)(o,r,{headers:{...this.headers,...i?.headers},encoding:i?.encoding}),d=await this.baseClient.fetch(s,n,a,r),c=(0,Un.httpResponseCodeToEnum)(d.status);if(c===un.ResponseType.Success){try{this.baseClient.lex.assertValidXrpcOutput(e,d.body)}catch(t){throw t instanceof qp.ValidationError?new un.XRPCInvalidResponseError(e,t,d.body):t}return new un.XRPCResponse(d.body,d.headers)}throw d.body&&qv(d.body)?new un.XRPCError(c,d.body.error,d.body.message,d.headers):new un.XRPCError(c)}}async function Xp(e,t,r,i){try{const o=(0,Un.normalizeHeaders)(r),n={method:t,headers:o,body:(0,Un.encodeMethodCallBody)(o,i),duplex:"half"},s=await fetch(e,n),a=await s.arrayBuffer();return{status:s.status,headers:Object.fromEntries(s.headers.entries()),body:(0,Un.httpResponseBodyParse)(s.headers.get("content-type"),a)}}catch(e){throw new un.XRPCError(un.ResponseType.Unknown,String(e))}}function qv(e){return un.errorResponseBody.safeParse(e).success}Mi.ServiceClient=zp,Mi.defaultFetchHandler=Xp,function(e){var t=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=se&&se.__exportStar||function(e,r){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(r,i)&&t(r,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ou,e),r(Mi,e);const i=new Mi.Client;e.default=i}(G);var Le={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ids=e.lexicons=e.schemas=e.schemaDict=void 0;const t=wa;e.schemaDict={ComAtprotoAdminDefs:{lexicon:1,id:"com.atproto.admin.defs",defs:{statusAttr:{type:"object",required:["applied"],properties:{applied:{type:"boolean"},ref:{type:"string"}}},accountView:{type:"object",required:["did","handle","indexedAt"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},email:{type:"string"},relatedRecords:{type:"array",items:{type:"unknown"}},indexedAt:{type:"string",format:"datetime"},invitedBy:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"},invites:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"}},invitesDisabled:{type:"boolean"},emailConfirmedAt:{type:"string",format:"datetime"},inviteNote:{type:"string"},deactivatedAt:{type:"string",format:"datetime"}}},repoRef:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}},repoBlobRef:{type:"object",required:["did","cid"],properties:{did:{type:"string",format:"did"},cid:{type:"string",format:"cid"},recordUri:{type:"string",format:"at-uri"}}}}},ComAtprotoAdminDeleteAccount:{lexicon:1,id:"com.atproto.admin.deleteAccount",defs:{main:{type:"procedure",description:"Delete a user account as an administrator.",input:{encoding:"application/json",schema:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}}}}}},ComAtprotoAdminDisableAccountInvites:{lexicon:1,id:"com.atproto.admin.disableAccountInvites",defs:{main:{type:"procedure",description:"Disable an account from receiving new invite codes, but does not invalidate existing codes.",input:{encoding:"application/json",schema:{type:"object",required:["account"],properties:{account:{type:"string",format:"did"},note:{type:"string",description:"Optional reason for disabled invites."}}}}}}},ComAtprotoAdminDisableInviteCodes:{lexicon:1,id:"com.atproto.admin.disableInviteCodes",defs:{main:{type:"procedure",description:"Disable some set of codes and/or all codes associated with a set of users.",input:{encoding:"application/json",schema:{type:"object",properties:{codes:{type:"array",items:{type:"string"}},accounts:{type:"array",items:{type:"string"}}}}}}}},ComAtprotoAdminEnableAccountInvites:{lexicon:1,id:"com.atproto.admin.enableAccountInvites",defs:{main:{type:"procedure",description:"Re-enable an account's ability to receive invite codes.",input:{encoding:"application/json",schema:{type:"object",required:["account"],properties:{account:{type:"string",format:"did"},note:{type:"string",description:"Optional reason for enabled invites."}}}}}}},ComAtprotoAdminGetAccountInfo:{lexicon:1,id:"com.atproto.admin.getAccountInfo",defs:{main:{type:"query",description:"Get details about an account.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#accountView"}}}}},ComAtprotoAdminGetAccountInfos:{lexicon:1,id:"com.atproto.admin.getAccountInfos",defs:{main:{type:"query",description:"Get details about some accounts.",parameters:{type:"params",required:["dids"],properties:{dids:{type:"array",items:{type:"string",format:"did"}}}},output:{encoding:"application/json",schema:{type:"object",required:["infos"],properties:{infos:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#accountView"}}}}}}}},ComAtprotoAdminGetInviteCodes:{lexicon:1,id:"com.atproto.admin.getInviteCodes",defs:{main:{type:"query",description:"Get an admin view of invite codes.",parameters:{type:"params",properties:{sort:{type:"string",knownValues:["recent","usage"],default:"recent"},limit:{type:"integer",minimum:1,maximum:500,default:100},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["codes"],properties:{cursor:{type:"string"},codes:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"}}}}}}}},ComAtprotoAdminGetSubjectStatus:{lexicon:1,id:"com.atproto.admin.getSubjectStatus",defs:{main:{type:"query",description:"Get the service-specific admin status of a subject (account, record, or blob).",parameters:{type:"params",properties:{did:{type:"string",format:"did"},uri:{type:"string",format:"at-uri"},blob:{type:"string",format:"cid"}}},output:{encoding:"application/json",schema:{type:"object",required:["subject"],properties:{subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef","lex:com.atproto.admin.defs#repoBlobRef"]},takedown:{type:"ref",ref:"lex:com.atproto.admin.defs#statusAttr"},deactivated:{type:"ref",ref:"lex:com.atproto.admin.defs#statusAttr"}}}}}}},ComAtprotoAdminSearchAccounts:{lexicon:1,id:"com.atproto.admin.searchAccounts",defs:{main:{type:"query",description:"Get list of accounts that matches your search query.",parameters:{type:"params",properties:{email:{type:"string"},cursor:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50}}},output:{encoding:"application/json",schema:{type:"object",required:["accounts"],properties:{cursor:{type:"string"},accounts:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#accountView"}}}}}}}},ComAtprotoAdminSendEmail:{lexicon:1,id:"com.atproto.admin.sendEmail",defs:{main:{type:"procedure",description:"Send email to a user's account email address.",input:{encoding:"application/json",schema:{type:"object",required:["recipientDid","content","senderDid"],properties:{recipientDid:{type:"string",format:"did"},content:{type:"string"},subject:{type:"string"},senderDid:{type:"string",format:"did"},comment:{type:"string",description:"Additional comment by the sender that won't be used in the email itself but helpful to provide more context for moderators/reviewers"}}}},output:{encoding:"application/json",schema:{type:"object",required:["sent"],properties:{sent:{type:"boolean"}}}}}}},ComAtprotoAdminUpdateAccountEmail:{lexicon:1,id:"com.atproto.admin.updateAccountEmail",defs:{main:{type:"procedure",description:"Administrative action to update an account's email.",input:{encoding:"application/json",schema:{type:"object",required:["account","email"],properties:{account:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},email:{type:"string"}}}}}}},ComAtprotoAdminUpdateAccountHandle:{lexicon:1,id:"com.atproto.admin.updateAccountHandle",defs:{main:{type:"procedure",description:"Administrative action to update an account's handle.",input:{encoding:"application/json",schema:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"}}}}}}},ComAtprotoAdminUpdateAccountPassword:{lexicon:1,id:"com.atproto.admin.updateAccountPassword",defs:{main:{type:"procedure",description:"Update the password for a user account as an administrator.",input:{encoding:"application/json",schema:{type:"object",required:["did","password"],properties:{did:{type:"string",format:"did"},password:{type:"string"}}}}}}},ComAtprotoAdminUpdateSubjectStatus:{lexicon:1,id:"com.atproto.admin.updateSubjectStatus",defs:{main:{type:"procedure",description:"Update the service-specific admin status of a subject (account, record, or blob).",input:{encoding:"application/json",schema:{type:"object",required:["subject"],properties:{subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef","lex:com.atproto.admin.defs#repoBlobRef"]},takedown:{type:"ref",ref:"lex:com.atproto.admin.defs#statusAttr"},deactivated:{type:"ref",ref:"lex:com.atproto.admin.defs#statusAttr"}}}},output:{encoding:"application/json",schema:{type:"object",required:["subject"],properties:{subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef","lex:com.atproto.admin.defs#repoBlobRef"]},takedown:{type:"ref",ref:"lex:com.atproto.admin.defs#statusAttr"}}}}}}},ComAtprotoIdentityGetRecommendedDidCredentials:{lexicon:1,id:"com.atproto.identity.getRecommendedDidCredentials",defs:{main:{type:"query",description:"Describe the credentials that should be included in the DID doc of an account that is migrating to this service.",output:{encoding:"application/json",schema:{type:"object",properties:{rotationKeys:{description:"Recommended rotation keys for PLC dids. Should be undefined (or ignored) for did:webs.",type:"array",items:{type:"string"}},alsoKnownAs:{type:"array",items:{type:"string"}},verificationMethods:{type:"unknown"},services:{type:"unknown"}}}}}}},ComAtprotoIdentityRequestPlcOperationSignature:{lexicon:1,id:"com.atproto.identity.requestPlcOperationSignature",defs:{main:{type:"procedure",description:"Request an email with a code to in order to request a signed PLC operation. Requires Auth."}}},ComAtprotoIdentityResolveHandle:{lexicon:1,id:"com.atproto.identity.resolveHandle",defs:{main:{type:"query",description:"Resolves a handle (domain name) to a DID.",parameters:{type:"params",required:["handle"],properties:{handle:{type:"string",format:"handle",description:"The handle to resolve."}}},output:{encoding:"application/json",schema:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}}}}}},ComAtprotoIdentitySignPlcOperation:{lexicon:1,id:"com.atproto.identity.signPlcOperation",defs:{main:{type:"procedure",description:"Signs a PLC operation to update some value(s) in the requesting DID's document.",input:{encoding:"application/json",schema:{type:"object",properties:{token:{description:"A token received through com.atproto.identity.requestPlcOperationSignature",type:"string"},rotationKeys:{type:"array",items:{type:"string"}},alsoKnownAs:{type:"array",items:{type:"string"}},verificationMethods:{type:"unknown"},services:{type:"unknown"}}}},output:{encoding:"application/json",schema:{type:"object",required:["operation"],properties:{operation:{type:"unknown",description:"A signed DID PLC operation."}}}}}}},ComAtprotoIdentitySubmitPlcOperation:{lexicon:1,id:"com.atproto.identity.submitPlcOperation",defs:{main:{type:"procedure",description:"Validates a PLC operation to ensure that it doesn't violate a service's constraints or get the identity into a bad state, then submits it to the PLC registry",input:{encoding:"application/json",schema:{type:"object",required:["operation"],properties:{operation:{type:"unknown"}}}}}}},ComAtprotoIdentityUpdateHandle:{lexicon:1,id:"com.atproto.identity.updateHandle",defs:{main:{type:"procedure",description:"Updates the current account's handle. Verifies handle validity, and updates did:plc document if necessary. Implemented by PDS, and requires auth.",input:{encoding:"application/json",schema:{type:"object",required:["handle"],properties:{handle:{type:"string",format:"handle",description:"The new handle."}}}}}}},ComAtprotoLabelDefs:{lexicon:1,id:"com.atproto.label.defs",defs:{label:{type:"object",description:"Metadata tag on an atproto resource (eg, repo or record).",required:["src","uri","val","cts"],properties:{ver:{type:"integer",description:"The AT Protocol version of the label object."},src:{type:"string",format:"did",description:"DID of the actor who created this label."},uri:{type:"string",format:"uri",description:"AT URI of the record, repository (account), or other resource that this label applies to."},cid:{type:"string",format:"cid",description:"Optionally, CID specifying the specific version of 'uri' resource this label applies to."},val:{type:"string",maxLength:128,description:"The short string name of the value or type of this label."},neg:{type:"boolean",description:"If true, this is a negation label, overwriting a previous label."},cts:{type:"string",format:"datetime",description:"Timestamp when this label was created."},exp:{type:"string",format:"datetime",description:"Timestamp at which this label expires (no longer applies)."},sig:{type:"bytes",description:"Signature of dag-cbor encoded label."}}},selfLabels:{type:"object",description:"Metadata tags on an atproto record, published by the author within the record.",required:["values"],properties:{values:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#selfLabel"},maxLength:10}}},selfLabel:{type:"object",description:"Metadata tag on an atproto record, published by the author within the record. Note that schemas should use #selfLabels, not #selfLabel.",required:["val"],properties:{val:{type:"string",maxLength:128,description:"The short string name of the value or type of this label."}}},labelValueDefinition:{type:"object",description:"Declares a label value and its expected interpretations and behaviors.",required:["identifier","severity","blurs","locales"],properties:{identifier:{type:"string",description:"The value of the label being defined. Must only include lowercase ascii and the '-' character ([a-z-]+).",maxLength:100,maxGraphemes:100},severity:{type:"string",description:"How should a client visually convey this label? 'inform' means neutral and informational; 'alert' means negative and warning; 'none' means show nothing.",knownValues:["inform","alert","none"]},blurs:{type:"string",description:"What should this label hide in the UI, if applied? 'content' hides all of the target; 'media' hides the images/video/audio; 'none' hides nothing.",knownValues:["content","media","none"]},defaultSetting:{type:"string",description:"The default setting for this label.",knownValues:["ignore","warn","hide"],default:"warn"},adultOnly:{type:"boolean",description:"Does the user need to have adult content enabled in order to configure this label?"},locales:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#labelValueDefinitionStrings"}}}},labelValueDefinitionStrings:{type:"object",description:"Strings which describe the label in the UI, localized into a specific language.",required:["lang","name","description"],properties:{lang:{type:"string",description:"The code of the language these strings are written in.",format:"language"},name:{type:"string",description:"A short human-readable name for the label.",maxGraphemes:64,maxLength:640},description:{type:"string",description:"A longer description of what the label means and why it might be applied.",maxGraphemes:1e4,maxLength:1e5}}},labelValue:{type:"string",knownValues:["!hide","!no-promote","!warn","!no-unauthenticated","dmca-violation","doxxing","porn","sexual","nudity","nsfl","gore"]}}},ComAtprotoLabelQueryLabels:{lexicon:1,id:"com.atproto.label.queryLabels",defs:{main:{type:"query",description:"Find labels relevant to the provided AT-URI patterns. Public endpoint for moderation services, though may return different or additional results with auth.",parameters:{type:"params",required:["uriPatterns"],properties:{uriPatterns:{type:"array",items:{type:"string"},description:"List of AT URI patterns to match (boolean 'OR'). Each may be a prefix (ending with '*'; will match inclusive of the string leading to '*'), or a full URI."},sources:{type:"array",items:{type:"string",format:"did"},description:"Optional list of label sources (DIDs) to filter on."},limit:{type:"integer",minimum:1,maximum:250,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["labels"],properties:{cursor:{type:"string"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}}}}}},ComAtprotoLabelSubscribeLabels:{lexicon:1,id:"com.atproto.label.subscribeLabels",defs:{main:{type:"subscription",description:"Subscribe to stream of labels (and negations). Public endpoint implemented by mod services. Uses same sequencing scheme as repo event stream.",parameters:{type:"params",properties:{cursor:{type:"integer",description:"The last known event seq number to backfill from."}}},message:{schema:{type:"union",refs:["lex:com.atproto.label.subscribeLabels#labels","lex:com.atproto.label.subscribeLabels#info"]}},errors:[{name:"FutureCursor"}]},labels:{type:"object",required:["seq","labels"],properties:{seq:{type:"integer"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},info:{type:"object",required:["name"],properties:{name:{type:"string",knownValues:["OutdatedCursor"]},message:{type:"string"}}}}},ComAtprotoModerationCreateReport:{lexicon:1,id:"com.atproto.moderation.createReport",defs:{main:{type:"procedure",description:"Submit a moderation report regarding an atproto account or record. Implemented by moderation services (with PDS proxying), and requires auth.",input:{encoding:"application/json",schema:{type:"object",required:["reasonType","subject"],properties:{reasonType:{type:"ref",description:"Indicates the broad category of violation the report is for.",ref:"lex:com.atproto.moderation.defs#reasonType"},reason:{type:"string",maxGraphemes:2e3,maxLength:2e4,description:"Additional context about the content and violation."},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]}}}},output:{encoding:"application/json",schema:{type:"object",required:["id","reasonType","subject","reportedBy","createdAt"],properties:{id:{type:"integer"},reasonType:{type:"ref",ref:"lex:com.atproto.moderation.defs#reasonType"},reason:{type:"string",maxGraphemes:2e3,maxLength:2e4},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]},reportedBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"}}}}}}},ComAtprotoModerationDefs:{lexicon:1,id:"com.atproto.moderation.defs",defs:{reasonType:{type:"string",knownValues:["com.atproto.moderation.defs#reasonSpam","com.atproto.moderation.defs#reasonViolation","com.atproto.moderation.defs#reasonMisleading","com.atproto.moderation.defs#reasonSexual","com.atproto.moderation.defs#reasonRude","com.atproto.moderation.defs#reasonOther","com.atproto.moderation.defs#reasonAppeal"]},reasonSpam:{type:"token",description:"Spam: frequent unwanted promotion, replies, mentions"},reasonViolation:{type:"token",description:"Direct violation of server rules, laws, terms of service"},reasonMisleading:{type:"token",description:"Misleading identity, affiliation, or content"},reasonSexual:{type:"token",description:"Unwanted or mislabeled sexual content"},reasonRude:{type:"token",description:"Rude, harassing, explicit, or otherwise unwelcoming behavior"},reasonOther:{type:"token",description:"Other: reports not falling under another report category"},reasonAppeal:{type:"token",description:"Appeal: appeal a previously taken moderation action"}}},ComAtprotoRepoApplyWrites:{lexicon:1,id:"com.atproto.repo.applyWrites",defs:{main:{type:"procedure",description:"Apply a batch transaction of repository creates, updates, and deletes. Requires auth, implemented by PDS.",input:{encoding:"application/json",schema:{type:"object",required:["repo","writes"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo (aka, current account)."},validate:{type:"boolean",default:!0,description:"Can be set to 'false' to skip Lexicon schema validation of record data, for all operations."},writes:{type:"array",items:{type:"union",refs:["lex:com.atproto.repo.applyWrites#create","lex:com.atproto.repo.applyWrites#update","lex:com.atproto.repo.applyWrites#delete"],closed:!0}},swapCommit:{type:"string",description:"If provided, the entire operation will fail if the current repo commit CID does not match this value. Used to prevent conflicting repo mutations.",format:"cid"}}}},errors:[{name:"InvalidSwap",description:"Indicates that the 'swapCommit' parameter did not match current commit."}]},create:{type:"object",description:"Operation which creates a new record.",required:["collection","value"],properties:{collection:{type:"string",format:"nsid"},rkey:{type:"string",maxLength:15},value:{type:"unknown"}}},update:{type:"object",description:"Operation which updates an existing record.",required:["collection","rkey","value"],properties:{collection:{type:"string",format:"nsid"},rkey:{type:"string"},value:{type:"unknown"}}},delete:{type:"object",description:"Operation which deletes an existing record.",required:["collection","rkey"],properties:{collection:{type:"string",format:"nsid"},rkey:{type:"string"}}}}},ComAtprotoRepoCreateRecord:{lexicon:1,id:"com.atproto.repo.createRecord",defs:{main:{type:"procedure",description:"Create a single new repository record. Requires auth, implemented by PDS.",input:{encoding:"application/json",schema:{type:"object",required:["repo","collection","record"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo (aka, current account)."},collection:{type:"string",format:"nsid",description:"The NSID of the record collection."},rkey:{type:"string",description:"The Record Key.",maxLength:15},validate:{type:"boolean",default:!0,description:"Can be set to 'false' to skip Lexicon schema validation of record data."},record:{type:"unknown",description:"The record itself. Must contain a $type field."},swapCommit:{type:"string",format:"cid",description:"Compare and swap with the previous commit by CID."}}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","cid"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"}}}},errors:[{name:"InvalidSwap",description:"Indicates that 'swapCommit' didn't match current repo commit."}]}}},ComAtprotoRepoDeleteRecord:{lexicon:1,id:"com.atproto.repo.deleteRecord",defs:{main:{type:"procedure",description:"Delete a repository record, or ensure it doesn't exist. Requires auth, implemented by PDS.",input:{encoding:"application/json",schema:{type:"object",required:["repo","collection","rkey"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo (aka, current account)."},collection:{type:"string",format:"nsid",description:"The NSID of the record collection."},rkey:{type:"string",description:"The Record Key."},swapRecord:{type:"string",format:"cid",description:"Compare and swap with the previous record by CID."},swapCommit:{type:"string",format:"cid",description:"Compare and swap with the previous commit by CID."}}}},errors:[{name:"InvalidSwap"}]}}},ComAtprotoRepoDescribeRepo:{lexicon:1,id:"com.atproto.repo.describeRepo",defs:{main:{type:"query",description:"Get information about an account and repository, including the list of collections. Does not require auth.",parameters:{type:"params",required:["repo"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."}}},output:{encoding:"application/json",schema:{type:"object",required:["handle","did","didDoc","collections","handleIsCorrect"],properties:{handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},didDoc:{type:"unknown",description:"The complete DID document for this account."},collections:{type:"array",description:"List of all the collections (NSIDs) for which this repo contains at least one record.",items:{type:"string",format:"nsid"}},handleIsCorrect:{type:"boolean",description:"Indicates if handle is currently valid (resolves bi-directionally)"}}}}}}},ComAtprotoRepoGetRecord:{lexicon:1,id:"com.atproto.repo.getRecord",defs:{main:{type:"query",description:"Get a single record from a repository. Does not require auth.",parameters:{type:"params",required:["repo","collection","rkey"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},collection:{type:"string",format:"nsid",description:"The NSID of the record collection."},rkey:{type:"string",description:"The Record Key."},cid:{type:"string",format:"cid",description:"The CID of the version of the record. If not specified, then return the most recent version."}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","value"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},value:{type:"unknown"}}}}}}},ComAtprotoRepoImportRepo:{lexicon:1,id:"com.atproto.repo.importRepo",defs:{main:{type:"procedure",description:"Import a repo in the form of a CAR file. Requires Content-Length HTTP header to be set.",input:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoRepoListMissingBlobs:{lexicon:1,id:"com.atproto.repo.listMissingBlobs",defs:{main:{type:"query",description:"Returns a list of missing blobs for the requesting account. Intended to be used in the account migration flow.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:1e3,default:500},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["blobs"],properties:{cursor:{type:"string"},blobs:{type:"array",items:{type:"ref",ref:"lex:com.atproto.repo.listMissingBlobs#recordBlob"}}}}}},recordBlob:{type:"object",required:["cid","recordUri"],properties:{cid:{type:"string",format:"cid"},recordUri:{type:"string",format:"at-uri"}}}}},ComAtprotoRepoListRecords:{lexicon:1,id:"com.atproto.repo.listRecords",defs:{main:{type:"query",description:"List a range of records in a repository, matching a specific collection. Does not require auth.",parameters:{type:"params",required:["repo","collection"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},collection:{type:"string",format:"nsid",description:"The NSID of the record type."},limit:{type:"integer",minimum:1,maximum:100,default:50,description:"The number of records to return."},cursor:{type:"string"},rkeyStart:{type:"string",description:"DEPRECATED: The lowest sort-ordered rkey to start from (exclusive)"},rkeyEnd:{type:"string",description:"DEPRECATED: The highest sort-ordered rkey to stop at (exclusive)"},reverse:{type:"boolean",description:"Flag to reverse the order of the returned records."}}},output:{encoding:"application/json",schema:{type:"object",required:["records"],properties:{cursor:{type:"string"},records:{type:"array",items:{type:"ref",ref:"lex:com.atproto.repo.listRecords#record"}}}}}},record:{type:"object",required:["uri","cid","value"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},value:{type:"unknown"}}}}},ComAtprotoRepoPutRecord:{lexicon:1,id:"com.atproto.repo.putRecord",defs:{main:{type:"procedure",description:"Write a repository record, creating or updating it as needed. Requires auth, implemented by PDS.",input:{encoding:"application/json",schema:{type:"object",required:["repo","collection","rkey","record"],nullable:["swapRecord"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo (aka, current account)."},collection:{type:"string",format:"nsid",description:"The NSID of the record collection."},rkey:{type:"string",description:"The Record Key.",maxLength:15},validate:{type:"boolean",default:!0,description:"Can be set to 'false' to skip Lexicon schema validation of record data."},record:{type:"unknown",description:"The record to write."},swapRecord:{type:"string",format:"cid",description:"Compare and swap with the previous record by CID. WARNING: nullable and optional field; may cause problems with golang implementation"},swapCommit:{type:"string",format:"cid",description:"Compare and swap with the previous commit by CID."}}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","cid"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"}}}},errors:[{name:"InvalidSwap"}]}}},ComAtprotoRepoStrongRef:{lexicon:1,id:"com.atproto.repo.strongRef",description:"A URI with a content-hash fingerprint.",defs:{main:{type:"object",required:["uri","cid"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"}}}}},ComAtprotoRepoUploadBlob:{lexicon:1,id:"com.atproto.repo.uploadBlob",defs:{main:{type:"procedure",description:"Upload a new blob, to be referenced from a repository record. The blob will be deleted if it is not referenced within a time window (eg, minutes). Blob restrictions (mimetype, size, etc) are enforced when the reference is created. Requires auth, implemented by PDS.",input:{encoding:"*/*"},output:{encoding:"application/json",schema:{type:"object",required:["blob"],properties:{blob:{type:"blob"}}}}}}},ComAtprotoServerActivateAccount:{lexicon:1,id:"com.atproto.server.activateAccount",defs:{main:{type:"procedure",description:"Activates a currently deactivated account. Used to finalize account migration after the account's repo is imported and identity is setup."}}},ComAtprotoServerCheckAccountStatus:{lexicon:1,id:"com.atproto.server.checkAccountStatus",defs:{main:{type:"query",description:"Returns the status of an account, especially as pertaining to import or recovery. Can be called many times over the course of an account migration. Requires auth and can only be called pertaining to oneself.",output:{encoding:"application/json",schema:{type:"object",required:["activated","validDid","repoCommit","repoRev","repoBlocks","indexedRecords","privateStateValues","expectedBlobs","importedBlobs"],properties:{activated:{type:"boolean"},validDid:{type:"boolean"},repoCommit:{type:"string",format:"cid"},repoRev:{type:"string"},repoBlocks:{type:"integer"},indexedRecords:{type:"integer"},privateStateValues:{type:"integer"},expectedBlobs:{type:"integer"},importedBlobs:{type:"integer"}}}}}}},ComAtprotoServerConfirmEmail:{lexicon:1,id:"com.atproto.server.confirmEmail",defs:{main:{type:"procedure",description:"Confirm an email using a token from com.atproto.server.requestEmailConfirmation.",input:{encoding:"application/json",schema:{type:"object",required:["email","token"],properties:{email:{type:"string"},token:{type:"string"}}}},errors:[{name:"AccountNotFound"},{name:"ExpiredToken"},{name:"InvalidToken"},{name:"InvalidEmail"}]}}},ComAtprotoServerCreateAccount:{lexicon:1,id:"com.atproto.server.createAccount",defs:{main:{type:"procedure",description:"Create an account. Implemented by PDS.",input:{encoding:"application/json",schema:{type:"object",required:["handle"],properties:{email:{type:"string"},handle:{type:"string",format:"handle",description:"Requested handle for the account."},did:{type:"string",format:"did",description:"Pre-existing atproto DID, being imported to a new account."},inviteCode:{type:"string"},verificationCode:{type:"string"},verificationPhone:{type:"string"},password:{type:"string",description:"Initial account password. May need to meet instance-specific password strength requirements."},recoveryKey:{type:"string",description:"DID PLC rotation key (aka, recovery key) to be included in PLC creation operation."},plcOp:{type:"unknown",description:"A signed DID PLC operation to be submitted as part of importing an existing account to this instance. NOTE: this optional field may be updated when full account migration is implemented."}}}},output:{encoding:"application/json",schema:{type:"object",description:"Account login session returned on successful account creation.",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string",format:"handle"},did:{type:"string",format:"did",description:"The DID of the new account."},didDoc:{type:"unknown",description:"Complete DID document."}}}},errors:[{name:"InvalidHandle"},{name:"InvalidPassword"},{name:"InvalidInviteCode"},{name:"HandleNotAvailable"},{name:"UnsupportedDomain"},{name:"UnresolvableDid"},{name:"IncompatibleDidDoc"}]}}},ComAtprotoServerCreateAppPassword:{lexicon:1,id:"com.atproto.server.createAppPassword",defs:{main:{type:"procedure",description:"Create an App Password.",input:{encoding:"application/json",schema:{type:"object",required:["name"],properties:{name:{type:"string",description:"A short name for the App Password, to help distinguish them."},privileged:{type:"boolean",description:"If an app password has 'privileged' access to possibly sensitive account state. Meant for use with trusted clients."}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.server.createAppPassword#appPassword"}},errors:[{name:"AccountTakedown"}]},appPassword:{type:"object",required:["name","password","createdAt"],properties:{name:{type:"string"},password:{type:"string"},createdAt:{type:"string",format:"datetime"},privileged:{type:"boolean"}}}}},ComAtprotoServerCreateInviteCode:{lexicon:1,id:"com.atproto.server.createInviteCode",defs:{main:{type:"procedure",description:"Create an invite code.",input:{encoding:"application/json",schema:{type:"object",required:["useCount"],properties:{useCount:{type:"integer"},forAccount:{type:"string",format:"did"}}}},output:{encoding:"application/json",schema:{type:"object",required:["code"],properties:{code:{type:"string"}}}}}}},ComAtprotoServerCreateInviteCodes:{lexicon:1,id:"com.atproto.server.createInviteCodes",defs:{main:{type:"procedure",description:"Create invite codes.",input:{encoding:"application/json",schema:{type:"object",required:["codeCount","useCount"],properties:{codeCount:{type:"integer",default:1},useCount:{type:"integer"},forAccounts:{type:"array",items:{type:"string",format:"did"}}}}},output:{encoding:"application/json",schema:{type:"object",required:["codes"],properties:{codes:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.createInviteCodes#accountCodes"}}}}}},accountCodes:{type:"object",required:["account","codes"],properties:{account:{type:"string"},codes:{type:"array",items:{type:"string"}}}}}},ComAtprotoServerCreateSession:{lexicon:1,id:"com.atproto.server.createSession",defs:{main:{type:"procedure",description:"Create an authentication session.",input:{encoding:"application/json",schema:{type:"object",required:["identifier","password"],properties:{identifier:{type:"string",description:"Handle or other identifier supported by the server for the authenticating user."},password:{type:"string"},authFactorToken:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"object",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},didDoc:{type:"unknown"},email:{type:"string"},emailConfirmed:{type:"boolean"},emailAuthFactor:{type:"boolean"},active:{type:"boolean"},status:{type:"string",description:"If active=false, this optional field indicates a possible reason for why the account is not active. If active=false and no status is supplied, then the host makes no claim for why the repository is no longer being hosted.",knownValues:["takendown","suspended","deactivated"]}}}},errors:[{name:"AccountTakedown"},{name:"AuthFactorTokenRequired"}]}}},ComAtprotoServerDeactivateAccount:{lexicon:1,id:"com.atproto.server.deactivateAccount",defs:{main:{type:"procedure",description:"Deactivates a currently active account. Stops serving of repo, and future writes to repo until reactivated. Used to finalize account migration with the old host after the account has been activated on the new host.",input:{encoding:"application/json",schema:{type:"object",properties:{deleteAfter:{type:"string",format:"datetime",description:"A recommendation to server as to how long they should hold onto the deactivated account before deleting."}}}}}}},ComAtprotoServerDefs:{lexicon:1,id:"com.atproto.server.defs",defs:{inviteCode:{type:"object",required:["code","available","disabled","forAccount","createdBy","createdAt","uses"],properties:{code:{type:"string"},available:{type:"integer"},disabled:{type:"boolean"},forAccount:{type:"string"},createdBy:{type:"string"},createdAt:{type:"string",format:"datetime"},uses:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCodeUse"}}}},inviteCodeUse:{type:"object",required:["usedBy","usedAt"],properties:{usedBy:{type:"string",format:"did"},usedAt:{type:"string",format:"datetime"}}}}},ComAtprotoServerDeleteAccount:{lexicon:1,id:"com.atproto.server.deleteAccount",defs:{main:{type:"procedure",description:"Delete an actor's account with a token and password. Can only be called after requesting a deletion token. Requires auth.",input:{encoding:"application/json",schema:{type:"object",required:["did","password","token"],properties:{did:{type:"string",format:"did"},password:{type:"string"},token:{type:"string"}}}},errors:[{name:"ExpiredToken"},{name:"InvalidToken"}]}}},ComAtprotoServerDeleteSession:{lexicon:1,id:"com.atproto.server.deleteSession",defs:{main:{type:"procedure",description:"Delete the current session. Requires auth."}}},ComAtprotoServerDescribeServer:{lexicon:1,id:"com.atproto.server.describeServer",defs:{main:{type:"query",description:"Describes the server's account creation requirements and capabilities. Implemented by PDS.",output:{encoding:"application/json",schema:{type:"object",required:["did","availableUserDomains"],properties:{inviteCodeRequired:{type:"boolean",description:"If true, an invite code must be supplied to create an account on this instance."},phoneVerificationRequired:{type:"boolean",description:"If true, a phone verification token must be supplied to create an account on this instance."},availableUserDomains:{type:"array",description:"List of domain suffixes that can be used in account handles.",items:{type:"string"}},links:{type:"ref",description:"URLs of service policy documents.",ref:"lex:com.atproto.server.describeServer#links"},contact:{type:"ref",description:"Contact information",ref:"lex:com.atproto.server.describeServer#contact"},did:{type:"string",format:"did"}}}}},links:{type:"object",properties:{privacyPolicy:{type:"string",format:"uri"},termsOfService:{type:"string",format:"uri"}}},contact:{type:"object",properties:{email:{type:"string"}}}}},ComAtprotoServerGetAccountInviteCodes:{lexicon:1,id:"com.atproto.server.getAccountInviteCodes",defs:{main:{type:"query",description:"Get all invite codes for the current account. Requires auth.",parameters:{type:"params",properties:{includeUsed:{type:"boolean",default:!0},createAvailable:{type:"boolean",default:!0,description:"Controls whether any new 'earned' but not 'created' invites should be created."}}},output:{encoding:"application/json",schema:{type:"object",required:["codes"],properties:{codes:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"}}}}},errors:[{name:"DuplicateCreate"}]}}},ComAtprotoServerGetServiceAuth:{lexicon:1,id:"com.atproto.server.getServiceAuth",defs:{main:{type:"query",description:"Get a signed token on behalf of the requesting DID for the requested service.",parameters:{type:"params",required:["aud"],properties:{aud:{type:"string",format:"did",description:"The DID of the service that the token will be used to authenticate with"},exp:{type:"integer",description:"The time in Unix Epoch seconds that the JWT expires. Defaults to 60 seconds in the future. The service may enforce certain time bounds on tokens depending on the requested scope."},lxm:{type:"string",format:"nsid",description:"Lexicon (XRPC) method to bind the requested token to"}}},output:{encoding:"application/json",schema:{type:"object",required:["token"],properties:{token:{type:"string"}}}},errors:[{name:"BadExpiration",description:"Indicates that the requested expiration date is not a valid. May be in the past or may be reliant on the requested scopes."}]}}},ComAtprotoServerGetSession:{lexicon:1,id:"com.atproto.server.getSession",defs:{main:{type:"query",description:"Get information about the current auth session. Requires auth.",output:{encoding:"application/json",schema:{type:"object",required:["handle","did"],properties:{handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},email:{type:"string"},emailConfirmed:{type:"boolean"},emailAuthFactor:{type:"boolean"},didDoc:{type:"unknown"},active:{type:"boolean"},status:{type:"string",description:"If active=false, this optional field indicates a possible reason for why the account is not active. If active=false and no status is supplied, then the host makes no claim for why the repository is no longer being hosted.",knownValues:["takendown","suspended","deactivated"]}}}}}}},ComAtprotoServerListAppPasswords:{lexicon:1,id:"com.atproto.server.listAppPasswords",defs:{main:{type:"query",description:"List all App Passwords.",output:{encoding:"application/json",schema:{type:"object",required:["passwords"],properties:{passwords:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.listAppPasswords#appPassword"}}}}},errors:[{name:"AccountTakedown"}]},appPassword:{type:"object",required:["name","createdAt"],properties:{name:{type:"string"},createdAt:{type:"string",format:"datetime"},privileged:{type:"boolean"}}}}},ComAtprotoServerRefreshSession:{lexicon:1,id:"com.atproto.server.refreshSession",defs:{main:{type:"procedure",description:"Refresh an authentication session. Requires auth using the 'refreshJwt' (not the 'accessJwt').",output:{encoding:"application/json",schema:{type:"object",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},didDoc:{type:"unknown"},active:{type:"boolean"},status:{type:"string",description:"Hosting status of the account. If not specified, then assume 'active'.",knownValues:["takendown","suspended","deactivated"]}}}},errors:[{name:"AccountTakedown"}]}}},ComAtprotoServerRequestAccountDelete:{lexicon:1,id:"com.atproto.server.requestAccountDelete",defs:{main:{type:"procedure",description:"Initiate a user account deletion via email."}}},ComAtprotoServerRequestEmailConfirmation:{lexicon:1,id:"com.atproto.server.requestEmailConfirmation",defs:{main:{type:"procedure",description:"Request an email with a code to confirm ownership of email."}}},ComAtprotoServerRequestEmailUpdate:{lexicon:1,id:"com.atproto.server.requestEmailUpdate",defs:{main:{type:"procedure",description:"Request a token in order to update email.",output:{encoding:"application/json",schema:{type:"object",required:["tokenRequired"],properties:{tokenRequired:{type:"boolean"}}}}}}},ComAtprotoServerRequestPasswordReset:{lexicon:1,id:"com.atproto.server.requestPasswordReset",defs:{main:{type:"procedure",description:"Initiate a user account password reset via email.",input:{encoding:"application/json",schema:{type:"object",required:["email"],properties:{email:{type:"string"}}}}}}},ComAtprotoServerReserveSigningKey:{lexicon:1,id:"com.atproto.server.reserveSigningKey",defs:{main:{type:"procedure",description:"Reserve a repo signing key, for use with account creation. Necessary so that a DID PLC update operation can be constructed during an account migraiton. Public and does not require auth; implemented by PDS. NOTE: this endpoint may change when full account migration is implemented.",input:{encoding:"application/json",schema:{type:"object",properties:{did:{type:"string",format:"did",description:"The DID to reserve a key for."}}}},output:{encoding:"application/json",schema:{type:"object",required:["signingKey"],properties:{signingKey:{type:"string",description:"The public key for the reserved signing key, in did:key serialization."}}}}}}},ComAtprotoServerResetPassword:{lexicon:1,id:"com.atproto.server.resetPassword",defs:{main:{type:"procedure",description:"Reset a user account password using a token.",input:{encoding:"application/json",schema:{type:"object",required:["token","password"],properties:{token:{type:"string"},password:{type:"string"}}}},errors:[{name:"ExpiredToken"},{name:"InvalidToken"}]}}},ComAtprotoServerRevokeAppPassword:{lexicon:1,id:"com.atproto.server.revokeAppPassword",defs:{main:{type:"procedure",description:"Revoke an App Password by name.",input:{encoding:"application/json",schema:{type:"object",required:["name"],properties:{name:{type:"string"}}}}}}},ComAtprotoServerUpdateEmail:{lexicon:1,id:"com.atproto.server.updateEmail",defs:{main:{type:"procedure",description:"Update an account's email.",input:{encoding:"application/json",schema:{type:"object",required:["email"],properties:{email:{type:"string"},emailAuthFactor:{type:"boolean"},token:{type:"string",description:"Requires a token from com.atproto.sever.requestEmailUpdate if the account's email has been confirmed."}}}},errors:[{name:"ExpiredToken"},{name:"InvalidToken"},{name:"TokenRequired"}]}}},ComAtprotoSyncGetBlob:{lexicon:1,id:"com.atproto.sync.getBlob",defs:{main:{type:"query",description:"Get a blob associated with a given account. Returns the full blob as originally uploaded. Does not require auth; implemented by PDS.",parameters:{type:"params",required:["did","cid"],properties:{did:{type:"string",format:"did",description:"The DID of the account."},cid:{type:"string",format:"cid",description:"The CID of the blob to fetch"}}},output:{encoding:"*/*"},errors:[{name:"BlobNotFound"},{name:"RepoNotFound"},{name:"RepoTakendown"},{name:"RepoSuspended"},{name:"RepoDeactivated"}]}}},ComAtprotoSyncGetBlocks:{lexicon:1,id:"com.atproto.sync.getBlocks",defs:{main:{type:"query",description:"Get data blocks from a given repo, by CID. For example, intermediate MST nodes, or records. Does not require auth; implemented by PDS.",parameters:{type:"params",required:["did","cids"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},cids:{type:"array",items:{type:"string",format:"cid"}}}},output:{encoding:"application/vnd.ipld.car"},errors:[{name:"BlockNotFound"},{name:"RepoNotFound"},{name:"RepoTakendown"},{name:"RepoSuspended"},{name:"RepoDeactivated"}]}}},ComAtprotoSyncGetCheckout:{lexicon:1,id:"com.atproto.sync.getCheckout",defs:{main:{type:"query",description:"DEPRECATED - please use com.atproto.sync.getRepo instead",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncGetHead:{lexicon:1,id:"com.atproto.sync.getHead",defs:{main:{type:"query",description:"DEPRECATED - please use com.atproto.sync.getLatestCommit instead",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."}}},output:{encoding:"application/json",schema:{type:"object",required:["root"],properties:{root:{type:"string",format:"cid"}}}},errors:[{name:"HeadNotFound"}]}}},ComAtprotoSyncGetLatestCommit:{lexicon:1,id:"com.atproto.sync.getLatestCommit",defs:{main:{type:"query",description:"Get the current commit CID & revision of the specified repo. Does not require auth.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."}}},output:{encoding:"application/json",schema:{type:"object",required:["cid","rev"],properties:{cid:{type:"string",format:"cid"},rev:{type:"string"}}}},errors:[{name:"RepoNotFound"},{name:"RepoTakendown"},{name:"RepoSuspended"},{name:"RepoDeactivated"}]}}},ComAtprotoSyncGetRecord:{lexicon:1,id:"com.atproto.sync.getRecord",defs:{main:{type:"query",description:"Get data blocks needed to prove the existence or non-existence of record in the current version of repo. Does not require auth.",parameters:{type:"params",required:["did","collection","rkey"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},collection:{type:"string",format:"nsid"},rkey:{type:"string",description:"Record Key"},commit:{type:"string",format:"cid",description:"DEPRECATED: referenced a repo commit by CID, and retrieved record as of that commit"}}},output:{encoding:"application/vnd.ipld.car"},errors:[{name:"RecordNotFound"},{name:"RepoNotFound"},{name:"RepoTakendown"},{name:"RepoSuspended"},{name:"RepoDeactivated"}]}}},ComAtprotoSyncGetRepo:{lexicon:1,id:"com.atproto.sync.getRepo",defs:{main:{type:"query",description:"Download a repository export as CAR file. Optionally only a 'diff' since a previous revision. Does not require auth; implemented by PDS.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},since:{type:"string",description:"The revision ('rev') of the repo to create a diff from."}}},output:{encoding:"application/vnd.ipld.car"},errors:[{name:"RepoNotFound"},{name:"RepoTakendown"},{name:"RepoSuspended"},{name:"RepoDeactivated"}]}}},ComAtprotoSyncGetRepoStatus:{lexicon:1,id:"com.atproto.sync.getRepoStatus",defs:{main:{type:"query",description:"Get the hosting status for a repository, on this server. Expected to be implemented by PDS and Relay.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."}}},output:{encoding:"application/json",schema:{type:"object",required:["did","active"],properties:{did:{type:"string",format:"did"},active:{type:"boolean"},status:{type:"string",description:"If active=false, this optional field indicates a possible reason for why the account is not active. If active=false and no status is supplied, then the host makes no claim for why the repository is no longer being hosted.",knownValues:["takendown","suspended","deactivated"]},rev:{type:"string",description:"Optional field, the current rev of the repo, if active=true"}}}},errors:[{name:"RepoNotFound"}]}}},ComAtprotoSyncListBlobs:{lexicon:1,id:"com.atproto.sync.listBlobs",defs:{main:{type:"query",description:"List blob CIDs for an account, since some repo revision. Does not require auth; implemented by PDS.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},since:{type:"string",description:"Optional revision of the repo to list blobs since."},limit:{type:"integer",minimum:1,maximum:1e3,default:500},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["cids"],properties:{cursor:{type:"string"},cids:{type:"array",items:{type:"string",format:"cid"}}}}},errors:[{name:"RepoNotFound"},{name:"RepoTakendown"},{name:"RepoSuspended"},{name:"RepoDeactivated"}]}}},ComAtprotoSyncListRepos:{lexicon:1,id:"com.atproto.sync.listRepos",defs:{main:{type:"query",description:"Enumerates all the DID, rev, and commit CID for all repos hosted by this service. Does not require auth; implemented by PDS and Relay.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:1e3,default:500},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["repos"],properties:{cursor:{type:"string"},repos:{type:"array",items:{type:"ref",ref:"lex:com.atproto.sync.listRepos#repo"}}}}}},repo:{type:"object",required:["did","head","rev"],properties:{did:{type:"string",format:"did"},head:{type:"string",format:"cid",description:"Current repo commit CID"},rev:{type:"string"},active:{type:"boolean"},status:{type:"string",description:"If active=false, this optional field indicates a possible reason for why the account is not active. If active=false and no status is supplied, then the host makes no claim for why the repository is no longer being hosted.",knownValues:["takendown","suspended","deactivated"]}}}}},ComAtprotoSyncNotifyOfUpdate:{lexicon:1,id:"com.atproto.sync.notifyOfUpdate",defs:{main:{type:"procedure",description:"Notify a crawling service of a recent update, and that crawling should resume. Intended use is after a gap between repo stream events caused the crawling service to disconnect. Does not require auth; implemented by Relay.",input:{encoding:"application/json",schema:{type:"object",required:["hostname"],properties:{hostname:{type:"string",description:"Hostname of the current service (usually a PDS) that is notifying of update."}}}}}}},ComAtprotoSyncRequestCrawl:{lexicon:1,id:"com.atproto.sync.requestCrawl",defs:{main:{type:"procedure",description:"Request a service to persistently crawl hosted repos. Expected use is new PDS instances declaring their existence to Relays. Does not require auth.",input:{encoding:"application/json",schema:{type:"object",required:["hostname"],properties:{hostname:{type:"string",description:"Hostname of the current service (eg, PDS) that is requesting to be crawled."}}}}}}},ComAtprotoSyncSubscribeRepos:{lexicon:1,id:"com.atproto.sync.subscribeRepos",defs:{main:{type:"subscription",description:"Repository event stream, aka Firehose endpoint. Outputs repo commits with diff data, and identity update events, for all repositories on the current server. See the atproto specifications for details around stream sequencing, repo versioning, CAR diff format, and more. Public and does not require auth; implemented by PDS and Relay.",parameters:{type:"params",properties:{cursor:{type:"integer",description:"The last known event seq number to backfill from."}}},message:{schema:{type:"union",refs:["lex:com.atproto.sync.subscribeRepos#commit","lex:com.atproto.sync.subscribeRepos#identity","lex:com.atproto.sync.subscribeRepos#account","lex:com.atproto.sync.subscribeRepos#handle","lex:com.atproto.sync.subscribeRepos#migrate","lex:com.atproto.sync.subscribeRepos#tombstone","lex:com.atproto.sync.subscribeRepos#info"]}},errors:[{name:"FutureCursor"},{name:"ConsumerTooSlow",description:"If the consumer of the stream can not keep up with events, and a backlog gets too large, the server will drop the connection."}]},commit:{type:"object",description:"Represents an update of repository state. Note that empty commits are allowed, which include no repo data changes, but an update to rev and signature.",required:["seq","rebase","tooBig","repo","commit","rev","since","blocks","ops","blobs","time"],nullable:["prev","since"],properties:{seq:{type:"integer",description:"The stream sequence number of this message."},rebase:{type:"boolean",description:"DEPRECATED -- unused"},tooBig:{type:"boolean",description:"Indicates that this commit contained too many ops, or data size was too large. Consumers will need to make a separate request to get missing data."},repo:{type:"string",format:"did",description:"The repo this event comes from."},commit:{type:"cid-link",description:"Repo commit object CID."},prev:{type:"cid-link",description:"DEPRECATED -- unused. WARNING -- nullable and optional; stick with optional to ensure golang interoperability."},rev:{type:"string",description:"The rev of the emitted commit. Note that this information is also in the commit object included in blocks, unless this is a tooBig event."},since:{type:"string",description:"The rev of the last emitted commit from this repo (if any)."},blocks:{type:"bytes",description:"CAR file containing relevant blocks, as a diff since the previous repo state.",maxLength:1e6},ops:{type:"array",items:{type:"ref",ref:"lex:com.atproto.sync.subscribeRepos#repoOp",description:"List of repo mutation operations in this commit (eg, records created, updated, or deleted)."},maxLength:200},blobs:{type:"array",items:{type:"cid-link",description:"List of new blobs (by CID) referenced by records in this commit."}},time:{type:"string",format:"datetime",description:"Timestamp of when this message was originally broadcast."}}},identity:{type:"object",description:"Represents a change to an account's identity. Could be an updated handle, signing key, or pds hosting endpoint. Serves as a prod to all downstream services to refresh their identity cache.",required:["seq","did","time"],properties:{seq:{type:"integer"},did:{type:"string",format:"did"},time:{type:"string",format:"datetime"},handle:{type:"string",format:"handle",description:"The current handle for the account, or 'handle.invalid' if validation fails. This field is optional, might have been validated or passed-through from an upstream source. Semantics and behaviors for PDS vs Relay may evolve in the future; see atproto specs for more details."}}},account:{type:"object",description:"Represents a change to an account's status on a host (eg, PDS or Relay). The semantics of this event are that the status is at the host which emitted the event, not necessarily that at the currently active PDS. Eg, a Relay takedown would emit a takedown with active=false, even if the PDS is still active.",required:["seq","did","time","active"],properties:{seq:{type:"integer"},did:{type:"string",format:"did"},time:{type:"string",format:"datetime"},active:{type:"boolean",description:"Indicates that the account has a repository which can be fetched from the host that emitted this event."},status:{type:"string",description:"If active=false, this optional field indicates a reason for why the account is not active.",knownValues:["takendown","suspended","deleted","deactivated"]}}},handle:{type:"object",description:"DEPRECATED -- Use #identity event instead",required:["seq","did","handle","time"],properties:{seq:{type:"integer"},did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},time:{type:"string",format:"datetime"}}},migrate:{type:"object",description:"DEPRECATED -- Use #account event instead",required:["seq","did","migrateTo","time"],nullable:["migrateTo"],properties:{seq:{type:"integer"},did:{type:"string",format:"did"},migrateTo:{type:"string"},time:{type:"string",format:"datetime"}}},tombstone:{type:"object",description:"DEPRECATED -- Use #account event instead",required:["seq","did","time"],properties:{seq:{type:"integer"},did:{type:"string",format:"did"},time:{type:"string",format:"datetime"}}},info:{type:"object",required:["name"],properties:{name:{type:"string",knownValues:["OutdatedCursor"]},message:{type:"string"}}},repoOp:{type:"object",description:"A repo operation, ie a mutation of a single record.",required:["action","path","cid"],nullable:["cid"],properties:{action:{type:"string",knownValues:["create","update","delete"]},path:{type:"string"},cid:{type:"cid-link",description:"For creates and updates, the new record CID. For deletions, null."}}}}},ComAtprotoTempCheckSignupQueue:{lexicon:1,id:"com.atproto.temp.checkSignupQueue",defs:{main:{type:"query",description:"Check accounts location in signup queue.",output:{encoding:"application/json",schema:{type:"object",required:["activated"],properties:{activated:{type:"boolean"},placeInQueue:{type:"integer"},estimatedTimeMs:{type:"integer"}}}}}}},ComAtprotoTempFetchLabels:{lexicon:1,id:"com.atproto.temp.fetchLabels",defs:{main:{type:"query",description:"DEPRECATED: use queryLabels or subscribeLabels instead -- Fetch all labels from a labeler created after a certain date.",parameters:{type:"params",properties:{since:{type:"integer"},limit:{type:"integer",minimum:1,maximum:250,default:50}}},output:{encoding:"application/json",schema:{type:"object",required:["labels"],properties:{labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}}}}}},ComAtprotoTempRequestPhoneVerification:{lexicon:1,id:"com.atproto.temp.requestPhoneVerification",defs:{main:{type:"procedure",description:"Request a verification code to be sent to the supplied phone number",input:{encoding:"application/json",schema:{type:"object",required:["phoneNumber"],properties:{phoneNumber:{type:"string"}}}}}}},AppBskyActorDefs:{lexicon:1,id:"app.bsky.actor.defs",defs:{profileViewBasic:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},displayName:{type:"string",maxGraphemes:64,maxLength:640},avatar:{type:"string",format:"uri"},associated:{type:"ref",ref:"lex:app.bsky.actor.defs#profileAssociated"},viewer:{type:"ref",ref:"lex:app.bsky.actor.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},createdAt:{type:"string",format:"datetime"}}},profileView:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},displayName:{type:"string",maxGraphemes:64,maxLength:640},description:{type:"string",maxGraphemes:256,maxLength:2560},avatar:{type:"string",format:"uri"},associated:{type:"ref",ref:"lex:app.bsky.actor.defs#profileAssociated"},indexedAt:{type:"string",format:"datetime"},createdAt:{type:"string",format:"datetime"},viewer:{type:"ref",ref:"lex:app.bsky.actor.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},profileViewDetailed:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},displayName:{type:"string",maxGraphemes:64,maxLength:640},description:{type:"string",maxGraphemes:256,maxLength:2560},avatar:{type:"string",format:"uri"},banner:{type:"string",format:"uri"},followersCount:{type:"integer"},followsCount:{type:"integer"},postsCount:{type:"integer"},associated:{type:"ref",ref:"lex:app.bsky.actor.defs#profileAssociated"},joinedViaStarterPack:{type:"ref",ref:"lex:app.bsky.graph.defs#starterPackViewBasic"},indexedAt:{type:"string",format:"datetime"},createdAt:{type:"string",format:"datetime"},viewer:{type:"ref",ref:"lex:app.bsky.actor.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},profileAssociated:{type:"object",properties:{lists:{type:"integer"},feedgens:{type:"integer"},starterPacks:{type:"integer"},labeler:{type:"boolean"},chat:{type:"ref",ref:"lex:app.bsky.actor.defs#profileAssociatedChat"}}},profileAssociatedChat:{type:"object",required:["allowIncoming"],properties:{allowIncoming:{type:"string",knownValues:["all","none","following"]}}},viewerState:{type:"object",description:"Metadata about the requesting account's relationship with the subject account. Only has meaningful content for authed requests.",properties:{muted:{type:"boolean"},mutedByList:{type:"ref",ref:"lex:app.bsky.graph.defs#listViewBasic"},blockedBy:{type:"boolean"},blocking:{type:"string",format:"at-uri"},blockingByList:{type:"ref",ref:"lex:app.bsky.graph.defs#listViewBasic"},following:{type:"string",format:"at-uri"},followedBy:{type:"string",format:"at-uri"},knownFollowers:{type:"ref",ref:"lex:app.bsky.actor.defs#knownFollowers"}}},knownFollowers:{type:"object",description:"The subject's followers whom you also follow",required:["count","followers"],properties:{count:{type:"integer"},followers:{type:"array",minLength:0,maxLength:5,items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"}}}},preferences:{type:"array",items:{type:"union",refs:["lex:app.bsky.actor.defs#adultContentPref","lex:app.bsky.actor.defs#contentLabelPref","lex:app.bsky.actor.defs#savedFeedsPref","lex:app.bsky.actor.defs#savedFeedsPrefV2","lex:app.bsky.actor.defs#personalDetailsPref","lex:app.bsky.actor.defs#feedViewPref","lex:app.bsky.actor.defs#threadViewPref","lex:app.bsky.actor.defs#interestsPref","lex:app.bsky.actor.defs#mutedWordsPref","lex:app.bsky.actor.defs#hiddenPostsPref","lex:app.bsky.actor.defs#bskyAppStatePref","lex:app.bsky.actor.defs#labelersPref"]}},adultContentPref:{type:"object",required:["enabled"],properties:{enabled:{type:"boolean",default:!1}}},contentLabelPref:{type:"object",required:["label","visibility"],properties:{labelerDid:{type:"string",description:"Which labeler does this preference apply to? If undefined, applies globally.",format:"did"},label:{type:"string"},visibility:{type:"string",knownValues:["ignore","show","warn","hide"]}}},savedFeed:{type:"object",required:["id","type","value","pinned"],properties:{id:{type:"string"},type:{type:"string",knownValues:["feed","list","timeline"]},value:{type:"string"},pinned:{type:"boolean"}}},savedFeedsPrefV2:{type:"object",required:["items"],properties:{items:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#savedFeed"}}}},savedFeedsPref:{type:"object",required:["pinned","saved"],properties:{pinned:{type:"array",items:{type:"string",format:"at-uri"}},saved:{type:"array",items:{type:"string",format:"at-uri"}},timelineIndex:{type:"integer"}}},personalDetailsPref:{type:"object",properties:{birthDate:{type:"string",format:"datetime",description:"The birth date of account owner."}}},feedViewPref:{type:"object",required:["feed"],properties:{feed:{type:"string",description:"The URI of the feed, or an identifier which describes the feed."},hideReplies:{type:"boolean",description:"Hide replies in the feed."},hideRepliesByUnfollowed:{type:"boolean",description:"Hide replies in the feed if they are not by followed users.",default:!0},hideRepliesByLikeCount:{type:"integer",description:"Hide replies in the feed if they do not have this number of likes."},hideReposts:{type:"boolean",description:"Hide reposts in the feed."},hideQuotePosts:{type:"boolean",description:"Hide quote posts in the feed."}}},threadViewPref:{type:"object",properties:{sort:{type:"string",description:"Sorting mode for threads.",knownValues:["oldest","newest","most-likes","random"]},prioritizeFollowedUsers:{type:"boolean",description:"Show followed users at the top of all replies."}}},interestsPref:{type:"object",required:["tags"],properties:{tags:{type:"array",maxLength:100,items:{type:"string",maxLength:640,maxGraphemes:64},description:"A list of tags which describe the account owner's interests gathered during onboarding."}}},mutedWordTarget:{type:"string",knownValues:["content","tag"],maxLength:640,maxGraphemes:64},mutedWord:{type:"object",description:"A word that the account owner has muted.",required:["value","targets"],properties:{id:{type:"string"},value:{type:"string",description:"The muted word itself.",maxLength:1e4,maxGraphemes:1e3},targets:{type:"array",description:"The intended targets of the muted word.",items:{type:"ref",ref:"lex:app.bsky.actor.defs#mutedWordTarget"}},actorTarget:{type:"string",description:"Groups of users to apply the muted word to. If undefined, applies to all users.",knownValues:["all","exclude-following"],default:"all"},expiresAt:{type:"string",format:"datetime",description:"The date and time at which the muted word will expire and no longer be applied."}}},mutedWordsPref:{type:"object",required:["items"],properties:{items:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#mutedWord"},description:"A list of words the account owner has muted."}}},hiddenPostsPref:{type:"object",required:["items"],properties:{items:{type:"array",items:{type:"string",format:"at-uri"},description:"A list of URIs of posts the account owner has hidden."}}},labelersPref:{type:"object",required:["labelers"],properties:{labelers:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#labelerPrefItem"}}}},labelerPrefItem:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}},bskyAppStatePref:{description:"A grab bag of state that's specific to the bsky.app program. Third-party apps shouldn't use this.",type:"object",properties:{activeProgressGuide:{type:"ref",ref:"lex:app.bsky.actor.defs#bskyAppProgressGuide"},queuedNudges:{description:"An array of tokens which identify nudges (modals, popups, tours, highlight dots) that should be shown to the user.",type:"array",maxLength:1e3,items:{type:"string",maxLength:100}}}},bskyAppProgressGuide:{description:"If set, an active progress guide. Once completed, can be set to undefined. Should have unspecced fields tracking progress.",type:"object",required:["guide"],properties:{guide:{type:"string",maxLength:100}}}}},AppBskyActorGetPreferences:{lexicon:1,id:"app.bsky.actor.getPreferences",defs:{main:{type:"query",description:"Get private preferences attached to the current account. Expected use is synchronization between multiple devices, and import/export during account migration. Requires auth.",parameters:{type:"params",properties:{}},output:{encoding:"application/json",schema:{type:"object",required:["preferences"],properties:{preferences:{type:"ref",ref:"lex:app.bsky.actor.defs#preferences"}}}}}}},AppBskyActorGetProfile:{lexicon:1,id:"app.bsky.actor.getProfile",defs:{main:{type:"query",description:"Get detailed profile view of an actor. Does not require auth, but contains relevant metadata with auth.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier",description:"Handle or DID of account to fetch profile of."}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewDetailed"}}}}},AppBskyActorGetProfiles:{lexicon:1,id:"app.bsky.actor.getProfiles",defs:{main:{type:"query",description:"Get detailed profile views of multiple actors.",parameters:{type:"params",required:["actors"],properties:{actors:{type:"array",items:{type:"string",format:"at-identifier"},maxLength:25}}},output:{encoding:"application/json",schema:{type:"object",required:["profiles"],properties:{profiles:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewDetailed"}}}}}}}},AppBskyActorGetSuggestions:{lexicon:1,id:"app.bsky.actor.getSuggestions",defs:{main:{type:"query",description:"Get a list of suggested actors. Expected use is discovery of accounts to follow during new account onboarding.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{cursor:{type:"string"},actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyActorProfile:{lexicon:1,id:"app.bsky.actor.profile",defs:{main:{type:"record",description:"A declaration of a Bluesky account profile.",key:"literal:self",record:{type:"object",properties:{displayName:{type:"string",maxGraphemes:64,maxLength:640},description:{type:"string",description:"Free-form profile description text.",maxGraphemes:256,maxLength:2560},avatar:{type:"blob",description:"Small image to be displayed next to posts from account. AKA, 'profile picture'",accept:["image/png","image/jpeg"],maxSize:1e6},banner:{type:"blob",description:"Larger horizontal image to display behind profile view.",accept:["image/png","image/jpeg"],maxSize:1e6},labels:{type:"union",description:"Self-label values, specific to the Bluesky application, on the overall account.",refs:["lex:com.atproto.label.defs#selfLabels"]},joinedViaStarterPack:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyActorPutPreferences:{lexicon:1,id:"app.bsky.actor.putPreferences",defs:{main:{type:"procedure",description:"Set the private preferences attached to the account.",input:{encoding:"application/json",schema:{type:"object",required:["preferences"],properties:{preferences:{type:"ref",ref:"lex:app.bsky.actor.defs#preferences"}}}}}}},AppBskyActorSearchActors:{lexicon:1,id:"app.bsky.actor.searchActors",defs:{main:{type:"query",description:"Find actors (profiles) matching search criteria. Does not require auth.",parameters:{type:"params",properties:{term:{type:"string",description:"DEPRECATED: use 'q' instead."},q:{type:"string",description:"Search query string. Syntax, phrase, boolean, and faceting is unspecified, but Lucene query syntax is recommended."},limit:{type:"integer",minimum:1,maximum:100,default:25},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{cursor:{type:"string"},actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyActorSearchActorsTypeahead:{lexicon:1,id:"app.bsky.actor.searchActorsTypeahead",defs:{main:{type:"query",description:"Find actor suggestions for a prefix search term. Expected use is for auto-completion during text field entry. Does not require auth.",parameters:{type:"params",properties:{term:{type:"string",description:"DEPRECATED: use 'q' instead."},q:{type:"string",description:"Search query prefix; not a full query string."},limit:{type:"integer",minimum:1,maximum:100,default:10}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"}}}}}}}},AppBskyEmbedExternal:{lexicon:1,id:"app.bsky.embed.external",defs:{main:{type:"object",description:"A representation of some externally linked content (eg, a URL and 'card'), embedded in a Bluesky record (eg, a post).",required:["external"],properties:{external:{type:"ref",ref:"lex:app.bsky.embed.external#external"}}},external:{type:"object",required:["uri","title","description"],properties:{uri:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},thumb:{type:"blob",accept:["image/*"],maxSize:1e6}}},view:{type:"object",required:["external"],properties:{external:{type:"ref",ref:"lex:app.bsky.embed.external#viewExternal"}}},viewExternal:{type:"object",required:["uri","title","description"],properties:{uri:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},thumb:{type:"string",format:"uri"}}}}},AppBskyEmbedImages:{lexicon:1,id:"app.bsky.embed.images",description:"A set of images embedded in a Bluesky record (eg, a post).",defs:{main:{type:"object",required:["images"],properties:{images:{type:"array",items:{type:"ref",ref:"lex:app.bsky.embed.images#image"},maxLength:4}}},image:{type:"object",required:["image","alt"],properties:{image:{type:"blob",accept:["image/*"],maxSize:1e6},alt:{type:"string",description:"Alt text description of the image, for accessibility."},aspectRatio:{type:"ref",ref:"lex:app.bsky.embed.images#aspectRatio"}}},aspectRatio:{type:"object",description:"width:height represents an aspect ratio. It may be approximate, and may not correspond to absolute dimensions in any given unit.",required:["width","height"],properties:{width:{type:"integer",minimum:1},height:{type:"integer",minimum:1}}},view:{type:"object",required:["images"],properties:{images:{type:"array",items:{type:"ref",ref:"lex:app.bsky.embed.images#viewImage"},maxLength:4}}},viewImage:{type:"object",required:["thumb","fullsize","alt"],properties:{thumb:{type:"string",format:"uri",description:"Fully-qualified URL where a thumbnail of the image can be fetched. For example, CDN location provided by the App View."},fullsize:{type:"string",format:"uri",description:"Fully-qualified URL where a large version of the image can be fetched. May or may not be the exact original blob. For example, CDN location provided by the App View."},alt:{type:"string",description:"Alt text description of the image, for accessibility."},aspectRatio:{type:"ref",ref:"lex:app.bsky.embed.images#aspectRatio"}}}}},AppBskyEmbedRecord:{lexicon:1,id:"app.bsky.embed.record",description:"A representation of a record embedded in a Bluesky record (eg, a post). For example, a quote-post, or sharing a feed generator record.",defs:{main:{type:"object",required:["record"],properties:{record:{type:"ref",ref:"lex:com.atproto.repo.strongRef"}}},view:{type:"object",required:["record"],properties:{record:{type:"union",refs:["lex:app.bsky.embed.record#viewRecord","lex:app.bsky.embed.record#viewNotFound","lex:app.bsky.embed.record#viewBlocked","lex:app.bsky.feed.defs#generatorView","lex:app.bsky.graph.defs#listView","lex:app.bsky.labeler.defs#labelerView","lex:app.bsky.graph.defs#starterPackViewBasic"]}}},viewRecord:{type:"object",required:["uri","cid","author","value","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},author:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"},value:{type:"unknown",description:"The record data itself."},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},replyCount:{type:"integer"},repostCount:{type:"integer"},likeCount:{type:"integer"},embeds:{type:"array",items:{type:"union",refs:["lex:app.bsky.embed.images#view","lex:app.bsky.embed.external#view","lex:app.bsky.embed.record#view","lex:app.bsky.embed.recordWithMedia#view"]}},indexedAt:{type:"string",format:"datetime"}}},viewNotFound:{type:"object",required:["uri","notFound"],properties:{uri:{type:"string",format:"at-uri"},notFound:{type:"boolean",const:!0}}},viewBlocked:{type:"object",required:["uri","blocked","author"],properties:{uri:{type:"string",format:"at-uri"},blocked:{type:"boolean",const:!0},author:{type:"ref",ref:"lex:app.bsky.feed.defs#blockedAuthor"}}}}},AppBskyEmbedRecordWithMedia:{lexicon:1,id:"app.bsky.embed.recordWithMedia",description:"A representation of a record embedded in a Bluesky record (eg, a post), alongside other compatible embeds. For example, a quote post and image, or a quote post and external URL card.",defs:{main:{type:"object",required:["record","media"],properties:{record:{type:"ref",ref:"lex:app.bsky.embed.record"},media:{type:"union",refs:["lex:app.bsky.embed.images","lex:app.bsky.embed.external"]}}},view:{type:"object",required:["record","media"],properties:{record:{type:"ref",ref:"lex:app.bsky.embed.record#view"},media:{type:"union",refs:["lex:app.bsky.embed.images#view","lex:app.bsky.embed.external#view"]}}}}},AppBskyFeedDefs:{lexicon:1,id:"app.bsky.feed.defs",defs:{postView:{type:"object",required:["uri","cid","author","record","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},author:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"},record:{type:"unknown"},embed:{type:"union",refs:["lex:app.bsky.embed.images#view","lex:app.bsky.embed.external#view","lex:app.bsky.embed.record#view","lex:app.bsky.embed.recordWithMedia#view"]},replyCount:{type:"integer"},repostCount:{type:"integer"},likeCount:{type:"integer"},indexedAt:{type:"string",format:"datetime"},viewer:{type:"ref",ref:"lex:app.bsky.feed.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},threadgate:{type:"ref",ref:"lex:app.bsky.feed.defs#threadgateView"}}},viewerState:{type:"object",description:"Metadata about the requesting account's relationship with the subject content. Only has meaningful content for authed requests.",properties:{repost:{type:"string",format:"at-uri"},like:{type:"string",format:"at-uri"},threadMuted:{type:"boolean"},replyDisabled:{type:"boolean"}}},feedViewPost:{type:"object",required:["post"],properties:{post:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"},reply:{type:"ref",ref:"lex:app.bsky.feed.defs#replyRef"},reason:{type:"union",refs:["lex:app.bsky.feed.defs#reasonRepost"]},feedContext:{type:"string",description:"Context provided by feed generator that may be passed back alongside interactions.",maxLength:2e3}}},replyRef:{type:"object",required:["root","parent"],properties:{root:{type:"union",refs:["lex:app.bsky.feed.defs#postView","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]},parent:{type:"union",refs:["lex:app.bsky.feed.defs#postView","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]},grandparentAuthor:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic",description:"When parent is a reply to another post, this is the author of that post."}}},reasonRepost:{type:"object",required:["by","indexedAt"],properties:{by:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"},indexedAt:{type:"string",format:"datetime"}}},threadViewPost:{type:"object",required:["post"],properties:{post:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"},parent:{type:"union",refs:["lex:app.bsky.feed.defs#threadViewPost","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]},replies:{type:"array",items:{type:"union",refs:["lex:app.bsky.feed.defs#threadViewPost","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]}}}},notFoundPost:{type:"object",required:["uri","notFound"],properties:{uri:{type:"string",format:"at-uri"},notFound:{type:"boolean",const:!0}}},blockedPost:{type:"object",required:["uri","blocked","author"],properties:{uri:{type:"string",format:"at-uri"},blocked:{type:"boolean",const:!0},author:{type:"ref",ref:"lex:app.bsky.feed.defs#blockedAuthor"}}},blockedAuthor:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"},viewer:{type:"ref",ref:"lex:app.bsky.actor.defs#viewerState"}}},generatorView:{type:"object",required:["uri","cid","did","creator","displayName","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},did:{type:"string",format:"did"},creator:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},displayName:{type:"string"},description:{type:"string",maxGraphemes:300,maxLength:3e3},descriptionFacets:{type:"array",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},avatar:{type:"string",format:"uri"},likeCount:{type:"integer",minimum:0},acceptsInteractions:{type:"boolean"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},viewer:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorViewerState"},indexedAt:{type:"string",format:"datetime"}}},generatorViewerState:{type:"object",properties:{like:{type:"string",format:"at-uri"}}},skeletonFeedPost:{type:"object",required:["post"],properties:{post:{type:"string",format:"at-uri"},reason:{type:"union",refs:["lex:app.bsky.feed.defs#skeletonReasonRepost"]},feedContext:{type:"string",description:"Context that will be passed through to client and may be passed to feed generator back alongside interactions.",maxLength:2e3}}},skeletonReasonRepost:{type:"object",required:["repost"],properties:{repost:{type:"string",format:"at-uri"}}},threadgateView:{type:"object",properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},record:{type:"unknown"},lists:{type:"array",items:{type:"ref",ref:"lex:app.bsky.graph.defs#listViewBasic"}}}},interaction:{type:"object",properties:{item:{type:"string",format:"at-uri"},event:{type:"string",knownValues:["app.bsky.feed.defs#requestLess","app.bsky.feed.defs#requestMore","app.bsky.feed.defs#clickthroughItem","app.bsky.feed.defs#clickthroughAuthor","app.bsky.feed.defs#clickthroughReposter","app.bsky.feed.defs#clickthroughEmbed","app.bsky.feed.defs#interactionSeen","app.bsky.feed.defs#interactionLike","app.bsky.feed.defs#interactionRepost","app.bsky.feed.defs#interactionReply","app.bsky.feed.defs#interactionQuote","app.bsky.feed.defs#interactionShare"]},feedContext:{type:"string",description:"Context on a feed item that was originally supplied by the feed generator on getFeedSkeleton.",maxLength:2e3}}},requestLess:{type:"token",description:"Request that less content like the given feed item be shown in the feed"},requestMore:{type:"token",description:"Request that more content like the given feed item be shown in the feed"},clickthroughItem:{type:"token",description:"User clicked through to the feed item"},clickthroughAuthor:{type:"token",description:"User clicked through to the author of the feed item"},clickthroughReposter:{type:"token",description:"User clicked through to the reposter of the feed item"},clickthroughEmbed:{type:"token",description:"User clicked through to the embedded content of the feed item"},interactionSeen:{type:"token",description:"Feed item was seen by user"},interactionLike:{type:"token",description:"User liked the feed item"},interactionRepost:{type:"token",description:"User reposted the feed item"},interactionReply:{type:"token",description:"User replied to the feed item"},interactionQuote:{type:"token",description:"User quoted the feed item"},interactionShare:{type:"token",description:"User shared the feed item"}}},AppBskyFeedDescribeFeedGenerator:{lexicon:1,id:"app.bsky.feed.describeFeedGenerator",defs:{main:{type:"query",description:"Get information about a feed generator, including policies and offered feed URIs. Does not require auth; implemented by Feed Generator services (not App View).",output:{encoding:"application/json",schema:{type:"object",required:["did","feeds"],properties:{did:{type:"string",format:"did"},feeds:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.describeFeedGenerator#feed"}},links:{type:"ref",ref:"lex:app.bsky.feed.describeFeedGenerator#links"}}}}},feed:{type:"object",required:["uri"],properties:{uri:{type:"string",format:"at-uri"}}},links:{type:"object",properties:{privacyPolicy:{type:"string"},termsOfService:{type:"string"}}}}},AppBskyFeedGenerator:{lexicon:1,id:"app.bsky.feed.generator",defs:{main:{type:"record",description:"Record declaring of the existence of a feed generator, and containing metadata about it. The record can exist in any repository.",key:"any",record:{type:"object",required:["did","displayName","createdAt"],properties:{did:{type:"string",format:"did"},displayName:{type:"string",maxGraphemes:24,maxLength:240},description:{type:"string",maxGraphemes:300,maxLength:3e3},descriptionFacets:{type:"array",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},avatar:{type:"blob",accept:["image/png","image/jpeg"],maxSize:1e6},acceptsInteractions:{type:"boolean",description:"Declaration that a feed accepts feedback interactions from a client through app.bsky.feed.sendInteractions"},labels:{type:"union",description:"Self-label values",refs:["lex:com.atproto.label.defs#selfLabels"]},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyFeedGetActorFeeds:{lexicon:1,id:"app.bsky.feed.getActorFeeds",defs:{main:{type:"query",description:"Get a list of feeds (feed generator records) created by the actor (in the actor's repo).",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feeds"],properties:{cursor:{type:"string"},feeds:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorView"}}}}}}}},AppBskyFeedGetActorLikes:{lexicon:1,id:"app.bsky.feed.getActorLikes",defs:{main:{type:"query",description:"Get a list of posts liked by an actor. Does not require auth.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}},errors:[{name:"BlockedActor"},{name:"BlockedByActor"}]}}},AppBskyFeedGetAuthorFeed:{lexicon:1,id:"app.bsky.feed.getAuthorFeed",defs:{main:{type:"query",description:"Get a view of an actor's 'author feed' (post and reposts by the author). Does not require auth.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"},filter:{type:"string",description:"Combinations of post/repost types to include in response.",knownValues:["posts_with_replies","posts_no_replies","posts_with_media","posts_and_author_threads"],default:"posts_with_replies"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}},errors:[{name:"BlockedActor"},{name:"BlockedByActor"}]}}},AppBskyFeedGetFeed:{lexicon:1,id:"app.bsky.feed.getFeed",defs:{main:{type:"query",description:"Get a hydrated feed from an actor's selected feed generator. Implemented by App View.",parameters:{type:"params",required:["feed"],properties:{feed:{type:"string",format:"at-uri"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}},errors:[{name:"UnknownFeed"}]}}},AppBskyFeedGetFeedGenerator:{lexicon:1,id:"app.bsky.feed.getFeedGenerator",defs:{main:{type:"query",description:"Get information about a feed generator. Implemented by AppView.",parameters:{type:"params",required:["feed"],properties:{feed:{type:"string",format:"at-uri",description:"AT-URI of the feed generator record."}}},output:{encoding:"application/json",schema:{type:"object",required:["view","isOnline","isValid"],properties:{view:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorView"},isOnline:{type:"boolean",description:"Indicates whether the feed generator service has been online recently, or else seems to be inactive."},isValid:{type:"boolean",description:"Indicates whether the feed generator service is compatible with the record declaration."}}}}}}},AppBskyFeedGetFeedGenerators:{lexicon:1,id:"app.bsky.feed.getFeedGenerators",defs:{main:{type:"query",description:"Get information about a list of feed generators.",parameters:{type:"params",required:["feeds"],properties:{feeds:{type:"array",items:{type:"string",format:"at-uri"}}}},output:{encoding:"application/json",schema:{type:"object",required:["feeds"],properties:{feeds:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorView"}}}}}}}},AppBskyFeedGetFeedSkeleton:{lexicon:1,id:"app.bsky.feed.getFeedSkeleton",defs:{main:{type:"query",description:"Get a skeleton of a feed provided by a feed generator. Auth is optional, depending on provider requirements, and provides the DID of the requester. Implemented by Feed Generator Service.",parameters:{type:"params",required:["feed"],properties:{feed:{type:"string",format:"at-uri",description:"Reference to feed generator record describing the specific feed being requested."},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#skeletonFeedPost"}}}}},errors:[{name:"UnknownFeed"}]}}},AppBskyFeedGetLikes:{lexicon:1,id:"app.bsky.feed.getLikes",defs:{main:{type:"query",description:"Get like records which reference a subject (by AT-URI and CID).",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string",format:"at-uri",description:"AT-URI of the subject (eg, a post record)."},cid:{type:"string",format:"cid",description:"CID of the subject record (aka, specific version of record), to filter likes."},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","likes"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},cursor:{type:"string"},likes:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.getLikes#like"}}}}}},like:{type:"object",required:["indexedAt","createdAt","actor"],properties:{indexedAt:{type:"string",format:"datetime"},createdAt:{type:"string",format:"datetime"},actor:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}},AppBskyFeedGetListFeed:{lexicon:1,id:"app.bsky.feed.getListFeed",defs:{main:{type:"query",description:"Get a feed of recent posts from a list (posts and reposts from any actors on the list). Does not require auth.",parameters:{type:"params",required:["list"],properties:{list:{type:"string",format:"at-uri",description:"Reference (AT-URI) to the list record."},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}},errors:[{name:"UnknownList"}]}}},AppBskyFeedGetPostThread:{lexicon:1,id:"app.bsky.feed.getPostThread",defs:{main:{type:"query",description:"Get posts in a thread. Does not require auth, but additional metadata and filtering will be applied for authed requests.",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string",format:"at-uri",description:"Reference (AT-URI) to post record."},depth:{type:"integer",description:"How many levels of reply depth should be included in response.",default:6,minimum:0,maximum:1e3},parentHeight:{type:"integer",description:"How many levels of parent (and grandparent, etc) post to include.",default:80,minimum:0,maximum:1e3}}},output:{encoding:"application/json",schema:{type:"object",required:["thread"],properties:{thread:{type:"union",refs:["lex:app.bsky.feed.defs#threadViewPost","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]}}}},errors:[{name:"NotFound"}]}}},AppBskyFeedGetPosts:{lexicon:1,id:"app.bsky.feed.getPosts",defs:{main:{type:"query",description:"Gets post views for a specified list of posts (by AT-URI). This is sometimes referred to as 'hydrating' a 'feed skeleton'.",parameters:{type:"params",required:["uris"],properties:{uris:{type:"array",description:"List of post AT-URIs to return hydrated views for.",items:{type:"string",format:"at-uri"},maxLength:25}}},output:{encoding:"application/json",schema:{type:"object",required:["posts"],properties:{posts:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"}}}}}}}},AppBskyFeedGetRepostedBy:{lexicon:1,id:"app.bsky.feed.getRepostedBy",defs:{main:{type:"query",description:"Get a list of reposts for a given post.",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string",format:"at-uri",description:"Reference (AT-URI) of post record"},cid:{type:"string",format:"cid",description:"If supplied, filters to reposts of specific version (by CID) of the post record."},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","repostedBy"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},cursor:{type:"string"},repostedBy:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyFeedGetSuggestedFeeds:{lexicon:1,id:"app.bsky.feed.getSuggestedFeeds",defs:{main:{type:"query",description:"Get a list of suggested feeds (feed generators) for the requesting account.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feeds"],properties:{cursor:{type:"string"},feeds:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorView"}}}}}}}},AppBskyFeedGetTimeline:{lexicon:1,id:"app.bsky.feed.getTimeline",defs:{main:{type:"query",description:"Get a view of the requesting account's home timeline. This is expected to be some form of reverse-chronological feed.",parameters:{type:"params",properties:{algorithm:{type:"string",description:"Variant 'algorithm' for timeline. Implementation-specific. NOTE: most feed flexibility has been moved to feed generator mechanism."},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}}}}},AppBskyFeedLike:{lexicon:1,id:"app.bsky.feed.like",defs:{main:{type:"record",description:"Record declaring a 'like' of a piece of subject content.",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyFeedPost:{lexicon:1,id:"app.bsky.feed.post",defs:{main:{type:"record",description:"Record containing a Bluesky post.",key:"tid",record:{type:"object",required:["text","createdAt"],properties:{text:{type:"string",maxLength:3e3,maxGraphemes:300,description:"The primary post content. May be an empty string, if there are embeds."},entities:{type:"array",description:"DEPRECATED: replaced by app.bsky.richtext.facet.",items:{type:"ref",ref:"lex:app.bsky.feed.post#entity"}},facets:{type:"array",description:"Annotations of text (mentions, URLs, hashtags, etc)",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},reply:{type:"ref",ref:"lex:app.bsky.feed.post#replyRef"},embed:{type:"union",refs:["lex:app.bsky.embed.images","lex:app.bsky.embed.external","lex:app.bsky.embed.record","lex:app.bsky.embed.recordWithMedia"]},langs:{type:"array",description:"Indicates human language of post primary text content.",maxLength:3,items:{type:"string",format:"language"}},labels:{type:"union",description:"Self-label values for this post. Effectively content warnings.",refs:["lex:com.atproto.label.defs#selfLabels"]},tags:{type:"array",description:"Additional hashtags, in addition to any included in post text and facets.",maxLength:8,items:{type:"string",maxLength:640,maxGraphemes:64}},createdAt:{type:"string",format:"datetime",description:"Client-declared timestamp when this post was originally created."}}}},replyRef:{type:"object",required:["root","parent"],properties:{root:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},parent:{type:"ref",ref:"lex:com.atproto.repo.strongRef"}}},entity:{type:"object",description:"Deprecated: use facets instead.",required:["index","type","value"],properties:{index:{type:"ref",ref:"lex:app.bsky.feed.post#textSlice"},type:{type:"string",description:"Expected values are 'mention' and 'link'."},value:{type:"string"}}},textSlice:{type:"object",description:"Deprecated. Use app.bsky.richtext instead -- A text segment. Start is inclusive, end is exclusive. Indices are for utf16-encoded strings.",required:["start","end"],properties:{start:{type:"integer",minimum:0},end:{type:"integer",minimum:0}}}}},AppBskyFeedRepost:{lexicon:1,id:"app.bsky.feed.repost",defs:{main:{description:"Record representing a 'repost' of an existing Bluesky post.",type:"record",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyFeedSearchPosts:{lexicon:1,id:"app.bsky.feed.searchPosts",defs:{main:{type:"query",description:"Find posts matching search criteria, returning views of those posts.",parameters:{type:"params",required:["q"],properties:{q:{type:"string",description:"Search query string; syntax, phrase, boolean, and faceting is unspecified, but Lucene query syntax is recommended."},sort:{type:"string",knownValues:["top","latest"],default:"latest",description:"Specifies the ranking order of results."},since:{type:"string",description:"Filter results for posts after the indicated datetime (inclusive). Expected to use 'sortAt' timestamp, which may not match 'createdAt'. Can be a datetime, or just an ISO date (YYYY-MM-DD)."},until:{type:"string",description:"Filter results for posts before the indicated datetime (not inclusive). Expected to use 'sortAt' timestamp, which may not match 'createdAt'. Can be a datetime, or just an ISO date (YYY-MM-DD)."},mentions:{type:"string",format:"at-identifier",description:"Filter to posts which mention the given account. Handles are resolved to DID before query-time. Only matches rich-text facet mentions."},author:{type:"string",format:"at-identifier",description:"Filter to posts by the given account. Handles are resolved to DID before query-time."},lang:{type:"string",format:"language",description:"Filter to posts in the given language. Expected to be based on post language field, though server may override language detection."},domain:{type:"string",description:"Filter to posts with URLs (facet links or embeds) linking to the given domain (hostname). Server may apply hostname normalization."},url:{type:"string",format:"uri",description:"Filter to posts with links (facet links or embeds) pointing to this URL. Server may apply URL normalization or fuzzy matching."},tag:{type:"array",items:{type:"string",maxLength:640,maxGraphemes:64},description:"Filter to posts with the given tag (hashtag), based on rich-text facet or tag field. Do not include the hash (#) prefix. Multiple tags can be specified, with 'AND' matching."},limit:{type:"integer",minimum:1,maximum:100,default:25},cursor:{type:"string",description:"Optional pagination mechanism; may not necessarily allow scrolling through entire result set."}}},output:{encoding:"application/json",schema:{type:"object",required:["posts"],properties:{cursor:{type:"string"},hitsTotal:{type:"integer",description:"Count of search hits. Optional, may be rounded/truncated, and may not be possible to paginate through all hits."},posts:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"}}}}},errors:[{name:"BadQueryString"}]}}},AppBskyFeedSendInteractions:{lexicon:1,id:"app.bsky.feed.sendInteractions",defs:{main:{type:"procedure",description:"Send information about interactions with feed items back to the feed generator that served them.",input:{encoding:"application/json",schema:{type:"object",required:["interactions"],properties:{interactions:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#interaction"}}}}},output:{encoding:"application/json",schema:{type:"object",properties:{}}}}}},AppBskyFeedThreadgate:{lexicon:1,id:"app.bsky.feed.threadgate",defs:{main:{type:"record",key:"tid",description:"Record defining interaction gating rules for a thread (aka, reply controls). The record key (rkey) of the threadgate record must match the record key of the thread's root post, and that record must be in the same repository..",record:{type:"object",required:["post","createdAt"],properties:{post:{type:"string",format:"at-uri",description:"Reference (AT-URI) to the post record."},allow:{type:"array",maxLength:5,items:{type:"union",refs:["lex:app.bsky.feed.threadgate#mentionRule","lex:app.bsky.feed.threadgate#followingRule","lex:app.bsky.feed.threadgate#listRule"]}},createdAt:{type:"string",format:"datetime"}}}},mentionRule:{type:"object",description:"Allow replies from actors mentioned in your post.",properties:{}},followingRule:{type:"object",description:"Allow replies from actors you follow.",properties:{}},listRule:{type:"object",description:"Allow replies from actors on a list.",required:["list"],properties:{list:{type:"string",format:"at-uri"}}}}},AppBskyGraphBlock:{lexicon:1,id:"app.bsky.graph.block",defs:{main:{type:"record",description:"Record declaring a 'block' relationship against another account. NOTE: blocks are public in Bluesky; see blog posts for details.",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"string",format:"did",description:"DID of the account to be blocked."},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphDefs:{lexicon:1,id:"app.bsky.graph.defs",defs:{listViewBasic:{type:"object",required:["uri","cid","name","purpose"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},name:{type:"string",maxLength:64,minLength:1},purpose:{type:"ref",ref:"lex:app.bsky.graph.defs#listPurpose"},avatar:{type:"string",format:"uri"},listItemCount:{type:"integer",minimum:0},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},viewer:{type:"ref",ref:"lex:app.bsky.graph.defs#listViewerState"},indexedAt:{type:"string",format:"datetime"}}},listView:{type:"object",required:["uri","cid","creator","name","purpose","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},creator:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},name:{type:"string",maxLength:64,minLength:1},purpose:{type:"ref",ref:"lex:app.bsky.graph.defs#listPurpose"},description:{type:"string",maxGraphemes:300,maxLength:3e3},descriptionFacets:{type:"array",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},avatar:{type:"string",format:"uri"},listItemCount:{type:"integer",minimum:0},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},viewer:{type:"ref",ref:"lex:app.bsky.graph.defs#listViewerState"},indexedAt:{type:"string",format:"datetime"}}},listItemView:{type:"object",required:["uri","subject"],properties:{uri:{type:"string",format:"at-uri"},subject:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}},starterPackView:{type:"object",required:["uri","cid","record","creator","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},record:{type:"unknown"},creator:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"},list:{type:"ref",ref:"lex:app.bsky.graph.defs#listViewBasic"},listItemsSample:{type:"array",maxLength:12,items:{type:"ref",ref:"lex:app.bsky.graph.defs#listItemView"}},feeds:{type:"array",maxLength:3,items:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorView"}},joinedWeekCount:{type:"integer",minimum:0},joinedAllTimeCount:{type:"integer",minimum:0},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},indexedAt:{type:"string",format:"datetime"}}},starterPackViewBasic:{type:"object",required:["uri","cid","record","creator","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},record:{type:"unknown"},creator:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"},listItemCount:{type:"integer",minimum:0},joinedWeekCount:{type:"integer",minimum:0},joinedAllTimeCount:{type:"integer",minimum:0},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},indexedAt:{type:"string",format:"datetime"}}},listPurpose:{type:"string",knownValues:["app.bsky.graph.defs#modlist","app.bsky.graph.defs#curatelist","app.bsky.graph.defs#referencelist"]},modlist:{type:"token",description:"A list of actors to apply an aggregate moderation action (mute/block) on."},curatelist:{type:"token",description:"A list of actors used for curation purposes such as list feeds or interaction gating."},referencelist:{type:"token",description:"A list of actors used for only for reference purposes such as within a starter pack."},listViewerState:{type:"object",properties:{muted:{type:"boolean"},blocked:{type:"string",format:"at-uri"}}},notFoundActor:{type:"object",description:"indicates that a handle or DID could not be resolved",required:["actor","notFound"],properties:{actor:{type:"string",format:"at-identifier"},notFound:{type:"boolean",const:!0}}},relationship:{type:"object",description:"lists the bi-directional graph relationships between one actor (not indicated in the object), and the target actors (the DID included in the object)",required:["did"],properties:{did:{type:"string",format:"did"},following:{type:"string",format:"at-uri",description:"if the actor follows this DID, this is the AT-URI of the follow record"},followedBy:{type:"string",format:"at-uri",description:"if the actor is followed by this DID, contains the AT-URI of the follow record"}}}}},AppBskyGraphFollow:{lexicon:1,id:"app.bsky.graph.follow",defs:{main:{type:"record",description:"Record declaring a social 'follow' relationship of another account. Duplicate follows will be ignored by the AppView.",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphGetActorStarterPacks:{lexicon:1,id:"app.bsky.graph.getActorStarterPacks",defs:{main:{type:"query",description:"Get a list of starter packs created by the actor.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["starterPacks"],properties:{cursor:{type:"string"},starterPacks:{type:"array",items:{type:"ref",ref:"lex:app.bsky.graph.defs#starterPackViewBasic"}}}}}}}},AppBskyGraphGetBlocks:{lexicon:1,id:"app.bsky.graph.getBlocks",defs:{main:{type:"query",description:"Enumerates which accounts the requesting account is currently blocking. Requires auth.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["blocks"],properties:{cursor:{type:"string"},blocks:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphGetFollowers:{lexicon:1,id:"app.bsky.graph.getFollowers",defs:{main:{type:"query",description:"Enumerates accounts which follow a specified account (actor).",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["subject","followers"],properties:{subject:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},cursor:{type:"string"},followers:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphGetFollows:{lexicon:1,id:"app.bsky.graph.getFollows",defs:{main:{type:"query",description:"Enumerates accounts which a specified account (actor) follows.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["subject","follows"],properties:{subject:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},cursor:{type:"string"},follows:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphGetKnownFollowers:{lexicon:1,id:"app.bsky.graph.getKnownFollowers",defs:{main:{type:"query",description:"Enumerates accounts which follow a specified account (actor) and are followed by the viewer.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["subject","followers"],properties:{subject:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},cursor:{type:"string"},followers:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphGetList:{lexicon:1,id:"app.bsky.graph.getList",defs:{main:{type:"query",description:"Gets a 'view' (with additional context) of a specified list.",parameters:{type:"params",required:["list"],properties:{list:{type:"string",format:"at-uri",description:"Reference (AT-URI) of the list record to hydrate."},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["list","items"],properties:{cursor:{type:"string"},list:{type:"ref",ref:"lex:app.bsky.graph.defs#listView"},items:{type:"array",items:{type:"ref",ref:"lex:app.bsky.graph.defs#listItemView"}}}}}}}},AppBskyGraphGetListBlocks:{lexicon:1,id:"app.bsky.graph.getListBlocks",defs:{main:{type:"query",description:"Get mod lists that the requesting account (actor) is blocking. Requires auth.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["lists"],properties:{cursor:{type:"string"},lists:{type:"array",items:{type:"ref",ref:"lex:app.bsky.graph.defs#listView"}}}}}}}},AppBskyGraphGetListMutes:{lexicon:1,id:"app.bsky.graph.getListMutes",defs:{main:{type:"query",description:"Enumerates mod lists that the requesting account (actor) currently has muted. Requires auth.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["lists"],properties:{cursor:{type:"string"},lists:{type:"array",items:{type:"ref",ref:"lex:app.bsky.graph.defs#listView"}}}}}}}},AppBskyGraphGetLists:{lexicon:1,id:"app.bsky.graph.getLists",defs:{main:{type:"query",description:"Enumerates the lists created by a specified account (actor).",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier",description:"The account (actor) to enumerate lists from."},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["lists"],properties:{cursor:{type:"string"},lists:{type:"array",items:{type:"ref",ref:"lex:app.bsky.graph.defs#listView"}}}}}}}},AppBskyGraphGetMutes:{lexicon:1,id:"app.bsky.graph.getMutes",defs:{main:{type:"query",description:"Enumerates accounts that the requesting account (actor) currently has muted. Requires auth.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["mutes"],properties:{cursor:{type:"string"},mutes:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphGetRelationships:{lexicon:1,id:"app.bsky.graph.getRelationships",defs:{main:{type:"query",description:"Enumerates public relationships between one account, and a list of other accounts. Does not require auth.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier",description:"Primary account requesting relationships for."},others:{type:"array",description:"List of 'other' accounts to be related back to the primary.",maxLength:30,items:{type:"string",format:"at-identifier"}}}},output:{encoding:"application/json",schema:{type:"object",required:["relationships"],properties:{actor:{type:"string",format:"did"},relationships:{type:"array",items:{type:"union",refs:["lex:app.bsky.graph.defs#relationship","lex:app.bsky.graph.defs#notFoundActor"]}}}}},errors:[{name:"ActorNotFound",description:"the primary actor at-identifier could not be resolved"}]}}},AppBskyGraphGetStarterPack:{lexicon:1,id:"app.bsky.graph.getStarterPack",defs:{main:{type:"query",description:"Gets a view of a starter pack.",parameters:{type:"params",required:["starterPack"],properties:{starterPack:{type:"string",format:"at-uri",description:"Reference (AT-URI) of the starter pack record."}}},output:{encoding:"application/json",schema:{type:"object",required:["starterPack"],properties:{starterPack:{type:"ref",ref:"lex:app.bsky.graph.defs#starterPackView"}}}}}}},AppBskyGraphGetStarterPacks:{lexicon:1,id:"app.bsky.graph.getStarterPacks",defs:{main:{type:"query",description:"Get views for a list of starter packs.",parameters:{type:"params",required:["uris"],properties:{uris:{type:"array",items:{type:"string",format:"at-uri"},maxLength:25}}},output:{encoding:"application/json",schema:{type:"object",required:["starterPacks"],properties:{starterPacks:{type:"array",items:{type:"ref",ref:"lex:app.bsky.graph.defs#starterPackViewBasic"}}}}}}}},AppBskyGraphGetSuggestedFollowsByActor:{lexicon:1,id:"app.bsky.graph.getSuggestedFollowsByActor",defs:{main:{type:"query",description:"Enumerates follows similar to a given account (actor). Expected use is to recommend additional accounts immediately after following one account.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"}}},output:{encoding:"application/json",schema:{type:"object",required:["suggestions"],properties:{suggestions:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphList:{lexicon:1,id:"app.bsky.graph.list",defs:{main:{type:"record",description:"Record representing a list of accounts (actors). Scope includes both moderation-oriented lists and curration-oriented lists.",key:"tid",record:{type:"object",required:["name","purpose","createdAt"],properties:{purpose:{type:"ref",description:"Defines the purpose of the list (aka, moderation-oriented or curration-oriented)",ref:"lex:app.bsky.graph.defs#listPurpose"},name:{type:"string",maxLength:64,minLength:1,description:"Display name for list; can not be empty."},description:{type:"string",maxGraphemes:300,maxLength:3e3},descriptionFacets:{type:"array",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},avatar:{type:"blob",accept:["image/png","image/jpeg"],maxSize:1e6},labels:{type:"union",refs:["lex:com.atproto.label.defs#selfLabels"]},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphListblock:{lexicon:1,id:"app.bsky.graph.listblock",defs:{main:{type:"record",description:"Record representing a block relationship against an entire an entire list of accounts (actors).",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"string",format:"at-uri",description:"Reference (AT-URI) to the mod list record."},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphListitem:{lexicon:1,id:"app.bsky.graph.listitem",defs:{main:{type:"record",description:"Record representing an account's inclusion on a specific list. The AppView will ignore duplicate listitem records.",key:"tid",record:{type:"object",required:["subject","list","createdAt"],properties:{subject:{type:"string",format:"did",description:"The account which is included on the list."},list:{type:"string",format:"at-uri",description:"Reference (AT-URI) to the list record (app.bsky.graph.list)."},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphMuteActor:{lexicon:1,id:"app.bsky.graph.muteActor",defs:{main:{type:"procedure",description:"Creates a mute relationship for the specified account. Mutes are private in Bluesky. Requires auth.",input:{encoding:"application/json",schema:{type:"object",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"}}}}}}},AppBskyGraphMuteActorList:{lexicon:1,id:"app.bsky.graph.muteActorList",defs:{main:{type:"procedure",description:"Creates a mute relationship for the specified list of accounts. Mutes are private in Bluesky. Requires auth.",input:{encoding:"application/json",schema:{type:"object",required:["list"],properties:{list:{type:"string",format:"at-uri"}}}}}}},AppBskyGraphMuteThread:{lexicon:1,id:"app.bsky.graph.muteThread",defs:{main:{type:"procedure",description:"Mutes a thread preventing notifications from the thread and any of its children. Mutes are private in Bluesky. Requires auth.",input:{encoding:"application/json",schema:{type:"object",required:["root"],properties:{root:{type:"string",format:"at-uri"}}}}}}},AppBskyGraphStarterpack:{lexicon:1,id:"app.bsky.graph.starterpack",defs:{main:{type:"record",description:"Record defining a starter pack of actors and feeds for new users.",key:"tid",record:{type:"object",required:["name","list","createdAt"],properties:{name:{type:"string",maxGraphemes:50,maxLength:500,minLength:1,description:"Display name for starter pack; can not be empty."},description:{type:"string",maxGraphemes:300,maxLength:3e3},descriptionFacets:{type:"array",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},list:{type:"string",format:"at-uri",description:"Reference (AT-URI) to the list record."},feeds:{type:"array",maxLength:3,items:{type:"ref",ref:"lex:app.bsky.graph.starterpack#feedItem"}},createdAt:{type:"string",format:"datetime"}}}},feedItem:{type:"object",required:["uri"],properties:{uri:{type:"string",format:"at-uri"}}}}},AppBskyGraphUnmuteActor:{lexicon:1,id:"app.bsky.graph.unmuteActor",defs:{main:{type:"procedure",description:"Unmutes the specified account. Requires auth.",input:{encoding:"application/json",schema:{type:"object",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"}}}}}}},AppBskyGraphUnmuteActorList:{lexicon:1,id:"app.bsky.graph.unmuteActorList",defs:{main:{type:"procedure",description:"Unmutes the specified list of accounts. Requires auth.",input:{encoding:"application/json",schema:{type:"object",required:["list"],properties:{list:{type:"string",format:"at-uri"}}}}}}},AppBskyGraphUnmuteThread:{lexicon:1,id:"app.bsky.graph.unmuteThread",defs:{main:{type:"procedure",description:"Unmutes the specified thread. Requires auth.",input:{encoding:"application/json",schema:{type:"object",required:["root"],properties:{root:{type:"string",format:"at-uri"}}}}}}},AppBskyLabelerDefs:{lexicon:1,id:"app.bsky.labeler.defs",defs:{labelerView:{type:"object",required:["uri","cid","creator","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},creator:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},likeCount:{type:"integer",minimum:0},viewer:{type:"ref",ref:"lex:app.bsky.labeler.defs#labelerViewerState"},indexedAt:{type:"string",format:"datetime"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},labelerViewDetailed:{type:"object",required:["uri","cid","creator","policies","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},creator:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},policies:{type:"ref",ref:"lex:app.bsky.labeler.defs#labelerPolicies"},likeCount:{type:"integer",minimum:0},viewer:{type:"ref",ref:"lex:app.bsky.labeler.defs#labelerViewerState"},indexedAt:{type:"string",format:"datetime"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},labelerViewerState:{type:"object",properties:{like:{type:"string",format:"at-uri"}}},labelerPolicies:{type:"object",required:["labelValues"],properties:{labelValues:{type:"array",description:"The label values which this labeler publishes. May include global or custom labels.",items:{type:"ref",ref:"lex:com.atproto.label.defs#labelValue"}},labelValueDefinitions:{type:"array",description:"Label values created by this labeler and scoped exclusively to it. Labels defined here will override global label definitions for this labeler.",items:{type:"ref",ref:"lex:com.atproto.label.defs#labelValueDefinition"}}}}}},AppBskyLabelerGetServices:{lexicon:1,id:"app.bsky.labeler.getServices",defs:{main:{type:"query",description:"Get information about a list of labeler services.",parameters:{type:"params",required:["dids"],properties:{dids:{type:"array",items:{type:"string",format:"did"}},detailed:{type:"boolean",default:!1}}},output:{encoding:"application/json",schema:{type:"object",required:["views"],properties:{views:{type:"array",items:{type:"union",refs:["lex:app.bsky.labeler.defs#labelerView","lex:app.bsky.labeler.defs#labelerViewDetailed"]}}}}}}}},AppBskyLabelerService:{lexicon:1,id:"app.bsky.labeler.service",defs:{main:{type:"record",description:"A declaration of the existence of labeler service.",key:"literal:self",record:{type:"object",required:["policies","createdAt"],properties:{policies:{type:"ref",ref:"lex:app.bsky.labeler.defs#labelerPolicies"},labels:{type:"union",refs:["lex:com.atproto.label.defs#selfLabels"]},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyNotificationGetUnreadCount:{lexicon:1,id:"app.bsky.notification.getUnreadCount",defs:{main:{type:"query",description:"Count the number of unread notifications for the requesting account. Requires auth.",parameters:{type:"params",properties:{priority:{type:"boolean"},seenAt:{type:"string",format:"datetime"}}},output:{encoding:"application/json",schema:{type:"object",required:["count"],properties:{count:{type:"integer"}}}}}}},AppBskyNotificationListNotifications:{lexicon:1,id:"app.bsky.notification.listNotifications",defs:{main:{type:"query",description:"Enumerate notifications for the requesting account. Requires auth.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},priority:{type:"boolean"},cursor:{type:"string"},seenAt:{type:"string",format:"datetime"}}},output:{encoding:"application/json",schema:{type:"object",required:["notifications"],properties:{cursor:{type:"string"},notifications:{type:"array",items:{type:"ref",ref:"lex:app.bsky.notification.listNotifications#notification"}},priority:{type:"boolean"},seenAt:{type:"string",format:"datetime"}}}}},notification:{type:"object",required:["uri","cid","author","reason","record","isRead","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},author:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},reason:{type:"string",description:"Expected values are 'like', 'repost', 'follow', 'mention', 'reply', 'quote', and 'starterpack-joined'.",knownValues:["like","repost","follow","mention","reply","quote","starterpack-joined"]},reasonSubject:{type:"string",format:"at-uri"},record:{type:"unknown"},isRead:{type:"boolean"},indexedAt:{type:"string",format:"datetime"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}}}},AppBskyNotificationPutPreferences:{lexicon:1,id:"app.bsky.notification.putPreferences",defs:{main:{type:"procedure",description:"Set notification-related preferences for an account. Requires auth.",input:{encoding:"application/json",schema:{type:"object",required:["priority"],properties:{priority:{type:"boolean"}}}}}}},AppBskyNotificationRegisterPush:{lexicon:1,id:"app.bsky.notification.registerPush",defs:{main:{type:"procedure",description:"Register to receive push notifications, via a specified service, for the requesting account. Requires auth.",input:{encoding:"application/json",schema:{type:"object",required:["serviceDid","token","platform","appId"],properties:{serviceDid:{type:"string",format:"did"},token:{type:"string"},platform:{type:"string",knownValues:["ios","android","web"]},appId:{type:"string"}}}}}}},AppBskyNotificationUpdateSeen:{lexicon:1,id:"app.bsky.notification.updateSeen",defs:{main:{type:"procedure",description:"Notify server that the requesting account has seen notifications. Requires auth.",input:{encoding:"application/json",schema:{type:"object",required:["seenAt"],properties:{seenAt:{type:"string",format:"datetime"}}}}}}},AppBskyRichtextFacet:{lexicon:1,id:"app.bsky.richtext.facet",defs:{main:{type:"object",description:"Annotation of a sub-string within rich text.",required:["index","features"],properties:{index:{type:"ref",ref:"lex:app.bsky.richtext.facet#byteSlice"},features:{type:"array",items:{type:"union",refs:["lex:app.bsky.richtext.facet#mention","lex:app.bsky.richtext.facet#link","lex:app.bsky.richtext.facet#tag"]}}}},mention:{type:"object",description:"Facet feature for mention of another account. The text is usually a handle, including a '@' prefix, but the facet reference is a DID.",required:["did"],properties:{did:{type:"string",format:"did"}}},link:{type:"object",description:"Facet feature for a URL. The text URL may have been simplified or truncated, but the facet reference should be a complete URL.",required:["uri"],properties:{uri:{type:"string",format:"uri"}}},tag:{type:"object",description:"Facet feature for a hashtag. The text usually includes a '#' prefix, but the facet reference should not (except in the case of 'double hash tags').",required:["tag"],properties:{tag:{type:"string",maxLength:640,maxGraphemes:64}}},byteSlice:{type:"object",description:"Specifies the sub-string range a facet feature applies to. Start index is inclusive, end index is exclusive. Indices are zero-indexed, counting bytes of the UTF-8 encoded text. NOTE: some languages, like Javascript, use UTF-16 or Unicode codepoints for string slice indexing; in these languages, convert to byte arrays before working with facets.",required:["byteStart","byteEnd"],properties:{byteStart:{type:"integer",minimum:0},byteEnd:{type:"integer",minimum:0}}}}},AppBskyUnspeccedDefs:{lexicon:1,id:"app.bsky.unspecced.defs",defs:{skeletonSearchPost:{type:"object",required:["uri"],properties:{uri:{type:"string",format:"at-uri"}}},skeletonSearchActor:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}}}},AppBskyUnspeccedGetPopularFeedGenerators:{lexicon:1,id:"app.bsky.unspecced.getPopularFeedGenerators",defs:{main:{type:"query",description:"An unspecced view of globally popular feed generators.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"},query:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feeds"],properties:{cursor:{type:"string"},feeds:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#generatorView"}}}}}}}},AppBskyUnspeccedGetSuggestionsSkeleton:{lexicon:1,id:"app.bsky.unspecced.getSuggestionsSkeleton",defs:{main:{type:"query",description:"Get a skeleton of suggested actors. Intended to be called and then hydrated through app.bsky.actor.getSuggestions",parameters:{type:"params",properties:{viewer:{type:"string",format:"did",description:"DID of the account making the request (not included for public/unauthenticated queries). Used to boost followed accounts in ranking."},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"},relativeToDid:{type:"string",format:"did",description:"DID of the account to get suggestions relative to. If not provided, suggestions will be based on the viewer."}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{cursor:{type:"string"},actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.unspecced.defs#skeletonSearchActor"}}}}}}}},AppBskyUnspeccedGetTaggedSuggestions:{lexicon:1,id:"app.bsky.unspecced.getTaggedSuggestions",defs:{main:{type:"query",description:"Get a list of suggestions (feeds and users) tagged with categories",parameters:{type:"params",properties:{}},output:{encoding:"application/json",schema:{type:"object",required:["suggestions"],properties:{suggestions:{type:"array",items:{type:"ref",ref:"lex:app.bsky.unspecced.getTaggedSuggestions#suggestion"}}}}}},suggestion:{type:"object",required:["tag","subjectType","subject"],properties:{tag:{type:"string"},subjectType:{type:"string",knownValues:["actor","feed"]},subject:{type:"string",format:"uri"}}}}},AppBskyUnspeccedSearchActorsSkeleton:{lexicon:1,id:"app.bsky.unspecced.searchActorsSkeleton",defs:{main:{type:"query",description:"Backend Actors (profile) search, returns only skeleton.",parameters:{type:"params",required:["q"],properties:{q:{type:"string",description:"Search query string; syntax, phrase, boolean, and faceting is unspecified, but Lucene query syntax is recommended. For typeahead search, only simple term match is supported, not full syntax."},viewer:{type:"string",format:"did",description:"DID of the account making the request (not included for public/unauthenticated queries). Used to boost followed accounts in ranking."},typeahead:{type:"boolean",description:"If true, acts as fast/simple 'typeahead' query."},limit:{type:"integer",minimum:1,maximum:100,default:25},cursor:{type:"string",description:"Optional pagination mechanism; may not necessarily allow scrolling through entire result set."}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{cursor:{type:"string"},hitsTotal:{type:"integer",description:"Count of search hits. Optional, may be rounded/truncated, and may not be possible to paginate through all hits."},actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.unspecced.defs#skeletonSearchActor"}}}}},errors:[{name:"BadQueryString"}]}}},AppBskyUnspeccedSearchPostsSkeleton:{lexicon:1,id:"app.bsky.unspecced.searchPostsSkeleton",defs:{main:{type:"query",description:"Backend Posts search, returns only skeleton",parameters:{type:"params",required:["q"],properties:{q:{type:"string",description:"Search query string; syntax, phrase, boolean, and faceting is unspecified, but Lucene query syntax is recommended."},sort:{type:"string",knownValues:["top","latest"],default:"latest",description:"Specifies the ranking order of results."},since:{type:"string",description:"Filter results for posts after the indicated datetime (inclusive). Expected to use 'sortAt' timestamp, which may not match 'createdAt'. Can be a datetime, or just an ISO date (YYYY-MM-DD)."},until:{type:"string",description:"Filter results for posts before the indicated datetime (not inclusive). Expected to use 'sortAt' timestamp, which may not match 'createdAt'. Can be a datetime, or just an ISO date (YYY-MM-DD)."},mentions:{type:"string",format:"at-identifier",description:"Filter to posts which mention the given account. Handles are resolved to DID before query-time. Only matches rich-text facet mentions."},author:{type:"string",format:"at-identifier",description:"Filter to posts by the given account. Handles are resolved to DID before query-time."},lang:{type:"string",format:"language",description:"Filter to posts in the given language. Expected to be based on post language field, though server may override language detection."},domain:{type:"string",description:"Filter to posts with URLs (facet links or embeds) linking to the given domain (hostname). Server may apply hostname normalization."},url:{type:"string",format:"uri",description:"Filter to posts with links (facet links or embeds) pointing to this URL. Server may apply URL normalization or fuzzy matching."},tag:{type:"array",items:{type:"string",maxLength:640,maxGraphemes:64},description:"Filter to posts with the given tag (hashtag), based on rich-text facet or tag field. Do not include the hash (#) prefix. Multiple tags can be specified, with 'AND' matching."},viewer:{type:"string",format:"did",description:"DID of the account making the request (not included for public/unauthenticated queries). Used for 'from:me' queries."},limit:{type:"integer",minimum:1,maximum:100,default:25},cursor:{type:"string",description:"Optional pagination mechanism; may not necessarily allow scrolling through entire result set."}}},output:{encoding:"application/json",schema:{type:"object",required:["posts"],properties:{cursor:{type:"string"},hitsTotal:{type:"integer",description:"Count of search hits. Optional, may be rounded/truncated, and may not be possible to paginate through all hits."},posts:{type:"array",items:{type:"ref",ref:"lex:app.bsky.unspecced.defs#skeletonSearchPost"}}}}},errors:[{name:"BadQueryString"}]}}},ChatBskyActorDeclaration:{lexicon:1,id:"chat.bsky.actor.declaration",defs:{main:{type:"record",description:"A declaration of a Bluesky chat account.",key:"literal:self",record:{type:"object",required:["allowIncoming"],properties:{allowIncoming:{type:"string",knownValues:["all","none","following"]}}}}}},ChatBskyActorDefs:{lexicon:1,id:"chat.bsky.actor.defs",defs:{profileViewBasic:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},displayName:{type:"string",maxGraphemes:64,maxLength:640},avatar:{type:"string",format:"uri"},associated:{type:"ref",ref:"lex:app.bsky.actor.defs#profileAssociated"},viewer:{type:"ref",ref:"lex:app.bsky.actor.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},chatDisabled:{type:"boolean",description:"Set to true when the actor cannot actively participate in converations"}}}}},ChatBskyActorDeleteAccount:{lexicon:1,id:"chat.bsky.actor.deleteAccount",defs:{main:{type:"procedure",output:{encoding:"application/json",schema:{type:"object",properties:{}}}}}},ChatBskyActorExportAccountData:{lexicon:1,id:"chat.bsky.actor.exportAccountData",defs:{main:{type:"query",output:{encoding:"application/jsonl"}}}},ChatBskyConvoDefs:{lexicon:1,id:"chat.bsky.convo.defs",defs:{messageRef:{type:"object",required:["did","messageId","convoId"],properties:{did:{type:"string",format:"did"},convoId:{type:"string"},messageId:{type:"string"}}},messageInput:{type:"object",required:["text"],properties:{text:{type:"string",maxLength:1e4,maxGraphemes:1e3},facets:{type:"array",description:"Annotations of text (mentions, URLs, hashtags, etc)",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},embed:{type:"union",refs:["lex:app.bsky.embed.record"]}}},messageView:{type:"object",required:["id","rev","text","sender","sentAt"],properties:{id:{type:"string"},rev:{type:"string"},text:{type:"string",maxLength:1e4,maxGraphemes:1e3},facets:{type:"array",description:"Annotations of text (mentions, URLs, hashtags, etc)",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},embed:{type:"union",refs:["lex:app.bsky.embed.record#view"]},sender:{type:"ref",ref:"lex:chat.bsky.convo.defs#messageViewSender"},sentAt:{type:"string",format:"datetime"}}},deletedMessageView:{type:"object",required:["id","rev","sender","sentAt"],properties:{id:{type:"string"},rev:{type:"string"},sender:{type:"ref",ref:"lex:chat.bsky.convo.defs#messageViewSender"},sentAt:{type:"string",format:"datetime"}}},messageViewSender:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}},convoView:{type:"object",required:["id","rev","members","muted","unreadCount"],properties:{id:{type:"string"},rev:{type:"string"},members:{type:"array",items:{type:"ref",ref:"lex:chat.bsky.actor.defs#profileViewBasic"}},lastMessage:{type:"union",refs:["lex:chat.bsky.convo.defs#messageView","lex:chat.bsky.convo.defs#deletedMessageView"]},muted:{type:"boolean"},unreadCount:{type:"integer"}}},logBeginConvo:{type:"object",required:["rev","convoId"],properties:{rev:{type:"string"},convoId:{type:"string"}}},logLeaveConvo:{type:"object",required:["rev","convoId"],properties:{rev:{type:"string"},convoId:{type:"string"}}},logCreateMessage:{type:"object",required:["rev","convoId","message"],properties:{rev:{type:"string"},convoId:{type:"string"},message:{type:"union",refs:["lex:chat.bsky.convo.defs#messageView","lex:chat.bsky.convo.defs#deletedMessageView"]}}},logDeleteMessage:{type:"object",required:["rev","convoId","message"],properties:{rev:{type:"string"},convoId:{type:"string"},message:{type:"union",refs:["lex:chat.bsky.convo.defs#messageView","lex:chat.bsky.convo.defs#deletedMessageView"]}}}}},ChatBskyConvoDeleteMessageForSelf:{lexicon:1,id:"chat.bsky.convo.deleteMessageForSelf",defs:{main:{type:"procedure",input:{encoding:"application/json",schema:{type:"object",required:["convoId","messageId"],properties:{convoId:{type:"string"},messageId:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:chat.bsky.convo.defs#deletedMessageView"}}}}},ChatBskyConvoGetConvo:{lexicon:1,id:"chat.bsky.convo.getConvo",defs:{main:{type:"query",parameters:{type:"params",required:["convoId"],properties:{convoId:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["convo"],properties:{convo:{type:"ref",ref:"lex:chat.bsky.convo.defs#convoView"}}}}}}},ChatBskyConvoGetConvoForMembers:{lexicon:1,id:"chat.bsky.convo.getConvoForMembers",defs:{main:{type:"query",parameters:{type:"params",required:["members"],properties:{members:{type:"array",minLength:1,maxLength:10,items:{type:"string",format:"did"}}}},output:{encoding:"application/json",schema:{type:"object",required:["convo"],properties:{convo:{type:"ref",ref:"lex:chat.bsky.convo.defs#convoView"}}}}}}},ChatBskyConvoGetLog:{lexicon:1,id:"chat.bsky.convo.getLog",defs:{main:{type:"query",parameters:{type:"params",required:[],properties:{cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["logs"],properties:{cursor:{type:"string"},logs:{type:"array",items:{type:"union",refs:["lex:chat.bsky.convo.defs#logBeginConvo","lex:chat.bsky.convo.defs#logLeaveConvo","lex:chat.bsky.convo.defs#logCreateMessage","lex:chat.bsky.convo.defs#logDeleteMessage"]}}}}}}}},ChatBskyConvoGetMessages:{lexicon:1,id:"chat.bsky.convo.getMessages",defs:{main:{type:"query",parameters:{type:"params",required:["convoId"],properties:{convoId:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["messages"],properties:{cursor:{type:"string"},messages:{type:"array",items:{type:"union",refs:["lex:chat.bsky.convo.defs#messageView","lex:chat.bsky.convo.defs#deletedMessageView"]}}}}}}}},ChatBskyConvoLeaveConvo:{lexicon:1,id:"chat.bsky.convo.leaveConvo",defs:{main:{type:"procedure",input:{encoding:"application/json",schema:{type:"object",required:["convoId"],properties:{convoId:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"object",required:["convoId","rev"],properties:{convoId:{type:"string"},rev:{type:"string"}}}}}}},ChatBskyConvoListConvos:{lexicon:1,id:"chat.bsky.convo.listConvos",defs:{main:{type:"query",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["convos"],properties:{cursor:{type:"string"},convos:{type:"array",items:{type:"ref",ref:"lex:chat.bsky.convo.defs#convoView"}}}}}}}},ChatBskyConvoMuteConvo:{lexicon:1,id:"chat.bsky.convo.muteConvo",defs:{main:{type:"procedure",input:{encoding:"application/json",schema:{type:"object",required:["convoId"],properties:{convoId:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"object",required:["convo"],properties:{convo:{type:"ref",ref:"lex:chat.bsky.convo.defs#convoView"}}}}}}},ChatBskyConvoSendMessage:{lexicon:1,id:"chat.bsky.convo.sendMessage",defs:{main:{type:"procedure",input:{encoding:"application/json",schema:{type:"object",required:["convoId","message"],properties:{convoId:{type:"string"},message:{type:"ref",ref:"lex:chat.bsky.convo.defs#messageInput"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:chat.bsky.convo.defs#messageView"}}}}},ChatBskyConvoSendMessageBatch:{lexicon:1,id:"chat.bsky.convo.sendMessageBatch",defs:{main:{type:"procedure",input:{encoding:"application/json",schema:{type:"object",required:["items"],properties:{items:{type:"array",maxLength:100,items:{type:"ref",ref:"lex:chat.bsky.convo.sendMessageBatch#batchItem"}}}}},output:{encoding:"application/json",schema:{type:"object",required:["items"],properties:{items:{type:"array",items:{type:"ref",ref:"lex:chat.bsky.convo.defs#messageView"}}}}}},batchItem:{type:"object",required:["convoId","message"],properties:{convoId:{type:"string"},message:{type:"ref",ref:"lex:chat.bsky.convo.defs#messageInput"}}}}},ChatBskyConvoUnmuteConvo:{lexicon:1,id:"chat.bsky.convo.unmuteConvo",defs:{main:{type:"procedure",input:{encoding:"application/json",schema:{type:"object",required:["convoId"],properties:{convoId:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"object",required:["convo"],properties:{convo:{type:"ref",ref:"lex:chat.bsky.convo.defs#convoView"}}}}}}},ChatBskyConvoUpdateRead:{lexicon:1,id:"chat.bsky.convo.updateRead",defs:{main:{type:"procedure",input:{encoding:"application/json",schema:{type:"object",required:["convoId"],properties:{convoId:{type:"string"},messageId:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"object",required:["convo"],properties:{convo:{type:"ref",ref:"lex:chat.bsky.convo.defs#convoView"}}}}}}},ChatBskyModerationGetActorMetadata:{lexicon:1,id:"chat.bsky.moderation.getActorMetadata",defs:{main:{type:"query",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"did"}}},output:{encoding:"application/json",schema:{type:"object",required:["day","month","all"],properties:{day:{type:"ref",ref:"lex:chat.bsky.moderation.getActorMetadata#metadata"},month:{type:"ref",ref:"lex:chat.bsky.moderation.getActorMetadata#metadata"},all:{type:"ref",ref:"lex:chat.bsky.moderation.getActorMetadata#metadata"}}}}},metadata:{type:"object",required:["messagesSent","messagesReceived","convos","convosStarted"],properties:{messagesSent:{type:"integer"},messagesReceived:{type:"integer"},convos:{type:"integer"},convosStarted:{type:"integer"}}}}},ChatBskyModerationGetMessageContext:{lexicon:1,id:"chat.bsky.moderation.getMessageContext",defs:{main:{type:"query",parameters:{type:"params",required:["messageId"],properties:{convoId:{type:"string",description:"Conversation that the message is from. NOTE: this field will eventually be required."},messageId:{type:"string"},before:{type:"integer",default:5},after:{type:"integer",default:5}}},output:{encoding:"application/json",schema:{type:"object",required:["messages"],properties:{messages:{type:"array",items:{type:"union",refs:["lex:chat.bsky.convo.defs#messageView","lex:chat.bsky.convo.defs#deletedMessageView"]}}}}}}}},ChatBskyModerationUpdateActorAccess:{lexicon:1,id:"chat.bsky.moderation.updateActorAccess",defs:{main:{type:"procedure",input:{encoding:"application/json",schema:{type:"object",required:["actor","allowAccess"],properties:{actor:{type:"string",format:"did"},allowAccess:{type:"boolean"},ref:{type:"string"}}}}}}},ToolsOzoneCommunicationCreateTemplate:{lexicon:1,id:"tools.ozone.communication.createTemplate",defs:{main:{type:"procedure",description:"Administrative action to create a new, re-usable communication (email for now) template.",input:{encoding:"application/json",schema:{type:"object",required:["subject","contentMarkdown","name"],properties:{name:{type:"string",description:"Name of the template."},contentMarkdown:{type:"string",description:"Content of the template, markdown supported, can contain variable placeholders."},subject:{type:"string",description:"Subject of the message, used in emails."},createdBy:{type:"string",format:"did",description:"DID of the user who is creating the template."}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:tools.ozone.communication.defs#templateView"}}}}},ToolsOzoneCommunicationDefs:{lexicon:1,id:"tools.ozone.communication.defs",defs:{templateView:{type:"object",required:["id","name","contentMarkdown","disabled","lastUpdatedBy","createdAt","updatedAt"],properties:{id:{type:"string"},name:{type:"string",description:"Name of the template."},subject:{type:"string",description:"Content of the template, can contain markdown and variable placeholders."},contentMarkdown:{type:"string",description:"Subject of the message, used in emails."},disabled:{type:"boolean"},lastUpdatedBy:{type:"string",format:"did",description:"DID of the user who last updated the template."},createdAt:{type:"string",format:"datetime"},updatedAt:{type:"string",format:"datetime"}}}}},ToolsOzoneCommunicationDeleteTemplate:{lexicon:1,id:"tools.ozone.communication.deleteTemplate",defs:{main:{type:"procedure",description:"Delete a communication template.",input:{encoding:"application/json",schema:{type:"object",required:["id"],properties:{id:{type:"string"}}}}}}},ToolsOzoneCommunicationListTemplates:{lexicon:1,id:"tools.ozone.communication.listTemplates",defs:{main:{type:"query",description:"Get list of all communication templates.",output:{encoding:"application/json",schema:{type:"object",required:["communicationTemplates"],properties:{communicationTemplates:{type:"array",items:{type:"ref",ref:"lex:tools.ozone.communication.defs#templateView"}}}}}}}},ToolsOzoneCommunicationUpdateTemplate:{lexicon:1,id:"tools.ozone.communication.updateTemplate",defs:{main:{type:"procedure",description:"Administrative action to update an existing communication template. Allows passing partial fields to patch specific fields only.",input:{encoding:"application/json",schema:{type:"object",required:["id"],properties:{id:{type:"string",description:"ID of the template to be updated."},name:{type:"string",description:"Name of the template."},contentMarkdown:{type:"string",description:"Content of the template, markdown supported, can contain variable placeholders."},subject:{type:"string",description:"Subject of the message, used in emails."},updatedBy:{type:"string",format:"did",description:"DID of the user who is updating the template."},disabled:{type:"boolean"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:tools.ozone.communication.defs#templateView"}}}}},ToolsOzoneModerationDefs:{lexicon:1,id:"tools.ozone.moderation.defs",defs:{modEventView:{type:"object",required:["id","event","subject","subjectBlobCids","createdBy","createdAt"],properties:{id:{type:"integer"},event:{type:"union",refs:["lex:tools.ozone.moderation.defs#modEventTakedown","lex:tools.ozone.moderation.defs#modEventReverseTakedown","lex:tools.ozone.moderation.defs#modEventComment","lex:tools.ozone.moderation.defs#modEventReport","lex:tools.ozone.moderation.defs#modEventLabel","lex:tools.ozone.moderation.defs#modEventAcknowledge","lex:tools.ozone.moderation.defs#modEventEscalate","lex:tools.ozone.moderation.defs#modEventMute","lex:tools.ozone.moderation.defs#modEventUnmute","lex:tools.ozone.moderation.defs#modEventMuteReporter","lex:tools.ozone.moderation.defs#modEventUnmuteReporter","lex:tools.ozone.moderation.defs#modEventEmail","lex:tools.ozone.moderation.defs#modEventResolveAppeal","lex:tools.ozone.moderation.defs#modEventDivert","lex:tools.ozone.moderation.defs#modEventTag"]},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef","lex:chat.bsky.convo.defs#messageRef"]},subjectBlobCids:{type:"array",items:{type:"string"}},createdBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"},creatorHandle:{type:"string"},subjectHandle:{type:"string"}}},modEventViewDetail:{type:"object",required:["id","event","subject","subjectBlobs","createdBy","createdAt"],properties:{id:{type:"integer"},event:{type:"union",refs:["lex:tools.ozone.moderation.defs#modEventTakedown","lex:tools.ozone.moderation.defs#modEventReverseTakedown","lex:tools.ozone.moderation.defs#modEventComment","lex:tools.ozone.moderation.defs#modEventReport","lex:tools.ozone.moderation.defs#modEventLabel","lex:tools.ozone.moderation.defs#modEventAcknowledge","lex:tools.ozone.moderation.defs#modEventEscalate","lex:tools.ozone.moderation.defs#modEventMute","lex:tools.ozone.moderation.defs#modEventUnmute","lex:tools.ozone.moderation.defs#modEventMuteReporter","lex:tools.ozone.moderation.defs#modEventUnmuteReporter","lex:tools.ozone.moderation.defs#modEventEmail","lex:tools.ozone.moderation.defs#modEventResolveAppeal","lex:tools.ozone.moderation.defs#modEventDivert","lex:tools.ozone.moderation.defs#modEventTag"]},subject:{type:"union",refs:["lex:tools.ozone.moderation.defs#repoView","lex:tools.ozone.moderation.defs#repoViewNotFound","lex:tools.ozone.moderation.defs#recordView","lex:tools.ozone.moderation.defs#recordViewNotFound"]},subjectBlobs:{type:"array",items:{type:"ref",ref:"lex:tools.ozone.moderation.defs#blobView"}},createdBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"}}},subjectStatusView:{type:"object",required:["id","subject","createdAt","updatedAt","reviewState"],properties:{id:{type:"integer"},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]},subjectBlobCids:{type:"array",items:{type:"string",format:"cid"}},subjectRepoHandle:{type:"string"},updatedAt:{type:"string",format:"datetime",description:"Timestamp referencing when the last update was made to the moderation status of the subject"},createdAt:{type:"string",format:"datetime",description:"Timestamp referencing the first moderation status impacting event was emitted on the subject"},reviewState:{type:"ref",ref:"lex:tools.ozone.moderation.defs#subjectReviewState"},comment:{type:"string",description:"Sticky comment on the subject."},muteUntil:{type:"string",format:"datetime"},muteReportingUntil:{type:"string",format:"datetime"},lastReviewedBy:{type:"string",format:"did"},lastReviewedAt:{type:"string",format:"datetime"},lastReportedAt:{type:"string",format:"datetime"},lastAppealedAt:{type:"string",format:"datetime",description:"Timestamp referencing when the author of the subject appealed a moderation action"},takendown:{type:"boolean"},appealed:{type:"boolean",description:"True indicates that the a previously taken moderator action was appealed against, by the author of the content. False indicates last appeal was resolved by moderators."},suspendUntil:{type:"string",format:"datetime"},tags:{type:"array",items:{type:"string"}}}},subjectReviewState:{type:"string",knownValues:["lex:tools.ozone.moderation.defs#reviewOpen","lex:tools.ozone.moderation.defs#reviewEscalated","lex:tools.ozone.moderation.defs#reviewClosed","lex:tools.ozone.moderation.defs#reviewNone"]},reviewOpen:{type:"token",description:"Moderator review status of a subject: Open. Indicates that the subject needs to be reviewed by a moderator"},reviewEscalated:{type:"token",description:"Moderator review status of a subject: Escalated. Indicates that the subject was escalated for review by a moderator"},reviewClosed:{type:"token",description:"Moderator review status of a subject: Closed. Indicates that the subject was already reviewed and resolved by a moderator"},reviewNone:{type:"token",description:"Moderator review status of a subject: Unnecessary. Indicates that the subject does not need a review at the moment but there is probably some moderation related metadata available for it"},modEventTakedown:{type:"object",description:"Take down a subject permanently or temporarily",properties:{comment:{type:"string"},durationInHours:{type:"integer",description:"Indicates how long the takedown should be in effect before automatically expiring."}}},modEventReverseTakedown:{type:"object",description:"Revert take down action on a subject",properties:{comment:{type:"string",description:"Describe reasoning behind the reversal."}}},modEventResolveAppeal:{type:"object",description:"Resolve appeal on a subject",properties:{comment:{type:"string",description:"Describe resolution."}}},modEventComment:{type:"object",description:"Add a comment to a subject",required:["comment"],properties:{comment:{type:"string"},sticky:{type:"boolean",description:"Make the comment persistent on the subject"}}},modEventReport:{type:"object",description:"Report a subject",required:["reportType"],properties:{comment:{type:"string"},isReporterMuted:{type:"boolean",description:"Set to true if the reporter was muted from reporting at the time of the event. These reports won't impact the reviewState of the subject."},reportType:{type:"ref",ref:"lex:com.atproto.moderation.defs#reasonType"}}},modEventLabel:{type:"object",description:"Apply/Negate labels on a subject",required:["createLabelVals","negateLabelVals"],properties:{comment:{type:"string"},createLabelVals:{type:"array",items:{type:"string"}},negateLabelVals:{type:"array",items:{type:"string"}}}},modEventAcknowledge:{type:"object",properties:{comment:{type:"string"}}},modEventEscalate:{type:"object",properties:{comment:{type:"string"}}},modEventMute:{type:"object",description:"Mute incoming reports on a subject",required:["durationInHours"],properties:{comment:{type:"string"},durationInHours:{type:"integer",description:"Indicates how long the subject should remain muted."}}},modEventUnmute:{type:"object",description:"Unmute action on a subject",properties:{comment:{type:"string",description:"Describe reasoning behind the reversal."}}},modEventMuteReporter:{type:"object",description:"Mute incoming reports from an account",required:["durationInHours"],properties:{comment:{type:"string"},durationInHours:{type:"integer",description:"Indicates how long the account should remain muted."}}},modEventUnmuteReporter:{type:"object",description:"Unmute incoming reports from an account",properties:{comment:{type:"string",description:"Describe reasoning behind the reversal."}}},modEventEmail:{type:"object",description:"Keep a log of outgoing email to a user",required:["subjectLine"],properties:{subjectLine:{type:"string",description:"The subject line of the email sent to the user."},content:{type:"string",description:"The content of the email sent to the user."},comment:{type:"string",description:"Additional comment about the outgoing comm."}}},modEventDivert:{type:"object",description:"Divert a record's blobs to a 3rd party service for further scanning/tagging",properties:{comment:{type:"string"}}},modEventTag:{type:"object",description:"Add/Remove a tag on a subject",required:["add","remove"],properties:{add:{type:"array",items:{type:"string"},description:"Tags to be added to the subject. If already exists, won't be duplicated."},remove:{type:"array",items:{type:"string"},description:"Tags to be removed to the subject. Ignores a tag If it doesn't exist, won't be duplicated."},comment:{type:"string",description:"Additional comment about added/removed tags."}}},repoView:{type:"object",required:["did","handle","relatedRecords","indexedAt","moderation"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},email:{type:"string"},relatedRecords:{type:"array",items:{type:"unknown"}},indexedAt:{type:"string",format:"datetime"},moderation:{type:"ref",ref:"lex:tools.ozone.moderation.defs#moderation"},invitedBy:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"},invitesDisabled:{type:"boolean"},inviteNote:{type:"string"},deactivatedAt:{type:"string",format:"datetime"}}},repoViewDetail:{type:"object",required:["did","handle","relatedRecords","indexedAt","moderation"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},email:{type:"string"},relatedRecords:{type:"array",items:{type:"unknown"}},indexedAt:{type:"string",format:"datetime"},moderation:{type:"ref",ref:"lex:tools.ozone.moderation.defs#moderationDetail"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},invitedBy:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"},invites:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"}},invitesDisabled:{type:"boolean"},inviteNote:{type:"string"},emailConfirmedAt:{type:"string",format:"datetime"},deactivatedAt:{type:"string",format:"datetime"}}},repoViewNotFound:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}},recordView:{type:"object",required:["uri","cid","value","blobCids","indexedAt","moderation","repo"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},value:{type:"unknown"},blobCids:{type:"array",items:{type:"string",format:"cid"}},indexedAt:{type:"string",format:"datetime"},moderation:{type:"ref",ref:"lex:tools.ozone.moderation.defs#moderation"},repo:{type:"ref",ref:"lex:tools.ozone.moderation.defs#repoView"}}},recordViewDetail:{type:"object",required:["uri","cid","value","blobs","indexedAt","moderation","repo"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},value:{type:"unknown"},blobs:{type:"array",items:{type:"ref",ref:"lex:tools.ozone.moderation.defs#blobView"}},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},indexedAt:{type:"string",format:"datetime"},moderation:{type:"ref",ref:"lex:tools.ozone.moderation.defs#moderationDetail"},repo:{type:"ref",ref:"lex:tools.ozone.moderation.defs#repoView"}}},recordViewNotFound:{type:"object",required:["uri"],properties:{uri:{type:"string",format:"at-uri"}}},moderation:{type:"object",properties:{subjectStatus:{type:"ref",ref:"lex:tools.ozone.moderation.defs#subjectStatusView"}}},moderationDetail:{type:"object",properties:{subjectStatus:{type:"ref",ref:"lex:tools.ozone.moderation.defs#subjectStatusView"}}},blobView:{type:"object",required:["cid","mimeType","size","createdAt"],properties:{cid:{type:"string",format:"cid"},mimeType:{type:"string"},size:{type:"integer"},createdAt:{type:"string",format:"datetime"},details:{type:"union",refs:["lex:tools.ozone.moderation.defs#imageDetails","lex:tools.ozone.moderation.defs#videoDetails"]},moderation:{type:"ref",ref:"lex:tools.ozone.moderation.defs#moderation"}}},imageDetails:{type:"object",required:["width","height"],properties:{width:{type:"integer"},height:{type:"integer"}}},videoDetails:{type:"object",required:["width","height","length"],properties:{width:{type:"integer"},height:{type:"integer"},length:{type:"integer"}}}}},ToolsOzoneModerationEmitEvent:{lexicon:1,id:"tools.ozone.moderation.emitEvent",defs:{main:{type:"procedure",description:"Take a moderation action on an actor.",input:{encoding:"application/json",schema:{type:"object",required:["event","subject","createdBy"],properties:{event:{type:"union",refs:["lex:tools.ozone.moderation.defs#modEventTakedown","lex:tools.ozone.moderation.defs#modEventAcknowledge","lex:tools.ozone.moderation.defs#modEventEscalate","lex:tools.ozone.moderation.defs#modEventComment","lex:tools.ozone.moderation.defs#modEventLabel","lex:tools.ozone.moderation.defs#modEventReport","lex:tools.ozone.moderation.defs#modEventMute","lex:tools.ozone.moderation.defs#modEventUnmute","lex:tools.ozone.moderation.defs#modEventMuteReporter","lex:tools.ozone.moderation.defs#modEventUnmuteReporter","lex:tools.ozone.moderation.defs#modEventReverseTakedown","lex:tools.ozone.moderation.defs#modEventEmail","lex:tools.ozone.moderation.defs#modEventTag"]},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]},subjectBlobCids:{type:"array",items:{type:"string",format:"cid"}},createdBy:{type:"string",format:"did"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:tools.ozone.moderation.defs#modEventView"}},errors:[{name:"SubjectHasAction"}]}}},ToolsOzoneModerationGetEvent:{lexicon:1,id:"tools.ozone.moderation.getEvent",defs:{main:{type:"query",description:"Get details about a moderation event.",parameters:{type:"params",required:["id"],properties:{id:{type:"integer"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:tools.ozone.moderation.defs#modEventViewDetail"}}}}},ToolsOzoneModerationGetRecord:{lexicon:1,id:"tools.ozone.moderation.getRecord",defs:{main:{type:"query",description:"Get details about a record.",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:tools.ozone.moderation.defs#recordViewDetail"}},errors:[{name:"RecordNotFound"}]}}},ToolsOzoneModerationGetRepo:{lexicon:1,id:"tools.ozone.moderation.getRepo",defs:{main:{type:"query",description:"Get details about a repository.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:tools.ozone.moderation.defs#repoViewDetail"}},errors:[{name:"RepoNotFound"}]}}},ToolsOzoneModerationQueryEvents:{lexicon:1,id:"tools.ozone.moderation.queryEvents",defs:{main:{type:"query",description:"List moderation events related to a subject.",parameters:{type:"params",properties:{types:{type:"array",items:{type:"string"},description:"The types of events (fully qualified string in the format of tools.ozone.moderation.defs#modEvent<name>) to filter by. If not specified, all events are returned."},createdBy:{type:"string",format:"did"},sortDirection:{type:"string",default:"desc",enum:["asc","desc"],description:"Sort direction for the events. Defaults to descending order of created at timestamp."},createdAfter:{type:"string",format:"datetime",description:"Retrieve events created after a given timestamp"},createdBefore:{type:"string",format:"datetime",description:"Retrieve events created before a given timestamp"},subject:{type:"string",format:"uri"},includeAllUserRecords:{type:"boolean",default:!1,description:"If true, events on all record types (posts, lists, profile etc.) owned by the did are returned"},limit:{type:"integer",minimum:1,maximum:100,default:50},hasComment:{type:"boolean",description:"If true, only events with comments are returned"},comment:{type:"string",description:"If specified, only events with comments containing the keyword are returned"},addedLabels:{type:"array",items:{type:"string"},description:"If specified, only events where all of these labels were added are returned"},removedLabels:{type:"array",items:{type:"string"},description:"If specified, only events where all of these labels were removed are returned"},addedTags:{type:"array",items:{type:"string"},description:"If specified, only events where all of these tags were added are returned"},removedTags:{type:"array",items:{type:"string"},description:"If specified, only events where all of these tags were removed are returned"},reportTypes:{type:"array",items:{type:"string"}},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["events"],properties:{cursor:{type:"string"},events:{type:"array",items:{type:"ref",ref:"lex:tools.ozone.moderation.defs#modEventView"}}}}}}}},ToolsOzoneModerationQueryStatuses:{lexicon:1,id:"tools.ozone.moderation.queryStatuses",defs:{main:{type:"query",description:"View moderation statuses of subjects (record or repo).",parameters:{type:"params",properties:{subject:{type:"string",format:"uri"},comment:{type:"string",description:"Search subjects by keyword from comments"},reportedAfter:{type:"string",format:"datetime",description:"Search subjects reported after a given timestamp"},reportedBefore:{type:"string",format:"datetime",description:"Search subjects reported before a given timestamp"},reviewedAfter:{type:"string",format:"datetime",description:"Search subjects reviewed after a given timestamp"},reviewedBefore:{type:"string",format:"datetime",description:"Search subjects reviewed before a given timestamp"},includeMuted:{type:"boolean",description:"By default, we don't include muted subjects in the results. Set this to true to include them."},onlyMuted:{type:"boolean",description:"When set to true, only muted subjects and reporters will be returned."},reviewState:{type:"string",description:"Specify when fetching subjects in a certain state"},ignoreSubjects:{type:"array",items:{type:"string",format:"uri"}},lastReviewedBy:{type:"string",format:"did",description:"Get all subject statuses that were reviewed by a specific moderator"},sortField:{type:"string",default:"lastReportedAt",enum:["lastReviewedAt","lastReportedAt"]},sortDirection:{type:"string",default:"desc",enum:["asc","desc"]},takendown:{type:"boolean",description:"Get subjects that were taken down"},appealed:{type:"boolean",description:"Get subjects in unresolved appealed status"},limit:{type:"integer",minimum:1,maximum:100,default:50},tags:{type:"array",items:{type:"string"}},excludeTags:{type:"array",items:{type:"string"}},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["subjectStatuses"],properties:{cursor:{type:"string"},subjectStatuses:{type:"array",items:{type:"ref",ref:"lex:tools.ozone.moderation.defs#subjectStatusView"}}}}}}}},ToolsOzoneModerationSearchRepos:{lexicon:1,id:"tools.ozone.moderation.searchRepos",defs:{main:{type:"query",description:"Find repositories based on a search term.",parameters:{type:"params",properties:{term:{type:"string",description:"DEPRECATED: use 'q' instead"},q:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["repos"],properties:{cursor:{type:"string"},repos:{type:"array",items:{type:"ref",ref:"lex:tools.ozone.moderation.defs#repoView"}}}}}}}},ToolsOzoneServerGetConfig:{lexicon:1,id:"tools.ozone.server.getConfig",defs:{main:{type:"query",description:"Get details about ozone's server configuration.",output:{encoding:"application/json",schema:{type:"object",properties:{appview:{type:"ref",ref:"lex:tools.ozone.server.getConfig#serviceConfig"},pds:{type:"ref",ref:"lex:tools.ozone.server.getConfig#serviceConfig"},blobDivert:{type:"ref",ref:"lex:tools.ozone.server.getConfig#serviceConfig"},chat:{type:"ref",ref:"lex:tools.ozone.server.getConfig#serviceConfig"},viewer:{type:"ref",ref:"lex:tools.ozone.server.getConfig#viewerConfig"}}}}},serviceConfig:{type:"object",properties:{url:{type:"string",format:"uri"}}},viewerConfig:{type:"object",properties:{role:{type:"string",knownValues:["tools.ozone.team.defs#roleAdmin","tools.ozone.team.defs#roleModerator","tools.ozone.team.defs#roleTriage"]}}}}},ToolsOzoneTeamAddMember:{lexicon:1,id:"tools.ozone.team.addMember",defs:{main:{type:"procedure",description:"Add a member to the ozone team. Requires admin role.",input:{encoding:"application/json",schema:{type:"object",required:["did","role"],properties:{did:{type:"string",format:"did"},role:{type:"string",knownValues:["tools.ozone.team.defs#roleAdmin","tools.ozone.team.defs#roleModerator","tools.ozone.team.defs#roleTriage"]}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:tools.ozone.team.defs#member"}},errors:[{name:"MemberAlreadyExists",description:"Member already exists in the team."}]}}},ToolsOzoneTeamDefs:{lexicon:1,id:"tools.ozone.team.defs",defs:{member:{type:"object",required:["did","role"],properties:{did:{type:"string",format:"did"},disabled:{type:"boolean"},profile:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewDetailed"},createdAt:{type:"string",format:"datetime"},updatedAt:{type:"string",format:"datetime"},lastUpdatedBy:{type:"string"},role:{type:"string",knownValues:["lex:tools.ozone.team.defs#roleAdmin","lex:tools.ozone.team.defs#roleModerator","lex:tools.ozone.team.defs#roleTriage"]}}},roleAdmin:{type:"token",description:"Admin role. Highest level of access, can perform all actions."},roleModerator:{type:"token",description:"Moderator role. Can perform most actions."},roleTriage:{type:"token",description:"Triage role. Mostly intended for monitoring and escalating issues."}}},ToolsOzoneTeamDeleteMember:{lexicon:1,id:"tools.ozone.team.deleteMember",defs:{main:{type:"procedure",description:"Delete a member from ozone team. Requires admin role.",input:{encoding:"application/json",schema:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}}},errors:[{name:"MemberNotFound",description:"The member being deleted does not exist"},{name:"CannotDeleteSelf",description:"You can not delete yourself from the team"}]}}},ToolsOzoneTeamListMembers:{lexicon:1,id:"tools.ozone.team.listMembers",defs:{main:{type:"query",description:"List all members with access to the ozone service.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["members"],properties:{cursor:{type:"string"},members:{type:"array",items:{type:"ref",ref:"lex:tools.ozone.team.defs#member"}}}}}}}},ToolsOzoneTeamUpdateMember:{lexicon:1,id:"tools.ozone.team.updateMember",defs:{main:{type:"procedure",description:"Update a member in the ozone service. Requires admin role.",input:{encoding:"application/json",schema:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"},disabled:{type:"boolean"},role:{type:"string",knownValues:["tools.ozone.team.defs#roleAdmin","tools.ozone.team.defs#roleModerator","tools.ozone.team.defs#roleTriage"]}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:tools.ozone.team.defs#member"}},errors:[{name:"MemberNotFound",description:"The member being updated does not exist in the team"}]}}}},e.schemas=Object.values(e.schemaDict),e.lexicons=new t.Lexicons(e.schemas),e.ids={ComAtprotoAdminDefs:"com.atproto.admin.defs",ComAtprotoAdminDeleteAccount:"com.atproto.admin.deleteAccount",ComAtprotoAdminDisableAccountInvites:"com.atproto.admin.disableAccountInvites",ComAtprotoAdminDisableInviteCodes:"com.atproto.admin.disableInviteCodes",ComAtprotoAdminEnableAccountInvites:"com.atproto.admin.enableAccountInvites",ComAtprotoAdminGetAccountInfo:"com.atproto.admin.getAccountInfo",ComAtprotoAdminGetAccountInfos:"com.atproto.admin.getAccountInfos",ComAtprotoAdminGetInviteCodes:"com.atproto.admin.getInviteCodes",ComAtprotoAdminGetSubjectStatus:"com.atproto.admin.getSubjectStatus",ComAtprotoAdminSearchAccounts:"com.atproto.admin.searchAccounts",ComAtprotoAdminSendEmail:"com.atproto.admin.sendEmail",ComAtprotoAdminUpdateAccountEmail:"com.atproto.admin.updateAccountEmail",ComAtprotoAdminUpdateAccountHandle:"com.atproto.admin.updateAccountHandle",ComAtprotoAdminUpdateAccountPassword:"com.atproto.admin.updateAccountPassword",ComAtprotoAdminUpdateSubjectStatus:"com.atproto.admin.updateSubjectStatus",ComAtprotoIdentityGetRecommendedDidCredentials:"com.atproto.identity.getRecommendedDidCredentials",ComAtprotoIdentityRequestPlcOperationSignature:"com.atproto.identity.requestPlcOperationSignature",ComAtprotoIdentityResolveHandle:"com.atproto.identity.resolveHandle",ComAtprotoIdentitySignPlcOperation:"com.atproto.identity.signPlcOperation",ComAtprotoIdentitySubmitPlcOperation:"com.atproto.identity.submitPlcOperation",ComAtprotoIdentityUpdateHandle:"com.atproto.identity.updateHandle",ComAtprotoLabelDefs:"com.atproto.label.defs",ComAtprotoLabelQueryLabels:"com.atproto.label.queryLabels",ComAtprotoLabelSubscribeLabels:"com.atproto.label.subscribeLabels",ComAtprotoModerationCreateReport:"com.atproto.moderation.createReport",ComAtprotoModerationDefs:"com.atproto.moderation.defs",ComAtprotoRepoApplyWrites:"com.atproto.repo.applyWrites",ComAtprotoRepoCreateRecord:"com.atproto.repo.createRecord",ComAtprotoRepoDeleteRecord:"com.atproto.repo.deleteRecord",ComAtprotoRepoDescribeRepo:"com.atproto.repo.describeRepo",ComAtprotoRepoGetRecord:"com.atproto.repo.getRecord",ComAtprotoRepoImportRepo:"com.atproto.repo.importRepo",ComAtprotoRepoListMissingBlobs:"com.atproto.repo.listMissingBlobs",ComAtprotoRepoListRecords:"com.atproto.repo.listRecords",ComAtprotoRepoPutRecord:"com.atproto.repo.putRecord",ComAtprotoRepoStrongRef:"com.atproto.repo.strongRef",ComAtprotoRepoUploadBlob:"com.atproto.repo.uploadBlob",ComAtprotoServerActivateAccount:"com.atproto.server.activateAccount",ComAtprotoServerCheckAccountStatus:"com.atproto.server.checkAccountStatus",ComAtprotoServerConfirmEmail:"com.atproto.server.confirmEmail",ComAtprotoServerCreateAccount:"com.atproto.server.createAccount",ComAtprotoServerCreateAppPassword:"com.atproto.server.createAppPassword",ComAtprotoServerCreateInviteCode:"com.atproto.server.createInviteCode",ComAtprotoServerCreateInviteCodes:"com.atproto.server.createInviteCodes",ComAtprotoServerCreateSession:"com.atproto.server.createSession",ComAtprotoServerDeactivateAccount:"com.atproto.server.deactivateAccount",ComAtprotoServerDefs:"com.atproto.server.defs",ComAtprotoServerDeleteAccount:"com.atproto.server.deleteAccount",ComAtprotoServerDeleteSession:"com.atproto.server.deleteSession",ComAtprotoServerDescribeServer:"com.atproto.server.describeServer",ComAtprotoServerGetAccountInviteCodes:"com.atproto.server.getAccountInviteCodes",ComAtprotoServerGetServiceAuth:"com.atproto.server.getServiceAuth",ComAtprotoServerGetSession:"com.atproto.server.getSession",ComAtprotoServerListAppPasswords:"com.atproto.server.listAppPasswords",ComAtprotoServerRefreshSession:"com.atproto.server.refreshSession",ComAtprotoServerRequestAccountDelete:"com.atproto.server.requestAccountDelete",ComAtprotoServerRequestEmailConfirmation:"com.atproto.server.requestEmailConfirmation",ComAtprotoServerRequestEmailUpdate:"com.atproto.server.requestEmailUpdate",ComAtprotoServerRequestPasswordReset:"com.atproto.server.requestPasswordReset",ComAtprotoServerReserveSigningKey:"com.atproto.server.reserveSigningKey",ComAtprotoServerResetPassword:"com.atproto.server.resetPassword",ComAtprotoServerRevokeAppPassword:"com.atproto.server.revokeAppPassword",ComAtprotoServerUpdateEmail:"com.atproto.server.updateEmail",ComAtprotoSyncGetBlob:"com.atproto.sync.getBlob",ComAtprotoSyncGetBlocks:"com.atproto.sync.getBlocks",ComAtprotoSyncGetCheckout:"com.atproto.sync.getCheckout",ComAtprotoSyncGetHead:"com.atproto.sync.getHead",ComAtprotoSyncGetLatestCommit:"com.atproto.sync.getLatestCommit",ComAtprotoSyncGetRecord:"com.atproto.sync.getRecord",ComAtprotoSyncGetRepo:"com.atproto.sync.getRepo",ComAtprotoSyncGetRepoStatus:"com.atproto.sync.getRepoStatus",ComAtprotoSyncListBlobs:"com.atproto.sync.listBlobs",ComAtprotoSyncListRepos:"com.atproto.sync.listRepos",ComAtprotoSyncNotifyOfUpdate:"com.atproto.sync.notifyOfUpdate",ComAtprotoSyncRequestCrawl:"com.atproto.sync.requestCrawl",ComAtprotoSyncSubscribeRepos:"com.atproto.sync.subscribeRepos",ComAtprotoTempCheckSignupQueue:"com.atproto.temp.checkSignupQueue",ComAtprotoTempFetchLabels:"com.atproto.temp.fetchLabels",ComAtprotoTempRequestPhoneVerification:"com.atproto.temp.requestPhoneVerification",AppBskyActorDefs:"app.bsky.actor.defs",AppBskyActorGetPreferences:"app.bsky.actor.getPreferences",AppBskyActorGetProfile:"app.bsky.actor.getProfile",AppBskyActorGetProfiles:"app.bsky.actor.getProfiles",AppBskyActorGetSuggestions:"app.bsky.actor.getSuggestions",AppBskyActorProfile:"app.bsky.actor.profile",AppBskyActorPutPreferences:"app.bsky.actor.putPreferences",AppBskyActorSearchActors:"app.bsky.actor.searchActors",AppBskyActorSearchActorsTypeahead:"app.bsky.actor.searchActorsTypeahead",AppBskyEmbedExternal:"app.bsky.embed.external",AppBskyEmbedImages:"app.bsky.embed.images",AppBskyEmbedRecord:"app.bsky.embed.record",AppBskyEmbedRecordWithMedia:"app.bsky.embed.recordWithMedia",AppBskyFeedDefs:"app.bsky.feed.defs",AppBskyFeedDescribeFeedGenerator:"app.bsky.feed.describeFeedGenerator",AppBskyFeedGenerator:"app.bsky.feed.generator",AppBskyFeedGetActorFeeds:"app.bsky.feed.getActorFeeds",AppBskyFeedGetActorLikes:"app.bsky.feed.getActorLikes",AppBskyFeedGetAuthorFeed:"app.bsky.feed.getAuthorFeed",AppBskyFeedGetFeed:"app.bsky.feed.getFeed",AppBskyFeedGetFeedGenerator:"app.bsky.feed.getFeedGenerator",AppBskyFeedGetFeedGenerators:"app.bsky.feed.getFeedGenerators",AppBskyFeedGetFeedSkeleton:"app.bsky.feed.getFeedSkeleton",AppBskyFeedGetLikes:"app.bsky.feed.getLikes",AppBskyFeedGetListFeed:"app.bsky.feed.getListFeed",AppBskyFeedGetPostThread:"app.bsky.feed.getPostThread",AppBskyFeedGetPosts:"app.bsky.feed.getPosts",AppBskyFeedGetRepostedBy:"app.bsky.feed.getRepostedBy",AppBskyFeedGetSuggestedFeeds:"app.bsky.feed.getSuggestedFeeds",AppBskyFeedGetTimeline:"app.bsky.feed.getTimeline",AppBskyFeedLike:"app.bsky.feed.like",AppBskyFeedPost:"app.bsky.feed.post",AppBskyFeedRepost:"app.bsky.feed.repost",AppBskyFeedSearchPosts:"app.bsky.feed.searchPosts",AppBskyFeedSendInteractions:"app.bsky.feed.sendInteractions",AppBskyFeedThreadgate:"app.bsky.feed.threadgate",AppBskyGraphBlock:"app.bsky.graph.block",AppBskyGraphDefs:"app.bsky.graph.defs",AppBskyGraphFollow:"app.bsky.graph.follow",AppBskyGraphGetActorStarterPacks:"app.bsky.graph.getActorStarterPacks",AppBskyGraphGetBlocks:"app.bsky.graph.getBlocks",AppBskyGraphGetFollowers:"app.bsky.graph.getFollowers",AppBskyGraphGetFollows:"app.bsky.graph.getFollows",AppBskyGraphGetKnownFollowers:"app.bsky.graph.getKnownFollowers",AppBskyGraphGetList:"app.bsky.graph.getList",AppBskyGraphGetListBlocks:"app.bsky.graph.getListBlocks",AppBskyGraphGetListMutes:"app.bsky.graph.getListMutes",AppBskyGraphGetLists:"app.bsky.graph.getLists",AppBskyGraphGetMutes:"app.bsky.graph.getMutes",AppBskyGraphGetRelationships:"app.bsky.graph.getRelationships",AppBskyGraphGetStarterPack:"app.bsky.graph.getStarterPack",AppBskyGraphGetStarterPacks:"app.bsky.graph.getStarterPacks",AppBskyGraphGetSuggestedFollowsByActor:"app.bsky.graph.getSuggestedFollowsByActor",AppBskyGraphList:"app.bsky.graph.list",AppBskyGraphListblock:"app.bsky.graph.listblock",AppBskyGraphListitem:"app.bsky.graph.listitem",AppBskyGraphMuteActor:"app.bsky.graph.muteActor",AppBskyGraphMuteActorList:"app.bsky.graph.muteActorList",AppBskyGraphMuteThread:"app.bsky.graph.muteThread",AppBskyGraphStarterpack:"app.bsky.graph.starterpack",AppBskyGraphUnmuteActor:"app.bsky.graph.unmuteActor",AppBskyGraphUnmuteActorList:"app.bsky.graph.unmuteActorList",AppBskyGraphUnmuteThread:"app.bsky.graph.unmuteThread",AppBskyLabelerDefs:"app.bsky.labeler.defs",AppBskyLabelerGetServices:"app.bsky.labeler.getServices",AppBskyLabelerService:"app.bsky.labeler.service",AppBskyNotificationGetUnreadCount:"app.bsky.notification.getUnreadCount",AppBskyNotificationListNotifications:"app.bsky.notification.listNotifications",AppBskyNotificationPutPreferences:"app.bsky.notification.putPreferences",AppBskyNotificationRegisterPush:"app.bsky.notification.registerPush",AppBskyNotificationUpdateSeen:"app.bsky.notification.updateSeen",AppBskyRichtextFacet:"app.bsky.richtext.facet",AppBskyUnspeccedDefs:"app.bsky.unspecced.defs",AppBskyUnspeccedGetPopularFeedGenerators:"app.bsky.unspecced.getPopularFeedGenerators",AppBskyUnspeccedGetSuggestionsSkeleton:"app.bsky.unspecced.getSuggestionsSkeleton",AppBskyUnspeccedGetTaggedSuggestions:"app.bsky.unspecced.getTaggedSuggestions",AppBskyUnspeccedSearchActorsSkeleton:"app.bsky.unspecced.searchActorsSkeleton",AppBskyUnspeccedSearchPostsSkeleton:"app.bsky.unspecced.searchPostsSkeleton",ChatBskyActorDeclaration:"chat.bsky.actor.declaration",ChatBskyActorDefs:"chat.bsky.actor.defs",ChatBskyActorDeleteAccount:"chat.bsky.actor.deleteAccount",ChatBskyActorExportAccountData:"chat.bsky.actor.exportAccountData",ChatBskyConvoDefs:"chat.bsky.convo.defs",ChatBskyConvoDeleteMessageForSelf:"chat.bsky.convo.deleteMessageForSelf",ChatBskyConvoGetConvo:"chat.bsky.convo.getConvo",ChatBskyConvoGetConvoForMembers:"chat.bsky.convo.getConvoForMembers",ChatBskyConvoGetLog:"chat.bsky.convo.getLog",ChatBskyConvoGetMessages:"chat.bsky.convo.getMessages",ChatBskyConvoLeaveConvo:"chat.bsky.convo.leaveConvo",ChatBskyConvoListConvos:"chat.bsky.convo.listConvos",ChatBskyConvoMuteConvo:"chat.bsky.convo.muteConvo",ChatBskyConvoSendMessage:"chat.bsky.convo.sendMessage",ChatBskyConvoSendMessageBatch:"chat.bsky.convo.sendMessageBatch",ChatBskyConvoUnmuteConvo:"chat.bsky.convo.unmuteConvo",ChatBskyConvoUpdateRead:"chat.bsky.convo.updateRead",ChatBskyModerationGetActorMetadata:"chat.bsky.moderation.getActorMetadata",ChatBskyModerationGetMessageContext:"chat.bsky.moderation.getMessageContext",ChatBskyModerationUpdateActorAccess:"chat.bsky.moderation.updateActorAccess",ToolsOzoneCommunicationCreateTemplate:"tools.ozone.communication.createTemplate",ToolsOzoneCommunicationDefs:"tools.ozone.communication.defs",ToolsOzoneCommunicationDeleteTemplate:"tools.ozone.communication.deleteTemplate",ToolsOzoneCommunicationListTemplates:"tools.ozone.communication.listTemplates",ToolsOzoneCommunicationUpdateTemplate:"tools.ozone.communication.updateTemplate",ToolsOzoneModerationDefs:"tools.ozone.moderation.defs",ToolsOzoneModerationEmitEvent:"tools.ozone.moderation.emitEvent",ToolsOzoneModerationGetEvent:"tools.ozone.moderation.getEvent",ToolsOzoneModerationGetRecord:"tools.ozone.moderation.getRecord",ToolsOzoneModerationGetRepo:"tools.ozone.moderation.getRepo",ToolsOzoneModerationQueryEvents:"tools.ozone.moderation.queryEvents",ToolsOzoneModerationQueryStatuses:"tools.ozone.moderation.queryStatuses",ToolsOzoneModerationSearchRepos:"tools.ozone.moderation.searchRepos",ToolsOzoneServerGetConfig:"tools.ozone.server.getConfig",ToolsOzoneTeamAddMember:"tools.ozone.team.addMember",ToolsOzoneTeamDefs:"tools.ozone.team.defs",ToolsOzoneTeamDeleteMember:"tools.ozone.team.deleteMember",ToolsOzoneTeamListMembers:"tools.ozone.team.listMembers",ToolsOzoneTeamUpdateMember:"tools.ozone.team.updateMember"}}(Le);var Da={};Object.defineProperty(Da,"__esModule",{value:!0}),Da.toKnownErr=void 0;const zv=G;function Xv(e){return zv.XRPCError,e}Da.toKnownErr=Xv;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.toKnownErr=void 0;const Hv=G;function Zv(e){return Hv.XRPCError,e}Pa.toKnownErr=Zv;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.toKnownErr=void 0;const Wv=G;function Yv(e){return Wv.XRPCError,e}Ba.toKnownErr=Yv;var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.toKnownErr=void 0;const Jv=G;function Qv(e){return Jv.XRPCError,e}Ia.toKnownErr=Qv;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.toKnownErr=void 0;const eR=G;function tR(e){return eR.XRPCError,e}Ua.toKnownErr=tR;var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.toKnownErr=void 0;const rR=G;function iR(e){return rR.XRPCError,e}Oa.toKnownErr=iR;var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.toKnownErr=void 0;const nR=G;function sR(e){return nR.XRPCError,e}Ka.toKnownErr=sR;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.toKnownErr=void 0;const aR=G;function oR(e){return aR.XRPCError,e}Ma.toKnownErr=oR;var Na={};Object.defineProperty(Na,"__esModule",{value:!0}),Na.toKnownErr=void 0;const lR=G;function uR(e){return lR.XRPCError,e}Na.toKnownErr=uR;var Va={};Object.defineProperty(Va,"__esModule",{value:!0}),Va.toKnownErr=void 0;const cR=G;function dR(e){return cR.XRPCError,e}Va.toKnownErr=dR;var ja={};Object.defineProperty(ja,"__esModule",{value:!0}),ja.toKnownErr=void 0;const fR=G;function pR(e){return fR.XRPCError,e}ja.toKnownErr=pR;var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.toKnownErr=void 0;const hR=G;function mR(e){return hR.XRPCError,e}Fa.toKnownErr=mR;var $a={};Object.defineProperty($a,"__esModule",{value:!0}),$a.toKnownErr=void 0;const yR=G;function bR(e){return yR.XRPCError,e}$a.toKnownErr=bR;var Ga={};Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.toKnownErr=void 0;const gR=G;function xR(e){return gR.XRPCError,e}Ga.toKnownErr=xR;var qa={};Object.defineProperty(qa,"__esModule",{value:!0}),qa.toKnownErr=void 0;const ER=G;function vR(e){return ER.XRPCError,e}qa.toKnownErr=vR;var za={};Object.defineProperty(za,"__esModule",{value:!0}),za.toKnownErr=void 0;const RR=G;function AR(e){return RR.XRPCError,e}za.toKnownErr=AR;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.toKnownErr=void 0;const _R=G;function wR(e){return _R.XRPCError,e}Xa.toKnownErr=wR;var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.toKnownErr=void 0;const TR=G;function SR(e){return TR.XRPCError,e}Ha.toKnownErr=SR;var Za={};Object.defineProperty(Za,"__esModule",{value:!0}),Za.toKnownErr=void 0;const CR=G;function LR(e){return CR.XRPCError,e}Za.toKnownErr=LR;var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.toKnownErr=void 0;const kR=G;function DR(e){return kR.XRPCError,e}Wa.toKnownErr=DR;var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.toKnownErr=void 0;const PR=G;function BR(e){return PR.XRPCError,e}Ya.toKnownErr=BR;var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.toKnownErr=void 0;const IR=G;function UR(e){return IR.XRPCError,e}Ja.toKnownErr=UR;var Dt={},_e={};function OR(e){return"object"==typeof e&&null!==e}function KR(e,t){return t in e}Object.defineProperty(_e,"__esModule",{value:!0}),_e.hasProp=_e.isObj=void 0,_e.isObj=OR,_e.hasProp=KR,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.validateDelete=Dt.isDelete=Dt.validateUpdate=Dt.isUpdate=Dt.validateCreate=Dt.isCreate=Dt.toKnownErr=Dt.InvalidSwapError=void 0;const Hp=G,Ts=_e,Wc=Le;let Zp=class extends Hp.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function MR(e){return e instanceof Hp.XRPCError&&"InvalidSwap"===e.error?new Zp(e):e}function NR(e){return(0,Ts.isObj)(e)&&(0,Ts.hasProp)(e,"$type")&&"com.atproto.repo.applyWrites#create"===e.$type}function VR(e){return Wc.lexicons.validate("com.atproto.repo.applyWrites#create",e)}function jR(e){return(0,Ts.isObj)(e)&&(0,Ts.hasProp)(e,"$type")&&"com.atproto.repo.applyWrites#update"===e.$type}function FR(e){return Wc.lexicons.validate("com.atproto.repo.applyWrites#update",e)}function $R(e){return(0,Ts.isObj)(e)&&(0,Ts.hasProp)(e,"$type")&&"com.atproto.repo.applyWrites#delete"===e.$type}function GR(e){return Wc.lexicons.validate("com.atproto.repo.applyWrites#delete",e)}Dt.InvalidSwapError=Zp,Dt.toKnownErr=MR,Dt.isCreate=NR,Dt.validateCreate=VR,Dt.isUpdate=jR,Dt.validateUpdate=FR,Dt.isDelete=$R,Dt.validateDelete=GR;var Nn={};Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.toKnownErr=Nn.InvalidSwapError=void 0;const Wp=G;let Yp=class extends Wp.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function qR(e){return e instanceof Wp.XRPCError&&"InvalidSwap"===e.error?new Yp(e):e}Nn.InvalidSwapError=Yp,Nn.toKnownErr=qR;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.toKnownErr=Vn.InvalidSwapError=void 0;const Jp=G;let Qp=class extends Jp.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function zR(e){return e instanceof Jp.XRPCError&&"InvalidSwap"===e.error?new Qp(e):e}Vn.InvalidSwapError=Qp,Vn.toKnownErr=zR;var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.toKnownErr=void 0;const XR=G;function HR(e){return XR.XRPCError,e}Qa.toKnownErr=HR;var eo={};Object.defineProperty(eo,"__esModule",{value:!0}),eo.toKnownErr=void 0;const ZR=G;function WR(e){return ZR.XRPCError,e}eo.toKnownErr=WR;var to={};Object.defineProperty(to,"__esModule",{value:!0}),to.toKnownErr=void 0;const YR=G;function JR(e){return YR.XRPCError,e}to.toKnownErr=JR;var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.validateRecordBlob=Ni.isRecordBlob=Ni.toKnownErr=void 0;const QR=G,jd=_e,eA=Le;function tA(e){return QR.XRPCError,e}function rA(e){return(0,jd.isObj)(e)&&(0,jd.hasProp)(e,"$type")&&"com.atproto.repo.listMissingBlobs#recordBlob"===e.$type}function iA(e){return eA.lexicons.validate("com.atproto.repo.listMissingBlobs#recordBlob",e)}Ni.toKnownErr=tA,Ni.isRecordBlob=rA,Ni.validateRecordBlob=iA;var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.validateRecord=Vi.isRecord=Vi.toKnownErr=void 0;const nA=G,Fd=_e,sA=Le;function aA(e){return nA.XRPCError,e}function oA(e){return(0,Fd.isObj)(e)&&(0,Fd.hasProp)(e,"$type")&&"com.atproto.repo.listRecords#record"===e.$type}function lA(e){return sA.lexicons.validate("com.atproto.repo.listRecords#record",e)}Vi.toKnownErr=aA,Vi.isRecord=oA,Vi.validateRecord=lA;var jn={};Object.defineProperty(jn,"__esModule",{value:!0}),jn.toKnownErr=jn.InvalidSwapError=void 0;const eh=G;class th extends eh.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function uA(e){return e instanceof eh.XRPCError&&"InvalidSwap"===e.error?new th(e):e}jn.InvalidSwapError=th,jn.toKnownErr=uA;var ro={};Object.defineProperty(ro,"__esModule",{value:!0}),ro.toKnownErr=void 0;const cA=G;function dA(e){return cA.XRPCError,e}ro.toKnownErr=dA;var io={};Object.defineProperty(io,"__esModule",{value:!0}),io.toKnownErr=void 0;const fA=G;function pA(e){return fA.XRPCError,e}io.toKnownErr=pA;var no={};Object.defineProperty(no,"__esModule",{value:!0}),no.toKnownErr=void 0;const hA=G;function mA(e){return hA.XRPCError,e}no.toKnownErr=mA;var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.toKnownErr=Rr.InvalidEmailError=Rr.InvalidTokenError=Rr.ExpiredTokenError=Rr.AccountNotFoundError=void 0;const so=G;class rh extends so.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}Rr.AccountNotFoundError=rh;let ih=class extends so.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};Rr.ExpiredTokenError=ih;let nh=class extends so.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};Rr.InvalidTokenError=nh;class sh extends so.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function yA(e){if(e instanceof so.XRPCError){if("AccountNotFound"===e.error)return new rh(e);if("ExpiredToken"===e.error)return new ih(e);if("InvalidToken"===e.error)return new nh(e);if("InvalidEmail"===e.error)return new sh(e)}return e}Rr.InvalidEmailError=sh,Rr.toKnownErr=yA;var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.toKnownErr=Pt.IncompatibleDidDocError=Pt.UnresolvableDidError=Pt.UnsupportedDomainError=Pt.HandleNotAvailableError=Pt.InvalidInviteCodeError=Pt.InvalidPasswordError=Pt.InvalidHandleError=void 0;const _n=G;class ah extends _n.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}Pt.InvalidHandleError=ah;class oh extends _n.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}Pt.InvalidPasswordError=oh;class lh extends _n.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}Pt.InvalidInviteCodeError=lh;class uh extends _n.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}Pt.HandleNotAvailableError=uh;class ch extends _n.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}Pt.UnsupportedDomainError=ch;class dh extends _n.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}Pt.UnresolvableDidError=dh;class fh extends _n.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function bA(e){if(e instanceof _n.XRPCError){if("InvalidHandle"===e.error)return new ah(e);if("InvalidPassword"===e.error)return new oh(e);if("InvalidInviteCode"===e.error)return new lh(e);if("HandleNotAvailable"===e.error)return new uh(e);if("UnsupportedDomain"===e.error)return new ch(e);if("UnresolvableDid"===e.error)return new dh(e);if("IncompatibleDidDoc"===e.error)return new fh(e)}return e}Pt.IncompatibleDidDocError=fh,Pt.toKnownErr=bA;var Vr={};Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.validateAppPassword=Vr.isAppPassword=Vr.toKnownErr=Vr.AccountTakedownError=void 0;const ph=G,$d=_e,gA=Le;let hh=class extends ph.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function xA(e){return e instanceof ph.XRPCError&&"AccountTakedown"===e.error?new hh(e):e}function EA(e){return(0,$d.isObj)(e)&&(0,$d.hasProp)(e,"$type")&&"com.atproto.server.createAppPassword#appPassword"===e.$type}function vA(e){return gA.lexicons.validate("com.atproto.server.createAppPassword#appPassword",e)}Vr.AccountTakedownError=hh,Vr.toKnownErr=xA,Vr.isAppPassword=EA,Vr.validateAppPassword=vA;var ao={};Object.defineProperty(ao,"__esModule",{value:!0}),ao.toKnownErr=void 0;const RA=G;function AA(e){return RA.XRPCError,e}ao.toKnownErr=AA;var ji={};Object.defineProperty(ji,"__esModule",{value:!0}),ji.validateAccountCodes=ji.isAccountCodes=ji.toKnownErr=void 0;const _A=G,Gd=_e,wA=Le;function TA(e){return _A.XRPCError,e}function SA(e){return(0,Gd.isObj)(e)&&(0,Gd.hasProp)(e,"$type")&&"com.atproto.server.createInviteCodes#accountCodes"===e.$type}function CA(e){return wA.lexicons.validate("com.atproto.server.createInviteCodes#accountCodes",e)}ji.toKnownErr=TA,ji.isAccountCodes=SA,ji.validateAccountCodes=CA;var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.toKnownErr=Fi.AuthFactorTokenRequiredError=Fi.AccountTakedownError=void 0;const Yc=G;let mh=class extends Yc.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};Fi.AccountTakedownError=mh;class yh extends Yc.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function LA(e){if(e instanceof Yc.XRPCError){if("AccountTakedown"===e.error)return new mh(e);if("AuthFactorTokenRequired"===e.error)return new yh(e)}return e}Fi.AuthFactorTokenRequiredError=yh,Fi.toKnownErr=LA;var oo={};Object.defineProperty(oo,"__esModule",{value:!0}),oo.toKnownErr=void 0;const kA=G;function DA(e){return kA.XRPCError,e}oo.toKnownErr=DA;var $i={};Object.defineProperty($i,"__esModule",{value:!0}),$i.toKnownErr=$i.InvalidTokenError=$i.ExpiredTokenError=void 0;const Jc=G;let bh=class extends Jc.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};$i.ExpiredTokenError=bh;let gh=class extends Jc.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function PA(e){if(e instanceof Jc.XRPCError){if("ExpiredToken"===e.error)return new bh(e);if("InvalidToken"===e.error)return new gh(e)}return e}$i.InvalidTokenError=gh,$i.toKnownErr=PA;var lo={};Object.defineProperty(lo,"__esModule",{value:!0}),lo.toKnownErr=void 0;const BA=G;function IA(e){return BA.XRPCError,e}lo.toKnownErr=IA;var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.validateContact=Ar.isContact=Ar.validateLinks=Ar.isLinks=Ar.toKnownErr=void 0;const UA=G,vu=_e,xh=Le;function OA(e){return UA.XRPCError,e}function KA(e){return(0,vu.isObj)(e)&&(0,vu.hasProp)(e,"$type")&&"com.atproto.server.describeServer#links"===e.$type}function MA(e){return xh.lexicons.validate("com.atproto.server.describeServer#links",e)}function NA(e){return(0,vu.isObj)(e)&&(0,vu.hasProp)(e,"$type")&&"com.atproto.server.describeServer#contact"===e.$type}function VA(e){return xh.lexicons.validate("com.atproto.server.describeServer#contact",e)}Ar.toKnownErr=OA,Ar.isLinks=KA,Ar.validateLinks=MA,Ar.isContact=NA,Ar.validateContact=VA;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.toKnownErr=Fn.DuplicateCreateError=void 0;const Eh=G;class vh extends Eh.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function jA(e){return e instanceof Eh.XRPCError&&"DuplicateCreate"===e.error?new vh(e):e}Fn.DuplicateCreateError=vh,Fn.toKnownErr=jA;var $n={};Object.defineProperty($n,"__esModule",{value:!0}),$n.toKnownErr=$n.BadExpirationError=void 0;const Rh=G;class Ah extends Rh.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function FA(e){return e instanceof Rh.XRPCError&&"BadExpiration"===e.error?new Ah(e):e}$n.BadExpirationError=Ah,$n.toKnownErr=FA;var uo={};Object.defineProperty(uo,"__esModule",{value:!0}),uo.toKnownErr=void 0;const $A=G;function GA(e){return $A.XRPCError,e}uo.toKnownErr=GA;var jr={};Object.defineProperty(jr,"__esModule",{value:!0}),jr.validateAppPassword=jr.isAppPassword=jr.toKnownErr=jr.AccountTakedownError=void 0;const _h=G,qd=_e,qA=Le;let wh=class extends _h.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function zA(e){return e instanceof _h.XRPCError&&"AccountTakedown"===e.error?new wh(e):e}function XA(e){return(0,qd.isObj)(e)&&(0,qd.hasProp)(e,"$type")&&"com.atproto.server.listAppPasswords#appPassword"===e.$type}function HA(e){return qA.lexicons.validate("com.atproto.server.listAppPasswords#appPassword",e)}jr.AccountTakedownError=wh,jr.toKnownErr=zA,jr.isAppPassword=XA,jr.validateAppPassword=HA;var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.toKnownErr=Gn.AccountTakedownError=void 0;const Th=G;class Sh extends Th.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function ZA(e){return e instanceof Th.XRPCError&&"AccountTakedown"===e.error?new Sh(e):e}Gn.AccountTakedownError=Sh,Gn.toKnownErr=ZA;var co={};Object.defineProperty(co,"__esModule",{value:!0}),co.toKnownErr=void 0;const WA=G;function YA(e){return WA.XRPCError,e}co.toKnownErr=YA;var fo={};Object.defineProperty(fo,"__esModule",{value:!0}),fo.toKnownErr=void 0;const JA=G;function QA(e){return JA.XRPCError,e}fo.toKnownErr=QA;var po={};Object.defineProperty(po,"__esModule",{value:!0}),po.toKnownErr=void 0;const e_=G;function t_(e){return e_.XRPCError,e}po.toKnownErr=t_;var ho={};Object.defineProperty(ho,"__esModule",{value:!0}),ho.toKnownErr=void 0;const r_=G;function i_(e){return r_.XRPCError,e}ho.toKnownErr=i_;var mo={};Object.defineProperty(mo,"__esModule",{value:!0}),mo.toKnownErr=void 0;const n_=G;function s_(e){return n_.XRPCError,e}mo.toKnownErr=s_;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.toKnownErr=Gi.InvalidTokenError=Gi.ExpiredTokenError=void 0;const Qc=G;let Ch=class extends Qc.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};Gi.ExpiredTokenError=Ch;let Lh=class extends Qc.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function a_(e){if(e instanceof Qc.XRPCError){if("ExpiredToken"===e.error)return new Ch(e);if("InvalidToken"===e.error)return new Lh(e)}return e}Gi.InvalidTokenError=Lh,Gi.toKnownErr=a_;var yo={};Object.defineProperty(yo,"__esModule",{value:!0}),yo.toKnownErr=void 0;const o_=G;function l_(e){return o_.XRPCError,e}yo.toKnownErr=l_;var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.toKnownErr=Fr.TokenRequiredError=Fr.InvalidTokenError=Fr.ExpiredTokenError=void 0;const Ku=G;class kh extends Ku.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}Fr.ExpiredTokenError=kh;class Dh extends Ku.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}Fr.InvalidTokenError=Dh;class Ph extends Ku.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function u_(e){if(e instanceof Ku.XRPCError){if("ExpiredToken"===e.error)return new kh(e);if("InvalidToken"===e.error)return new Dh(e);if("TokenRequired"===e.error)return new Ph(e)}return e}Fr.TokenRequiredError=Ph,Fr.toKnownErr=u_;var ar={};Object.defineProperty(ar,"__esModule",{value:!0}),ar.toKnownErr=ar.RepoDeactivatedError=ar.RepoSuspendedError=ar.RepoTakendownError=ar.RepoNotFoundError=ar.BlobNotFoundError=void 0;const qs=G;class Bh extends qs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}ar.BlobNotFoundError=Bh;let Ih=class extends qs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};ar.RepoNotFoundError=Ih;let Uh=class extends qs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};ar.RepoTakendownError=Uh;let Oh=class extends qs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};ar.RepoSuspendedError=Oh;let Kh=class extends qs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function c_(e){if(e instanceof qs.XRPCError){if("BlobNotFound"===e.error)return new Bh(e);if("RepoNotFound"===e.error)return new Ih(e);if("RepoTakendown"===e.error)return new Uh(e);if("RepoSuspended"===e.error)return new Oh(e);if("RepoDeactivated"===e.error)return new Kh(e)}return e}ar.RepoDeactivatedError=Kh,ar.toKnownErr=c_;var or={};Object.defineProperty(or,"__esModule",{value:!0}),or.toKnownErr=or.RepoDeactivatedError=or.RepoSuspendedError=or.RepoTakendownError=or.RepoNotFoundError=or.BlockNotFoundError=void 0;const zs=G;class Mh extends zs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}or.BlockNotFoundError=Mh;let Nh=class extends zs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};or.RepoNotFoundError=Nh;let Vh=class extends zs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};or.RepoTakendownError=Vh;let jh=class extends zs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};or.RepoSuspendedError=jh;let Fh=class extends zs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function d_(e){if(e instanceof zs.XRPCError){if("BlockNotFound"===e.error)return new Mh(e);if("RepoNotFound"===e.error)return new Nh(e);if("RepoTakendown"===e.error)return new Vh(e);if("RepoSuspended"===e.error)return new jh(e);if("RepoDeactivated"===e.error)return new Fh(e)}return e}or.RepoDeactivatedError=Fh,or.toKnownErr=d_;var bo={};Object.defineProperty(bo,"__esModule",{value:!0}),bo.toKnownErr=void 0;const f_=G;function p_(e){return f_.XRPCError,e}bo.toKnownErr=p_;var qn={};Object.defineProperty(qn,"__esModule",{value:!0}),qn.toKnownErr=qn.HeadNotFoundError=void 0;const $h=G;class Gh extends $h.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function h_(e){return e instanceof $h.XRPCError&&"HeadNotFound"===e.error?new Gh(e):e}qn.HeadNotFoundError=Gh,qn.toKnownErr=h_;var _r={};Object.defineProperty(_r,"__esModule",{value:!0}),_r.toKnownErr=_r.RepoDeactivatedError=_r.RepoSuspendedError=_r.RepoTakendownError=_r.RepoNotFoundError=void 0;const go=G;let qh=class extends go.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};_r.RepoNotFoundError=qh;let zh=class extends go.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};_r.RepoTakendownError=zh;let Xh=class extends go.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};_r.RepoSuspendedError=Xh;let Hh=class extends go.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function m_(e){if(e instanceof go.XRPCError){if("RepoNotFound"===e.error)return new qh(e);if("RepoTakendown"===e.error)return new zh(e);if("RepoSuspended"===e.error)return new Xh(e);if("RepoDeactivated"===e.error)return new Hh(e)}return e}_r.RepoDeactivatedError=Hh,_r.toKnownErr=m_;var lr={};Object.defineProperty(lr,"__esModule",{value:!0}),lr.toKnownErr=lr.RepoDeactivatedError=lr.RepoSuspendedError=lr.RepoTakendownError=lr.RepoNotFoundError=lr.RecordNotFoundError=void 0;const Xs=G;let Zh=class extends Xs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};lr.RecordNotFoundError=Zh;let Wh=class extends Xs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};lr.RepoNotFoundError=Wh;let Yh=class extends Xs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};lr.RepoTakendownError=Yh;let Jh=class extends Xs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};lr.RepoSuspendedError=Jh;let Qh=class extends Xs.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function y_(e){if(e instanceof Xs.XRPCError){if("RecordNotFound"===e.error)return new Zh(e);if("RepoNotFound"===e.error)return new Wh(e);if("RepoTakendown"===e.error)return new Yh(e);if("RepoSuspended"===e.error)return new Jh(e);if("RepoDeactivated"===e.error)return new Qh(e)}return e}lr.RepoDeactivatedError=Qh,lr.toKnownErr=y_;var wr={};Object.defineProperty(wr,"__esModule",{value:!0}),wr.toKnownErr=wr.RepoDeactivatedError=wr.RepoSuspendedError=wr.RepoTakendownError=wr.RepoNotFoundError=void 0;const xo=G;let e0=class extends xo.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};wr.RepoNotFoundError=e0;let t0=class extends xo.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};wr.RepoTakendownError=t0;let r0=class extends xo.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};wr.RepoSuspendedError=r0;let i0=class extends xo.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function b_(e){if(e instanceof xo.XRPCError){if("RepoNotFound"===e.error)return new e0(e);if("RepoTakendown"===e.error)return new t0(e);if("RepoSuspended"===e.error)return new r0(e);if("RepoDeactivated"===e.error)return new i0(e)}return e}wr.RepoDeactivatedError=i0,wr.toKnownErr=b_;var zn={};Object.defineProperty(zn,"__esModule",{value:!0}),zn.toKnownErr=zn.RepoNotFoundError=void 0;const n0=G;let s0=class extends n0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function g_(e){return e instanceof n0.XRPCError&&"RepoNotFound"===e.error?new s0(e):e}zn.RepoNotFoundError=s0,zn.toKnownErr=g_;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.toKnownErr=Tr.RepoDeactivatedError=Tr.RepoSuspendedError=Tr.RepoTakendownError=Tr.RepoNotFoundError=void 0;const Eo=G;let a0=class extends Eo.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};Tr.RepoNotFoundError=a0;class o0 extends Eo.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}Tr.RepoTakendownError=o0;class l0 extends Eo.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}Tr.RepoSuspendedError=l0;class u0 extends Eo.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function x_(e){if(e instanceof Eo.XRPCError){if("RepoNotFound"===e.error)return new a0(e);if("RepoTakendown"===e.error)return new o0(e);if("RepoSuspended"===e.error)return new l0(e);if("RepoDeactivated"===e.error)return new u0(e)}return e}Tr.RepoDeactivatedError=u0,Tr.toKnownErr=x_;var qi={};Object.defineProperty(qi,"__esModule",{value:!0}),qi.validateRepo=qi.isRepo=qi.toKnownErr=void 0;const E_=G,zd=_e,v_=Le;function R_(e){return E_.XRPCError,e}function A_(e){return(0,zd.isObj)(e)&&(0,zd.hasProp)(e,"$type")&&"com.atproto.sync.listRepos#repo"===e.$type}function __(e){return v_.lexicons.validate("com.atproto.sync.listRepos#repo",e)}qi.toKnownErr=R_,qi.isRepo=A_,qi.validateRepo=__;var vo={};Object.defineProperty(vo,"__esModule",{value:!0}),vo.toKnownErr=void 0;const w_=G;function T_(e){return w_.XRPCError,e}vo.toKnownErr=T_;var Ro={};Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.toKnownErr=void 0;const S_=G;function C_(e){return S_.XRPCError,e}Ro.toKnownErr=C_;var Ao={};Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.toKnownErr=void 0;const L_=G;function k_(e){return L_.XRPCError,e}Ao.toKnownErr=k_;var _o={};Object.defineProperty(_o,"__esModule",{value:!0}),_o.toKnownErr=void 0;const D_=G;function P_(e){return D_.XRPCError,e}_o.toKnownErr=P_;var wo={};Object.defineProperty(wo,"__esModule",{value:!0}),wo.toKnownErr=void 0;const B_=G;function I_(e){return B_.XRPCError,e}wo.toKnownErr=I_;var To={};Object.defineProperty(To,"__esModule",{value:!0}),To.toKnownErr=void 0;const U_=G;function O_(e){return U_.XRPCError,e}To.toKnownErr=O_;var So={};Object.defineProperty(So,"__esModule",{value:!0}),So.toKnownErr=void 0;const K_=G;function M_(e){return K_.XRPCError,e}So.toKnownErr=M_;var Co={};Object.defineProperty(Co,"__esModule",{value:!0}),Co.toKnownErr=void 0;const N_=G;function V_(e){return N_.XRPCError,e}Co.toKnownErr=V_;var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.toKnownErr=void 0;const j_=G;function F_(e){return j_.XRPCError,e}Lo.toKnownErr=F_;var ko={};Object.defineProperty(ko,"__esModule",{value:!0}),ko.toKnownErr=void 0;const $_=G;function G_(e){return $_.XRPCError,e}ko.toKnownErr=G_;var Do={};Object.defineProperty(Do,"__esModule",{value:!0}),Do.toKnownErr=void 0;const q_=G;function z_(e){return q_.XRPCError,e}Do.toKnownErr=z_;var Po={};Object.defineProperty(Po,"__esModule",{value:!0}),Po.toKnownErr=void 0;const X_=G;function H_(e){return X_.XRPCError,e}Po.toKnownErr=H_;var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.validateLinks=Sr.isLinks=Sr.validateFeed=Sr.isFeed=Sr.toKnownErr=void 0;const Z_=G,Ru=_e,c0=Le;function W_(e){return Z_.XRPCError,e}function Y_(e){return(0,Ru.isObj)(e)&&(0,Ru.hasProp)(e,"$type")&&"app.bsky.feed.describeFeedGenerator#feed"===e.$type}function J_(e){return c0.lexicons.validate("app.bsky.feed.describeFeedGenerator#feed",e)}function Q_(e){return(0,Ru.isObj)(e)&&(0,Ru.hasProp)(e,"$type")&&"app.bsky.feed.describeFeedGenerator#links"===e.$type}function ew(e){return c0.lexicons.validate("app.bsky.feed.describeFeedGenerator#links",e)}Sr.toKnownErr=W_,Sr.isFeed=Y_,Sr.validateFeed=J_,Sr.isLinks=Q_,Sr.validateLinks=ew;var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.toKnownErr=void 0;const tw=G;function rw(e){return tw.XRPCError,e}Bo.toKnownErr=rw;var zi={};Object.defineProperty(zi,"__esModule",{value:!0}),zi.toKnownErr=zi.BlockedByActorError=zi.BlockedActorError=void 0;const ed=G;let d0=class extends ed.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};zi.BlockedActorError=d0;let f0=class extends ed.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function iw(e){if(e instanceof ed.XRPCError){if("BlockedActor"===e.error)return new d0(e);if("BlockedByActor"===e.error)return new f0(e)}return e}zi.BlockedByActorError=f0,zi.toKnownErr=iw;var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.toKnownErr=Xi.BlockedByActorError=Xi.BlockedActorError=void 0;const td=G;class p0 extends td.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}Xi.BlockedActorError=p0;class h0 extends td.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function nw(e){if(e instanceof td.XRPCError){if("BlockedActor"===e.error)return new p0(e);if("BlockedByActor"===e.error)return new h0(e)}return e}Xi.BlockedByActorError=h0,Xi.toKnownErr=nw;var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.toKnownErr=Xn.UnknownFeedError=void 0;const m0=G;let y0=class extends m0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function sw(e){return e instanceof m0.XRPCError&&"UnknownFeed"===e.error?new y0(e):e}Xn.UnknownFeedError=y0,Xn.toKnownErr=sw;var Io={};Object.defineProperty(Io,"__esModule",{value:!0}),Io.toKnownErr=void 0;const aw=G;function ow(e){return aw.XRPCError,e}Io.toKnownErr=ow;var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.toKnownErr=void 0;const lw=G;function uw(e){return lw.XRPCError,e}Uo.toKnownErr=uw;var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.toKnownErr=Hn.UnknownFeedError=void 0;const b0=G;class g0 extends b0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function cw(e){return e instanceof b0.XRPCError&&"UnknownFeed"===e.error?new g0(e):e}Hn.UnknownFeedError=g0,Hn.toKnownErr=cw;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.validateLike=Hi.isLike=Hi.toKnownErr=void 0;const dw=G,Xd=_e,fw=Le;function pw(e){return dw.XRPCError,e}function hw(e){return(0,Xd.isObj)(e)&&(0,Xd.hasProp)(e,"$type")&&"app.bsky.feed.getLikes#like"===e.$type}function mw(e){return fw.lexicons.validate("app.bsky.feed.getLikes#like",e)}Hi.toKnownErr=pw,Hi.isLike=hw,Hi.validateLike=mw;var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.toKnownErr=Zn.UnknownListError=void 0;const x0=G;class E0 extends x0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function yw(e){return e instanceof x0.XRPCError&&"UnknownList"===e.error?new E0(e):e}Zn.UnknownListError=E0,Zn.toKnownErr=yw;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.toKnownErr=Wn.NotFoundError=void 0;const v0=G;class R0 extends v0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function bw(e){return e instanceof v0.XRPCError&&"NotFound"===e.error?new R0(e):e}Wn.NotFoundError=R0,Wn.toKnownErr=bw;var Oo={};Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.toKnownErr=void 0;const gw=G;function xw(e){return gw.XRPCError,e}Oo.toKnownErr=xw;var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.toKnownErr=void 0;const Ew=G;function vw(e){return Ew.XRPCError,e}Ko.toKnownErr=vw;var Mo={};Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.toKnownErr=void 0;const Rw=G;function Aw(e){return Rw.XRPCError,e}Mo.toKnownErr=Aw;var No={};Object.defineProperty(No,"__esModule",{value:!0}),No.toKnownErr=void 0;const _w=G;function ww(e){return _w.XRPCError,e}No.toKnownErr=ww;var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.toKnownErr=Yn.BadQueryStringError=void 0;const A0=G;let _0=class extends A0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function Tw(e){return e instanceof A0.XRPCError&&"BadQueryString"===e.error?new _0(e):e}Yn.BadQueryStringError=_0,Yn.toKnownErr=Tw;var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.toKnownErr=void 0;const Sw=G;function Cw(e){return Sw.XRPCError,e}Vo.toKnownErr=Cw;var jo={};Object.defineProperty(jo,"__esModule",{value:!0}),jo.toKnownErr=void 0;const Lw=G;function kw(e){return Lw.XRPCError,e}jo.toKnownErr=kw;var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.toKnownErr=void 0;const Dw=G;function Pw(e){return Dw.XRPCError,e}Fo.toKnownErr=Pw;var $o={};Object.defineProperty($o,"__esModule",{value:!0}),$o.toKnownErr=void 0;const Bw=G;function Iw(e){return Bw.XRPCError,e}$o.toKnownErr=Iw;var Go={};Object.defineProperty(Go,"__esModule",{value:!0}),Go.toKnownErr=void 0;const Uw=G;function Ow(e){return Uw.XRPCError,e}Go.toKnownErr=Ow;var qo={};Object.defineProperty(qo,"__esModule",{value:!0}),qo.toKnownErr=void 0;const Kw=G;function Mw(e){return Kw.XRPCError,e}qo.toKnownErr=Mw;var zo={};Object.defineProperty(zo,"__esModule",{value:!0}),zo.toKnownErr=void 0;const Nw=G;function Vw(e){return Nw.XRPCError,e}zo.toKnownErr=Vw;var Xo={};Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.toKnownErr=void 0;const jw=G;function Fw(e){return jw.XRPCError,e}Xo.toKnownErr=Fw;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.toKnownErr=void 0;const $w=G;function Gw(e){return $w.XRPCError,e}Ho.toKnownErr=Gw;var Zo={};Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.toKnownErr=void 0;const qw=G;function zw(e){return qw.XRPCError,e}Zo.toKnownErr=zw;var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.toKnownErr=void 0;const Xw=G;function Hw(e){return Xw.XRPCError,e}Wo.toKnownErr=Hw;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.toKnownErr=Jn.ActorNotFoundError=void 0;const w0=G;class T0 extends w0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function Zw(e){return e instanceof w0.XRPCError&&"ActorNotFound"===e.error?new T0(e):e}Jn.ActorNotFoundError=T0,Jn.toKnownErr=Zw;var Yo={};Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.toKnownErr=void 0;const Ww=G;function Yw(e){return Ww.XRPCError,e}Yo.toKnownErr=Yw;var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.toKnownErr=void 0;const Jw=G;function Qw(e){return Jw.XRPCError,e}Jo.toKnownErr=Qw;var Qo={};Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.toKnownErr=void 0;const eT=G;function tT(e){return eT.XRPCError,e}Qo.toKnownErr=tT;var el={};Object.defineProperty(el,"__esModule",{value:!0}),el.toKnownErr=void 0;const rT=G;function iT(e){return rT.XRPCError,e}el.toKnownErr=iT;var tl={};Object.defineProperty(tl,"__esModule",{value:!0}),tl.toKnownErr=void 0;const nT=G;function sT(e){return nT.XRPCError,e}tl.toKnownErr=sT;var rl={};Object.defineProperty(rl,"__esModule",{value:!0}),rl.toKnownErr=void 0;const aT=G;function oT(e){return aT.XRPCError,e}rl.toKnownErr=oT;var il={};Object.defineProperty(il,"__esModule",{value:!0}),il.toKnownErr=void 0;const lT=G;function uT(e){return lT.XRPCError,e}il.toKnownErr=uT;var nl={};Object.defineProperty(nl,"__esModule",{value:!0}),nl.toKnownErr=void 0;const cT=G;function dT(e){return cT.XRPCError,e}nl.toKnownErr=dT;var sl={};Object.defineProperty(sl,"__esModule",{value:!0}),sl.toKnownErr=void 0;const fT=G;function pT(e){return fT.XRPCError,e}sl.toKnownErr=pT;var al={};Object.defineProperty(al,"__esModule",{value:!0}),al.toKnownErr=void 0;const hT=G;function mT(e){return hT.XRPCError,e}al.toKnownErr=mT;var ol={};Object.defineProperty(ol,"__esModule",{value:!0}),ol.toKnownErr=void 0;const yT=G;function bT(e){return yT.XRPCError,e}ol.toKnownErr=bT;var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.validateNotification=Zi.isNotification=Zi.toKnownErr=void 0;const gT=G,Hd=_e,xT=Le;function ET(e){return gT.XRPCError,e}function vT(e){return(0,Hd.isObj)(e)&&(0,Hd.hasProp)(e,"$type")&&"app.bsky.notification.listNotifications#notification"===e.$type}function RT(e){return xT.lexicons.validate("app.bsky.notification.listNotifications#notification",e)}Zi.toKnownErr=ET,Zi.isNotification=vT,Zi.validateNotification=RT;var ll={};Object.defineProperty(ll,"__esModule",{value:!0}),ll.toKnownErr=void 0;const AT=G;function _T(e){return AT.XRPCError,e}ll.toKnownErr=_T;var ul={};Object.defineProperty(ul,"__esModule",{value:!0}),ul.toKnownErr=void 0;const wT=G;function TT(e){return wT.XRPCError,e}ul.toKnownErr=TT;var cl={};Object.defineProperty(cl,"__esModule",{value:!0}),cl.toKnownErr=void 0;const ST=G;function CT(e){return ST.XRPCError,e}cl.toKnownErr=CT;var dl={};Object.defineProperty(dl,"__esModule",{value:!0}),dl.toKnownErr=void 0;const LT=G;function kT(e){return LT.XRPCError,e}dl.toKnownErr=kT;var fl={};Object.defineProperty(fl,"__esModule",{value:!0}),fl.toKnownErr=void 0;const DT=G;function PT(e){return DT.XRPCError,e}fl.toKnownErr=PT;var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.validateSuggestion=Wi.isSuggestion=Wi.toKnownErr=void 0;const BT=G,Zd=_e,IT=Le;function UT(e){return BT.XRPCError,e}function OT(e){return(0,Zd.isObj)(e)&&(0,Zd.hasProp)(e,"$type")&&"app.bsky.unspecced.getTaggedSuggestions#suggestion"===e.$type}function KT(e){return IT.lexicons.validate("app.bsky.unspecced.getTaggedSuggestions#suggestion",e)}Wi.toKnownErr=UT,Wi.isSuggestion=OT,Wi.validateSuggestion=KT;var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.toKnownErr=Qn.BadQueryStringError=void 0;const S0=G;let C0=class extends S0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};function MT(e){return e instanceof S0.XRPCError&&"BadQueryString"===e.error?new C0(e):e}Qn.BadQueryStringError=C0,Qn.toKnownErr=MT;var es={};Object.defineProperty(es,"__esModule",{value:!0}),es.toKnownErr=es.BadQueryStringError=void 0;const L0=G;class k0 extends L0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function NT(e){return e instanceof L0.XRPCError&&"BadQueryString"===e.error?new k0(e):e}es.BadQueryStringError=k0,es.toKnownErr=NT;var pl={};Object.defineProperty(pl,"__esModule",{value:!0}),pl.toKnownErr=void 0;const VT=G;function jT(e){return VT.XRPCError,e}pl.toKnownErr=jT;var hl={};Object.defineProperty(hl,"__esModule",{value:!0}),hl.toKnownErr=void 0;const FT=G;function $T(e){return FT.XRPCError,e}hl.toKnownErr=$T;var ml={};Object.defineProperty(ml,"__esModule",{value:!0}),ml.toKnownErr=void 0;const GT=G;function qT(e){return GT.XRPCError,e}ml.toKnownErr=qT;var yl={};Object.defineProperty(yl,"__esModule",{value:!0}),yl.toKnownErr=void 0;const zT=G;function XT(e){return zT.XRPCError,e}yl.toKnownErr=XT;var bl={};Object.defineProperty(bl,"__esModule",{value:!0}),bl.toKnownErr=void 0;const HT=G;function ZT(e){return HT.XRPCError,e}bl.toKnownErr=ZT;var gl={};Object.defineProperty(gl,"__esModule",{value:!0}),gl.toKnownErr=void 0;const WT=G;function YT(e){return WT.XRPCError,e}gl.toKnownErr=YT;var xl={};Object.defineProperty(xl,"__esModule",{value:!0}),xl.toKnownErr=void 0;const JT=G;function QT(e){return JT.XRPCError,e}xl.toKnownErr=QT;var El={};Object.defineProperty(El,"__esModule",{value:!0}),El.toKnownErr=void 0;const eS=G;function tS(e){return eS.XRPCError,e}El.toKnownErr=tS;var vl={};Object.defineProperty(vl,"__esModule",{value:!0}),vl.toKnownErr=void 0;const rS=G;function iS(e){return rS.XRPCError,e}vl.toKnownErr=iS;var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.toKnownErr=void 0;const nS=G;function sS(e){return nS.XRPCError,e}Rl.toKnownErr=sS;var Al={};Object.defineProperty(Al,"__esModule",{value:!0}),Al.toKnownErr=void 0;const aS=G;function oS(e){return aS.XRPCError,e}Al.toKnownErr=oS;var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.validateBatchItem=Yi.isBatchItem=Yi.toKnownErr=void 0;const lS=G,Wd=_e,uS=Le;function cS(e){return lS.XRPCError,e}function dS(e){return(0,Wd.isObj)(e)&&(0,Wd.hasProp)(e,"$type")&&"chat.bsky.convo.sendMessageBatch#batchItem"===e.$type}function fS(e){return uS.lexicons.validate("chat.bsky.convo.sendMessageBatch#batchItem",e)}Yi.toKnownErr=cS,Yi.isBatchItem=dS,Yi.validateBatchItem=fS;var _l={};Object.defineProperty(_l,"__esModule",{value:!0}),_l.toKnownErr=void 0;const pS=G;function hS(e){return pS.XRPCError,e}_l.toKnownErr=hS;var wl={};Object.defineProperty(wl,"__esModule",{value:!0}),wl.toKnownErr=void 0;const mS=G;function yS(e){return mS.XRPCError,e}wl.toKnownErr=yS;var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.validateMetadata=Ji.isMetadata=Ji.toKnownErr=void 0;const bS=G,Yd=_e,gS=Le;function xS(e){return bS.XRPCError,e}function ES(e){return(0,Yd.isObj)(e)&&(0,Yd.hasProp)(e,"$type")&&"chat.bsky.moderation.getActorMetadata#metadata"===e.$type}function vS(e){return gS.lexicons.validate("chat.bsky.moderation.getActorMetadata#metadata",e)}Ji.toKnownErr=xS,Ji.isMetadata=ES,Ji.validateMetadata=vS;var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.toKnownErr=void 0;const RS=G;function AS(e){return RS.XRPCError,e}Tl.toKnownErr=AS;var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.toKnownErr=void 0;const _S=G;function wS(e){return _S.XRPCError,e}Sl.toKnownErr=wS;var Cl={};Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.toKnownErr=void 0;const TS=G;function SS(e){return TS.XRPCError,e}Cl.toKnownErr=SS;var Ll={};Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.toKnownErr=void 0;const CS=G;function LS(e){return CS.XRPCError,e}Ll.toKnownErr=LS;var kl={};Object.defineProperty(kl,"__esModule",{value:!0}),kl.toKnownErr=void 0;const kS=G;function DS(e){return kS.XRPCError,e}kl.toKnownErr=DS;var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.toKnownErr=void 0;const PS=G;function BS(e){return PS.XRPCError,e}Dl.toKnownErr=BS;var ts={};Object.defineProperty(ts,"__esModule",{value:!0}),ts.toKnownErr=ts.SubjectHasActionError=void 0;const D0=G;class P0 extends D0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function IS(e){return e instanceof D0.XRPCError&&"SubjectHasAction"===e.error?new P0(e):e}ts.SubjectHasActionError=P0,ts.toKnownErr=IS;var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.toKnownErr=void 0;const US=G;function OS(e){return US.XRPCError,e}Pl.toKnownErr=OS;var rs={};Object.defineProperty(rs,"__esModule",{value:!0}),rs.toKnownErr=rs.RecordNotFoundError=void 0;const B0=G;class I0 extends B0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function KS(e){return e instanceof B0.XRPCError&&"RecordNotFound"===e.error?new I0(e):e}rs.RecordNotFoundError=I0,rs.toKnownErr=KS;var is={};Object.defineProperty(is,"__esModule",{value:!0}),is.toKnownErr=is.RepoNotFoundError=void 0;const U0=G;class O0 extends U0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function MS(e){return e instanceof U0.XRPCError&&"RepoNotFound"===e.error?new O0(e):e}is.RepoNotFoundError=O0,is.toKnownErr=MS;var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.toKnownErr=void 0;const NS=G;function VS(e){return NS.XRPCError,e}Bl.toKnownErr=VS;var Il={};Object.defineProperty(Il,"__esModule",{value:!0}),Il.toKnownErr=void 0;const jS=G;function FS(e){return jS.XRPCError,e}Il.toKnownErr=FS;var Ul={};Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.toKnownErr=void 0;const $S=G;function GS(e){return $S.XRPCError,e}Ul.toKnownErr=GS;var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.validateViewerConfig=Cr.isViewerConfig=Cr.validateServiceConfig=Cr.isServiceConfig=Cr.toKnownErr=void 0;const qS=G,Au=_e,K0=Le;function zS(e){return qS.XRPCError,e}function XS(e){return(0,Au.isObj)(e)&&(0,Au.hasProp)(e,"$type")&&"tools.ozone.server.getConfig#serviceConfig"===e.$type}function HS(e){return K0.lexicons.validate("tools.ozone.server.getConfig#serviceConfig",e)}function ZS(e){return(0,Au.isObj)(e)&&(0,Au.hasProp)(e,"$type")&&"tools.ozone.server.getConfig#viewerConfig"===e.$type}function WS(e){return K0.lexicons.validate("tools.ozone.server.getConfig#viewerConfig",e)}Cr.toKnownErr=zS,Cr.isServiceConfig=XS,Cr.validateServiceConfig=HS,Cr.isViewerConfig=ZS,Cr.validateViewerConfig=WS;var ns={};Object.defineProperty(ns,"__esModule",{value:!0}),ns.toKnownErr=ns.MemberAlreadyExistsError=void 0;const M0=G;class N0 extends M0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function YS(e){return e instanceof M0.XRPCError&&"MemberAlreadyExists"===e.error?new N0(e):e}ns.MemberAlreadyExistsError=N0,ns.toKnownErr=YS;var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.toKnownErr=Qi.CannotDeleteSelfError=Qi.MemberNotFoundError=void 0;const rd=G;let V0=class extends rd.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}};Qi.MemberNotFoundError=V0;class j0 extends rd.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function JS(e){if(e instanceof rd.XRPCError){if("MemberNotFound"===e.error)return new V0(e);if("CannotDeleteSelf"===e.error)return new j0(e)}return e}Qi.CannotDeleteSelfError=j0,Qi.toKnownErr=JS;var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.toKnownErr=void 0;const QS=G;function eC(e){return QS.XRPCError,e}Ol.toKnownErr=eC;var ss={};Object.defineProperty(ss,"__esModule",{value:!0}),ss.toKnownErr=ss.MemberNotFoundError=void 0;const F0=G;class $0 extends F0.XRPCError{constructor(e){super(e.status,e.error,e.message,e.headers)}}function tC(e){return e instanceof F0.XRPCError&&"MemberNotFound"===e.error?new $0(e):e}ss.MemberNotFoundError=$0,ss.toKnownErr=tC;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.validateRepoBlobRef=Kt.isRepoBlobRef=Kt.validateRepoRef=Kt.isRepoRef=Kt.validateAccountView=Kt.isAccountView=Kt.validateStatusAttr=Kt.isStatusAttr=void 0;const mn=_e,Mu=Le;function rC(e){return(0,mn.isObj)(e)&&(0,mn.hasProp)(e,"$type")&&"com.atproto.admin.defs#statusAttr"===e.$type}function iC(e){return Mu.lexicons.validate("com.atproto.admin.defs#statusAttr",e)}function nC(e){return(0,mn.isObj)(e)&&(0,mn.hasProp)(e,"$type")&&"com.atproto.admin.defs#accountView"===e.$type}function sC(e){return Mu.lexicons.validate("com.atproto.admin.defs#accountView",e)}function aC(e){return(0,mn.isObj)(e)&&(0,mn.hasProp)(e,"$type")&&"com.atproto.admin.defs#repoRef"===e.$type}function oC(e){return Mu.lexicons.validate("com.atproto.admin.defs#repoRef",e)}function lC(e){return(0,mn.isObj)(e)&&(0,mn.hasProp)(e,"$type")&&"com.atproto.admin.defs#repoBlobRef"===e.$type}function uC(e){return Mu.lexicons.validate("com.atproto.admin.defs#repoBlobRef",e)}Kt.isStatusAttr=rC,Kt.validateStatusAttr=iC,Kt.isAccountView=nC,Kt.validateAccountView=sC,Kt.isRepoRef=aC,Kt.validateRepoRef=oC,Kt.isRepoBlobRef=lC,Kt.validateRepoBlobRef=uC;var gt={};Object.defineProperty(gt,"__esModule",{value:!0}),gt.validateLabelValueDefinitionStrings=gt.isLabelValueDefinitionStrings=gt.validateLabelValueDefinition=gt.isLabelValueDefinition=gt.validateSelfLabel=gt.isSelfLabel=gt.validateSelfLabels=gt.isSelfLabels=gt.validateLabel=gt.isLabel=void 0;const mi=_e,Kl=Le;function cC(e){return(0,mi.isObj)(e)&&(0,mi.hasProp)(e,"$type")&&"com.atproto.label.defs#label"===e.$type}function dC(e){return Kl.lexicons.validate("com.atproto.label.defs#label",e)}function fC(e){return(0,mi.isObj)(e)&&(0,mi.hasProp)(e,"$type")&&"com.atproto.label.defs#selfLabels"===e.$type}function pC(e){return Kl.lexicons.validate("com.atproto.label.defs#selfLabels",e)}function hC(e){return(0,mi.isObj)(e)&&(0,mi.hasProp)(e,"$type")&&"com.atproto.label.defs#selfLabel"===e.$type}function mC(e){return Kl.lexicons.validate("com.atproto.label.defs#selfLabel",e)}function yC(e){return(0,mi.isObj)(e)&&(0,mi.hasProp)(e,"$type")&&"com.atproto.label.defs#labelValueDefinition"===e.$type}function bC(e){return Kl.lexicons.validate("com.atproto.label.defs#labelValueDefinition",e)}function gC(e){return(0,mi.isObj)(e)&&(0,mi.hasProp)(e,"$type")&&"com.atproto.label.defs#labelValueDefinitionStrings"===e.$type}function xC(e){return Kl.lexicons.validate("com.atproto.label.defs#labelValueDefinitionStrings",e)}gt.isLabel=cC,gt.validateLabel=dC,gt.isSelfLabels=fC,gt.validateSelfLabels=pC,gt.isSelfLabel=hC,gt.validateSelfLabel=mC,gt.isLabelValueDefinition=yC,gt.validateLabelValueDefinition=bC,gt.isLabelValueDefinitionStrings=gC,gt.validateLabelValueDefinitionStrings=xC;var ni={};Object.defineProperty(ni,"__esModule",{value:!0}),ni.validateInfo=ni.isInfo=ni.validateLabels=ni.isLabels=void 0;const _u=_e,G0=Le;function EC(e){return(0,_u.isObj)(e)&&(0,_u.hasProp)(e,"$type")&&"com.atproto.label.subscribeLabels#labels"===e.$type}function vC(e){return G0.lexicons.validate("com.atproto.label.subscribeLabels#labels",e)}function RC(e){return(0,_u.isObj)(e)&&(0,_u.hasProp)(e,"$type")&&"com.atproto.label.subscribeLabels#info"===e.$type}function AC(e){return G0.lexicons.validate("com.atproto.label.subscribeLabels#info",e)}ni.isLabels=EC,ni.validateLabels=vC,ni.isInfo=RC,ni.validateInfo=AC;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.REASONAPPEAL=Jt.REASONOTHER=Jt.REASONRUDE=Jt.REASONSEXUAL=Jt.REASONMISLEADING=Jt.REASONVIOLATION=Jt.REASONSPAM=void 0,Jt.REASONSPAM="com.atproto.moderation.defs#reasonSpam",Jt.REASONVIOLATION="com.atproto.moderation.defs#reasonViolation",Jt.REASONMISLEADING="com.atproto.moderation.defs#reasonMisleading",Jt.REASONSEXUAL="com.atproto.moderation.defs#reasonSexual",Jt.REASONRUDE="com.atproto.moderation.defs#reasonRude",Jt.REASONOTHER="com.atproto.moderation.defs#reasonOther",Jt.REASONAPPEAL="com.atproto.moderation.defs#reasonAppeal";var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.validateMain=Ss.isMain=void 0;const Jd=_e,_C=Le;function wC(e){return(0,Jd.isObj)(e)&&(0,Jd.hasProp)(e,"$type")&&("com.atproto.repo.strongRef#main"===e.$type||"com.atproto.repo.strongRef"===e.$type)}function TC(e){return _C.lexicons.validate("com.atproto.repo.strongRef#main",e)}Ss.isMain=wC,Ss.validateMain=TC;var si={};Object.defineProperty(si,"__esModule",{value:!0}),si.validateInviteCodeUse=si.isInviteCodeUse=si.validateInviteCode=si.isInviteCode=void 0;const wu=_e,q0=Le;function SC(e){return(0,wu.isObj)(e)&&(0,wu.hasProp)(e,"$type")&&"com.atproto.server.defs#inviteCode"===e.$type}function CC(e){return q0.lexicons.validate("com.atproto.server.defs#inviteCode",e)}function LC(e){return(0,wu.isObj)(e)&&(0,wu.hasProp)(e,"$type")&&"com.atproto.server.defs#inviteCodeUse"===e.$type}function kC(e){return q0.lexicons.validate("com.atproto.server.defs#inviteCodeUse",e)}si.isInviteCode=SC,si.validateInviteCode=CC,si.isInviteCodeUse=LC,si.validateInviteCodeUse=kC;var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.validateRepoOp=Ze.isRepoOp=Ze.validateInfo=Ze.isInfo=Ze.validateTombstone=Ze.isTombstone=Ze.validateMigrate=Ze.isMigrate=Ze.validateHandle=Ze.isHandle=Ze.validateAccount=Ze.isAccount=Ze.validateIdentity=Ze.isIdentity=Ze.validateCommit=Ze.isCommit=void 0;const er=_e,wn=Le;function DC(e){return(0,er.isObj)(e)&&(0,er.hasProp)(e,"$type")&&"com.atproto.sync.subscribeRepos#commit"===e.$type}function PC(e){return wn.lexicons.validate("com.atproto.sync.subscribeRepos#commit",e)}function BC(e){return(0,er.isObj)(e)&&(0,er.hasProp)(e,"$type")&&"com.atproto.sync.subscribeRepos#identity"===e.$type}function IC(e){return wn.lexicons.validate("com.atproto.sync.subscribeRepos#identity",e)}function UC(e){return(0,er.isObj)(e)&&(0,er.hasProp)(e,"$type")&&"com.atproto.sync.subscribeRepos#account"===e.$type}function OC(e){return wn.lexicons.validate("com.atproto.sync.subscribeRepos#account",e)}function KC(e){return(0,er.isObj)(e)&&(0,er.hasProp)(e,"$type")&&"com.atproto.sync.subscribeRepos#handle"===e.$type}function MC(e){return wn.lexicons.validate("com.atproto.sync.subscribeRepos#handle",e)}function NC(e){return(0,er.isObj)(e)&&(0,er.hasProp)(e,"$type")&&"com.atproto.sync.subscribeRepos#migrate"===e.$type}function VC(e){return wn.lexicons.validate("com.atproto.sync.subscribeRepos#migrate",e)}function jC(e){return(0,er.isObj)(e)&&(0,er.hasProp)(e,"$type")&&"com.atproto.sync.subscribeRepos#tombstone"===e.$type}function FC(e){return wn.lexicons.validate("com.atproto.sync.subscribeRepos#tombstone",e)}function $C(e){return(0,er.isObj)(e)&&(0,er.hasProp)(e,"$type")&&"com.atproto.sync.subscribeRepos#info"===e.$type}function GC(e){return wn.lexicons.validate("com.atproto.sync.subscribeRepos#info",e)}function qC(e){return(0,er.isObj)(e)&&(0,er.hasProp)(e,"$type")&&"com.atproto.sync.subscribeRepos#repoOp"===e.$type}function zC(e){return wn.lexicons.validate("com.atproto.sync.subscribeRepos#repoOp",e)}Ze.isCommit=DC,Ze.validateCommit=PC,Ze.isIdentity=BC,Ze.validateIdentity=IC,Ze.isAccount=UC,Ze.validateAccount=OC,Ze.isHandle=KC,Ze.validateHandle=MC,Ze.isMigrate=NC,Ze.validateMigrate=VC,Ze.isTombstone=jC,Ze.validateTombstone=FC,Ze.isInfo=$C,Ze.validateInfo=GC,Ze.isRepoOp=qC,Ze.validateRepoOp=zC;var ae={};Object.defineProperty(ae,"__esModule",{value:!0}),ae.validateBskyAppProgressGuide=ae.isBskyAppProgressGuide=ae.validateBskyAppStatePref=ae.isBskyAppStatePref=ae.validateLabelerPrefItem=ae.isLabelerPrefItem=ae.validateLabelersPref=ae.isLabelersPref=ae.validateHiddenPostsPref=ae.isHiddenPostsPref=ae.validateMutedWordsPref=ae.isMutedWordsPref=ae.validateMutedWord=ae.isMutedWord=ae.validateInterestsPref=ae.isInterestsPref=ae.validateThreadViewPref=ae.isThreadViewPref=ae.validateFeedViewPref=ae.isFeedViewPref=ae.validatePersonalDetailsPref=ae.isPersonalDetailsPref=ae.validateSavedFeedsPref=ae.isSavedFeedsPref=ae.validateSavedFeedsPrefV2=ae.isSavedFeedsPrefV2=ae.validateSavedFeed=ae.isSavedFeed=ae.validateContentLabelPref=ae.isContentLabelPref=ae.validateAdultContentPref=ae.isAdultContentPref=ae.validateKnownFollowers=ae.isKnownFollowers=ae.validateViewerState=ae.isViewerState=ae.validateProfileAssociatedChat=ae.isProfileAssociatedChat=ae.validateProfileAssociated=ae.isProfileAssociated=ae.validateProfileViewDetailed=ae.isProfileViewDetailed=ae.validateProfileView=ae.isProfileView=ae.validateProfileViewBasic=ae.isProfileViewBasic=void 0;const Pe=_e,bt=Le;function XC(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#profileViewBasic"===e.$type}function HC(e){return bt.lexicons.validate("app.bsky.actor.defs#profileViewBasic",e)}function ZC(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#profileView"===e.$type}function WC(e){return bt.lexicons.validate("app.bsky.actor.defs#profileView",e)}function YC(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#profileViewDetailed"===e.$type}function JC(e){return bt.lexicons.validate("app.bsky.actor.defs#profileViewDetailed",e)}function QC(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#profileAssociated"===e.$type}function e1(e){return bt.lexicons.validate("app.bsky.actor.defs#profileAssociated",e)}function t1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#profileAssociatedChat"===e.$type}function r1(e){return bt.lexicons.validate("app.bsky.actor.defs#profileAssociatedChat",e)}function i1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#viewerState"===e.$type}function n1(e){return bt.lexicons.validate("app.bsky.actor.defs#viewerState",e)}function s1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#knownFollowers"===e.$type}function a1(e){return bt.lexicons.validate("app.bsky.actor.defs#knownFollowers",e)}function o1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#adultContentPref"===e.$type}function l1(e){return bt.lexicons.validate("app.bsky.actor.defs#adultContentPref",e)}function u1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#contentLabelPref"===e.$type}function c1(e){return bt.lexicons.validate("app.bsky.actor.defs#contentLabelPref",e)}function d1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#savedFeed"===e.$type}function f1(e){return bt.lexicons.validate("app.bsky.actor.defs#savedFeed",e)}function p1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#savedFeedsPrefV2"===e.$type}function h1(e){return bt.lexicons.validate("app.bsky.actor.defs#savedFeedsPrefV2",e)}function m1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#savedFeedsPref"===e.$type}function y1(e){return bt.lexicons.validate("app.bsky.actor.defs#savedFeedsPref",e)}function b1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#personalDetailsPref"===e.$type}function g1(e){return bt.lexicons.validate("app.bsky.actor.defs#personalDetailsPref",e)}function x1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#feedViewPref"===e.$type}function E1(e){return bt.lexicons.validate("app.bsky.actor.defs#feedViewPref",e)}function v1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#threadViewPref"===e.$type}function R1(e){return bt.lexicons.validate("app.bsky.actor.defs#threadViewPref",e)}function A1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#interestsPref"===e.$type}function _1(e){return bt.lexicons.validate("app.bsky.actor.defs#interestsPref",e)}function w1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#mutedWord"===e.$type}function T1(e){return bt.lexicons.validate("app.bsky.actor.defs#mutedWord",e)}function S1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#mutedWordsPref"===e.$type}function C1(e){return bt.lexicons.validate("app.bsky.actor.defs#mutedWordsPref",e)}function L1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#hiddenPostsPref"===e.$type}function k1(e){return bt.lexicons.validate("app.bsky.actor.defs#hiddenPostsPref",e)}function D1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#labelersPref"===e.$type}function P1(e){return bt.lexicons.validate("app.bsky.actor.defs#labelersPref",e)}function B1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#labelerPrefItem"===e.$type}function I1(e){return bt.lexicons.validate("app.bsky.actor.defs#labelerPrefItem",e)}function U1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#bskyAppStatePref"===e.$type}function O1(e){return bt.lexicons.validate("app.bsky.actor.defs#bskyAppStatePref",e)}function K1(e){return(0,Pe.isObj)(e)&&(0,Pe.hasProp)(e,"$type")&&"app.bsky.actor.defs#bskyAppProgressGuide"===e.$type}function M1(e){return bt.lexicons.validate("app.bsky.actor.defs#bskyAppProgressGuide",e)}ae.isProfileViewBasic=XC,ae.validateProfileViewBasic=HC,ae.isProfileView=ZC,ae.validateProfileView=WC,ae.isProfileViewDetailed=YC,ae.validateProfileViewDetailed=JC,ae.isProfileAssociated=QC,ae.validateProfileAssociated=e1,ae.isProfileAssociatedChat=t1,ae.validateProfileAssociatedChat=r1,ae.isViewerState=i1,ae.validateViewerState=n1,ae.isKnownFollowers=s1,ae.validateKnownFollowers=a1,ae.isAdultContentPref=o1,ae.validateAdultContentPref=l1,ae.isContentLabelPref=u1,ae.validateContentLabelPref=c1,ae.isSavedFeed=d1,ae.validateSavedFeed=f1,ae.isSavedFeedsPrefV2=p1,ae.validateSavedFeedsPrefV2=h1,ae.isSavedFeedsPref=m1,ae.validateSavedFeedsPref=y1,ae.isPersonalDetailsPref=b1,ae.validatePersonalDetailsPref=g1,ae.isFeedViewPref=x1,ae.validateFeedViewPref=E1,ae.isThreadViewPref=v1,ae.validateThreadViewPref=R1,ae.isInterestsPref=A1,ae.validateInterestsPref=_1,ae.isMutedWord=w1,ae.validateMutedWord=T1,ae.isMutedWordsPref=S1,ae.validateMutedWordsPref=C1,ae.isHiddenPostsPref=L1,ae.validateHiddenPostsPref=k1,ae.isLabelersPref=D1,ae.validateLabelersPref=P1,ae.isLabelerPrefItem=B1,ae.validateLabelerPrefItem=I1,ae.isBskyAppStatePref=U1,ae.validateBskyAppStatePref=O1,ae.isBskyAppProgressGuide=K1,ae.validateBskyAppProgressGuide=M1;var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.validateRecord=Cs.isRecord=void 0;const Qd=_e,N1=Le;function V1(e){return(0,Qd.isObj)(e)&&(0,Qd.hasProp)(e,"$type")&&("app.bsky.actor.profile#main"===e.$type||"app.bsky.actor.profile"===e.$type)}function j1(e){return N1.lexicons.validate("app.bsky.actor.profile#main",e)}Cs.isRecord=V1,Cs.validateRecord=j1;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.validateViewExternal=Mt.isViewExternal=Mt.validateView=Mt.isView=Mt.validateExternal=Mt.isExternal=Mt.validateMain=Mt.isMain=void 0;const yn=_e,Nu=Le;function F1(e){return(0,yn.isObj)(e)&&(0,yn.hasProp)(e,"$type")&&("app.bsky.embed.external#main"===e.$type||"app.bsky.embed.external"===e.$type)}function $1(e){return Nu.lexicons.validate("app.bsky.embed.external#main",e)}function G1(e){return(0,yn.isObj)(e)&&(0,yn.hasProp)(e,"$type")&&"app.bsky.embed.external#external"===e.$type}function q1(e){return Nu.lexicons.validate("app.bsky.embed.external#external",e)}function z1(e){return(0,yn.isObj)(e)&&(0,yn.hasProp)(e,"$type")&&"app.bsky.embed.external#view"===e.$type}function X1(e){return Nu.lexicons.validate("app.bsky.embed.external#view",e)}function H1(e){return(0,yn.isObj)(e)&&(0,yn.hasProp)(e,"$type")&&"app.bsky.embed.external#viewExternal"===e.$type}function Z1(e){return Nu.lexicons.validate("app.bsky.embed.external#viewExternal",e)}Mt.isMain=F1,Mt.validateMain=$1,Mt.isExternal=G1,Mt.validateExternal=q1,Mt.isView=z1,Mt.validateView=X1,Mt.isViewExternal=H1,Mt.validateViewExternal=Z1;var xt={};Object.defineProperty(xt,"__esModule",{value:!0}),xt.validateViewImage=xt.isViewImage=xt.validateView=xt.isView=xt.validateAspectRatio=xt.isAspectRatio=xt.validateImage=xt.isImage=xt.validateMain=xt.isMain=void 0;const yi=_e,Ml=Le;function W1(e){return(0,yi.isObj)(e)&&(0,yi.hasProp)(e,"$type")&&("app.bsky.embed.images#main"===e.$type||"app.bsky.embed.images"===e.$type)}function Y1(e){return Ml.lexicons.validate("app.bsky.embed.images#main",e)}function J1(e){return(0,yi.isObj)(e)&&(0,yi.hasProp)(e,"$type")&&"app.bsky.embed.images#image"===e.$type}function Q1(e){return Ml.lexicons.validate("app.bsky.embed.images#image",e)}function eL(e){return(0,yi.isObj)(e)&&(0,yi.hasProp)(e,"$type")&&"app.bsky.embed.images#aspectRatio"===e.$type}function tL(e){return Ml.lexicons.validate("app.bsky.embed.images#aspectRatio",e)}function rL(e){return(0,yi.isObj)(e)&&(0,yi.hasProp)(e,"$type")&&"app.bsky.embed.images#view"===e.$type}function iL(e){return Ml.lexicons.validate("app.bsky.embed.images#view",e)}function nL(e){return(0,yi.isObj)(e)&&(0,yi.hasProp)(e,"$type")&&"app.bsky.embed.images#viewImage"===e.$type}function sL(e){return Ml.lexicons.validate("app.bsky.embed.images#viewImage",e)}xt.isMain=W1,xt.validateMain=Y1,xt.isImage=J1,xt.validateImage=Q1,xt.isAspectRatio=eL,xt.validateAspectRatio=tL,xt.isView=rL,xt.validateView=iL,xt.isViewImage=nL,xt.validateViewImage=sL;var Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.validateViewBlocked=Et.isViewBlocked=Et.validateViewNotFound=Et.isViewNotFound=Et.validateViewRecord=Et.isViewRecord=Et.validateView=Et.isView=Et.validateMain=Et.isMain=void 0;const bi=_e,Nl=Le;function aL(e){return(0,bi.isObj)(e)&&(0,bi.hasProp)(e,"$type")&&("app.bsky.embed.record#main"===e.$type||"app.bsky.embed.record"===e.$type)}function oL(e){return Nl.lexicons.validate("app.bsky.embed.record#main",e)}function lL(e){return(0,bi.isObj)(e)&&(0,bi.hasProp)(e,"$type")&&"app.bsky.embed.record#view"===e.$type}function uL(e){return Nl.lexicons.validate("app.bsky.embed.record#view",e)}function cL(e){return(0,bi.isObj)(e)&&(0,bi.hasProp)(e,"$type")&&"app.bsky.embed.record#viewRecord"===e.$type}function dL(e){return Nl.lexicons.validate("app.bsky.embed.record#viewRecord",e)}function fL(e){return(0,bi.isObj)(e)&&(0,bi.hasProp)(e,"$type")&&"app.bsky.embed.record#viewNotFound"===e.$type}function pL(e){return Nl.lexicons.validate("app.bsky.embed.record#viewNotFound",e)}function hL(e){return(0,bi.isObj)(e)&&(0,bi.hasProp)(e,"$type")&&"app.bsky.embed.record#viewBlocked"===e.$type}function mL(e){return Nl.lexicons.validate("app.bsky.embed.record#viewBlocked",e)}Et.isMain=aL,Et.validateMain=oL,Et.isView=lL,Et.validateView=uL,Et.isViewRecord=cL,Et.validateViewRecord=dL,Et.isViewNotFound=fL,Et.validateViewNotFound=pL,Et.isViewBlocked=hL,Et.validateViewBlocked=mL;var ai={};Object.defineProperty(ai,"__esModule",{value:!0}),ai.validateView=ai.isView=ai.validateMain=ai.isMain=void 0;const Tu=_e,z0=Le;function yL(e){return(0,Tu.isObj)(e)&&(0,Tu.hasProp)(e,"$type")&&("app.bsky.embed.recordWithMedia#main"===e.$type||"app.bsky.embed.recordWithMedia"===e.$type)}function bL(e){return z0.lexicons.validate("app.bsky.embed.recordWithMedia#main",e)}function gL(e){return(0,Tu.isObj)(e)&&(0,Tu.hasProp)(e,"$type")&&"app.bsky.embed.recordWithMedia#view"===e.$type}function xL(e){return z0.lexicons.validate("app.bsky.embed.recordWithMedia#view",e)}ai.isMain=yL,ai.validateMain=bL,ai.isView=gL,ai.validateView=xL;var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.INTERACTIONSHARE=ce.INTERACTIONQUOTE=ce.INTERACTIONREPLY=ce.INTERACTIONREPOST=ce.INTERACTIONLIKE=ce.INTERACTIONSEEN=ce.CLICKTHROUGHEMBED=ce.CLICKTHROUGHREPOSTER=ce.CLICKTHROUGHAUTHOR=ce.CLICKTHROUGHITEM=ce.REQUESTMORE=ce.REQUESTLESS=ce.validateInteraction=ce.isInteraction=ce.validateThreadgateView=ce.isThreadgateView=ce.validateSkeletonReasonRepost=ce.isSkeletonReasonRepost=ce.validateSkeletonFeedPost=ce.isSkeletonFeedPost=ce.validateGeneratorViewerState=ce.isGeneratorViewerState=ce.validateGeneratorView=ce.isGeneratorView=ce.validateBlockedAuthor=ce.isBlockedAuthor=ce.validateBlockedPost=ce.isBlockedPost=ce.validateNotFoundPost=ce.isNotFoundPost=ce.validateThreadViewPost=ce.isThreadViewPost=ce.validateReasonRepost=ce.isReasonRepost=ce.validateReplyRef=ce.isReplyRef=ce.validateFeedViewPost=ce.isFeedViewPost=ce.validateViewerState=ce.isViewerState=ce.validatePostView=ce.isPostView=void 0;const Qe=_e,cr=Le;function EL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#postView"===e.$type}function vL(e){return cr.lexicons.validate("app.bsky.feed.defs#postView",e)}function RL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#viewerState"===e.$type}function AL(e){return cr.lexicons.validate("app.bsky.feed.defs#viewerState",e)}function _L(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#feedViewPost"===e.$type}function wL(e){return cr.lexicons.validate("app.bsky.feed.defs#feedViewPost",e)}function TL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#replyRef"===e.$type}function SL(e){return cr.lexicons.validate("app.bsky.feed.defs#replyRef",e)}function CL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#reasonRepost"===e.$type}function LL(e){return cr.lexicons.validate("app.bsky.feed.defs#reasonRepost",e)}function kL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#threadViewPost"===e.$type}function DL(e){return cr.lexicons.validate("app.bsky.feed.defs#threadViewPost",e)}function PL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#notFoundPost"===e.$type}function BL(e){return cr.lexicons.validate("app.bsky.feed.defs#notFoundPost",e)}function IL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#blockedPost"===e.$type}function UL(e){return cr.lexicons.validate("app.bsky.feed.defs#blockedPost",e)}function OL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#blockedAuthor"===e.$type}function KL(e){return cr.lexicons.validate("app.bsky.feed.defs#blockedAuthor",e)}function ML(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#generatorView"===e.$type}function NL(e){return cr.lexicons.validate("app.bsky.feed.defs#generatorView",e)}function VL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#generatorViewerState"===e.$type}function jL(e){return cr.lexicons.validate("app.bsky.feed.defs#generatorViewerState",e)}function FL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#skeletonFeedPost"===e.$type}function $L(e){return cr.lexicons.validate("app.bsky.feed.defs#skeletonFeedPost",e)}function GL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#skeletonReasonRepost"===e.$type}function qL(e){return cr.lexicons.validate("app.bsky.feed.defs#skeletonReasonRepost",e)}function zL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#threadgateView"===e.$type}function XL(e){return cr.lexicons.validate("app.bsky.feed.defs#threadgateView",e)}function HL(e){return(0,Qe.isObj)(e)&&(0,Qe.hasProp)(e,"$type")&&"app.bsky.feed.defs#interaction"===e.$type}function ZL(e){return cr.lexicons.validate("app.bsky.feed.defs#interaction",e)}ce.isPostView=EL,ce.validatePostView=vL,ce.isViewerState=RL,ce.validateViewerState=AL,ce.isFeedViewPost=_L,ce.validateFeedViewPost=wL,ce.isReplyRef=TL,ce.validateReplyRef=SL,ce.isReasonRepost=CL,ce.validateReasonRepost=LL,ce.isThreadViewPost=kL,ce.validateThreadViewPost=DL,ce.isNotFoundPost=PL,ce.validateNotFoundPost=BL,ce.isBlockedPost=IL,ce.validateBlockedPost=UL,ce.isBlockedAuthor=OL,ce.validateBlockedAuthor=KL,ce.isGeneratorView=ML,ce.validateGeneratorView=NL,ce.isGeneratorViewerState=VL,ce.validateGeneratorViewerState=jL,ce.isSkeletonFeedPost=FL,ce.validateSkeletonFeedPost=$L,ce.isSkeletonReasonRepost=GL,ce.validateSkeletonReasonRepost=qL,ce.isThreadgateView=zL,ce.validateThreadgateView=XL,ce.isInteraction=HL,ce.validateInteraction=ZL,ce.REQUESTLESS="app.bsky.feed.defs#requestLess",ce.REQUESTMORE="app.bsky.feed.defs#requestMore",ce.CLICKTHROUGHITEM="app.bsky.feed.defs#clickthroughItem",ce.CLICKTHROUGHAUTHOR="app.bsky.feed.defs#clickthroughAuthor",ce.CLICKTHROUGHREPOSTER="app.bsky.feed.defs#clickthroughReposter",ce.CLICKTHROUGHEMBED="app.bsky.feed.defs#clickthroughEmbed",ce.INTERACTIONSEEN="app.bsky.feed.defs#interactionSeen",ce.INTERACTIONLIKE="app.bsky.feed.defs#interactionLike",ce.INTERACTIONREPOST="app.bsky.feed.defs#interactionRepost",ce.INTERACTIONREPLY="app.bsky.feed.defs#interactionReply",ce.INTERACTIONQUOTE="app.bsky.feed.defs#interactionQuote",ce.INTERACTIONSHARE="app.bsky.feed.defs#interactionShare";var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.validateRecord=Ls.isRecord=void 0;const ef=_e,WL=Le;function YL(e){return(0,ef.isObj)(e)&&(0,ef.hasProp)(e,"$type")&&("app.bsky.feed.generator#main"===e.$type||"app.bsky.feed.generator"===e.$type)}function JL(e){return WL.lexicons.validate("app.bsky.feed.generator#main",e)}Ls.isRecord=YL,Ls.validateRecord=JL;var ks={};Object.defineProperty(ks,"__esModule",{value:!0}),ks.validateRecord=ks.isRecord=void 0;const tf=_e,QL=Le;function ek(e){return(0,tf.isObj)(e)&&(0,tf.hasProp)(e,"$type")&&("app.bsky.feed.like#main"===e.$type||"app.bsky.feed.like"===e.$type)}function tk(e){return QL.lexicons.validate("app.bsky.feed.like#main",e)}ks.isRecord=ek,ks.validateRecord=tk;var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.validateTextSlice=Nt.isTextSlice=Nt.validateEntity=Nt.isEntity=Nt.validateReplyRef=Nt.isReplyRef=Nt.validateRecord=Nt.isRecord=void 0;const bn=_e,Vu=Le;function rk(e){return(0,bn.isObj)(e)&&(0,bn.hasProp)(e,"$type")&&("app.bsky.feed.post#main"===e.$type||"app.bsky.feed.post"===e.$type)}function ik(e){return Vu.lexicons.validate("app.bsky.feed.post#main",e)}function nk(e){return(0,bn.isObj)(e)&&(0,bn.hasProp)(e,"$type")&&"app.bsky.feed.post#replyRef"===e.$type}function sk(e){return Vu.lexicons.validate("app.bsky.feed.post#replyRef",e)}function ak(e){return(0,bn.isObj)(e)&&(0,bn.hasProp)(e,"$type")&&"app.bsky.feed.post#entity"===e.$type}function ok(e){return Vu.lexicons.validate("app.bsky.feed.post#entity",e)}function lk(e){return(0,bn.isObj)(e)&&(0,bn.hasProp)(e,"$type")&&"app.bsky.feed.post#textSlice"===e.$type}function uk(e){return Vu.lexicons.validate("app.bsky.feed.post#textSlice",e)}Nt.isRecord=rk,Nt.validateRecord=ik,Nt.isReplyRef=nk,Nt.validateReplyRef=sk,Nt.isEntity=ak,Nt.validateEntity=ok,Nt.isTextSlice=lk,Nt.validateTextSlice=uk;var Ds={};Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.validateRecord=Ds.isRecord=void 0;const rf=_e,ck=Le;function dk(e){return(0,rf.isObj)(e)&&(0,rf.hasProp)(e,"$type")&&("app.bsky.feed.repost#main"===e.$type||"app.bsky.feed.repost"===e.$type)}function fk(e){return ck.lexicons.validate("app.bsky.feed.repost#main",e)}Ds.isRecord=dk,Ds.validateRecord=fk;var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.validateListRule=Vt.isListRule=Vt.validateFollowingRule=Vt.isFollowingRule=Vt.validateMentionRule=Vt.isMentionRule=Vt.validateRecord=Vt.isRecord=void 0;const gn=_e,ju=Le;function pk(e){return(0,gn.isObj)(e)&&(0,gn.hasProp)(e,"$type")&&("app.bsky.feed.threadgate#main"===e.$type||"app.bsky.feed.threadgate"===e.$type)}function hk(e){return ju.lexicons.validate("app.bsky.feed.threadgate#main",e)}function mk(e){return(0,gn.isObj)(e)&&(0,gn.hasProp)(e,"$type")&&"app.bsky.feed.threadgate#mentionRule"===e.$type}function yk(e){return ju.lexicons.validate("app.bsky.feed.threadgate#mentionRule",e)}function bk(e){return(0,gn.isObj)(e)&&(0,gn.hasProp)(e,"$type")&&"app.bsky.feed.threadgate#followingRule"===e.$type}function gk(e){return ju.lexicons.validate("app.bsky.feed.threadgate#followingRule",e)}function xk(e){return(0,gn.isObj)(e)&&(0,gn.hasProp)(e,"$type")&&"app.bsky.feed.threadgate#listRule"===e.$type}function Ek(e){return ju.lexicons.validate("app.bsky.feed.threadgate#listRule",e)}Vt.isRecord=pk,Vt.validateRecord=hk,Vt.isMentionRule=mk,Vt.validateMentionRule=yk,Vt.isFollowingRule=bk,Vt.validateFollowingRule=gk,Vt.isListRule=xk,Vt.validateListRule=Ek;var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.validateRecord=Ps.isRecord=void 0;const nf=_e,vk=Le;function Rk(e){return(0,nf.isObj)(e)&&(0,nf.hasProp)(e,"$type")&&("app.bsky.graph.block#main"===e.$type||"app.bsky.graph.block"===e.$type)}function Ak(e){return vk.lexicons.validate("app.bsky.graph.block#main",e)}Ps.isRecord=Rk,Ps.validateRecord=Ak;var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.validateRelationship=Ve.isRelationship=Ve.validateNotFoundActor=Ve.isNotFoundActor=Ve.validateListViewerState=Ve.isListViewerState=Ve.REFERENCELIST=Ve.CURATELIST=Ve.MODLIST=Ve.validateStarterPackViewBasic=Ve.isStarterPackViewBasic=Ve.validateStarterPackView=Ve.isStarterPackView=Ve.validateListItemView=Ve.isListItemView=Ve.validateListView=Ve.isListView=Ve.validateListViewBasic=Ve.isListViewBasic=void 0;const tr=_e,Tn=Le;function _k(e){return(0,tr.isObj)(e)&&(0,tr.hasProp)(e,"$type")&&"app.bsky.graph.defs#listViewBasic"===e.$type}function wk(e){return Tn.lexicons.validate("app.bsky.graph.defs#listViewBasic",e)}function Tk(e){return(0,tr.isObj)(e)&&(0,tr.hasProp)(e,"$type")&&"app.bsky.graph.defs#listView"===e.$type}function Sk(e){return Tn.lexicons.validate("app.bsky.graph.defs#listView",e)}function Ck(e){return(0,tr.isObj)(e)&&(0,tr.hasProp)(e,"$type")&&"app.bsky.graph.defs#listItemView"===e.$type}function Lk(e){return Tn.lexicons.validate("app.bsky.graph.defs#listItemView",e)}function kk(e){return(0,tr.isObj)(e)&&(0,tr.hasProp)(e,"$type")&&"app.bsky.graph.defs#starterPackView"===e.$type}function Dk(e){return Tn.lexicons.validate("app.bsky.graph.defs#starterPackView",e)}function Pk(e){return(0,tr.isObj)(e)&&(0,tr.hasProp)(e,"$type")&&"app.bsky.graph.defs#starterPackViewBasic"===e.$type}function Bk(e){return Tn.lexicons.validate("app.bsky.graph.defs#starterPackViewBasic",e)}function Ik(e){return(0,tr.isObj)(e)&&(0,tr.hasProp)(e,"$type")&&"app.bsky.graph.defs#listViewerState"===e.$type}function Uk(e){return Tn.lexicons.validate("app.bsky.graph.defs#listViewerState",e)}function Ok(e){return(0,tr.isObj)(e)&&(0,tr.hasProp)(e,"$type")&&"app.bsky.graph.defs#notFoundActor"===e.$type}function Kk(e){return Tn.lexicons.validate("app.bsky.graph.defs#notFoundActor",e)}function Mk(e){return(0,tr.isObj)(e)&&(0,tr.hasProp)(e,"$type")&&"app.bsky.graph.defs#relationship"===e.$type}function Nk(e){return Tn.lexicons.validate("app.bsky.graph.defs#relationship",e)}Ve.isListViewBasic=_k,Ve.validateListViewBasic=wk,Ve.isListView=Tk,Ve.validateListView=Sk,Ve.isListItemView=Ck,Ve.validateListItemView=Lk,Ve.isStarterPackView=kk,Ve.validateStarterPackView=Dk,Ve.isStarterPackViewBasic=Pk,Ve.validateStarterPackViewBasic=Bk,Ve.MODLIST="app.bsky.graph.defs#modlist",Ve.CURATELIST="app.bsky.graph.defs#curatelist",Ve.REFERENCELIST="app.bsky.graph.defs#referencelist",Ve.isListViewerState=Ik,Ve.validateListViewerState=Uk,Ve.isNotFoundActor=Ok,Ve.validateNotFoundActor=Kk,Ve.isRelationship=Mk,Ve.validateRelationship=Nk;var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.validateRecord=Bs.isRecord=void 0;const sf=_e,Vk=Le;function jk(e){return(0,sf.isObj)(e)&&(0,sf.hasProp)(e,"$type")&&("app.bsky.graph.follow#main"===e.$type||"app.bsky.graph.follow"===e.$type)}function Fk(e){return Vk.lexicons.validate("app.bsky.graph.follow#main",e)}Bs.isRecord=jk,Bs.validateRecord=Fk;var Is={};Object.defineProperty(Is,"__esModule",{value:!0}),Is.validateRecord=Is.isRecord=void 0;const af=_e,$k=Le;function Gk(e){return(0,af.isObj)(e)&&(0,af.hasProp)(e,"$type")&&("app.bsky.graph.list#main"===e.$type||"app.bsky.graph.list"===e.$type)}function qk(e){return $k.lexicons.validate("app.bsky.graph.list#main",e)}Is.isRecord=Gk,Is.validateRecord=qk;var Us={};Object.defineProperty(Us,"__esModule",{value:!0}),Us.validateRecord=Us.isRecord=void 0;const of=_e,zk=Le;function Xk(e){return(0,of.isObj)(e)&&(0,of.hasProp)(e,"$type")&&("app.bsky.graph.listblock#main"===e.$type||"app.bsky.graph.listblock"===e.$type)}function Hk(e){return zk.lexicons.validate("app.bsky.graph.listblock#main",e)}Us.isRecord=Xk,Us.validateRecord=Hk;var Os={};Object.defineProperty(Os,"__esModule",{value:!0}),Os.validateRecord=Os.isRecord=void 0;const lf=_e,Zk=Le;function Wk(e){return(0,lf.isObj)(e)&&(0,lf.hasProp)(e,"$type")&&("app.bsky.graph.listitem#main"===e.$type||"app.bsky.graph.listitem"===e.$type)}function Yk(e){return Zk.lexicons.validate("app.bsky.graph.listitem#main",e)}Os.isRecord=Wk,Os.validateRecord=Yk;var oi={};Object.defineProperty(oi,"__esModule",{value:!0}),oi.validateFeedItem=oi.isFeedItem=oi.validateRecord=oi.isRecord=void 0;const Su=_e,X0=Le;function Jk(e){return(0,Su.isObj)(e)&&(0,Su.hasProp)(e,"$type")&&("app.bsky.graph.starterpack#main"===e.$type||"app.bsky.graph.starterpack"===e.$type)}function Qk(e){return X0.lexicons.validate("app.bsky.graph.starterpack#main",e)}function eD(e){return(0,Su.isObj)(e)&&(0,Su.hasProp)(e,"$type")&&"app.bsky.graph.starterpack#feedItem"===e.$type}function tD(e){return X0.lexicons.validate("app.bsky.graph.starterpack#feedItem",e)}oi.isRecord=Jk,oi.validateRecord=Qk,oi.isFeedItem=eD,oi.validateFeedItem=tD;var jt={};Object.defineProperty(jt,"__esModule",{value:!0}),jt.validateLabelerPolicies=jt.isLabelerPolicies=jt.validateLabelerViewerState=jt.isLabelerViewerState=jt.validateLabelerViewDetailed=jt.isLabelerViewDetailed=jt.validateLabelerView=jt.isLabelerView=void 0;const xn=_e,Fu=Le;function rD(e){return(0,xn.isObj)(e)&&(0,xn.hasProp)(e,"$type")&&"app.bsky.labeler.defs#labelerView"===e.$type}function iD(e){return Fu.lexicons.validate("app.bsky.labeler.defs#labelerView",e)}function nD(e){return(0,xn.isObj)(e)&&(0,xn.hasProp)(e,"$type")&&"app.bsky.labeler.defs#labelerViewDetailed"===e.$type}function sD(e){return Fu.lexicons.validate("app.bsky.labeler.defs#labelerViewDetailed",e)}function aD(e){return(0,xn.isObj)(e)&&(0,xn.hasProp)(e,"$type")&&"app.bsky.labeler.defs#labelerViewerState"===e.$type}function oD(e){return Fu.lexicons.validate("app.bsky.labeler.defs#labelerViewerState",e)}function lD(e){return(0,xn.isObj)(e)&&(0,xn.hasProp)(e,"$type")&&"app.bsky.labeler.defs#labelerPolicies"===e.$type}function uD(e){return Fu.lexicons.validate("app.bsky.labeler.defs#labelerPolicies",e)}jt.isLabelerView=rD,jt.validateLabelerView=iD,jt.isLabelerViewDetailed=nD,jt.validateLabelerViewDetailed=sD,jt.isLabelerViewerState=aD,jt.validateLabelerViewerState=oD,jt.isLabelerPolicies=lD,jt.validateLabelerPolicies=uD;var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.validateRecord=Ks.isRecord=void 0;const uf=_e,cD=Le;function dD(e){return(0,uf.isObj)(e)&&(0,uf.hasProp)(e,"$type")&&("app.bsky.labeler.service#main"===e.$type||"app.bsky.labeler.service"===e.$type)}function fD(e){return cD.lexicons.validate("app.bsky.labeler.service#main",e)}Ks.isRecord=dD,Ks.validateRecord=fD;var vt={};Object.defineProperty(vt,"__esModule",{value:!0}),vt.validateByteSlice=vt.isByteSlice=vt.validateTag=vt.isTag=vt.validateLink=vt.isLink=vt.validateMention=vt.isMention=vt.validateMain=vt.isMain=void 0;const gi=_e,Vl=Le;function pD(e){return(0,gi.isObj)(e)&&(0,gi.hasProp)(e,"$type")&&("app.bsky.richtext.facet#main"===e.$type||"app.bsky.richtext.facet"===e.$type)}function hD(e){return Vl.lexicons.validate("app.bsky.richtext.facet#main",e)}function mD(e){return(0,gi.isObj)(e)&&(0,gi.hasProp)(e,"$type")&&"app.bsky.richtext.facet#mention"===e.$type}function yD(e){return Vl.lexicons.validate("app.bsky.richtext.facet#mention",e)}function bD(e){return(0,gi.isObj)(e)&&(0,gi.hasProp)(e,"$type")&&"app.bsky.richtext.facet#link"===e.$type}function gD(e){return Vl.lexicons.validate("app.bsky.richtext.facet#link",e)}function xD(e){return(0,gi.isObj)(e)&&(0,gi.hasProp)(e,"$type")&&"app.bsky.richtext.facet#tag"===e.$type}function ED(e){return Vl.lexicons.validate("app.bsky.richtext.facet#tag",e)}function vD(e){return(0,gi.isObj)(e)&&(0,gi.hasProp)(e,"$type")&&"app.bsky.richtext.facet#byteSlice"===e.$type}function RD(e){return Vl.lexicons.validate("app.bsky.richtext.facet#byteSlice",e)}vt.isMain=pD,vt.validateMain=hD,vt.isMention=mD,vt.validateMention=yD,vt.isLink=bD,vt.validateLink=gD,vt.isTag=xD,vt.validateTag=ED,vt.isByteSlice=vD,vt.validateByteSlice=RD;var li={};Object.defineProperty(li,"__esModule",{value:!0}),li.validateSkeletonSearchActor=li.isSkeletonSearchActor=li.validateSkeletonSearchPost=li.isSkeletonSearchPost=void 0;const Cu=_e,H0=Le;function AD(e){return(0,Cu.isObj)(e)&&(0,Cu.hasProp)(e,"$type")&&"app.bsky.unspecced.defs#skeletonSearchPost"===e.$type}function _D(e){return H0.lexicons.validate("app.bsky.unspecced.defs#skeletonSearchPost",e)}function wD(e){return(0,Cu.isObj)(e)&&(0,Cu.hasProp)(e,"$type")&&"app.bsky.unspecced.defs#skeletonSearchActor"===e.$type}function TD(e){return H0.lexicons.validate("app.bsky.unspecced.defs#skeletonSearchActor",e)}li.isSkeletonSearchPost=AD,li.validateSkeletonSearchPost=_D,li.isSkeletonSearchActor=wD,li.validateSkeletonSearchActor=TD;var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.validateRecord=Ms.isRecord=void 0;const cf=_e,SD=Le;function CD(e){return(0,cf.isObj)(e)&&(0,cf.hasProp)(e,"$type")&&("chat.bsky.actor.declaration#main"===e.$type||"chat.bsky.actor.declaration"===e.$type)}function LD(e){return SD.lexicons.validate("chat.bsky.actor.declaration#main",e)}Ms.isRecord=CD,Ms.validateRecord=LD;var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.validateProfileViewBasic=Ns.isProfileViewBasic=void 0;const df=_e,kD=Le;function DD(e){return(0,df.isObj)(e)&&(0,df.hasProp)(e,"$type")&&"chat.bsky.actor.defs#profileViewBasic"===e.$type}function PD(e){return kD.lexicons.validate("chat.bsky.actor.defs#profileViewBasic",e)}Ns.isProfileViewBasic=DD,Ns.validateProfileViewBasic=PD;var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.validateLogDeleteMessage=Ke.isLogDeleteMessage=Ke.validateLogCreateMessage=Ke.isLogCreateMessage=Ke.validateLogLeaveConvo=Ke.isLogLeaveConvo=Ke.validateLogBeginConvo=Ke.isLogBeginConvo=Ke.validateConvoView=Ke.isConvoView=Ke.validateMessageViewSender=Ke.isMessageViewSender=Ke.validateDeletedMessageView=Ke.isDeletedMessageView=Ke.validateMessageView=Ke.isMessageView=Ke.validateMessageInput=Ke.isMessageInput=Ke.validateMessageRef=Ke.isMessageRef=void 0;const St=_e,Ai=Le;function BD(e){return(0,St.isObj)(e)&&(0,St.hasProp)(e,"$type")&&"chat.bsky.convo.defs#messageRef"===e.$type}function ID(e){return Ai.lexicons.validate("chat.bsky.convo.defs#messageRef",e)}function UD(e){return(0,St.isObj)(e)&&(0,St.hasProp)(e,"$type")&&"chat.bsky.convo.defs#messageInput"===e.$type}function OD(e){return Ai.lexicons.validate("chat.bsky.convo.defs#messageInput",e)}function KD(e){return(0,St.isObj)(e)&&(0,St.hasProp)(e,"$type")&&"chat.bsky.convo.defs#messageView"===e.$type}function MD(e){return Ai.lexicons.validate("chat.bsky.convo.defs#messageView",e)}function ND(e){return(0,St.isObj)(e)&&(0,St.hasProp)(e,"$type")&&"chat.bsky.convo.defs#deletedMessageView"===e.$type}function VD(e){return Ai.lexicons.validate("chat.bsky.convo.defs#deletedMessageView",e)}function jD(e){return(0,St.isObj)(e)&&(0,St.hasProp)(e,"$type")&&"chat.bsky.convo.defs#messageViewSender"===e.$type}function FD(e){return Ai.lexicons.validate("chat.bsky.convo.defs#messageViewSender",e)}function $D(e){return(0,St.isObj)(e)&&(0,St.hasProp)(e,"$type")&&"chat.bsky.convo.defs#convoView"===e.$type}function GD(e){return Ai.lexicons.validate("chat.bsky.convo.defs#convoView",e)}function qD(e){return(0,St.isObj)(e)&&(0,St.hasProp)(e,"$type")&&"chat.bsky.convo.defs#logBeginConvo"===e.$type}function zD(e){return Ai.lexicons.validate("chat.bsky.convo.defs#logBeginConvo",e)}function XD(e){return(0,St.isObj)(e)&&(0,St.hasProp)(e,"$type")&&"chat.bsky.convo.defs#logLeaveConvo"===e.$type}function HD(e){return Ai.lexicons.validate("chat.bsky.convo.defs#logLeaveConvo",e)}function ZD(e){return(0,St.isObj)(e)&&(0,St.hasProp)(e,"$type")&&"chat.bsky.convo.defs#logCreateMessage"===e.$type}function WD(e){return Ai.lexicons.validate("chat.bsky.convo.defs#logCreateMessage",e)}function YD(e){return(0,St.isObj)(e)&&(0,St.hasProp)(e,"$type")&&"chat.bsky.convo.defs#logDeleteMessage"===e.$type}function JD(e){return Ai.lexicons.validate("chat.bsky.convo.defs#logDeleteMessage",e)}Ke.isMessageRef=BD,Ke.validateMessageRef=ID,Ke.isMessageInput=UD,Ke.validateMessageInput=OD,Ke.isMessageView=KD,Ke.validateMessageView=MD,Ke.isDeletedMessageView=ND,Ke.validateDeletedMessageView=VD,Ke.isMessageViewSender=jD,Ke.validateMessageViewSender=FD,Ke.isConvoView=$D,Ke.validateConvoView=GD,Ke.isLogBeginConvo=qD,Ke.validateLogBeginConvo=zD,Ke.isLogLeaveConvo=XD,Ke.validateLogLeaveConvo=HD,Ke.isLogCreateMessage=ZD,Ke.validateLogCreateMessage=WD,Ke.isLogDeleteMessage=YD,Ke.validateLogDeleteMessage=JD;var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.validateTemplateView=Vs.isTemplateView=void 0;const ff=_e,QD=Le;function eP(e){return(0,ff.isObj)(e)&&(0,ff.hasProp)(e,"$type")&&"tools.ozone.communication.defs#templateView"===e.$type}function tP(e){return QD.lexicons.validate("tools.ozone.communication.defs#templateView",e)}Vs.isTemplateView=eP,Vs.validateTemplateView=tP;var W={};Object.defineProperty(W,"__esModule",{value:!0}),W.validateRecordViewDetail=W.isRecordViewDetail=W.validateRecordView=W.isRecordView=W.validateRepoViewNotFound=W.isRepoViewNotFound=W.validateRepoViewDetail=W.isRepoViewDetail=W.validateRepoView=W.isRepoView=W.validateModEventTag=W.isModEventTag=W.validateModEventDivert=W.isModEventDivert=W.validateModEventEmail=W.isModEventEmail=W.validateModEventUnmuteReporter=W.isModEventUnmuteReporter=W.validateModEventMuteReporter=W.isModEventMuteReporter=W.validateModEventUnmute=W.isModEventUnmute=W.validateModEventMute=W.isModEventMute=W.validateModEventEscalate=W.isModEventEscalate=W.validateModEventAcknowledge=W.isModEventAcknowledge=W.validateModEventLabel=W.isModEventLabel=W.validateModEventReport=W.isModEventReport=W.validateModEventComment=W.isModEventComment=W.validateModEventResolveAppeal=W.isModEventResolveAppeal=W.validateModEventReverseTakedown=W.isModEventReverseTakedown=W.validateModEventTakedown=W.isModEventTakedown=W.REVIEWNONE=W.REVIEWCLOSED=W.REVIEWESCALATED=W.REVIEWOPEN=W.validateSubjectStatusView=W.isSubjectStatusView=W.validateModEventViewDetail=W.isModEventViewDetail=W.validateModEventView=W.isModEventView=void 0,W.validateVideoDetails=W.isVideoDetails=W.validateImageDetails=W.isImageDetails=W.validateBlobView=W.isBlobView=W.validateModerationDetail=W.isModerationDetail=W.validateModeration=W.isModeration=W.validateRecordViewNotFound=W.isRecordViewNotFound=void 0;const Re=_e,et=Le;function rP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventView"===e.$type}function iP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventView",e)}function nP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventViewDetail"===e.$type}function sP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventViewDetail",e)}function aP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#subjectStatusView"===e.$type}function oP(e){return et.lexicons.validate("tools.ozone.moderation.defs#subjectStatusView",e)}function lP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventTakedown"===e.$type}function uP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventTakedown",e)}function cP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventReverseTakedown"===e.$type}function dP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventReverseTakedown",e)}function fP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventResolveAppeal"===e.$type}function pP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventResolveAppeal",e)}function hP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventComment"===e.$type}function mP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventComment",e)}function yP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventReport"===e.$type}function bP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventReport",e)}function gP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventLabel"===e.$type}function xP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventLabel",e)}function EP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventAcknowledge"===e.$type}function vP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventAcknowledge",e)}function RP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventEscalate"===e.$type}function AP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventEscalate",e)}function _P(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventMute"===e.$type}function wP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventMute",e)}function TP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventUnmute"===e.$type}function SP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventUnmute",e)}function CP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventMuteReporter"===e.$type}function LP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventMuteReporter",e)}function kP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventUnmuteReporter"===e.$type}function DP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventUnmuteReporter",e)}function PP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventEmail"===e.$type}function BP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventEmail",e)}function IP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventDivert"===e.$type}function UP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventDivert",e)}function OP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#modEventTag"===e.$type}function KP(e){return et.lexicons.validate("tools.ozone.moderation.defs#modEventTag",e)}function MP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#repoView"===e.$type}function NP(e){return et.lexicons.validate("tools.ozone.moderation.defs#repoView",e)}function VP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#repoViewDetail"===e.$type}function jP(e){return et.lexicons.validate("tools.ozone.moderation.defs#repoViewDetail",e)}function FP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#repoViewNotFound"===e.$type}function $P(e){return et.lexicons.validate("tools.ozone.moderation.defs#repoViewNotFound",e)}function GP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#recordView"===e.$type}function qP(e){return et.lexicons.validate("tools.ozone.moderation.defs#recordView",e)}function zP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#recordViewDetail"===e.$type}function XP(e){return et.lexicons.validate("tools.ozone.moderation.defs#recordViewDetail",e)}function HP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#recordViewNotFound"===e.$type}function ZP(e){return et.lexicons.validate("tools.ozone.moderation.defs#recordViewNotFound",e)}function WP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#moderation"===e.$type}function YP(e){return et.lexicons.validate("tools.ozone.moderation.defs#moderation",e)}function JP(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#moderationDetail"===e.$type}function QP(e){return et.lexicons.validate("tools.ozone.moderation.defs#moderationDetail",e)}function eB(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#blobView"===e.$type}function tB(e){return et.lexicons.validate("tools.ozone.moderation.defs#blobView",e)}function rB(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#imageDetails"===e.$type}function iB(e){return et.lexicons.validate("tools.ozone.moderation.defs#imageDetails",e)}function nB(e){return(0,Re.isObj)(e)&&(0,Re.hasProp)(e,"$type")&&"tools.ozone.moderation.defs#videoDetails"===e.$type}function sB(e){return et.lexicons.validate("tools.ozone.moderation.defs#videoDetails",e)}W.isModEventView=rP,W.validateModEventView=iP,W.isModEventViewDetail=nP,W.validateModEventViewDetail=sP,W.isSubjectStatusView=aP,W.validateSubjectStatusView=oP,W.REVIEWOPEN="tools.ozone.moderation.defs#reviewOpen",W.REVIEWESCALATED="tools.ozone.moderation.defs#reviewEscalated",W.REVIEWCLOSED="tools.ozone.moderation.defs#reviewClosed",W.REVIEWNONE="tools.ozone.moderation.defs#reviewNone",W.isModEventTakedown=lP,W.validateModEventTakedown=uP,W.isModEventReverseTakedown=cP,W.validateModEventReverseTakedown=dP,W.isModEventResolveAppeal=fP,W.validateModEventResolveAppeal=pP,W.isModEventComment=hP,W.validateModEventComment=mP,W.isModEventReport=yP,W.validateModEventReport=bP,W.isModEventLabel=gP,W.validateModEventLabel=xP,W.isModEventAcknowledge=EP,W.validateModEventAcknowledge=vP,W.isModEventEscalate=RP,W.validateModEventEscalate=AP,W.isModEventMute=_P,W.validateModEventMute=wP,W.isModEventUnmute=TP,W.validateModEventUnmute=SP,W.isModEventMuteReporter=CP,W.validateModEventMuteReporter=LP,W.isModEventUnmuteReporter=kP,W.validateModEventUnmuteReporter=DP,W.isModEventEmail=PP,W.validateModEventEmail=BP,W.isModEventDivert=IP,W.validateModEventDivert=UP,W.isModEventTag=OP,W.validateModEventTag=KP,W.isRepoView=MP,W.validateRepoView=NP,W.isRepoViewDetail=VP,W.validateRepoViewDetail=jP,W.isRepoViewNotFound=FP,W.validateRepoViewNotFound=$P,W.isRecordView=GP,W.validateRecordView=qP,W.isRecordViewDetail=zP,W.validateRecordViewDetail=XP,W.isRecordViewNotFound=HP,W.validateRecordViewNotFound=ZP,W.isModeration=WP,W.validateModeration=YP,W.isModerationDetail=JP,W.validateModerationDetail=QP,W.isBlobView=eB,W.validateBlobView=tB,W.isImageDetails=rB,W.validateImageDetails=iB,W.isVideoDetails=nB,W.validateVideoDetails=sB;var Dr={};Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.ROLETRIAGE=Dr.ROLEMODERATOR=Dr.ROLEADMIN=Dr.validateMember=Dr.isMember=void 0;const pf=_e,aB=Le;function oB(e){return(0,pf.isObj)(e)&&(0,pf.hasProp)(e,"$type")&&"tools.ozone.team.defs#member"===e.$type}function lB(e){return aB.lexicons.validate("tools.ozone.team.defs#member",e)}Dr.isMember=oB,Dr.validateMember=lB,Dr.ROLEADMIN="tools.ozone.team.defs#roleAdmin",Dr.ROLEMODERATOR="tools.ozone.team.defs#roleModerator",Dr.ROLETRIAGE="tools.ozone.team.defs#roleTriage";var uB=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),cB=se&&se.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),_=se&&se.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&uB(t,e,r);return cB(t,e),t};Object.defineProperty(x,"__esModule",{value:!0}),x.ComAtprotoServerDescribeServer=x.ComAtprotoServerDeleteSession=x.ComAtprotoServerDeleteAccount=x.ComAtprotoServerDefs=x.ComAtprotoServerDeactivateAccount=x.ComAtprotoServerCreateSession=x.ComAtprotoServerCreateInviteCodes=x.ComAtprotoServerCreateInviteCode=x.ComAtprotoServerCreateAppPassword=x.ComAtprotoServerCreateAccount=x.ComAtprotoServerConfirmEmail=x.ComAtprotoServerCheckAccountStatus=x.ComAtprotoServerActivateAccount=x.ComAtprotoRepoUploadBlob=x.ComAtprotoRepoStrongRef=x.ComAtprotoRepoPutRecord=x.ComAtprotoRepoListRecords=x.ComAtprotoRepoListMissingBlobs=x.ComAtprotoRepoImportRepo=x.ComAtprotoRepoGetRecord=x.ComAtprotoRepoDescribeRepo=x.ComAtprotoRepoDeleteRecord=x.ComAtprotoRepoCreateRecord=x.ComAtprotoRepoApplyWrites=x.ComAtprotoModerationDefs=x.ComAtprotoModerationCreateReport=x.ComAtprotoLabelSubscribeLabels=x.ComAtprotoLabelQueryLabels=x.ComAtprotoLabelDefs=x.ComAtprotoIdentityUpdateHandle=x.ComAtprotoIdentitySubmitPlcOperation=x.ComAtprotoIdentitySignPlcOperation=x.ComAtprotoIdentityResolveHandle=x.ComAtprotoIdentityRequestPlcOperationSignature=x.ComAtprotoIdentityGetRecommendedDidCredentials=x.ComAtprotoAdminUpdateSubjectStatus=x.ComAtprotoAdminUpdateAccountPassword=x.ComAtprotoAdminUpdateAccountHandle=x.ComAtprotoAdminUpdateAccountEmail=x.ComAtprotoAdminSendEmail=x.ComAtprotoAdminSearchAccounts=x.ComAtprotoAdminGetSubjectStatus=x.ComAtprotoAdminGetInviteCodes=x.ComAtprotoAdminGetAccountInfos=x.ComAtprotoAdminGetAccountInfo=x.ComAtprotoAdminEnableAccountInvites=x.ComAtprotoAdminDisableInviteCodes=x.ComAtprotoAdminDisableAccountInvites=x.ComAtprotoAdminDeleteAccount=x.ComAtprotoAdminDefs=void 0,x.AppBskyFeedGetFeedGenerator=x.AppBskyFeedGetFeed=x.AppBskyFeedGetAuthorFeed=x.AppBskyFeedGetActorLikes=x.AppBskyFeedGetActorFeeds=x.AppBskyFeedGenerator=x.AppBskyFeedDescribeFeedGenerator=x.AppBskyFeedDefs=x.AppBskyEmbedRecordWithMedia=x.AppBskyEmbedRecord=x.AppBskyEmbedImages=x.AppBskyEmbedExternal=x.AppBskyActorSearchActorsTypeahead=x.AppBskyActorSearchActors=x.AppBskyActorPutPreferences=x.AppBskyActorProfile=x.AppBskyActorGetSuggestions=x.AppBskyActorGetProfiles=x.AppBskyActorGetProfile=x.AppBskyActorGetPreferences=x.AppBskyActorDefs=x.ComAtprotoTempRequestPhoneVerification=x.ComAtprotoTempFetchLabels=x.ComAtprotoTempCheckSignupQueue=x.ComAtprotoSyncSubscribeRepos=x.ComAtprotoSyncRequestCrawl=x.ComAtprotoSyncNotifyOfUpdate=x.ComAtprotoSyncListRepos=x.ComAtprotoSyncListBlobs=x.ComAtprotoSyncGetRepoStatus=x.ComAtprotoSyncGetRepo=x.ComAtprotoSyncGetRecord=x.ComAtprotoSyncGetLatestCommit=x.ComAtprotoSyncGetHead=x.ComAtprotoSyncGetCheckout=x.ComAtprotoSyncGetBlocks=x.ComAtprotoSyncGetBlob=x.ComAtprotoServerUpdateEmail=x.ComAtprotoServerRevokeAppPassword=x.ComAtprotoServerResetPassword=x.ComAtprotoServerReserveSigningKey=x.ComAtprotoServerRequestPasswordReset=x.ComAtprotoServerRequestEmailUpdate=x.ComAtprotoServerRequestEmailConfirmation=x.ComAtprotoServerRequestAccountDelete=x.ComAtprotoServerRefreshSession=x.ComAtprotoServerListAppPasswords=x.ComAtprotoServerGetSession=x.ComAtprotoServerGetServiceAuth=x.ComAtprotoServerGetAccountInviteCodes=void 0,x.AppBskyNotificationUpdateSeen=x.AppBskyNotificationRegisterPush=x.AppBskyNotificationPutPreferences=x.AppBskyNotificationListNotifications=x.AppBskyNotificationGetUnreadCount=x.AppBskyLabelerService=x.AppBskyLabelerGetServices=x.AppBskyLabelerDefs=x.AppBskyGraphUnmuteThread=x.AppBskyGraphUnmuteActorList=x.AppBskyGraphUnmuteActor=x.AppBskyGraphStarterpack=x.AppBskyGraphMuteThread=x.AppBskyGraphMuteActorList=x.AppBskyGraphMuteActor=x.AppBskyGraphListitem=x.AppBskyGraphListblock=x.AppBskyGraphList=x.AppBskyGraphGetSuggestedFollowsByActor=x.AppBskyGraphGetStarterPacks=x.AppBskyGraphGetStarterPack=x.AppBskyGraphGetRelationships=x.AppBskyGraphGetMutes=x.AppBskyGraphGetLists=x.AppBskyGraphGetListMutes=x.AppBskyGraphGetListBlocks=x.AppBskyGraphGetList=x.AppBskyGraphGetKnownFollowers=x.AppBskyGraphGetFollows=x.AppBskyGraphGetFollowers=x.AppBskyGraphGetBlocks=x.AppBskyGraphGetActorStarterPacks=x.AppBskyGraphFollow=x.AppBskyGraphDefs=x.AppBskyGraphBlock=x.AppBskyFeedThreadgate=x.AppBskyFeedSendInteractions=x.AppBskyFeedSearchPosts=x.AppBskyFeedRepost=x.AppBskyFeedPost=x.AppBskyFeedLike=x.AppBskyFeedGetTimeline=x.AppBskyFeedGetSuggestedFeeds=x.AppBskyFeedGetRepostedBy=x.AppBskyFeedGetPosts=x.AppBskyFeedGetPostThread=x.AppBskyFeedGetListFeed=x.AppBskyFeedGetLikes=x.AppBskyFeedGetFeedSkeleton=x.AppBskyFeedGetFeedGenerators=void 0,x.TOOLS_OZONE_MODERATION=x.APP_BSKY_GRAPH=x.APP_BSKY_FEED=x.COM_ATPROTO_MODERATION=x.ToolsOzoneTeamUpdateMember=x.ToolsOzoneTeamListMembers=x.ToolsOzoneTeamDeleteMember=x.ToolsOzoneTeamDefs=x.ToolsOzoneTeamAddMember=x.ToolsOzoneServerGetConfig=x.ToolsOzoneModerationSearchRepos=x.ToolsOzoneModerationQueryStatuses=x.ToolsOzoneModerationQueryEvents=x.ToolsOzoneModerationGetRepo=x.ToolsOzoneModerationGetRecord=x.ToolsOzoneModerationGetEvent=x.ToolsOzoneModerationEmitEvent=x.ToolsOzoneModerationDefs=x.ToolsOzoneCommunicationUpdateTemplate=x.ToolsOzoneCommunicationListTemplates=x.ToolsOzoneCommunicationDeleteTemplate=x.ToolsOzoneCommunicationDefs=x.ToolsOzoneCommunicationCreateTemplate=x.ChatBskyModerationUpdateActorAccess=x.ChatBskyModerationGetMessageContext=x.ChatBskyModerationGetActorMetadata=x.ChatBskyConvoUpdateRead=x.ChatBskyConvoUnmuteConvo=x.ChatBskyConvoSendMessageBatch=x.ChatBskyConvoSendMessage=x.ChatBskyConvoMuteConvo=x.ChatBskyConvoListConvos=x.ChatBskyConvoLeaveConvo=x.ChatBskyConvoGetMessages=x.ChatBskyConvoGetLog=x.ChatBskyConvoGetConvoForMembers=x.ChatBskyConvoGetConvo=x.ChatBskyConvoDeleteMessageForSelf=x.ChatBskyConvoDefs=x.ChatBskyActorExportAccountData=x.ChatBskyActorDeleteAccount=x.ChatBskyActorDefs=x.ChatBskyActorDeclaration=x.AppBskyUnspeccedSearchPostsSkeleton=x.AppBskyUnspeccedSearchActorsSkeleton=x.AppBskyUnspeccedGetTaggedSuggestions=x.AppBskyUnspeccedGetSuggestionsSkeleton=x.AppBskyUnspeccedGetPopularFeedGenerators=x.AppBskyUnspeccedDefs=x.AppBskyRichtextFacet=void 0,x.ToolsOzoneTeamNS=x.ToolsOzoneServerNS=x.ToolsOzoneModerationNS=x.ToolsOzoneCommunicationNS=x.ToolsOzoneNS=x.ToolsNS=x.ChatBskyModerationNS=x.ChatBskyConvoNS=x.DeclarationRecord=x.ChatBskyActorNS=x.ChatBskyNS=x.ChatNS=x.AppBskyUnspeccedNS=x.AppBskyRichtextNS=x.AppBskyNotificationNS=x.ServiceRecord=x.AppBskyLabelerNS=x.StarterpackRecord=x.ListitemRecord=x.ListblockRecord=x.ListRecord=x.FollowRecord=x.BlockRecord=x.AppBskyGraphNS=x.ThreadgateRecord=x.RepostRecord=x.PostRecord=x.LikeRecord=x.GeneratorRecord=x.AppBskyFeedNS=x.AppBskyEmbedNS=x.ProfileRecord=x.AppBskyActorNS=x.AppBskyNS=x.AppNS=x.ComAtprotoTempNS=x.ComAtprotoSyncNS=x.ComAtprotoServerNS=x.ComAtprotoRepoNS=x.ComAtprotoModerationNS=x.ComAtprotoLabelNS=x.ComAtprotoIdentityNS=x.ComAtprotoAdminNS=x.ComAtprotoNS=x.ComNS=x.AtpServiceClient=x.AtpBaseClient=x.TOOLS_OZONE_TEAM=void 0;const dB=G,fB=Le,pB=_(Da),hB=_(Pa),mB=_(Ba),yB=_(Ia),bB=_(Ua),gB=_(Oa),xB=_(Ka),EB=_(Ma),vB=_(Na),RB=_(Va),AB=_(ja),_B=_(Fa),wB=_($a),TB=_(Ga),SB=_(qa),CB=_(za),LB=_(Xa),kB=_(Ha),DB=_(Za),PB=_(Wa),BB=_(Ya),IB=_(Ja),UB=_(Dt),OB=_(Nn),KB=_(Vn),MB=_(Qa),NB=_(eo),VB=_(to),jB=_(Ni),FB=_(Vi),$B=_(jn),GB=_(ro),qB=_(io),zB=_(no),XB=_(Rr),HB=_(Pt),ZB=_(Vr),WB=_(ao),YB=_(ji),JB=_(Fi),QB=_(oo),eI=_($i),tI=_(lo),rI=_(Ar),iI=_(Fn),nI=_($n),sI=_(uo),aI=_(jr),oI=_(Gn),lI=_(co),uI=_(fo),cI=_(po),dI=_(ho),fI=_(mo),pI=_(Gi),hI=_(yo),mI=_(Fr),yI=_(ar),bI=_(or),gI=_(bo),xI=_(qn),EI=_(_r),vI=_(lr),RI=_(wr),AI=_(zn),_I=_(Tr),wI=_(qi),TI=_(vo),SI=_(Ro),CI=_(Ao),LI=_(_o),kI=_(wo),DI=_(To),PI=_(So),BI=_(Co),II=_(Lo),UI=_(ko),OI=_(Do),KI=_(Po),MI=_(Sr),NI=_(Bo),VI=_(zi),jI=_(Xi),FI=_(Xn),$I=_(Io),GI=_(Uo),qI=_(Hn),zI=_(Hi),XI=_(Zn),HI=_(Wn),ZI=_(Oo),WI=_(Ko),YI=_(Mo),JI=_(No),QI=_(Yn),eU=_(Vo),tU=_(jo),rU=_(Fo),iU=_($o),nU=_(Go),sU=_(qo),aU=_(zo),oU=_(Xo),lU=_(Ho),uU=_(Zo),cU=_(Wo),dU=_(Jn),fU=_(Yo),pU=_(Jo),hU=_(Qo),mU=_(el),yU=_(tl),bU=_(rl),gU=_(il),xU=_(nl),EU=_(sl),vU=_(al),RU=_(ol),AU=_(Zi),_U=_(ll),wU=_(ul),TU=_(cl),SU=_(dl),CU=_(fl),LU=_(Wi),kU=_(Qn),DU=_(es),PU=_(pl),BU=_(hl),IU=_(ml),UU=_(yl),OU=_(bl),KU=_(gl),MU=_(xl),NU=_(El),VU=_(vl),jU=_(Rl),FU=_(Al),$U=_(Yi),GU=_(_l),qU=_(wl),zU=_(Ji),XU=_(Tl),HU=_(Sl),ZU=_(Cl),WU=_(Ll),YU=_(kl),JU=_(Dl),QU=_(ts),eO=_(Pl),tO=_(rs),rO=_(is),iO=_(Bl),nO=_(Il),sO=_(Ul),aO=_(Cr),oO=_(ns),lO=_(Qi),uO=_(Ol),cO=_(ss);x.ComAtprotoAdminDefs=_(Kt),x.ComAtprotoAdminDeleteAccount=_(Da),x.ComAtprotoAdminDisableAccountInvites=_(Pa),x.ComAtprotoAdminDisableInviteCodes=_(Ba),x.ComAtprotoAdminEnableAccountInvites=_(Ia),x.ComAtprotoAdminGetAccountInfo=_(Ua),x.ComAtprotoAdminGetAccountInfos=_(Oa),x.ComAtprotoAdminGetInviteCodes=_(Ka),x.ComAtprotoAdminGetSubjectStatus=_(Ma),x.ComAtprotoAdminSearchAccounts=_(Na),x.ComAtprotoAdminSendEmail=_(Va),x.ComAtprotoAdminUpdateAccountEmail=_(ja),x.ComAtprotoAdminUpdateAccountHandle=_(Fa),x.ComAtprotoAdminUpdateAccountPassword=_($a),x.ComAtprotoAdminUpdateSubjectStatus=_(Ga),x.ComAtprotoIdentityGetRecommendedDidCredentials=_(qa),x.ComAtprotoIdentityRequestPlcOperationSignature=_(za),x.ComAtprotoIdentityResolveHandle=_(Xa),x.ComAtprotoIdentitySignPlcOperation=_(Ha),x.ComAtprotoIdentitySubmitPlcOperation=_(Za),x.ComAtprotoIdentityUpdateHandle=_(Wa),x.ComAtprotoLabelDefs=_(gt),x.ComAtprotoLabelQueryLabels=_(Ya),x.ComAtprotoLabelSubscribeLabels=_(ni),x.ComAtprotoModerationCreateReport=_(Ja),x.ComAtprotoModerationDefs=_(Jt),x.ComAtprotoRepoApplyWrites=_(Dt),x.ComAtprotoRepoCreateRecord=_(Nn),x.ComAtprotoRepoDeleteRecord=_(Vn),x.ComAtprotoRepoDescribeRepo=_(Qa),x.ComAtprotoRepoGetRecord=_(eo),x.ComAtprotoRepoImportRepo=_(to),x.ComAtprotoRepoListMissingBlobs=_(Ni),x.ComAtprotoRepoListRecords=_(Vi),x.ComAtprotoRepoPutRecord=_(jn),x.ComAtprotoRepoStrongRef=_(Ss),x.ComAtprotoRepoUploadBlob=_(ro),x.ComAtprotoServerActivateAccount=_(io),x.ComAtprotoServerCheckAccountStatus=_(no),x.ComAtprotoServerConfirmEmail=_(Rr),x.ComAtprotoServerCreateAccount=_(Pt),x.ComAtprotoServerCreateAppPassword=_(Vr),x.ComAtprotoServerCreateInviteCode=_(ao),x.ComAtprotoServerCreateInviteCodes=_(ji),x.ComAtprotoServerCreateSession=_(Fi),x.ComAtprotoServerDeactivateAccount=_(oo),x.ComAtprotoServerDefs=_(si),x.ComAtprotoServerDeleteAccount=_($i),x.ComAtprotoServerDeleteSession=_(lo),x.ComAtprotoServerDescribeServer=_(Ar),x.ComAtprotoServerGetAccountInviteCodes=_(Fn),x.ComAtprotoServerGetServiceAuth=_($n),x.ComAtprotoServerGetSession=_(uo),x.ComAtprotoServerListAppPasswords=_(jr),x.ComAtprotoServerRefreshSession=_(Gn),x.ComAtprotoServerRequestAccountDelete=_(co),x.ComAtprotoServerRequestEmailConfirmation=_(fo),x.ComAtprotoServerRequestEmailUpdate=_(po),x.ComAtprotoServerRequestPasswordReset=_(ho),x.ComAtprotoServerReserveSigningKey=_(mo),x.ComAtprotoServerResetPassword=_(Gi),x.ComAtprotoServerRevokeAppPassword=_(yo),x.ComAtprotoServerUpdateEmail=_(Fr),x.ComAtprotoSyncGetBlob=_(ar),x.ComAtprotoSyncGetBlocks=_(or),x.ComAtprotoSyncGetCheckout=_(bo),x.ComAtprotoSyncGetHead=_(qn),x.ComAtprotoSyncGetLatestCommit=_(_r),x.ComAtprotoSyncGetRecord=_(lr),x.ComAtprotoSyncGetRepo=_(wr),x.ComAtprotoSyncGetRepoStatus=_(zn),x.ComAtprotoSyncListBlobs=_(Tr),x.ComAtprotoSyncListRepos=_(qi),x.ComAtprotoSyncNotifyOfUpdate=_(vo),x.ComAtprotoSyncRequestCrawl=_(Ro),x.ComAtprotoSyncSubscribeRepos=_(Ze),x.ComAtprotoTempCheckSignupQueue=_(Ao),x.ComAtprotoTempFetchLabels=_(_o),x.ComAtprotoTempRequestPhoneVerification=_(wo),x.AppBskyActorDefs=_(ae),x.AppBskyActorGetPreferences=_(To),x.AppBskyActorGetProfile=_(So),x.AppBskyActorGetProfiles=_(Co),x.AppBskyActorGetSuggestions=_(Lo),x.AppBskyActorProfile=_(Cs),x.AppBskyActorPutPreferences=_(ko),x.AppBskyActorSearchActors=_(Do),x.AppBskyActorSearchActorsTypeahead=_(Po),x.AppBskyEmbedExternal=_(Mt),x.AppBskyEmbedImages=_(xt),x.AppBskyEmbedRecord=_(Et),x.AppBskyEmbedRecordWithMedia=_(ai),x.AppBskyFeedDefs=_(ce),x.AppBskyFeedDescribeFeedGenerator=_(Sr),x.AppBskyFeedGenerator=_(Ls),x.AppBskyFeedGetActorFeeds=_(Bo),x.AppBskyFeedGetActorLikes=_(zi),x.AppBskyFeedGetAuthorFeed=_(Xi),x.AppBskyFeedGetFeed=_(Xn),x.AppBskyFeedGetFeedGenerator=_(Io),x.AppBskyFeedGetFeedGenerators=_(Uo),x.AppBskyFeedGetFeedSkeleton=_(Hn),x.AppBskyFeedGetLikes=_(Hi),x.AppBskyFeedGetListFeed=_(Zn),x.AppBskyFeedGetPostThread=_(Wn),x.AppBskyFeedGetPosts=_(Oo),x.AppBskyFeedGetRepostedBy=_(Ko),x.AppBskyFeedGetSuggestedFeeds=_(Mo),x.AppBskyFeedGetTimeline=_(No),x.AppBskyFeedLike=_(ks),x.AppBskyFeedPost=_(Nt),x.AppBskyFeedRepost=_(Ds),x.AppBskyFeedSearchPosts=_(Yn),x.AppBskyFeedSendInteractions=_(Vo),x.AppBskyFeedThreadgate=_(Vt),x.AppBskyGraphBlock=_(Ps),x.AppBskyGraphDefs=_(Ve),x.AppBskyGraphFollow=_(Bs),x.AppBskyGraphGetActorStarterPacks=_(jo),x.AppBskyGraphGetBlocks=_(Fo),x.AppBskyGraphGetFollowers=_($o),x.AppBskyGraphGetFollows=_(Go),x.AppBskyGraphGetKnownFollowers=_(qo),x.AppBskyGraphGetList=_(zo),x.AppBskyGraphGetListBlocks=_(Xo),x.AppBskyGraphGetListMutes=_(Ho),x.AppBskyGraphGetLists=_(Zo),x.AppBskyGraphGetMutes=_(Wo),x.AppBskyGraphGetRelationships=_(Jn),x.AppBskyGraphGetStarterPack=_(Yo),x.AppBskyGraphGetStarterPacks=_(Jo),x.AppBskyGraphGetSuggestedFollowsByActor=_(Qo),x.AppBskyGraphList=_(Is),x.AppBskyGraphListblock=_(Us),x.AppBskyGraphListitem=_(Os),x.AppBskyGraphMuteActor=_(el),x.AppBskyGraphMuteActorList=_(tl),x.AppBskyGraphMuteThread=_(rl),x.AppBskyGraphStarterpack=_(oi),x.AppBskyGraphUnmuteActor=_(il),x.AppBskyGraphUnmuteActorList=_(nl),x.AppBskyGraphUnmuteThread=_(sl),x.AppBskyLabelerDefs=_(jt),x.AppBskyLabelerGetServices=_(al),x.AppBskyLabelerService=_(Ks),x.AppBskyNotificationGetUnreadCount=_(ol),x.AppBskyNotificationListNotifications=_(Zi),x.AppBskyNotificationPutPreferences=_(ll),x.AppBskyNotificationRegisterPush=_(ul),x.AppBskyNotificationUpdateSeen=_(cl),x.AppBskyRichtextFacet=_(vt),x.AppBskyUnspeccedDefs=_(li),x.AppBskyUnspeccedGetPopularFeedGenerators=_(dl),x.AppBskyUnspeccedGetSuggestionsSkeleton=_(fl),x.AppBskyUnspeccedGetTaggedSuggestions=_(Wi),x.AppBskyUnspeccedSearchActorsSkeleton=_(Qn),x.AppBskyUnspeccedSearchPostsSkeleton=_(es),x.ChatBskyActorDeclaration=_(Ms),x.ChatBskyActorDefs=_(Ns),x.ChatBskyActorDeleteAccount=_(pl),x.ChatBskyActorExportAccountData=_(hl),x.ChatBskyConvoDefs=_(Ke),x.ChatBskyConvoDeleteMessageForSelf=_(ml),x.ChatBskyConvoGetConvo=_(yl),x.ChatBskyConvoGetConvoForMembers=_(bl),x.ChatBskyConvoGetLog=_(gl),x.ChatBskyConvoGetMessages=_(xl),x.ChatBskyConvoLeaveConvo=_(El),x.ChatBskyConvoListConvos=_(vl),x.ChatBskyConvoMuteConvo=_(Rl),x.ChatBskyConvoSendMessage=_(Al),x.ChatBskyConvoSendMessageBatch=_(Yi),x.ChatBskyConvoUnmuteConvo=_(_l),x.ChatBskyConvoUpdateRead=_(wl),x.ChatBskyModerationGetActorMetadata=_(Ji),x.ChatBskyModerationGetMessageContext=_(Tl),x.ChatBskyModerationUpdateActorAccess=_(Sl),x.ToolsOzoneCommunicationCreateTemplate=_(Cl),x.ToolsOzoneCommunicationDefs=_(Vs),x.ToolsOzoneCommunicationDeleteTemplate=_(Ll),x.ToolsOzoneCommunicationListTemplates=_(kl),x.ToolsOzoneCommunicationUpdateTemplate=_(Dl),x.ToolsOzoneModerationDefs=_(W),x.ToolsOzoneModerationEmitEvent=_(ts),x.ToolsOzoneModerationGetEvent=_(Pl),x.ToolsOzoneModerationGetRecord=_(rs),x.ToolsOzoneModerationGetRepo=_(is),x.ToolsOzoneModerationQueryEvents=_(Bl),x.ToolsOzoneModerationQueryStatuses=_(Il),x.ToolsOzoneModerationSearchRepos=_(Ul),x.ToolsOzoneServerGetConfig=_(Cr),x.ToolsOzoneTeamAddMember=_(ns),x.ToolsOzoneTeamDefs=_(Dr),x.ToolsOzoneTeamDeleteMember=_(Qi),x.ToolsOzoneTeamListMembers=_(Ol),x.ToolsOzoneTeamUpdateMember=_(ss),x.COM_ATPROTO_MODERATION={DefsReasonSpam:"com.atproto.moderation.defs#reasonSpam",DefsReasonViolation:"com.atproto.moderation.defs#reasonViolation",DefsReasonMisleading:"com.atproto.moderation.defs#reasonMisleading",DefsReasonSexual:"com.atproto.moderation.defs#reasonSexual",DefsReasonRude:"com.atproto.moderation.defs#reasonRude",DefsReasonOther:"com.atproto.moderation.defs#reasonOther",DefsReasonAppeal:"com.atproto.moderation.defs#reasonAppeal"},x.APP_BSKY_FEED={DefsRequestLess:"app.bsky.feed.defs#requestLess",DefsRequestMore:"app.bsky.feed.defs#requestMore",DefsClickthroughItem:"app.bsky.feed.defs#clickthroughItem",DefsClickthroughAuthor:"app.bsky.feed.defs#clickthroughAuthor",DefsClickthroughReposter:"app.bsky.feed.defs#clickthroughReposter",DefsClickthroughEmbed:"app.bsky.feed.defs#clickthroughEmbed",DefsInteractionSeen:"app.bsky.feed.defs#interactionSeen",DefsInteractionLike:"app.bsky.feed.defs#interactionLike",DefsInteractionRepost:"app.bsky.feed.defs#interactionRepost",DefsInteractionReply:"app.bsky.feed.defs#interactionReply",DefsInteractionQuote:"app.bsky.feed.defs#interactionQuote",DefsInteractionShare:"app.bsky.feed.defs#interactionShare"},x.APP_BSKY_GRAPH={DefsModlist:"app.bsky.graph.defs#modlist",DefsCuratelist:"app.bsky.graph.defs#curatelist",DefsReferencelist:"app.bsky.graph.defs#referencelist"},x.TOOLS_OZONE_MODERATION={DefsReviewOpen:"tools.ozone.moderation.defs#reviewOpen",DefsReviewEscalated:"tools.ozone.moderation.defs#reviewEscalated",DefsReviewClosed:"tools.ozone.moderation.defs#reviewClosed",DefsReviewNone:"tools.ozone.moderation.defs#reviewNone"},x.TOOLS_OZONE_TEAM={DefsRoleAdmin:"tools.ozone.team.defs#roleAdmin",DefsRoleModerator:"tools.ozone.team.defs#roleModerator",DefsRoleTriage:"tools.ozone.team.defs#roleTriage"};class dO{constructor(){Object.defineProperty(this,"xrpc",{enumerable:!0,configurable:!0,writable:!0,value:new dB.Client}),this.xrpc.addLexicons(fB.schemas)}service(e){return new Z0(this,this.xrpc.service(e))}}x.AtpBaseClient=dO;class Z0{constructor(e,t){Object.defineProperty(this,"_baseClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"xrpc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"com",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"app",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tools",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._baseClient=e,this.xrpc=t,this.com=new W0(this),this.app=new am(this),this.chat=new Lm(this),this.tools=new Um(this)}setHeader(e,t){this.xrpc.setHeader(e,t)}}x.AtpServiceClient=Z0;class W0{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"atproto",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.atproto=new Y0(e)}}x.ComNS=W0;class Y0{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"admin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"identity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moderation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"server",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sync",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.admin=new J0(e),this.identity=new Q0(e),this.label=new em(e),this.moderation=new tm(e),this.repo=new rm(e),this.server=new im(e),this.sync=new nm(e),this.temp=new sm(e)}}x.ComAtprotoNS=Y0;class J0{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}deleteAccount(e,t){return this._service.xrpc.call("com.atproto.admin.deleteAccount",t?.qp,e,t).catch((e=>{throw pB.toKnownErr(e)}))}disableAccountInvites(e,t){return this._service.xrpc.call("com.atproto.admin.disableAccountInvites",t?.qp,e,t).catch((e=>{throw hB.toKnownErr(e)}))}disableInviteCodes(e,t){return this._service.xrpc.call("com.atproto.admin.disableInviteCodes",t?.qp,e,t).catch((e=>{throw mB.toKnownErr(e)}))}enableAccountInvites(e,t){return this._service.xrpc.call("com.atproto.admin.enableAccountInvites",t?.qp,e,t).catch((e=>{throw yB.toKnownErr(e)}))}getAccountInfo(e,t){return this._service.xrpc.call("com.atproto.admin.getAccountInfo",e,void 0,t).catch((e=>{throw bB.toKnownErr(e)}))}getAccountInfos(e,t){return this._service.xrpc.call("com.atproto.admin.getAccountInfos",e,void 0,t).catch((e=>{throw gB.toKnownErr(e)}))}getInviteCodes(e,t){return this._service.xrpc.call("com.atproto.admin.getInviteCodes",e,void 0,t).catch((e=>{throw xB.toKnownErr(e)}))}getSubjectStatus(e,t){return this._service.xrpc.call("com.atproto.admin.getSubjectStatus",e,void 0,t).catch((e=>{throw EB.toKnownErr(e)}))}searchAccounts(e,t){return this._service.xrpc.call("com.atproto.admin.searchAccounts",e,void 0,t).catch((e=>{throw vB.toKnownErr(e)}))}sendEmail(e,t){return this._service.xrpc.call("com.atproto.admin.sendEmail",t?.qp,e,t).catch((e=>{throw RB.toKnownErr(e)}))}updateAccountEmail(e,t){return this._service.xrpc.call("com.atproto.admin.updateAccountEmail",t?.qp,e,t).catch((e=>{throw AB.toKnownErr(e)}))}updateAccountHandle(e,t){return this._service.xrpc.call("com.atproto.admin.updateAccountHandle",t?.qp,e,t).catch((e=>{throw _B.toKnownErr(e)}))}updateAccountPassword(e,t){return this._service.xrpc.call("com.atproto.admin.updateAccountPassword",t?.qp,e,t).catch((e=>{throw wB.toKnownErr(e)}))}updateSubjectStatus(e,t){return this._service.xrpc.call("com.atproto.admin.updateSubjectStatus",t?.qp,e,t).catch((e=>{throw TB.toKnownErr(e)}))}}x.ComAtprotoAdminNS=J0;class Q0{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}getRecommendedDidCredentials(e,t){return this._service.xrpc.call("com.atproto.identity.getRecommendedDidCredentials",e,void 0,t).catch((e=>{throw SB.toKnownErr(e)}))}requestPlcOperationSignature(e,t){return this._service.xrpc.call("com.atproto.identity.requestPlcOperationSignature",t?.qp,e,t).catch((e=>{throw CB.toKnownErr(e)}))}resolveHandle(e,t){return this._service.xrpc.call("com.atproto.identity.resolveHandle",e,void 0,t).catch((e=>{throw LB.toKnownErr(e)}))}signPlcOperation(e,t){return this._service.xrpc.call("com.atproto.identity.signPlcOperation",t?.qp,e,t).catch((e=>{throw kB.toKnownErr(e)}))}submitPlcOperation(e,t){return this._service.xrpc.call("com.atproto.identity.submitPlcOperation",t?.qp,e,t).catch((e=>{throw DB.toKnownErr(e)}))}updateHandle(e,t){return this._service.xrpc.call("com.atproto.identity.updateHandle",t?.qp,e,t).catch((e=>{throw PB.toKnownErr(e)}))}}x.ComAtprotoIdentityNS=Q0;class em{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}queryLabels(e,t){return this._service.xrpc.call("com.atproto.label.queryLabels",e,void 0,t).catch((e=>{throw BB.toKnownErr(e)}))}}x.ComAtprotoLabelNS=em;class tm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}createReport(e,t){return this._service.xrpc.call("com.atproto.moderation.createReport",t?.qp,e,t).catch((e=>{throw IB.toKnownErr(e)}))}}x.ComAtprotoModerationNS=tm;class rm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}applyWrites(e,t){return this._service.xrpc.call("com.atproto.repo.applyWrites",t?.qp,e,t).catch((e=>{throw UB.toKnownErr(e)}))}createRecord(e,t){return this._service.xrpc.call("com.atproto.repo.createRecord",t?.qp,e,t).catch((e=>{throw OB.toKnownErr(e)}))}deleteRecord(e,t){return this._service.xrpc.call("com.atproto.repo.deleteRecord",t?.qp,e,t).catch((e=>{throw KB.toKnownErr(e)}))}describeRepo(e,t){return this._service.xrpc.call("com.atproto.repo.describeRepo",e,void 0,t).catch((e=>{throw MB.toKnownErr(e)}))}getRecord(e,t){return this._service.xrpc.call("com.atproto.repo.getRecord",e,void 0,t).catch((e=>{throw NB.toKnownErr(e)}))}importRepo(e,t){return this._service.xrpc.call("com.atproto.repo.importRepo",t?.qp,e,t).catch((e=>{throw VB.toKnownErr(e)}))}listMissingBlobs(e,t){return this._service.xrpc.call("com.atproto.repo.listMissingBlobs",e,void 0,t).catch((e=>{throw jB.toKnownErr(e)}))}listRecords(e,t){return this._service.xrpc.call("com.atproto.repo.listRecords",e,void 0,t).catch((e=>{throw FB.toKnownErr(e)}))}putRecord(e,t){return this._service.xrpc.call("com.atproto.repo.putRecord",t?.qp,e,t).catch((e=>{throw $B.toKnownErr(e)}))}uploadBlob(e,t){return this._service.xrpc.call("com.atproto.repo.uploadBlob",t?.qp,e,t).catch((e=>{throw GB.toKnownErr(e)}))}}x.ComAtprotoRepoNS=rm;class im{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}activateAccount(e,t){return this._service.xrpc.call("com.atproto.server.activateAccount",t?.qp,e,t).catch((e=>{throw qB.toKnownErr(e)}))}checkAccountStatus(e,t){return this._service.xrpc.call("com.atproto.server.checkAccountStatus",e,void 0,t).catch((e=>{throw zB.toKnownErr(e)}))}confirmEmail(e,t){return this._service.xrpc.call("com.atproto.server.confirmEmail",t?.qp,e,t).catch((e=>{throw XB.toKnownErr(e)}))}createAccount(e,t){return this._service.xrpc.call("com.atproto.server.createAccount",t?.qp,e,t).catch((e=>{throw HB.toKnownErr(e)}))}createAppPassword(e,t){return this._service.xrpc.call("com.atproto.server.createAppPassword",t?.qp,e,t).catch((e=>{throw ZB.toKnownErr(e)}))}createInviteCode(e,t){return this._service.xrpc.call("com.atproto.server.createInviteCode",t?.qp,e,t).catch((e=>{throw WB.toKnownErr(e)}))}createInviteCodes(e,t){return this._service.xrpc.call("com.atproto.server.createInviteCodes",t?.qp,e,t).catch((e=>{throw YB.toKnownErr(e)}))}createSession(e,t){return this._service.xrpc.call("com.atproto.server.createSession",t?.qp,e,t).catch((e=>{throw JB.toKnownErr(e)}))}deactivateAccount(e,t){return this._service.xrpc.call("com.atproto.server.deactivateAccount",t?.qp,e,t).catch((e=>{throw QB.toKnownErr(e)}))}deleteAccount(e,t){return this._service.xrpc.call("com.atproto.server.deleteAccount",t?.qp,e,t).catch((e=>{throw eI.toKnownErr(e)}))}deleteSession(e,t){return this._service.xrpc.call("com.atproto.server.deleteSession",t?.qp,e,t).catch((e=>{throw tI.toKnownErr(e)}))}describeServer(e,t){return this._service.xrpc.call("com.atproto.server.describeServer",e,void 0,t).catch((e=>{throw rI.toKnownErr(e)}))}getAccountInviteCodes(e,t){return this._service.xrpc.call("com.atproto.server.getAccountInviteCodes",e,void 0,t).catch((e=>{throw iI.toKnownErr(e)}))}getServiceAuth(e,t){return this._service.xrpc.call("com.atproto.server.getServiceAuth",e,void 0,t).catch((e=>{throw nI.toKnownErr(e)}))}getSession(e,t){return this._service.xrpc.call("com.atproto.server.getSession",e,void 0,t).catch((e=>{throw sI.toKnownErr(e)}))}listAppPasswords(e,t){return this._service.xrpc.call("com.atproto.server.listAppPasswords",e,void 0,t).catch((e=>{throw aI.toKnownErr(e)}))}refreshSession(e,t){return this._service.xrpc.call("com.atproto.server.refreshSession",t?.qp,e,t).catch((e=>{throw oI.toKnownErr(e)}))}requestAccountDelete(e,t){return this._service.xrpc.call("com.atproto.server.requestAccountDelete",t?.qp,e,t).catch((e=>{throw lI.toKnownErr(e)}))}requestEmailConfirmation(e,t){return this._service.xrpc.call("com.atproto.server.requestEmailConfirmation",t?.qp,e,t).catch((e=>{throw uI.toKnownErr(e)}))}requestEmailUpdate(e,t){return this._service.xrpc.call("com.atproto.server.requestEmailUpdate",t?.qp,e,t).catch((e=>{throw cI.toKnownErr(e)}))}requestPasswordReset(e,t){return this._service.xrpc.call("com.atproto.server.requestPasswordReset",t?.qp,e,t).catch((e=>{throw dI.toKnownErr(e)}))}reserveSigningKey(e,t){return this._service.xrpc.call("com.atproto.server.reserveSigningKey",t?.qp,e,t).catch((e=>{throw fI.toKnownErr(e)}))}resetPassword(e,t){return this._service.xrpc.call("com.atproto.server.resetPassword",t?.qp,e,t).catch((e=>{throw pI.toKnownErr(e)}))}revokeAppPassword(e,t){return this._service.xrpc.call("com.atproto.server.revokeAppPassword",t?.qp,e,t).catch((e=>{throw hI.toKnownErr(e)}))}updateEmail(e,t){return this._service.xrpc.call("com.atproto.server.updateEmail",t?.qp,e,t).catch((e=>{throw mI.toKnownErr(e)}))}}x.ComAtprotoServerNS=im;class nm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}getBlob(e,t){return this._service.xrpc.call("com.atproto.sync.getBlob",e,void 0,t).catch((e=>{throw yI.toKnownErr(e)}))}getBlocks(e,t){return this._service.xrpc.call("com.atproto.sync.getBlocks",e,void 0,t).catch((e=>{throw bI.toKnownErr(e)}))}getCheckout(e,t){return this._service.xrpc.call("com.atproto.sync.getCheckout",e,void 0,t).catch((e=>{throw gI.toKnownErr(e)}))}getHead(e,t){return this._service.xrpc.call("com.atproto.sync.getHead",e,void 0,t).catch((e=>{throw xI.toKnownErr(e)}))}getLatestCommit(e,t){return this._service.xrpc.call("com.atproto.sync.getLatestCommit",e,void 0,t).catch((e=>{throw EI.toKnownErr(e)}))}getRecord(e,t){return this._service.xrpc.call("com.atproto.sync.getRecord",e,void 0,t).catch((e=>{throw vI.toKnownErr(e)}))}getRepo(e,t){return this._service.xrpc.call("com.atproto.sync.getRepo",e,void 0,t).catch((e=>{throw RI.toKnownErr(e)}))}getRepoStatus(e,t){return this._service.xrpc.call("com.atproto.sync.getRepoStatus",e,void 0,t).catch((e=>{throw AI.toKnownErr(e)}))}listBlobs(e,t){return this._service.xrpc.call("com.atproto.sync.listBlobs",e,void 0,t).catch((e=>{throw _I.toKnownErr(e)}))}listRepos(e,t){return this._service.xrpc.call("com.atproto.sync.listRepos",e,void 0,t).catch((e=>{throw wI.toKnownErr(e)}))}notifyOfUpdate(e,t){return this._service.xrpc.call("com.atproto.sync.notifyOfUpdate",t?.qp,e,t).catch((e=>{throw TI.toKnownErr(e)}))}requestCrawl(e,t){return this._service.xrpc.call("com.atproto.sync.requestCrawl",t?.qp,e,t).catch((e=>{throw SI.toKnownErr(e)}))}}x.ComAtprotoSyncNS=nm;class sm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}checkSignupQueue(e,t){return this._service.xrpc.call("com.atproto.temp.checkSignupQueue",e,void 0,t).catch((e=>{throw CI.toKnownErr(e)}))}fetchLabels(e,t){return this._service.xrpc.call("com.atproto.temp.fetchLabels",e,void 0,t).catch((e=>{throw LI.toKnownErr(e)}))}requestPhoneVerification(e,t){return this._service.xrpc.call("com.atproto.temp.requestPhoneVerification",t?.qp,e,t).catch((e=>{throw kI.toKnownErr(e)}))}}x.ComAtprotoTempNS=sm;class am{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bsky",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.bsky=new om(e)}}x.AppNS=am;class om{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"actor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"embed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"feed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"graph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"labeler",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"notification",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"richtext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"unspecced",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.actor=new lm(e),this.embed=new cm(e),this.feed=new dm(e),this.graph=new bm(e),this.labeler=new _m(e),this.notification=new Tm(e),this.richtext=new Sm(e),this.unspecced=new Cm(e)}}x.AppBskyNS=om;class lm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"profile",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.profile=new um(e)}getPreferences(e,t){return this._service.xrpc.call("app.bsky.actor.getPreferences",e,void 0,t).catch((e=>{throw DI.toKnownErr(e)}))}getProfile(e,t){return this._service.xrpc.call("app.bsky.actor.getProfile",e,void 0,t).catch((e=>{throw PI.toKnownErr(e)}))}getProfiles(e,t){return this._service.xrpc.call("app.bsky.actor.getProfiles",e,void 0,t).catch((e=>{throw BI.toKnownErr(e)}))}getSuggestions(e,t){return this._service.xrpc.call("app.bsky.actor.getSuggestions",e,void 0,t).catch((e=>{throw II.toKnownErr(e)}))}putPreferences(e,t){return this._service.xrpc.call("app.bsky.actor.putPreferences",t?.qp,e,t).catch((e=>{throw UI.toKnownErr(e)}))}searchActors(e,t){return this._service.xrpc.call("app.bsky.actor.searchActors",e,void 0,t).catch((e=>{throw OI.toKnownErr(e)}))}searchActorsTypeahead(e,t){return this._service.xrpc.call("app.bsky.actor.searchActorsTypeahead",e,void 0,t).catch((e=>{throw KI.toKnownErr(e)}))}}x.AppBskyActorNS=lm;class um{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.actor.profile",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.actor.profile",...e})).data}async create(e,t,r){return t.$type="app.bsky.actor.profile",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.actor.profile",rkey:"self",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.actor.profile",...e},{headers:t})}}x.ProfileRecord=um;class cm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}}x.AppBskyEmbedNS=cm;class dm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"like",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"post",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"threadgate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.generator=new fm(e),this.like=new pm(e),this.post=new hm(e),this.repost=new mm(e),this.threadgate=new ym(e)}describeFeedGenerator(e,t){return this._service.xrpc.call("app.bsky.feed.describeFeedGenerator",e,void 0,t).catch((e=>{throw MI.toKnownErr(e)}))}getActorFeeds(e,t){return this._service.xrpc.call("app.bsky.feed.getActorFeeds",e,void 0,t).catch((e=>{throw NI.toKnownErr(e)}))}getActorLikes(e,t){return this._service.xrpc.call("app.bsky.feed.getActorLikes",e,void 0,t).catch((e=>{throw VI.toKnownErr(e)}))}getAuthorFeed(e,t){return this._service.xrpc.call("app.bsky.feed.getAuthorFeed",e,void 0,t).catch((e=>{throw jI.toKnownErr(e)}))}getFeed(e,t){return this._service.xrpc.call("app.bsky.feed.getFeed",e,void 0,t).catch((e=>{throw FI.toKnownErr(e)}))}getFeedGenerator(e,t){return this._service.xrpc.call("app.bsky.feed.getFeedGenerator",e,void 0,t).catch((e=>{throw $I.toKnownErr(e)}))}getFeedGenerators(e,t){return this._service.xrpc.call("app.bsky.feed.getFeedGenerators",e,void 0,t).catch((e=>{throw GI.toKnownErr(e)}))}getFeedSkeleton(e,t){return this._service.xrpc.call("app.bsky.feed.getFeedSkeleton",e,void 0,t).catch((e=>{throw qI.toKnownErr(e)}))}getLikes(e,t){return this._service.xrpc.call("app.bsky.feed.getLikes",e,void 0,t).catch((e=>{throw zI.toKnownErr(e)}))}getListFeed(e,t){return this._service.xrpc.call("app.bsky.feed.getListFeed",e,void 0,t).catch((e=>{throw XI.toKnownErr(e)}))}getPostThread(e,t){return this._service.xrpc.call("app.bsky.feed.getPostThread",e,void 0,t).catch((e=>{throw HI.toKnownErr(e)}))}getPosts(e,t){return this._service.xrpc.call("app.bsky.feed.getPosts",e,void 0,t).catch((e=>{throw ZI.toKnownErr(e)}))}getRepostedBy(e,t){return this._service.xrpc.call("app.bsky.feed.getRepostedBy",e,void 0,t).catch((e=>{throw WI.toKnownErr(e)}))}getSuggestedFeeds(e,t){return this._service.xrpc.call("app.bsky.feed.getSuggestedFeeds",e,void 0,t).catch((e=>{throw YI.toKnownErr(e)}))}getTimeline(e,t){return this._service.xrpc.call("app.bsky.feed.getTimeline",e,void 0,t).catch((e=>{throw JI.toKnownErr(e)}))}searchPosts(e,t){return this._service.xrpc.call("app.bsky.feed.searchPosts",e,void 0,t).catch((e=>{throw QI.toKnownErr(e)}))}sendInteractions(e,t){return this._service.xrpc.call("app.bsky.feed.sendInteractions",t?.qp,e,t).catch((e=>{throw eU.toKnownErr(e)}))}}x.AppBskyFeedNS=dm;class fm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.generator",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.generator",...e})).data}async create(e,t,r){return t.$type="app.bsky.feed.generator",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.generator",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.generator",...e},{headers:t})}}x.GeneratorRecord=fm;class pm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.like",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.like",...e})).data}async create(e,t,r){return t.$type="app.bsky.feed.like",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.like",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.like",...e},{headers:t})}}x.LikeRecord=pm;class hm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.post",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.post",...e})).data}async create(e,t,r){return t.$type="app.bsky.feed.post",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.post",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.post",...e},{headers:t})}}x.PostRecord=hm;class mm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.repost",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.repost",...e})).data}async create(e,t,r){return t.$type="app.bsky.feed.repost",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.repost",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.repost",...e},{headers:t})}}x.RepostRecord=mm;class ym{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.threadgate",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.threadgate",...e})).data}async create(e,t,r){return t.$type="app.bsky.feed.threadgate",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.threadgate",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.threadgate",...e},{headers:t})}}x.ThreadgateRecord=ym;class bm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"block",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"follow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"listblock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"listitem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"starterpack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.block=new gm(e),this.follow=new xm(e),this.list=new Em(e),this.listblock=new vm(e),this.listitem=new Rm(e),this.starterpack=new Am(e)}getActorStarterPacks(e,t){return this._service.xrpc.call("app.bsky.graph.getActorStarterPacks",e,void 0,t).catch((e=>{throw tU.toKnownErr(e)}))}getBlocks(e,t){return this._service.xrpc.call("app.bsky.graph.getBlocks",e,void 0,t).catch((e=>{throw rU.toKnownErr(e)}))}getFollowers(e,t){return this._service.xrpc.call("app.bsky.graph.getFollowers",e,void 0,t).catch((e=>{throw iU.toKnownErr(e)}))}getFollows(e,t){return this._service.xrpc.call("app.bsky.graph.getFollows",e,void 0,t).catch((e=>{throw nU.toKnownErr(e)}))}getKnownFollowers(e,t){return this._service.xrpc.call("app.bsky.graph.getKnownFollowers",e,void 0,t).catch((e=>{throw sU.toKnownErr(e)}))}getList(e,t){return this._service.xrpc.call("app.bsky.graph.getList",e,void 0,t).catch((e=>{throw aU.toKnownErr(e)}))}getListBlocks(e,t){return this._service.xrpc.call("app.bsky.graph.getListBlocks",e,void 0,t).catch((e=>{throw oU.toKnownErr(e)}))}getListMutes(e,t){return this._service.xrpc.call("app.bsky.graph.getListMutes",e,void 0,t).catch((e=>{throw lU.toKnownErr(e)}))}getLists(e,t){return this._service.xrpc.call("app.bsky.graph.getLists",e,void 0,t).catch((e=>{throw uU.toKnownErr(e)}))}getMutes(e,t){return this._service.xrpc.call("app.bsky.graph.getMutes",e,void 0,t).catch((e=>{throw cU.toKnownErr(e)}))}getRelationships(e,t){return this._service.xrpc.call("app.bsky.graph.getRelationships",e,void 0,t).catch((e=>{throw dU.toKnownErr(e)}))}getStarterPack(e,t){return this._service.xrpc.call("app.bsky.graph.getStarterPack",e,void 0,t).catch((e=>{throw fU.toKnownErr(e)}))}getStarterPacks(e,t){return this._service.xrpc.call("app.bsky.graph.getStarterPacks",e,void 0,t).catch((e=>{throw pU.toKnownErr(e)}))}getSuggestedFollowsByActor(e,t){return this._service.xrpc.call("app.bsky.graph.getSuggestedFollowsByActor",e,void 0,t).catch((e=>{throw hU.toKnownErr(e)}))}muteActor(e,t){return this._service.xrpc.call("app.bsky.graph.muteActor",t?.qp,e,t).catch((e=>{throw mU.toKnownErr(e)}))}muteActorList(e,t){return this._service.xrpc.call("app.bsky.graph.muteActorList",t?.qp,e,t).catch((e=>{throw yU.toKnownErr(e)}))}muteThread(e,t){return this._service.xrpc.call("app.bsky.graph.muteThread",t?.qp,e,t).catch((e=>{throw bU.toKnownErr(e)}))}unmuteActor(e,t){return this._service.xrpc.call("app.bsky.graph.unmuteActor",t?.qp,e,t).catch((e=>{throw gU.toKnownErr(e)}))}unmuteActorList(e,t){return this._service.xrpc.call("app.bsky.graph.unmuteActorList",t?.qp,e,t).catch((e=>{throw xU.toKnownErr(e)}))}unmuteThread(e,t){return this._service.xrpc.call("app.bsky.graph.unmuteThread",t?.qp,e,t).catch((e=>{throw EU.toKnownErr(e)}))}}x.AppBskyGraphNS=bm;class gm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.block",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.block",...e})).data}async create(e,t,r){return t.$type="app.bsky.graph.block",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.block",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.block",...e},{headers:t})}}x.BlockRecord=gm;class xm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.follow",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.follow",...e})).data}async create(e,t,r){return t.$type="app.bsky.graph.follow",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.follow",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.follow",...e},{headers:t})}}x.FollowRecord=xm;class Em{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.list",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.list",...e})).data}async create(e,t,r){return t.$type="app.bsky.graph.list",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.list",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.list",...e},{headers:t})}}x.ListRecord=Em;class vm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.listblock",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.listblock",...e})).data}async create(e,t,r){return t.$type="app.bsky.graph.listblock",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.listblock",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.listblock",...e},{headers:t})}}x.ListblockRecord=vm;class Rm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.listitem",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.listitem",...e})).data}async create(e,t,r){return t.$type="app.bsky.graph.listitem",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.listitem",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.listitem",...e},{headers:t})}}x.ListitemRecord=Rm;class Am{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.starterpack",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.starterpack",...e})).data}async create(e,t,r){return t.$type="app.bsky.graph.starterpack",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.starterpack",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.starterpack",...e},{headers:t})}}x.StarterpackRecord=Am;class _m{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.service=new wm(e)}getServices(e,t){return this._service.xrpc.call("app.bsky.labeler.getServices",e,void 0,t).catch((e=>{throw vU.toKnownErr(e)}))}}x.AppBskyLabelerNS=_m;class wm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.labeler.service",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.labeler.service",...e})).data}async create(e,t,r){return t.$type="app.bsky.labeler.service",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.labeler.service",rkey:"self",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.labeler.service",...e},{headers:t})}}x.ServiceRecord=wm;class Tm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}getUnreadCount(e,t){return this._service.xrpc.call("app.bsky.notification.getUnreadCount",e,void 0,t).catch((e=>{throw RU.toKnownErr(e)}))}listNotifications(e,t){return this._service.xrpc.call("app.bsky.notification.listNotifications",e,void 0,t).catch((e=>{throw AU.toKnownErr(e)}))}putPreferences(e,t){return this._service.xrpc.call("app.bsky.notification.putPreferences",t?.qp,e,t).catch((e=>{throw _U.toKnownErr(e)}))}registerPush(e,t){return this._service.xrpc.call("app.bsky.notification.registerPush",t?.qp,e,t).catch((e=>{throw wU.toKnownErr(e)}))}updateSeen(e,t){return this._service.xrpc.call("app.bsky.notification.updateSeen",t?.qp,e,t).catch((e=>{throw TU.toKnownErr(e)}))}}x.AppBskyNotificationNS=Tm;class Sm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}}x.AppBskyRichtextNS=Sm;class Cm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}getPopularFeedGenerators(e,t){return this._service.xrpc.call("app.bsky.unspecced.getPopularFeedGenerators",e,void 0,t).catch((e=>{throw SU.toKnownErr(e)}))}getSuggestionsSkeleton(e,t){return this._service.xrpc.call("app.bsky.unspecced.getSuggestionsSkeleton",e,void 0,t).catch((e=>{throw CU.toKnownErr(e)}))}getTaggedSuggestions(e,t){return this._service.xrpc.call("app.bsky.unspecced.getTaggedSuggestions",e,void 0,t).catch((e=>{throw LU.toKnownErr(e)}))}searchActorsSkeleton(e,t){return this._service.xrpc.call("app.bsky.unspecced.searchActorsSkeleton",e,void 0,t).catch((e=>{throw kU.toKnownErr(e)}))}searchPostsSkeleton(e,t){return this._service.xrpc.call("app.bsky.unspecced.searchPostsSkeleton",e,void 0,t).catch((e=>{throw DU.toKnownErr(e)}))}}x.AppBskyUnspeccedNS=Cm;class Lm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bsky",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.bsky=new km(e)}}x.ChatNS=Lm;class km{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"actor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"convo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moderation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.actor=new Dm(e),this.convo=new Bm(e),this.moderation=new Im(e)}}x.ChatBskyNS=km;class Dm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"declaration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.declaration=new Pm(e)}deleteAccount(e,t){return this._service.xrpc.call("chat.bsky.actor.deleteAccount",t?.qp,e,t).catch((e=>{throw PU.toKnownErr(e)}))}exportAccountData(e,t){return this._service.xrpc.call("chat.bsky.actor.exportAccountData",e,void 0,t).catch((e=>{throw BU.toKnownErr(e)}))}}x.ChatBskyActorNS=Dm;class Pm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"chat.bsky.actor.declaration",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"chat.bsky.actor.declaration",...e})).data}async create(e,t,r){return t.$type="chat.bsky.actor.declaration",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"chat.bsky.actor.declaration",rkey:"self",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"chat.bsky.actor.declaration",...e},{headers:t})}}x.DeclarationRecord=Pm;class Bm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}deleteMessageForSelf(e,t){return this._service.xrpc.call("chat.bsky.convo.deleteMessageForSelf",t?.qp,e,t).catch((e=>{throw IU.toKnownErr(e)}))}getConvo(e,t){return this._service.xrpc.call("chat.bsky.convo.getConvo",e,void 0,t).catch((e=>{throw UU.toKnownErr(e)}))}getConvoForMembers(e,t){return this._service.xrpc.call("chat.bsky.convo.getConvoForMembers",e,void 0,t).catch((e=>{throw OU.toKnownErr(e)}))}getLog(e,t){return this._service.xrpc.call("chat.bsky.convo.getLog",e,void 0,t).catch((e=>{throw KU.toKnownErr(e)}))}getMessages(e,t){return this._service.xrpc.call("chat.bsky.convo.getMessages",e,void 0,t).catch((e=>{throw MU.toKnownErr(e)}))}leaveConvo(e,t){return this._service.xrpc.call("chat.bsky.convo.leaveConvo",t?.qp,e,t).catch((e=>{throw NU.toKnownErr(e)}))}listConvos(e,t){return this._service.xrpc.call("chat.bsky.convo.listConvos",e,void 0,t).catch((e=>{throw VU.toKnownErr(e)}))}muteConvo(e,t){return this._service.xrpc.call("chat.bsky.convo.muteConvo",t?.qp,e,t).catch((e=>{throw jU.toKnownErr(e)}))}sendMessage(e,t){return this._service.xrpc.call("chat.bsky.convo.sendMessage",t?.qp,e,t).catch((e=>{throw FU.toKnownErr(e)}))}sendMessageBatch(e,t){return this._service.xrpc.call("chat.bsky.convo.sendMessageBatch",t?.qp,e,t).catch((e=>{throw $U.toKnownErr(e)}))}unmuteConvo(e,t){return this._service.xrpc.call("chat.bsky.convo.unmuteConvo",t?.qp,e,t).catch((e=>{throw GU.toKnownErr(e)}))}updateRead(e,t){return this._service.xrpc.call("chat.bsky.convo.updateRead",t?.qp,e,t).catch((e=>{throw qU.toKnownErr(e)}))}}x.ChatBskyConvoNS=Bm;class Im{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}getActorMetadata(e,t){return this._service.xrpc.call("chat.bsky.moderation.getActorMetadata",e,void 0,t).catch((e=>{throw zU.toKnownErr(e)}))}getMessageContext(e,t){return this._service.xrpc.call("chat.bsky.moderation.getMessageContext",e,void 0,t).catch((e=>{throw XU.toKnownErr(e)}))}updateActorAccess(e,t){return this._service.xrpc.call("chat.bsky.moderation.updateActorAccess",t?.qp,e,t).catch((e=>{throw HU.toKnownErr(e)}))}}x.ChatBskyModerationNS=Im;class Um{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ozone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.ozone=new Om(e)}}x.ToolsNS=Um;class Om{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"communication",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moderation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"server",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"team",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e,this.communication=new Km(e),this.moderation=new Mm(e),this.server=new Nm(e),this.team=new Vm(e)}}x.ToolsOzoneNS=Om;class Km{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}createTemplate(e,t){return this._service.xrpc.call("tools.ozone.communication.createTemplate",t?.qp,e,t).catch((e=>{throw ZU.toKnownErr(e)}))}deleteTemplate(e,t){return this._service.xrpc.call("tools.ozone.communication.deleteTemplate",t?.qp,e,t).catch((e=>{throw WU.toKnownErr(e)}))}listTemplates(e,t){return this._service.xrpc.call("tools.ozone.communication.listTemplates",e,void 0,t).catch((e=>{throw YU.toKnownErr(e)}))}updateTemplate(e,t){return this._service.xrpc.call("tools.ozone.communication.updateTemplate",t?.qp,e,t).catch((e=>{throw JU.toKnownErr(e)}))}}x.ToolsOzoneCommunicationNS=Km;class Mm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}emitEvent(e,t){return this._service.xrpc.call("tools.ozone.moderation.emitEvent",t?.qp,e,t).catch((e=>{throw QU.toKnownErr(e)}))}getEvent(e,t){return this._service.xrpc.call("tools.ozone.moderation.getEvent",e,void 0,t).catch((e=>{throw eO.toKnownErr(e)}))}getRecord(e,t){return this._service.xrpc.call("tools.ozone.moderation.getRecord",e,void 0,t).catch((e=>{throw tO.toKnownErr(e)}))}getRepo(e,t){return this._service.xrpc.call("tools.ozone.moderation.getRepo",e,void 0,t).catch((e=>{throw rO.toKnownErr(e)}))}queryEvents(e,t){return this._service.xrpc.call("tools.ozone.moderation.queryEvents",e,void 0,t).catch((e=>{throw iO.toKnownErr(e)}))}queryStatuses(e,t){return this._service.xrpc.call("tools.ozone.moderation.queryStatuses",e,void 0,t).catch((e=>{throw nO.toKnownErr(e)}))}searchRepos(e,t){return this._service.xrpc.call("tools.ozone.moderation.searchRepos",e,void 0,t).catch((e=>{throw sO.toKnownErr(e)}))}}x.ToolsOzoneModerationNS=Mm;class Nm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}getConfig(e,t){return this._service.xrpc.call("tools.ozone.server.getConfig",e,void 0,t).catch((e=>{throw aO.toKnownErr(e)}))}}x.ToolsOzoneServerNS=Nm;class Vm{constructor(e){Object.defineProperty(this,"_service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._service=e}addMember(e,t){return this._service.xrpc.call("tools.ozone.team.addMember",t?.qp,e,t).catch((e=>{throw oO.toKnownErr(e)}))}deleteMember(e,t){return this._service.xrpc.call("tools.ozone.team.deleteMember",t?.qp,e,t).catch((e=>{throw lO.toKnownErr(e)}))}listMembers(e,t){return this._service.xrpc.call("tools.ozone.team.listMembers",e,void 0,t).catch((e=>{throw uO.toKnownErr(e)}))}updateMember(e,t){return this._service.xrpc.call("tools.ozone.team.updateMember",t?.qp,e,t).catch((e=>{throw cO.toKnownErr(e)}))}}x.ToolsOzoneTeamNS=Vm;var js={};Object.defineProperty(js,"__esModule",{value:!0}),js.AtpAgent=void 0;const fO=G,au=G,hf=vi,pO=x,hO=ka,mO="com.atproto.server.refreshSession";class vr{get com(){return this.api.com}static configure(e){e.fetch&&(vr.fetch=e.fetch),e.appLabelers&&(vr.appLabelers=e.appLabelers)}constructor(e){Object.defineProperty(this,"service",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"api",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"labelersHeader",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"proxyHeader",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pdsUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_baseClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_persistSession",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_refreshSessionPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uploadBlob",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.com.atproto.repo.uploadBlob(e,t)}),Object.defineProperty(this,"resolveHandle",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.com.atproto.identity.resolveHandle(e,t)}),Object.defineProperty(this,"updateHandle",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.com.atproto.identity.updateHandle(e,t)}),Object.defineProperty(this,"createModerationReport",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.com.atproto.moderation.createReport(e,t)}),this.service=e.service instanceof URL?e.service:new URL(e.service),this._persistSession=e.persistSession,this._baseClient=new pO.AtpBaseClient,this._baseClient.xrpc.fetch=this._fetch.bind(this),this.api=this._baseClient.service(e.service)}clone(){const e=new vr({service:this.service});return this.copyInto(e),e}copyInto(e){e.session=this.session,e.labelersHeader=this.labelersHeader,e.proxyHeader=this.proxyHeader,e.pdsUrl=this.pdsUrl,e.api.xrpc.uri=this.pdsUrl||this.service}withProxy(e,t){const r=this.clone();return r.configureProxyHeader(e,t),r}get hasSession(){return!!this.session}setPersistSessionHandler(e){this._persistSession=e}configureLabelersHeader(e){this.labelersHeader=e}configureProxyHeader(e,t){t.startsWith("did:")&&(this.proxyHeader=`${t}#${e}`)}async createAccount(e){try{const t=await this.api.com.atproto.server.createAccount(e);return this.session={accessJwt:t.data.accessJwt,refreshJwt:t.data.refreshJwt,handle:t.data.handle,did:t.data.did,email:e.email,emailConfirmed:!1,emailAuthFactor:!1,active:!0},this._updateApiEndpoint(t.data.didDoc),t}catch(e){throw this.session=void 0,e}finally{this.session?this._persistSession?.("create",this.session):this._persistSession?.("create-failed",void 0)}}async login(e){try{const t=await this.api.com.atproto.server.createSession({identifier:e.identifier,password:e.password,authFactorToken:e.authFactorToken});return this.session={accessJwt:t.data.accessJwt,refreshJwt:t.data.refreshJwt,handle:t.data.handle,did:t.data.did,email:t.data.email,emailConfirmed:t.data.emailConfirmed,emailAuthFactor:t.data.emailAuthFactor,active:t.data.active??!0,status:t.data.status},this._updateApiEndpoint(t.data.didDoc),t}catch(e){throw this.session=void 0,e}finally{this.session?this._persistSession?.("create",this.session):this._persistSession?.("create-failed",void 0)}}async resumeSession(e){try{this.session=e;const t=await this.api.com.atproto.server.getSession();if(t.data.did!==this.session.did)throw new au.XRPCError(au.ResponseType.InvalidRequest,"Invalid session","InvalidDID");return this.session.email=t.data.email,this.session.handle=t.data.handle,this.session.emailConfirmed=t.data.emailConfirmed,this.session.emailAuthFactor=t.data.emailAuthFactor,this.session.active=t.data.active??!0,this.session.status=t.data.status,this._updateApiEndpoint(t.data.didDoc),this._persistSession?.("update",this.session),t}catch(e){throw this.session=void 0,e instanceof au.XRPCError?[1,408,425,429,500,502,503,504,522,524].includes(e.status)?this._persistSession?.("network-error",void 0):this._persistSession?.("expired",void 0):this._persistSession?.("network-error",void 0),e}}_addHeaders(e){!e.authorization&&this.session?.accessJwt&&(e={...e,authorization:`Bearer ${this.session.accessJwt}`}),this.proxyHeader&&(e={...e,"atproto-proxy":this.proxyHeader});const t="atproto-accept-labelers",r=vr.appLabelers.map((e=>`${e};redact`)).concat(this.labelersHeader.filter((e=>e.startsWith("did:"))));return e[t]&&r.push(...e[t].split(",").map((e=>e.trim()))),e={...e,[t]:r.join(", ")}}async _fetch(e,t,r,i){if(!vr.fetch)throw new Error("AtpAgent fetch() method not configured");await this._refreshSessionPromise;let o=await vr.fetch(e,t,this._addHeaders(r),i);return mf(o,["ExpiredToken"])&&this.session?.refreshJwt&&(await this.refreshSession(),o=await vr.fetch(e,t,this._addHeaders(r),i)),o}async refreshSession(){if(this._refreshSessionPromise)return this._refreshSessionPromise;this._refreshSessionPromise=this._refreshSessionInner();try{await this._refreshSessionPromise}finally{this._refreshSessionPromise=void 0}}async _refreshSessionInner(){if(!vr.fetch)throw new Error("AtpAgent fetch() method not configured");if(!this.session?.refreshJwt)return;const e=new URL((this.pdsUrl||this.service).origin);e.pathname=`/xrpc/${mO}`;const t=await vr.fetch(e.toString(),"POST",{authorization:`Bearer ${this.session.refreshJwt}`},void 0);mf(t,["ExpiredToken","InvalidToken"])?(this.session=void 0,this._persistSession?.("expired",void 0)):bO(this._baseClient,t.body)&&(this.session={...this.session||{},accessJwt:t.body.accessJwt,refreshJwt:t.body.refreshJwt,handle:t.body.handle,did:t.body.did},this._updateApiEndpoint(t.body.didDoc),this._persistSession?.("update",this.session))}_updateApiEndpoint(e){if((0,hf.isValidDidDoc)(e)){const t=(0,hf.getPdsEndpoint)(e);this.pdsUrl=t?new URL(t):void 0}this.api.xrpc.uri=this.pdsUrl||this.service}}function yO(e){return fO.errorResponseBody.safeParse(e).success}function mf(e,t){return!(400!==e.status||!yO(e.body))&&("string"==typeof e.body.error&&t.includes(e.body.error))}function bO(e,t){try{return e.xrpc.lex.assertValidXrpcOutput("com.atproto.server.refreshSession",t),!0}catch{return!1}}js.AtpAgent=vr,Object.defineProperty(vr,"fetch",{enumerable:!0,configurable:!0,writable:!0,value:au.defaultFetchHandler}),Object.defineProperty(vr,"appLabelers",{enumerable:!0,configurable:!0,writable:!0,value:[hO.BSKY_LABELER_DID]});var Fs={},Hs={};Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.UnicodeString=void 0;const gO=vi,yf=new TextEncoder,xO=new TextDecoder;class EO{constructor(e){Object.defineProperty(this,"utf16",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"utf8",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_graphemeLen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.utf16=e,this.utf8=yf.encode(e)}get length(){return this.utf8.byteLength}get graphemeLength(){return this._graphemeLen||(this._graphemeLen=(0,gO.graphemeLen)(this.utf16)),this._graphemeLen}slice(e,t){return xO.decode(this.utf8.slice(e,t))}utf16IndexToUtf8Index(e){return yf.encode(this.utf16.slice(0,e)).byteLength}toString(){return this.utf16}}Hs.UnicodeString=EO;var jl={};Object.defineProperty(jl,"__esModule",{value:!0}),jl.sanitizeRichText=void 0;const vO=Hs,RO=/[\r\n]([\u00AD\u2060\u200D\u200C\u200B\s]*[\r\n]){2,}/,AO="\n\n";function _O(e,t){return t.cleanNewlines&&(e=wO(e,RO,AO)),e}function wO(e,t,r){let i=(e=e.clone()).unicodeText.utf16.match(t);for(;i&&typeof i.index<"u";){const o=e.unicodeText,n=e.unicodeText.utf16IndexToUtf8Index(i.index),s=n+new vO.UnicodeString(i[0]).length;if(e.delete(n,s),e.unicodeText.utf16===o.utf16)break;e.insert(n,r),i=e.unicodeText.utf16.match(t)}return e}jl.sanitizeRichText=_O;var $u={};const TO=["aaa","aarp","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mv","mw","mx","my","mz","na","nab","nagoya","name","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shell","shia","shiksha","shoes","shop","shopping","shouji","show","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermgensberater","vermgensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volvo","vote","voting","voto","voyage","vu","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var $r={};Object.defineProperty($r,"__esModule",{value:!0}),$r.TAG_REGEX=$r.TRAILING_PUNCTUATION_REGEX=$r.URL_REGEX=$r.MENTION_REGEX=void 0,$r.MENTION_REGEX=/(^|\s|\()(@)([a-zA-Z0-9.-]+)(\b)/g,$r.URL_REGEX=/(^|\s|\()((https?:\/\/[\S]+)|((?<domain>[a-z][a-z0-9]*(\.[a-z0-9]+)+)[\S]*))/gim,$r.TRAILING_PUNCTUATION_REGEX=/\p{P}+$/gu,$r.TAG_REGEX=/(^|\s)[#]((?!\ufe0f)[^\s\u00AD\u2060\u200A\u200B\u200C\u200D\u20e2]*[^\d\s\p{P}\u00AD\u2060\u200A\u200B\u200C\u200D\u20e2]+[^\s\u00AD\u2060\u200A\u200B\u200C\u200D\u20e2]*)?/gu;var SO=se&&se.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($u,"__esModule",{value:!0}),$u.detectFacets=void 0;const CO=SO(TO),nu=$r;function LO(e){let t;const r=[];{const i=nu.MENTION_REGEX;for(;t=i.exec(e.utf16);){if(!bf(t[3])&&!t[3].endsWith(".test"))continue;const i=e.utf16.indexOf(t[3],t.index)-1;r.push({$type:"app.bsky.richtext.facet",index:{byteStart:e.utf16IndexToUtf8Index(i),byteEnd:e.utf16IndexToUtf8Index(i+t[3].length+1)},features:[{$type:"app.bsky.richtext.facet#mention",did:t[3]}]})}}{const i=nu.URL_REGEX;for(;t=i.exec(e.utf16);){let i=t[2];if(!i.startsWith("http")){const e=t.groups?.domain;if(!e||!bf(e))continue;i=`https://${i}`}const o=e.utf16.indexOf(t[2],t.index),n={start:o,end:o+t[2].length};/[.,;:!?]$/.test(i)&&(i=i.slice(0,-1),n.end--),/[)]$/.test(i)&&!i.includes("(")&&(i=i.slice(0,-1),n.end--),r.push({index:{byteStart:e.utf16IndexToUtf8Index(n.start),byteEnd:e.utf16IndexToUtf8Index(n.end)},features:[{$type:"app.bsky.richtext.facet#link",uri:i}]})}}{const i=nu.TAG_REGEX;for(;t=i.exec(e.utf16);){const i=t[1];let o=t[2];if(!o||(o=o.trim().replace(nu.TRAILING_PUNCTUATION_REGEX,""),0===o.length||o.length>64))continue;const n=t.index+i.length;r.push({index:{byteStart:e.utf16IndexToUtf8Index(n),byteEnd:e.utf16IndexToUtf8Index(n+1+o.length)},features:[{$type:"app.bsky.richtext.facet#tag",tag:o}]})}}return r.length>0?r:void 0}function bf(e){return!!CO.default.find((t=>{const r=e.lastIndexOf(t);return-1!==r&&("."===e.charAt(r-1)&&r===e.length-t.length)}))}$u.detectFacets=LO,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.RichText=Fs.RichTextSegment=void 0;const In=x,hc=Hs,kO=jl,gf=$u;class bs{constructor(e,t){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"facet",{enumerable:!0,configurable:!0,writable:!0,value:t})}get link(){const e=this.facet?.features.find(In.AppBskyRichtextFacet.isLink);if(In.AppBskyRichtextFacet.isLink(e))return e}isLink(){return!!this.link}get mention(){const e=this.facet?.features.find(In.AppBskyRichtextFacet.isMention);if(In.AppBskyRichtextFacet.isMention(e))return e}isMention(){return!!this.mention}get tag(){const e=this.facet?.features.find(In.AppBskyRichtextFacet.isTag);if(In.AppBskyRichtextFacet.isTag(e))return e}isTag(){return!!this.tag}}Fs.RichTextSegment=bs;class id{constructor(e,t){Object.defineProperty(this,"unicodeText",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"facets",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.unicodeText=new hc.UnicodeString(e.text),this.facets=e.facets,!this.facets?.length&&e.entities?.length&&(this.facets=DO(this.unicodeText,e.entities)),this.facets&&this.facets.sort(mc),t?.cleanNewlines&&(0,kO.sanitizeRichText)(this,{cleanNewlines:!0}).copyInto(this)}get text(){return this.unicodeText.toString()}get length(){return this.unicodeText.length}get graphemeLength(){return this.unicodeText.graphemeLength}clone(){return new id({text:this.unicodeText.utf16,facets:xf(this.facets)})}copyInto(e){e.unicodeText=this.unicodeText,e.facets=xf(this.facets)}*segments(){const e=this.facets||[];if(!e.length)return void(yield new bs(this.unicodeText.utf16));let t=0,r=0;do{const i=e[r];if(t<i.index.byteStart)yield new bs(this.unicodeText.slice(t,i.index.byteStart));else if(t>i.index.byteStart){r++;continue}if(i.index.byteStart<i.index.byteEnd){const e=this.unicodeText.slice(i.index.byteStart,i.index.byteEnd);e.trim()?yield new bs(e,i):yield new bs(e)}t=i.index.byteEnd,r++}while(r<e.length);t<this.unicodeText.length&&(yield new bs(this.unicodeText.slice(t,this.unicodeText.length)))}insert(e,t){if(this.unicodeText=new hc.UnicodeString(this.unicodeText.slice(0,e)+t+this.unicodeText.slice(e)),!this.facets?.length)return this;const r=t.length;for(const t of this.facets)e<=t.index.byteStart?(t.index.byteStart+=r,t.index.byteEnd+=r):e>=t.index.byteStart&&e<t.index.byteEnd&&(t.index.byteEnd+=r);return this}delete(e,t){if(this.unicodeText=new hc.UnicodeString(this.unicodeText.slice(0,e)+this.unicodeText.slice(t)),!this.facets?.length)return this;const r=t-e;for(const i of this.facets)e<=i.index.byteStart&&t>=i.index.byteEnd?(i.index.byteStart=0,i.index.byteEnd=0):e>i.index.byteEnd||(e>i.index.byteStart&&e<=i.index.byteEnd&&t>i.index.byteEnd?i.index.byteEnd=e:e>=i.index.byteStart&&t<=i.index.byteEnd?i.index.byteEnd-=r:e<i.index.byteStart&&t>=i.index.byteStart&&t<=i.index.byteEnd?(i.index.byteStart=e,i.index.byteEnd-=r):t<i.index.byteStart&&(i.index.byteStart-=r,i.index.byteEnd-=r));return this.facets=this.facets.filter((e=>e.index.byteStart<e.index.byteEnd)),this}async detectFacets(e){if(this.facets=(0,gf.detectFacets)(this.unicodeText),this.facets){for(const t of this.facets)for(const r of t.features)if(In.AppBskyRichtextFacet.isMention(r)){const t=await e.resolveHandle({handle:r.did}).catch((e=>{})).then((e=>e?.data.did));r.did=t||""}this.facets.sort(mc)}}detectFacetsWithoutResolution(){this.facets=(0,gf.detectFacets)(this.unicodeText),this.facets&&this.facets.sort(mc)}}Fs.RichText=id;const mc=(e,t)=>e.index.byteStart-t.index.byteStart;function DO(e,t){const r=[];for(const i of t)"link"===i.type?r.push({$type:"app.bsky.richtext.facet",index:{byteStart:e.utf16IndexToUtf8Index(i.index.start),byteEnd:e.utf16IndexToUtf8Index(i.index.end)},features:[{$type:"app.bsky.richtext.facet#link",uri:i.value}]}):"mention"===i.type&&r.push({$type:"app.bsky.richtext.facet",index:{byteStart:e.utf16IndexToUtf8Index(i.index.start),byteEnd:e.utf16IndexToUtf8Index(i.index.end)},features:[{$type:"app.bsky.richtext.facet#mention",did:i.value}]});return r}function xf(e){return typeof e>"u"?e:JSON.parse(JSON.stringify(e))}var nd={},xi={},zr={},ur={};Object.defineProperty(ur,"__esModule",{value:!0}),ur.NOOP_BEHAVIOR=ur.HIDE_BEHAVIOR=ur.MUTEWORD_BEHAVIOR=ur.MUTE_BEHAVIOR=ur.BLOCK_BEHAVIOR=ur.CUSTOM_LABEL_VALUE_RE=void 0,ur.CUSTOM_LABEL_VALUE_RE=/^[a-z-]+$/,ur.BLOCK_BEHAVIOR={profileList:"blur",profileView:"alert",avatar:"blur",banner:"blur",contentList:"blur",contentView:"blur"},ur.MUTE_BEHAVIOR={profileList:"inform",profileView:"alert",contentList:"blur",contentView:"inform"},ur.MUTEWORD_BEHAVIOR={contentList:"blur",contentView:"blur"},ur.HIDE_BEHAVIOR={contentList:"blur",contentView:"blur"},ur.NOOP_BEHAVIOR={};var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.ModerationUI=void 0;class PO{constructor(){Object.defineProperty(this,"noOverride",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"filters",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"blurs",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"alerts",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"informs",{enumerable:!0,configurable:!0,writable:!0,value:[]})}get filter(){return 0!==this.filters.length}get blur(){return 0!==this.blurs.length}get alert(){return 0!==this.alerts.length}get inform(){return 0!==this.informs.length}}Fl.ModerationUI=PO;var En={};Object.defineProperty(En,"__esModule",{value:!0}),En.LABELS=En.DEFAULT_LABEL_SETTINGS=void 0,En.DEFAULT_LABEL_SETTINGS={porn:"hide",sexual:"warn",nudity:"ignore","graphic-media":"warn"},En.LABELS={"!hide":{identifier:"!hide",configurable:!1,defaultSetting:"hide",flags:["no-override","no-self"],severity:"alert",blurs:"content",behaviors:{account:{profileList:"blur",profileView:"blur",avatar:"blur",banner:"blur",displayName:"blur",contentList:"blur",contentView:"blur"},profile:{avatar:"blur",banner:"blur",displayName:"blur"},content:{contentList:"blur",contentView:"blur"}},locales:[]},"!warn":{identifier:"!warn",configurable:!1,defaultSetting:"warn",flags:["no-self"],severity:"none",blurs:"content",behaviors:{account:{profileList:"blur",profileView:"blur",avatar:"blur",banner:"blur",contentList:"blur",contentView:"blur"},profile:{avatar:"blur",banner:"blur",displayName:"blur"},content:{contentList:"blur",contentView:"blur"}},locales:[]},"!no-unauthenticated":{identifier:"!no-unauthenticated",configurable:!1,defaultSetting:"hide",flags:["no-override","unauthed"],severity:"none",blurs:"content",behaviors:{account:{profileList:"blur",profileView:"blur",avatar:"blur",banner:"blur",displayName:"blur",contentList:"blur",contentView:"blur"},profile:{avatar:"blur",banner:"blur",displayName:"blur"},content:{contentList:"blur",contentView:"blur"}},locales:[]},porn:{identifier:"porn",configurable:!0,defaultSetting:"hide",flags:["adult"],severity:"none",blurs:"media",behaviors:{account:{avatar:"blur",banner:"blur"},profile:{avatar:"blur",banner:"blur"},content:{contentMedia:"blur"}},locales:[]},sexual:{identifier:"sexual",configurable:!0,defaultSetting:"warn",flags:["adult"],severity:"none",blurs:"media",behaviors:{account:{avatar:"blur",banner:"blur"},profile:{avatar:"blur",banner:"blur"},content:{contentMedia:"blur"}},locales:[]},nudity:{identifier:"nudity",configurable:!0,defaultSetting:"ignore",flags:[],severity:"none",blurs:"media",behaviors:{account:{avatar:"blur",banner:"blur"},profile:{avatar:"blur",banner:"blur"},content:{contentMedia:"blur"}},locales:[]},"graphic-media":{identifier:"graphic-media",flags:["adult"],configurable:!0,defaultSetting:"warn",severity:"none",blurs:"media",behaviors:{account:{avatar:"blur",banner:"blur"},profile:{avatar:"blur",banner:"blur"},content:{contentMedia:"blur"}},locales:[]}},Object.defineProperty(zr,"__esModule",{value:!0}),zr.ModerationDecision=void 0;const mr=ur,BO=Fl,Ef=En;var cn;!function(e){e[e.High=0]="High",e[e.Medium=1]="Medium",e[e.Low=2]="Low"}(cn||(cn={}));class sd{constructor(){Object.defineProperty(this,"did",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"isMe",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"causes",{enumerable:!0,configurable:!0,writable:!0,value:[]})}static merge(...e){const t=e.filter((e=>!!e)),r=new sd;return t[0]&&(r.did=t[0].did,r.isMe=t[0].isMe),r.causes=t.flatMap((e=>e.causes)),r}downgrade(){for(const e of this.causes)e.downgraded=!0;return this}get blocked(){return!!this.blockCause}get muted(){return!!this.muteCause}get blockCause(){return this.causes.find((e=>"blocking"===e.type||"blocked-by"===e.type||"block-other"===e.type))}get muteCause(){return this.causes.find((e=>"muted"===e.type))}get labelCauses(){return this.causes.filter((e=>"label"===e.type))}ui(e){const t=new BO.ModerationUI;for(const r of this.causes)if("blocking"===r.type||"blocked-by"===r.type||"block-other"===r.type){if(this.isMe)continue;("profileList"===e||"contentList"===e)&&t.filters.push(r),r.downgraded||("blur"===mr.BLOCK_BEHAVIOR[e]?(t.noOverride=!0,t.blurs.push(r)):"alert"===mr.BLOCK_BEHAVIOR[e]?t.alerts.push(r):"inform"===mr.BLOCK_BEHAVIOR[e]&&t.informs.push(r))}else if("muted"===r.type){if(this.isMe)continue;("profileList"===e||"contentList"===e)&&t.filters.push(r),r.downgraded||("blur"===mr.MUTE_BEHAVIOR[e]?t.blurs.push(r):"alert"===mr.MUTE_BEHAVIOR[e]?t.alerts.push(r):"inform"===mr.MUTE_BEHAVIOR[e]&&t.informs.push(r))}else if("mute-word"===r.type){if(this.isMe)continue;"contentList"===e&&t.filters.push(r),r.downgraded||("blur"===mr.MUTEWORD_BEHAVIOR[e]?t.blurs.push(r):"alert"===mr.MUTEWORD_BEHAVIOR[e]?t.alerts.push(r):"inform"===mr.MUTEWORD_BEHAVIOR[e]&&t.informs.push(r))}else"hidden"===r.type?(("profileList"===e||"contentList"===e)&&t.filters.push(r),r.downgraded||("blur"===mr.HIDE_BEHAVIOR[e]?t.blurs.push(r):"alert"===mr.HIDE_BEHAVIOR[e]?t.alerts.push(r):"inform"===mr.HIDE_BEHAVIOR[e]&&t.informs.push(r))):"label"===r.type&&("profileList"===e&&"account"===r.target?"hide"===r.setting&&!this.isMe&&t.filters.push(r):"contentList"===e&&("account"===r.target||"content"===r.target)&&"hide"===r.setting&&!this.isMe&&t.filters.push(r),r.downgraded||("blur"===r.behavior[e]?(t.blurs.push(r),r.noOverride&&!this.isMe&&(t.noOverride=!0)):"alert"===r.behavior[e]?t.alerts.push(r):"inform"===r.behavior[e]&&t.informs.push(r)));return t.filters.sort(vf),t.blurs.sort(vf),t}setDid(e){this.did=e}setIsMe(e){this.isMe=e}addHidden(e){e&&this.causes.push({type:"hidden",source:{type:"user"},priority:6})}addMutedWord(e){e&&this.causes.push({type:"mute-word",source:{type:"user"},priority:6})}addBlocking(e){e&&this.causes.push({type:"blocking",source:{type:"user"},priority:3})}addBlockingByList(e){e&&this.causes.push({type:"blocking",source:{type:"list",list:e},priority:3})}addBlockedBy(e){e&&this.causes.push({type:"blocked-by",source:{type:"user"},priority:4})}addBlockOther(e){e&&this.causes.push({type:"block-other",source:{type:"user"},priority:4})}addLabel(e,t,r){const i=mr.CUSTOM_LABEL_VALUE_RE.test(t.val)&&r.labelDefs?.[t.src]?.find((e=>e.identifier===t.val))||Ef.LABELS[t.val];if(!i)return;const o=t.src===this.did,n=o?void 0:r.prefs.labelers.find((e=>e.did===t.src));if(!o&&!n||o&&i.flags.includes("no-self"))return;let s,a=i.defaultSetting||"ignore";if(i.configurable?i.flags.includes("adult")&&!r.prefs.adultContentEnabled?a="hide":n?.labels[i.identifier]?a=n?.labels[i.identifier]:r.prefs.labels[i.identifier]&&(a=r.prefs.labels[i.identifier]):a=i.defaultSetting||"hide","ignore"===a||i.flags.includes("unauthed")&&r.userDid)return;const d=IO(i.behaviors[e]);s=i.flags.includes("no-override")||i.flags.includes("adult")&&!r.prefs.adultContentEnabled?1:"hide"===a?2:d===cn.High?5:d===cn.Medium?7:8;let c=!1;(i.flags.includes("no-override")||i.flags.includes("adult")&&!r.prefs.adultContentEnabled)&&(c=!0),this.causes.push({type:"label",source:o||!n?{type:"user"}:{type:"labeler",did:n.did},label:t,labelDef:i,target:e,setting:a,behavior:i.behaviors[e]||mr.NOOP_BEHAVIOR,noOverride:c,priority:s})}addMuted(e){e&&this.causes.push({type:"muted",source:{type:"user"},priority:6})}addMutedByList(e){e&&this.causes.push({type:"muted",source:{type:"list",list:e},priority:6})}}function IO(e){return e?"blur"===e.profileView||"blur"===e.contentView?cn.High:"blur"===e.contentList||"blur"===e.contentMedia?cn.Medium:cn.Low:cn.Low}function vf(e,t){return e.priority-t.priority}zr.ModerationDecision=sd,Object.defineProperty(xi,"__esModule",{value:!0}),xi.filterAccountLabels=xi.decideAccount=void 0;const UO=zr;function OO(e,t){const r=new UO.ModerationDecision;r.setDid(e.did),r.setIsMe(e.did===t.userDid),e.viewer?.muted&&(e.viewer?.mutedByList?r.addMutedByList(e.viewer?.mutedByList):r.addMuted(e.viewer?.muted)),e.viewer?.blocking&&(e.viewer?.blockingByList?r.addBlockingByList(e.viewer?.blockingByList):r.addBlocking(e.viewer?.blocking)),r.addBlockedBy(e.viewer?.blockedBy);for(const i of jm(e.labels))r.addLabel("account",i,t);return r}function jm(e){return e?e.filter((e=>!e.uri.endsWith("/app.bsky.actor.profile/self")||"!no-unauthenticated"===e.val)):[]}xi.decideAccount=OO,xi.filterAccountLabels=jm;var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.filterProfileLabels=Ei.decideProfile=void 0;const KO=zr;function MO(e,t){const r=new KO.ModerationDecision;r.setDid(e.did),r.setIsMe(e.did===t.userDid);for(const i of Fm(e.labels))r.addLabel("profile",i,t);return r}function Fm(e){return e?e.filter((e=>e.uri.endsWith("/app.bsky.actor.profile/self"))):[]}Ei.decideProfile=MO,Ei.filterProfileLabels=Fm;var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.decideNotification=void 0;const Rf=zr,NO=xi,VO=Ei;function jO(e,t){const r=new Rf.ModerationDecision;if(r.setDid(e.author.did),r.setIsMe(e.author.did===t.userDid),e.labels?.length)for(const i of e.labels)r.addLabel("content",i,t);return Rf.ModerationDecision.merge(r,(0,NO.decideAccount)(e.author,t),(0,VO.decideProfile)(e.author,t))}Gu.decideNotification=jO;var qu={},$l={};Object.defineProperty($l,"__esModule",{value:!0}),$l.hasMutedWord=void 0;const FO=x,Af={LEADING_TRAILING_PUNCTUATION:/(?:^\p{P}+|\p{P}+$)/gu,ESCAPE:/[[\]{}()*+?.\\^$|\s]/g,SEPARATORS:/[/\-()[\]_]+/g,WORD_BOUNDARY:/[\s\n\t\r\f\v]+?/g},$O=["ja","zh","ko","th","vi"];function GO({mutedWords:e,text:t,facets:r,outlineTags:i,languages:o,actor:n}){const s=$O.includes(o?.[0]||""),a=[].concat(i||[]).concat((r||[]).flatMap((e=>e.features.filter(FO.AppBskyRichtextFacet.isTag).map((e=>e.tag))))).map((e=>e.toLowerCase()));for(const r of e){const e=r.value.toLowerCase(),i=t.toLowerCase();if(r.expiresAt&&r.expiresAt<(new Date).toISOString()||"exclude-following"===r.actorTarget&&n?.viewer?.following)continue;if(a.includes(e))return!0;if(!r.targets.includes("content"))continue;if((1===e.length||s)&&i.includes(e))return!0;if(e.length>i.length)continue;if(e===i||/(?:\s|\p{P})+?/u.test(e)&&i.includes(e))return!0;const o=i.split(Af.WORD_BOUNDARY);for(const t of o){if(t===e)return!0;const r=t.replace(Af.LEADING_TRAILING_PUNCTUATION,"");if(e===r)return!0;if(!(e.length>r.length)&&/\p{P}+/u.test(r)){const t=r.replace(/\p{P}+/gu," ");if(t===e||t.replace(/\s/gu,"")===e)return!0;const i=r.split(/\p{P}+/u);for(const t of i)if(t===e)return!0}}}return!1}$l.hasMutedWord=GO,Object.defineProperty(qu,"__esModule",{value:!0}),qu.decidePost=void 0;const va=zr,lt=x,Qr=$l,$m=xi,Gm=Ei;function qO(e,t){const r=new va.ModerationDecision;if(r.setDid(e.author.did),r.setIsMe(e.author.did===t.userDid),e.labels?.length)for(const i of e.labels)r.addLabel("content",i,t);let i;return r.addHidden(zO(e,t.prefs.hiddenPosts)),r.isMe||r.addMutedWord(XO(e,t.prefs.mutedWords)),e.embed&&(lt.AppBskyEmbedRecord.isViewRecord(e.embed.record)?i=_f(e.embed.record,t):lt.AppBskyEmbedRecordWithMedia.isView(e.embed)&&lt.AppBskyEmbedRecord.isViewRecord(e.embed.record.record)?i=_f(e.embed.record.record,t):lt.AppBskyEmbedRecord.isViewBlocked(e.embed.record)?i=wf(e.embed.record,t):lt.AppBskyEmbedRecordWithMedia.isView(e.embed)&&lt.AppBskyEmbedRecord.isViewBlocked(e.embed.record.record)&&(i=wf(e.embed.record.record,t))),va.ModerationDecision.merge(r,i?.downgrade(),(0,$m.decideAccount)(e.author,t),(0,Gm.decideProfile)(e.author,t))}function _f(e,t){const r=new va.ModerationDecision;if(r.setDid(e.author.did),r.setIsMe(e.author.did===t.userDid),e.labels?.length)for(const i of e.labels)r.addLabel("content",i,t);return va.ModerationDecision.merge(r,(0,$m.decideAccount)(e.author,t),(0,Gm.decideProfile)(e.author,t))}function wf(e,t){const r=new va.ModerationDecision;return r.setDid(e.author.did),r.setIsMe(e.author.did===t.userDid),e.author.viewer?.muted&&(e.author.viewer?.mutedByList?r.addMutedByList(e.author.viewer?.mutedByList):r.addMuted(e.author.viewer?.muted)),e.author.viewer?.blocking&&(e.author.viewer?.blockingByList?r.addBlockingByList(e.author.viewer?.blockingByList):r.addBlocking(e.author.viewer?.blocking)),r.addBlockedBy(e.author.viewer?.blockedBy),r}function zO(e,t){return!!t?.length&&!!(t.includes(e.uri)||e.embed&&(lt.AppBskyEmbedRecord.isViewRecord(e.embed.record)&&t.includes(e.embed.record.uri)||lt.AppBskyEmbedRecordWithMedia.isView(e.embed)&&lt.AppBskyEmbedRecord.isViewRecord(e.embed.record.record)&&t.includes(e.embed.record.record.uri)))}function XO(e,t){if(!t?.length)return!1;const r=e.author;if(lt.AppBskyFeedPost.isRecord(e.record)){if((0,Qr.hasMutedWord)({mutedWords:t,text:e.record.text,facets:e.record.facets,outlineTags:e.record.tags,languages:e.record.langs,actor:r}))return!0;if(e.record.embed&&lt.AppBskyEmbedImages.isMain(e.record.embed))for(const i of e.record.embed.images)if((0,Qr.hasMutedWord)({mutedWords:t,text:i.alt,languages:e.record.langs,actor:r}))return!0}if(e.embed)if(lt.AppBskyEmbedRecord.isViewRecord(e.embed.record)){if(lt.AppBskyFeedPost.isRecord(e.embed.record.value)){const r=e.embed.record.value,i=e.embed.record.author;if((0,Qr.hasMutedWord)({mutedWords:t,text:r.text,facets:r.facets,outlineTags:r.tags,languages:r.langs,actor:i}))return!0;if(lt.AppBskyEmbedImages.isMain(r.embed))for(const e of r.embed.images)if((0,Qr.hasMutedWord)({mutedWords:t,text:e.alt,languages:r.langs,actor:i}))return!0;if(lt.AppBskyEmbedExternal.isMain(r.embed)){const{external:e}=r.embed;if((0,Qr.hasMutedWord)({mutedWords:t,text:e.title+" "+e.description,languages:[],actor:i}))return!0}if(lt.AppBskyEmbedRecordWithMedia.isMain(r.embed)){if(lt.AppBskyEmbedExternal.isMain(r.embed.media)){const{external:e}=r.embed.media;if((0,Qr.hasMutedWord)({mutedWords:t,text:e.title+" "+e.description,languages:[],actor:i}))return!0}if(lt.AppBskyEmbedImages.isMain(r.embed.media))for(const e of r.embed.media.images)if((0,Qr.hasMutedWord)({mutedWords:t,text:e.alt,languages:lt.AppBskyFeedPost.isRecord(r.record)?r.langs:[],actor:i}))return!0}}}else if(lt.AppBskyEmbedExternal.isView(e.embed)){const{external:i}=e.embed;if((0,Qr.hasMutedWord)({mutedWords:t,text:i.title+" "+i.description,languages:[],actor:r}))return!0}else if(lt.AppBskyEmbedRecordWithMedia.isView(e.embed)&&lt.AppBskyEmbedRecord.isViewRecord(e.embed.record.record)){const r=e.embed.record.record.author;if(lt.AppBskyFeedPost.isRecord(e.embed.record.record.value)){const i=e.embed.record.record.value;if((0,Qr.hasMutedWord)({mutedWords:t,text:i.text,facets:i.facets,outlineTags:i.tags,languages:i.langs,actor:r}))return!0}if(lt.AppBskyEmbedImages.isView(e.embed.media))for(const i of e.embed.media.images)if((0,Qr.hasMutedWord)({mutedWords:t,text:i.alt,languages:lt.AppBskyFeedPost.isRecord(e.record)?e.record.langs:[],actor:r}))return!0}return!1}qu.decidePost=qO;var zu={};Object.defineProperty(zu,"__esModule",{value:!0}),zu.decideFeedGenerator=void 0;const Tf=zr,HO=xi,ZO=Ei;function WO(e,t){const r=new Tf.ModerationDecision;if(r.setDid(e.creator.did),r.setIsMe(e.creator.did===t.userDid),e.labels?.length)for(const i of e.labels)r.addLabel("content",i,t);return Tf.ModerationDecision.merge(r,(0,HO.decideAccount)(e.creator,t),(0,ZO.decideProfile)(e.creator,t))}zu.decideFeedGenerator=WO;var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.decideUserList=void 0;const YO=as,Sf=zr,JO=xi,QO=Ei;function eK(e,t){const r=new Sf.ModerationDecision,i=tK(e.creator)?e.creator:void 0;if(i){if(r.setDid(i.did),r.setIsMe(i.did===t.userDid),e.labels?.length)for(const i of e.labels)r.addLabel("content",i,t);return Sf.ModerationDecision.merge(r,(0,JO.decideAccount)(i,t),(0,QO.decideProfile)(i,t))}const o=new YO.AtUri(e.uri).hostname;if(r.setDid(o),r.setIsMe(o===t.userDid),e.labels?.length)for(const i of e.labels)r.addLabel("content",i,t);return r}function tK(e){return e&&"object"==typeof e&&"did"in e}Xu.decideUserList=eK;var ui={};Object.defineProperty(ui,"__esModule",{value:!0}),ui.interpretLabelValueDefinitions=ui.interpretLabelValueDefinition=ui.isQuotedPostWithMedia=ui.isQuotedPost=void 0;const ad=x;function rK(e){return!(!e||!ad.AppBskyEmbedRecord.isView(e))}function iK(e){return!(!e||!ad.AppBskyEmbedRecordWithMedia.isView(e))}function qm(e,t){const r={account:{},profile:{},content:{}},i="alert"===e.severity?"alert":"inform"===e.severity?"inform":void 0;"content"===e.blurs?(r.account.profileList=i,r.account.profileView=i,r.account.contentList="blur",r.account.contentView=e.adultOnly?"blur":i,r.profile.profileList=i,r.profile.profileView=i,r.content.contentList="blur",r.content.contentView=e.adultOnly?"blur":i):"media"===e.blurs?(r.account.profileList=i,r.account.profileView=i,r.account.avatar="blur",r.account.banner="blur",r.profile.profileList=i,r.profile.profileView=i,r.profile.avatar="blur",r.profile.banner="blur",r.content.contentMedia="blur"):"none"===e.blurs&&(r.account.profileList=i,r.account.profileView=i,r.account.contentList=i,r.account.contentView=i,r.profile.profileList=i,r.profile.profileView=i,r.content.contentList=i,r.content.contentView=i);let o="warn";("hide"===e.defaultSetting||"ignore"===e.defaultSetting)&&(o=e.defaultSetting);const n=["no-self"];return e.adultOnly&&n.push("adult"),{...e,definedBy:t,configurable:!0,defaultSetting:o,flags:n,behaviors:r}}function nK(e){return(e.policies?.labelValueDefinitions||[]).filter((e=>ad.ComAtprotoLabelDefs.validateLabelValueDefinition(e).success)).map((t=>qm(t,e.creator.did)))}ui.isQuotedPost=rK,ui.isQuotedPostWithMedia=iK,ui.interpretLabelValueDefinition=qm,ui.interpretLabelValueDefinitions=nK,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.moderateUserList=e.moderateFeedGenerator=e.moderateNotification=e.moderatePost=e.moderateProfile=e.interpretLabelValueDefinitions=e.interpretLabelValueDefinition=e.hasMutedWord=e.ModerationDecision=e.ModerationUI=void 0;const t=xi,r=Ei,i=Gu,o=qu,n=zu,s=Xu,a=zr;var d=Fl;Object.defineProperty(e,"ModerationUI",{enumerable:!0,get:function(){return d.ModerationUI}});var c=zr;Object.defineProperty(e,"ModerationDecision",{enumerable:!0,get:function(){return c.ModerationDecision}});var l=$l;Object.defineProperty(e,"hasMutedWord",{enumerable:!0,get:function(){return l.hasMutedWord}});var p=ui;Object.defineProperty(e,"interpretLabelValueDefinition",{enumerable:!0,get:function(){return p.interpretLabelValueDefinition}}),Object.defineProperty(e,"interpretLabelValueDefinitions",{enumerable:!0,get:function(){return p.interpretLabelValueDefinitions}}),e.moderateProfile=function(e,i){return a.ModerationDecision.merge((0,t.decideAccount)(e,i),(0,r.decideProfile)(e,i))},e.moderatePost=function(e,t){return(0,o.decidePost)(e,t)},e.moderateNotification=function(e,t){return(0,i.decideNotification)(e,t)},e.moderateFeedGenerator=function(e,t){return(0,n.decideFeedGenerator)(e,t)},e.moderateUserList=function(e,t){return(0,s.decideUserList)(e,t)}}(nd);var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.mock=void 0;const ta="bafyreiclp443lavogvhj3d2ob2cxbfuscni2k5jk7bebjzg7khl3esabwq";Hu.mock={post:({text:e,facets:t,reply:r,embed:i})=>({$type:"app.bsky.feed.post",text:e,facets:t,reply:r,embed:i,langs:["en"],createdAt:(new Date).toISOString()}),postView:({record:e,author:t,embed:r,replyCount:i,repostCount:o,likeCount:n,viewer:s,labels:a})=>({$type:"app.bsky.feed.defs#postView",uri:`at://${t.did}/app.bsky.feed.post/fake`,cid:ta,author:t,record:e,embed:r,replyCount:i,repostCount:o,likeCount:n,indexedAt:(new Date).toISOString(),viewer:s,labels:a}),embedRecordView:({record:e,author:t,labels:r})=>({$type:"app.bsky.embed.record#view",record:{$type:"app.bsky.embed.record#viewRecord",uri:`at://${t.did}/app.bsky.feed.post/fake`,cid:ta,author:t,value:e,labels:r,indexedAt:(new Date).toISOString()}}),profileViewBasic:({handle:e,displayName:t,description:r,viewer:i,labels:o})=>({did:`did:web:${e}`,handle:e,displayName:t,description:r,viewer:i,labels:o}),actorViewerState:({muted:e,mutedByList:t,blockedBy:r,blocking:i,blockingByList:o,following:n,followedBy:s})=>({muted:e,mutedByList:t,blockedBy:r,blocking:i,blockingByList:o,following:n,followedBy:s}),listViewBasic:({name:e})=>({uri:"at://did:plc:fake/app.bsky.graph.list/fake",cid:ta,name:e,purpose:"app.bsky.graph.defs#modlist",indexedAt:(new Date).toISOString()}),replyNotification:({author:e,record:t,labels:r})=>({uri:`at://${e.did}/app.bsky.feed.post/fake`,cid:ta,author:e,reason:"reply",reasonSubject:`at://${e.did}/app.bsky.feed.post/fake-parent`,record:t,isRead:!1,indexedAt:(new Date).toISOString(),labels:r}),followNotification:({author:e,subjectDid:t,labels:r})=>({uri:`at://${e.did}/app.bsky.graph.follow/fake`,cid:ta,author:e,reason:"follow",record:{$type:"app.bsky.graph.follow",createdAt:(new Date).toISOString(),subject:t},isRead:!1,indexedAt:(new Date).toISOString(),labels:r}),label:({val:e,uri:t,src:r})=>({src:r||"did:plc:fake-labeler",uri:t,val:e,cts:(new Date).toISOString()})};var Di,an,Zu={},od={},ei=se&&se.__classPrivateFieldGet||function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)},yc=se&&se.__classPrivateFieldSet||function(e,t,r,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,r):o?o.value=r:t.set(e,r),r};Object.defineProperty(od,"__esModule",{value:!0});class sK{constructor(){Di.set(this,!1),an.set(this,new Set)}get acquired(){return ei(this,Di,"f")}acquireAsync({timeout:e}={}){if(!ei(this,Di,"f"))return yc(this,Di,!0,"f"),Promise.resolve();if(null==e)return new Promise((e=>{ei(this,an,"f").add(e)}));let t,r;return Promise.race([new Promise((e=>{t=()=>{clearTimeout(r),e()},ei(this,an,"f").add(t)})),new Promise(((i,o)=>{r=setTimeout((()=>{ei(this,an,"f").delete(t),o(new Error("Timed out waiting for lock"))}),e)}))])}tryAcquire(){return!ei(this,Di,"f")&&(yc(this,Di,!0,"f"),!0)}release(){if(!ei(this,Di,"f"))throw new Error("Cannot release an unacquired lock");if(ei(this,an,"f").size>0){const[e]=ei(this,an,"f");ei(this,an,"f").delete(e),e()}else yc(this,Di,!1,"f")}}od.default=sK,Di=new WeakMap,an=new WeakMap;var aK=se&&se.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.BskyAgent=void 0;const ms=as,on=vi,oK=aK(od),lK=js,oe=x,uK=En,ln=Nr,cK=nd,Cf={hideReplies:!1,hideRepliesByUnfollowed:!0,hideRepliesByLikeCount:0,hideReposts:!1,hideQuotePosts:!1},dK={sort:"oldest",prioritizeFollowedUsers:!0};class gs extends lK.AtpAgent{constructor(){super(...arguments),Object.defineProperty(this,"_prefsLock",{enumerable:!0,configurable:!0,writable:!0,value:new oK.default}),Object.defineProperty(this,"getTimeline",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.feed.getTimeline(e,t)}),Object.defineProperty(this,"getAuthorFeed",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.feed.getAuthorFeed(e,t)}),Object.defineProperty(this,"getActorLikes",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.feed.getActorLikes(e,t)}),Object.defineProperty(this,"getPostThread",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.feed.getPostThread(e,t)}),Object.defineProperty(this,"getPost",{enumerable:!0,configurable:!0,writable:!0,value:e=>this.api.app.bsky.feed.post.get(e)}),Object.defineProperty(this,"getPosts",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.feed.getPosts(e,t)}),Object.defineProperty(this,"getLikes",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.feed.getLikes(e,t)}),Object.defineProperty(this,"getRepostedBy",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.feed.getRepostedBy(e,t)}),Object.defineProperty(this,"getFollows",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.graph.getFollows(e,t)}),Object.defineProperty(this,"getFollowers",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.graph.getFollowers(e,t)}),Object.defineProperty(this,"getProfile",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.actor.getProfile(e,t)}),Object.defineProperty(this,"getProfiles",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.actor.getProfiles(e,t)}),Object.defineProperty(this,"getSuggestions",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.actor.getSuggestions(e,t)}),Object.defineProperty(this,"searchActors",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.actor.searchActors(e,t)}),Object.defineProperty(this,"searchActorsTypeahead",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.actor.searchActorsTypeahead(e,t)}),Object.defineProperty(this,"listNotifications",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.notification.listNotifications(e,t)}),Object.defineProperty(this,"countUnreadNotifications",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.notification.getUnreadCount(e,t)}),Object.defineProperty(this,"getLabelers",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>this.api.app.bsky.labeler.getServices(e,t)})}clone(){const e=new gs({service:this.service});return this.copyInto(e),e}get app(){return this.api.app}async getLabelDefinitions(e){let t=gs.appLabelers;t=hK(e)?t.concat(e.moderationPrefs.labelers.map((e=>e.did))):zm(e)?t.concat(e.labelers.map((e=>e.did))):t.concat(e);const r=await this.getLabelers({dids:t,detailed:!0}),i={};if(r.data)for(const e of r.data.views)i[e.creator.did]=(0,cK.interpretLabelValueDefinitions)(e);return i}async post(e){if(!this.session)throw new Error("Not logged in");return e.createdAt=e.createdAt||(new Date).toISOString(),this.api.app.bsky.feed.post.create({repo:this.session.did},e)}async deletePost(e){if(!this.session)throw new Error("Not logged in");const t=new ms.AtUri(e);return await this.api.app.bsky.feed.post.delete({repo:t.hostname,rkey:t.rkey})}async like(e,t){if(!this.session)throw new Error("Not logged in");return await this.api.app.bsky.feed.like.create({repo:this.session.did},{subject:{uri:e,cid:t},createdAt:(new Date).toISOString()})}async deleteLike(e){if(!this.session)throw new Error("Not logged in");const t=new ms.AtUri(e);return await this.api.app.bsky.feed.like.delete({repo:t.hostname,rkey:t.rkey})}async repost(e,t){if(!this.session)throw new Error("Not logged in");return await this.api.app.bsky.feed.repost.create({repo:this.session.did},{subject:{uri:e,cid:t},createdAt:(new Date).toISOString()})}async deleteRepost(e){if(!this.session)throw new Error("Not logged in");const t=new ms.AtUri(e);return await this.api.app.bsky.feed.repost.delete({repo:t.hostname,rkey:t.rkey})}async follow(e){if(!this.session)throw new Error("Not logged in");return await this.api.app.bsky.graph.follow.create({repo:this.session.did},{subject:e,createdAt:(new Date).toISOString()})}async deleteFollow(e){if(!this.session)throw new Error("Not logged in");const t=new ms.AtUri(e);return await this.api.app.bsky.graph.follow.delete({repo:t.hostname,rkey:t.rkey})}async upsertProfile(e){if(!this.session)throw new Error("Not logged in");let t=5;for(;t>=0;){const r=await this.com.atproto.repo.getRecord({repo:this.session.did,collection:"app.bsky.actor.profile",rkey:"self"}).catch((e=>{})),i=await e(r?.data.value);i&&(i.$type="app.bsky.actor.profile");const o=oe.AppBskyActorProfile.validateRecord(i);if(!o.success)throw o.error;try{await this.com.atproto.repo.putRecord({repo:this.session.did,collection:"app.bsky.actor.profile",rkey:"self",record:i,swapRecord:r?.data.cid||null})}catch(e){if(t>0&&e instanceof oe.ComAtprotoRepoPutRecord.InvalidSwapError){t--;continue}throw e}break}}async mute(e){return this.api.app.bsky.graph.muteActor({actor:e})}async unmute(e){return this.api.app.bsky.graph.unmuteActor({actor:e})}async muteModList(e){return this.api.app.bsky.graph.muteActorList({list:e})}async unmuteModList(e){return this.api.app.bsky.graph.unmuteActorList({list:e})}async blockModList(e){if(!this.session)throw new Error("Not logged in");return await this.api.app.bsky.graph.listblock.create({repo:this.session.did},{subject:e,createdAt:(new Date).toISOString()})}async unblockModList(e){if(!this.session)throw new Error("Not logged in");const t=await this.api.app.bsky.graph.getList({list:e,limit:1});if(!t.data.list.viewer?.blocked)return;const{rkey:r}=new ms.AtUri(t.data.list.viewer.blocked);return await this.api.app.bsky.graph.listblock.delete({repo:this.session.did,rkey:r})}async updateSeenNotifications(e){return e=e||(new Date).toISOString(),this.api.app.bsky.notification.updateSeen({seenAt:e})}async getPreferences(){const e={feeds:{saved:void 0,pinned:void 0},savedFeeds:void 0,feedViewPrefs:{home:{...Cf}},threadViewPrefs:{...dK},moderationPrefs:{adultContentEnabled:!1,labels:{...uK.DEFAULT_LABEL_SETTINGS},labelers:gs.appLabelers.map((e=>({did:e,labels:{}}))),mutedWords:[],hiddenPosts:[]},birthDate:void 0,interests:{tags:[]},bskyAppState:{queuedNudges:[],activeProgressGuide:void 0}},t=await this.app.bsky.actor.getPreferences({}),r=[];for(const i of t.data.preferences)if(oe.AppBskyActorDefs.isAdultContentPref(i)&&oe.AppBskyActorDefs.validateAdultContentPref(i).success)e.moderationPrefs.adultContentEnabled=i.enabled;else if(oe.AppBskyActorDefs.isContentLabelPref(i)&&oe.AppBskyActorDefs.validateContentLabelPref(i).success){const e=fK(i);r.push(e)}else if(oe.AppBskyActorDefs.isLabelersPref(i)&&oe.AppBskyActorDefs.validateLabelersPref(i).success)e.moderationPrefs.labelers=gs.appLabelers.map((e=>({did:e,labels:{}}))).concat(i.labelers.map((e=>({...e,labels:{}}))));else if(oe.AppBskyActorDefs.isSavedFeedsPrefV2(i)&&oe.AppBskyActorDefs.validateSavedFeedsPrefV2(i).success)e.savedFeeds=i.items;else if(oe.AppBskyActorDefs.isSavedFeedsPref(i)&&oe.AppBskyActorDefs.validateSavedFeedsPref(i).success)e.feeds.saved=i.saved,e.feeds.pinned=i.pinned;else if(oe.AppBskyActorDefs.isPersonalDetailsPref(i)&&oe.AppBskyActorDefs.validatePersonalDetailsPref(i).success)i.birthDate&&(e.birthDate=new Date(i.birthDate));else if(oe.AppBskyActorDefs.isFeedViewPref(i)&&oe.AppBskyActorDefs.validateFeedViewPref(i).success){const{$type:t,feed:r,...o}=i;e.feedViewPrefs[i.feed]={...Cf,...o}}else if(oe.AppBskyActorDefs.isThreadViewPref(i)&&oe.AppBskyActorDefs.validateThreadViewPref(i).success){const{$type:t,...r}=i;e.threadViewPrefs={...e.threadViewPrefs,...r}}else if(oe.AppBskyActorDefs.isInterestsPref(i)&&oe.AppBskyActorDefs.validateInterestsPref(i).success){const{$type:t,...r}=i;e.interests={...e.interests,...r}}else if(oe.AppBskyActorDefs.isMutedWordsPref(i)&&oe.AppBskyActorDefs.validateMutedWordsPref(i).success){const{$type:t,...r}=i;e.moderationPrefs.mutedWords=r.items,e.moderationPrefs.mutedWords.length&&(e.moderationPrefs.mutedWords=e.moderationPrefs.mutedWords.map((e=>(e.actorTarget=e.actorTarget||"all",e))))}else if(oe.AppBskyActorDefs.isHiddenPostsPref(i)&&oe.AppBskyActorDefs.validateHiddenPostsPref(i).success){const{$type:t,...r}=i;e.moderationPrefs.hiddenPosts=r.items}else if(oe.AppBskyActorDefs.isBskyAppStatePref(i)&&oe.AppBskyActorDefs.validateBskyAppStatePref(i).success){const{$type:t,...r}=i;e.bskyAppState.queuedNudges=r.queuedNudges||[],e.bskyAppState.activeProgressGuide=r.activeProgressGuide}if(void 0===e.savedFeeds){const{saved:t,pinned:r}=e.feeds;if(t&&r){const i=new Map;i.set("timeline",{id:on.TID.nextStr(),type:"timeline",value:"following",pinned:!0});for(const e of r){const t=(0,ln.getSavedFeedType)(e);"unknown"!==t&&i.set(e,{id:on.TID.nextStr(),type:t,value:e,pinned:!0})}for(const e of t)if(!i.has(e)){const t=(0,ln.getSavedFeedType)(e);if("unknown"===t)continue;i.set(e,{id:on.TID.nextStr(),type:t,value:e,pinned:!1})}e.savedFeeds=Array.from(i.values())}else e.savedFeeds=[{id:on.TID.nextStr(),type:"timeline",value:"following",pinned:!0}];await this.overwriteSavedFeeds(e.savedFeeds)}for(const t of r)if(t.labelerDid){const r=e.moderationPrefs.labelers.find((e=>e.did===t.labelerDid));if(!r)continue;r.labels[t.label]=t.visibility}else e.moderationPrefs.labels[t.label]=t.visibility;return e.moderationPrefs.labels=pK(e.moderationPrefs.labels),this.configureLabelersHeader(bc(t.data.preferences)),e}async overwriteSavedFeeds(e){e.forEach(ln.validateSavedFeed);const t=new Map;return e.forEach((e=>{t.has(e.id)&&t.delete(e.id),t.set(e.id,e)})),su(this,(()=>Array.from(t.values())))}async updateSavedFeeds(e){return e.map(ln.validateSavedFeed),su(this,(t=>t.map((t=>{const r=e.find((e=>t.id===e.id));return r?{...t,pinned:r.pinned}:t}))))}async addSavedFeeds(e){const t=e.map((e=>({...e,id:on.TID.nextStr()})));return t.forEach(ln.validateSavedFeed),su(this,(e=>[...e,...t]))}async removeSavedFeeds(e){return su(this,(t=>[...t.filter((t=>!e.find((e=>t.id===e))))]))}async setSavedFeeds(e,t){return ra(this,(()=>({saved:e,pinned:t})))}async addSavedFeed(e){return ra(this,((t,r)=>({saved:[...t.filter((t=>t!==e)),e],pinned:r})))}async removeSavedFeed(e){return ra(this,((t,r)=>({saved:t.filter((t=>t!==e)),pinned:r.filter((t=>t!==e))})))}async addPinnedFeed(e){return ra(this,((t,r)=>({saved:[...t.filter((t=>t!==e)),e],pinned:[...r.filter((t=>t!==e)),e]})))}async removePinnedFeed(e){return ra(this,((t,r)=>({saved:t,pinned:r.filter((t=>t!==e))})))}async setAdultContentEnabled(e){await Gt(this,(t=>{let r=t.findLast((e=>oe.AppBskyActorDefs.isAdultContentPref(e)&&oe.AppBskyActorDefs.validateAdultContentPref(e).success));return r?r.enabled=e:r={$type:"app.bsky.actor.defs#adultContentPref",enabled:e},t.filter((e=>!oe.AppBskyActorDefs.isAdultContentPref(e))).concat([r])}))}async setContentLabelPref(e,t,r){r&&(0,ms.ensureValidDid)(r),await Gt(this,(i=>{let o,n=i.findLast((t=>oe.AppBskyActorDefs.isContentLabelPref(t)&&oe.AppBskyActorDefs.validateContentLabelPref(t).success&&t.label===e&&t.labelerDid===r));if(n?n.visibility=t:n={$type:"app.bsky.actor.defs#contentLabelPref",label:e,labelerDid:r,visibility:t},oe.AppBskyActorDefs.isContentLabelPref(n)&&!n.labelerDid){const e={"graphic-media":"gore",porn:"nsfw",sexual:"suggestive"}[n.label];e&&(o=i.findLast((t=>oe.AppBskyActorDefs.isContentLabelPref(t)&&oe.AppBskyActorDefs.validateContentLabelPref(t).success&&t.label===e&&void 0===t.labelerDid)),o?o.visibility=t:o={$type:"app.bsky.actor.defs#contentLabelPref",label:e,labelerDid:void 0,visibility:t})}return i.filter((t=>!oe.AppBskyActorDefs.isContentLabelPref(t)||!(t.label===e&&t.labelerDid===r))).concat([n]).filter((e=>!o||(!oe.AppBskyActorDefs.isContentLabelPref(e)||!(e.label===o.label&&void 0===e.labelerDid)))).concat(o?[o]:[])}))}async addLabeler(e){const t=await Gt(this,(t=>{let r=t.findLast((e=>oe.AppBskyActorDefs.isLabelersPref(e)&&oe.AppBskyActorDefs.validateLabelersPref(e).success));if(r||(r={$type:"app.bsky.actor.defs#labelersPref",labelers:[]}),oe.AppBskyActorDefs.isLabelersPref(r)){let t=r.labelers.find((t=>t.did===e));t||(t={did:e},r.labelers.push(t))}return t.filter((e=>!oe.AppBskyActorDefs.isLabelersPref(e))).concat([r])}));this.configureLabelersHeader(bc(t))}async removeLabeler(e){const t=await Gt(this,(t=>{let r=t.findLast((e=>oe.AppBskyActorDefs.isLabelersPref(e)&&oe.AppBskyActorDefs.validateLabelersPref(e).success));return r||(r={$type:"app.bsky.actor.defs#labelersPref",labelers:[]}),oe.AppBskyActorDefs.isLabelersPref(r)&&(r.labelers=r.labelers.filter((t=>t.did!==e))),t.filter((e=>!oe.AppBskyActorDefs.isLabelersPref(e))).concat([r])}));this.configureLabelersHeader(bc(t))}async setPersonalDetails({birthDate:e}){e=e instanceof Date?e.toISOString():e,await Gt(this,(t=>{let r=t.findLast((e=>oe.AppBskyActorDefs.isPersonalDetailsPref(e)&&oe.AppBskyActorDefs.validatePersonalDetailsPref(e).success));return r?r.birthDate=e:r={$type:"app.bsky.actor.defs#personalDetailsPref",birthDate:e},t.filter((e=>!oe.AppBskyActorDefs.isPersonalDetailsPref(e))).concat([r])}))}async setFeedViewPrefs(e,t){await Gt(this,(r=>{const i=r.findLast((t=>oe.AppBskyActorDefs.isFeedViewPref(t)&&oe.AppBskyActorDefs.validateFeedViewPref(t).success&&t.feed===e));return i&&(t={...i,...t}),r.filter((r=>!oe.AppBskyActorDefs.isFeedViewPref(t)||r.feed!==e)).concat([{...t,$type:"app.bsky.actor.defs#feedViewPref",feed:e}])}))}async setThreadViewPrefs(e){await Gt(this,(t=>{const r=t.findLast((e=>oe.AppBskyActorDefs.isThreadViewPref(e)&&oe.AppBskyActorDefs.validateThreadViewPref(e).success));return r&&(e={...r,...e}),t.filter((e=>!oe.AppBskyActorDefs.isThreadViewPref(e))).concat([{...e,$type:"app.bsky.actor.defs#threadViewPref"}])}))}async setInterestsPref(e){await Gt(this,(t=>{const r=t.findLast((e=>oe.AppBskyActorDefs.isInterestsPref(e)&&oe.AppBskyActorDefs.validateInterestsPref(e).success));return r&&(e={...r,...e}),t.filter((e=>!oe.AppBskyActorDefs.isInterestsPref(e))).concat([{...e,$type:"app.bsky.actor.defs#interestsPref"}])}))}async addMutedWord(e){const t=(0,ln.sanitizeMutedWordValue)(e.value);t&&await Gt(this,(r=>{let i=r.findLast((e=>oe.AppBskyActorDefs.isMutedWordsPref(e)&&oe.AppBskyActorDefs.validateMutedWordsPref(e).success));const o={id:on.TID.nextStr(),value:t,targets:e.targets||[],actorTarget:e.actorTarget||"all",expiresAt:e.expiresAt||void 0};return i&&oe.AppBskyActorDefs.isMutedWordsPref(i)?(i.items.push(o),i.items=gc(i.items)):i={items:[o]},r.filter((e=>!oe.AppBskyActorDefs.isMutedWordsPref(e))).concat([{...i,$type:"app.bsky.actor.defs#mutedWordsPref"}])}))}async addMutedWords(e){await Promise.all(e.map((e=>this.addMutedWord(e))))}async upsertMutedWords(e){await this.addMutedWords(e)}async updateMutedWord(e){await Gt(this,(t=>{const r=t.findLast((e=>oe.AppBskyActorDefs.isMutedWordsPref(e)&&oe.AppBskyActorDefs.validateMutedWordsPref(e).success));return r&&oe.AppBskyActorDefs.isMutedWordsPref(r)?(r.items=r.items.map((t=>{if(kf(t,e)){const r={...t,...e};return{id:t.id||on.TID.nextStr(),value:(0,ln.sanitizeMutedWordValue)(r.value)||t.value,targets:r.targets||[],actorTarget:r.actorTarget||"all",expiresAt:r.expiresAt||void 0}}return t})),r.items=gc(r.items),t.filter((e=>!oe.AppBskyActorDefs.isMutedWordsPref(e))).concat([{...r,$type:"app.bsky.actor.defs#mutedWordsPref"}])):t}))}async removeMutedWord(e){await Gt(this,(t=>{const r=t.findLast((e=>oe.AppBskyActorDefs.isMutedWordsPref(e)&&oe.AppBskyActorDefs.validateMutedWordsPref(e).success));if(r&&oe.AppBskyActorDefs.isMutedWordsPref(r)){for(let t=0;t<r.items.length;t++)if(kf(r.items[t],e)){r.items.splice(t,1);break}return r.items=gc(r.items),t.filter((e=>!oe.AppBskyActorDefs.isMutedWordsPref(e))).concat([{...r,$type:"app.bsky.actor.defs#mutedWordsPref"}])}return t}))}async removeMutedWords(e){await Promise.all(e.map((e=>this.removeMutedWord(e))))}async hidePost(e){await Lf(this,e,"hide")}async unhidePost(e){await Lf(this,e,"unhide")}async bskyAppQueueNudges(e){await Gt(this,(t=>{let r=t.findLast((e=>oe.AppBskyActorDefs.isBskyAppStatePref(e)&&oe.AppBskyActorDefs.validateBskyAppStatePref(e).success));return r=r||{},e=Array.isArray(e)?e:[e],r.queuedNudges=(r.queuedNudges||[]).concat(e),t.filter((e=>!oe.AppBskyActorDefs.isBskyAppStatePref(e))).concat([{...r,$type:"app.bsky.actor.defs#bskyAppStatePref"}])}))}async bskyAppDismissNudges(e){await Gt(this,(t=>{let r=t.findLast((e=>oe.AppBskyActorDefs.isBskyAppStatePref(e)&&oe.AppBskyActorDefs.validateBskyAppStatePref(e).success));return r=r||{},e=Array.isArray(e)?e:[e],r.queuedNudges=(r.queuedNudges||[]).filter((t=>!e.includes(t))),t.filter((e=>!oe.AppBskyActorDefs.isBskyAppStatePref(e))).concat([{...r,$type:"app.bsky.actor.defs#bskyAppStatePref"}])}))}async bskyAppSetActiveProgressGuide(e){if(e&&!oe.AppBskyActorDefs.validateBskyAppProgressGuide(e).success)throw new Error("Invalid progress guide");await Gt(this,(t=>{let r=t.findLast((e=>oe.AppBskyActorDefs.isBskyAppStatePref(e)&&oe.AppBskyActorDefs.validateBskyAppStatePref(e).success));return r=r||{},r.activeProgressGuide=e,t.filter((e=>!oe.AppBskyActorDefs.isBskyAppStatePref(e))).concat([{...r,$type:"app.bsky.actor.defs#bskyAppStatePref"}])}))}}async function Gt(e,t){try{await e._prefsLock.acquireAsync();const r=await e.app.bsky.actor.getPreferences({}),i=t(r.data.preferences);return!1===i?r.data.preferences:(await e.app.bsky.actor.putPreferences({preferences:i}),i)}finally{e._prefsLock.release()}}async function ra(e,t){let r;return await Gt(e,(e=>{let i=e.findLast((e=>oe.AppBskyActorDefs.isSavedFeedsPref(e)&&oe.AppBskyActorDefs.validateSavedFeedsPref(e).success));return i?(r=t(i.saved,i.pinned),i.saved=r.saved,i.pinned=r.pinned):(r=t([],[]),i={$type:"app.bsky.actor.defs#savedFeedsPref",saved:r.saved,pinned:r.pinned}),e.filter((e=>!oe.AppBskyActorDefs.isSavedFeedsPref(e))).concat([i])})),r}async function su(e,t){let r=[];return await Gt(e,(e=>{let i=e.findLast((e=>oe.AppBskyActorDefs.isSavedFeedsPrefV2(e)&&oe.AppBskyActorDefs.validateSavedFeedsPrefV2(e).success)),o=e.findLast((e=>oe.AppBskyActorDefs.isSavedFeedsPref(e)&&oe.AppBskyActorDefs.validateSavedFeedsPref(e).success));i?(r=t(i.items),i={...i,items:r}):(r=t([]),i={$type:"app.bsky.actor.defs#savedFeedsPrefV2",items:r});const n=i.items.filter((e=>e.pinned)),s=i.items.filter((e=>!e.pinned));i.items=n.concat(s);let a=e.filter((e=>!oe.AppBskyActorDefs.isSavedFeedsPrefV2(e))).concat(i);if(o){const{saved:e,pinned:t}=o,r=(0,ln.savedFeedsToUriArrays)(i.items.filter((e=>["feed","list"].includes(e.type))));o={...o,saved:Array.from(new Set([...e,...r.saved])),pinned:Array.from(new Set([...t,...r.pinned]))},a=a.filter((e=>!oe.AppBskyActorDefs.isSavedFeedsPref(e))).concat(o)}return a})),r}function fK(e){let t=e.visibility;return"show"===t&&(t="ignore"),{...e,visibility:t}}function pK(e){const t={...e},r={gore:"graphic-media",nsfw:"porn",suggestive:"sexual"};for(const e in t){const i=r[e];i&&(t[i]=t[e])}return t}function bc(e){const t=e.findLast((e=>oe.AppBskyActorDefs.isLabelersPref(e)&&oe.AppBskyActorDefs.validateLabelersPref(e).success));let r=[];return t&&(r=t.labelers.map((e=>e.did))),r}async function Lf(e,t,r){await Gt(e,(e=>{let i=e.findLast((e=>oe.AppBskyActorDefs.isHiddenPostsPref(e)&&oe.AppBskyActorDefs.validateHiddenPostsPref(e).success));return i&&oe.AppBskyActorDefs.isHiddenPostsPref(i)?i.items="hide"===r?Array.from(new Set([...i.items,t])):i.items.filter((e=>e!==t)):"hide"===r&&(i={$type:"app.bsky.actor.defs#hiddenPostsPref",items:[t]}),e.filter((e=>!oe.AppBskyActorDefs.isInterestsPref(e))).concat([{...i,$type:"app.bsky.actor.defs#hiddenPostsPref"}])}))}function hK(e){return e&&"object"==typeof e&&"moderationPrefs"in e&&zm(e.moderationPrefs)}function zm(e){return e&&"object"==typeof e&&"labelers"in e}function gc(e){return e.map((e=>({...e,id:e.id||on.TID.nextStr()})))}function kf(e,t){const r=e.id,i=r&&r===t.id,o=!r&&e.value===t.value;return i||o}Zu.BskyAgent=gs,function(e){var t=se&&se.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=se&&se.__exportStar||function(e,r){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(r,i)&&t(r,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BskyAgent=e.DEFAULT_LABEL_SETTINGS=e.LABELS=e.parseLanguage=e.jsonStringToLex=e.jsonToLex=e.stringifyLex=e.lexToJson=e.BlobRef=e.AtUri=void 0;var i=as;Object.defineProperty(e,"AtUri",{enumerable:!0,get:function(){return i.AtUri}});var o=wa;Object.defineProperty(e,"BlobRef",{enumerable:!0,get:function(){return o.BlobRef}}),Object.defineProperty(e,"lexToJson",{enumerable:!0,get:function(){return o.lexToJson}}),Object.defineProperty(e,"stringifyLex",{enumerable:!0,get:function(){return o.stringifyLex}}),Object.defineProperty(e,"jsonToLex",{enumerable:!0,get:function(){return o.jsonToLex}}),Object.defineProperty(e,"jsonStringToLex",{enumerable:!0,get:function(){return o.jsonStringToLex}});var n=vi;Object.defineProperty(e,"parseLanguage",{enumerable:!0,get:function(){return n.parseLanguage}}),r(Fp,e),r(ka,e),r(Nr,e),r(x,e),r(js,e),r(Fs,e),r(jl,e),r(Hs,e),r($r,e),r(nd,e),r(ur,e),r(Hu,e);var s=En;Object.defineProperty(e,"LABELS",{enumerable:!0,get:function(){return s.LABELS}}),Object.defineProperty(e,"DEFAULT_LABEL_SETTINGS",{enumerable:!0,get:function(){return s.DEFAULT_LABEL_SETTINGS}});var a=Zu;Object.defineProperty(e,"BskyAgent",{enumerable:!0,get:function(){return a.BskyAgent}});var d=js;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return d.AtpAgent}})}(Bc);const xc=new Bc.BskyAgent({service:"https://api.bsky.app"});var Xm={exports:{}};Xm.exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=8)}([function(e,t,r){r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return p}));var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(){}var n={trace:o,debug:o,log:o,warn:o,info:o,error:o},s=n;function a(e,t){return t="["+e+"] > "+t}function d(e){var t=self.console[e];return t?function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];i[0]&&(i[0]=a(e,i[0])),t.apply(self.console,i)}:o}function c(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];r.forEach((function(t){s[t]=e[t]?e[t].bind(e):d(t)}))}var l=function(e){if(!0===e||"object"===(typeof e>"u"?"undefined":i(e))){c(e,"debug","log","info","warn","error");try{s.log()}catch{s=n}}else s=n},p=n},function(e,t,r){t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,r){r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return o}));var i={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},o={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,r){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"b",(function(){return n}));var o=function(){function e(){i(this,e)}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var i=r,o=0;e.isHeader(t,r);)o+=10,o+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(o+=10),r+=o;if(o>0)return t.subarray(i,i+o)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),i=0;i<r.length;i++){var o=r[i];if(e.isTimeStampFrame(o))return e._readTimeStamp(o)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),i=e._readSize(t,4),o=10;return{type:r,size:i,data:t.subarray(o,o+i)}},e.getID3Frames=function(t){for(var r=0,i=[];e.isHeader(t,r);){for(var o=e._readSize(t,r+6),n=(r+=10)+o;r+8<n;){var s=e._getFrameData(t.subarray(r)),a=e._decodeFrame(s);a&&i.push(a),r+=s.size+10}e.isFooter(t,r)&&(r+=10)}return i},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),i=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:i.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,i=e._utf8ArrayToStr(t.data.subarray(r));r+=i.length+1;var o=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:i,data:o}}var n=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:n}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,i=e._utf8ArrayToStr(t.data.subarray(r));r+=i.length+1;var o=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:i,data:o}}var n=e._utf8ArrayToStr(t.data);return{key:t.type,data:n}},e._utf8ArrayToStr=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.length,i=void 0,o=void 0,n=void 0,s="",a=0;a<r;){if(0===(i=e[a++])&&t)return s;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(i);break;case 12:case 13:o=e[a++],s+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=e[a++],n=e[a++],s+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&n)}}return s},e}(),n=o._utf8ArrayToStr;t.a=o},function(e,t,r){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,r){i(this,e),this.subtle=t,this.aesIV=r}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(t,r){n(this,e),this.subtle=t,this.key=r}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function(){function e(){a(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),i=0;i<4;i++)r[i]=t.getUint32(4*i);return r},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],o=r[1],n=r[2],s=r[3],a=this.invSubMix,d=a[0],c=a[1],l=a[2],p=a[3],u=new Uint32Array(256),f=0,h=0,m=0;for(m=0;m<256;m++)u[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var y=h^h<<1^h<<2^h<<3^h<<4;y=y>>>8^255&y^99,e[f]=y,t[y]=f;var g=u[f],b=u[g],v=u[b],E=257*u[y]^16843008*y;i[f]=E<<24|E>>>8,o[f]=E<<16|E>>>16,n[f]=E<<8|E>>>24,s[f]=E,E=16843009*v^65537*b^257*g^16843008*f,d[y]=E<<24|E>>>8,c[y]=E<<16|E>>>16,l[y]=E<<8|E>>>24,p[y]=E,f?(f=g^u[u[u[v^g]]],h^=u[u[h]]):f=h=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,i=0;i<t.length&&r;)r=t[i]===this.key[i],i++;if(!r){this.key=t;var o=this.keySize=t.length;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size="+o);var n=this.ksRows=4*(o+6+1),s=void 0,a=void 0,d=this.keySchedule=new Uint32Array(n),c=this.invKeySchedule=new Uint32Array(n),l=this.sBox,p=this.rcon,u=this.invSubMix,f=u[0],h=u[1],m=u[2],y=u[3],g=void 0,b=void 0;for(s=0;s<n;s++)s<o?g=d[s]=t[s]:(b=g,s%o==0?(b=l[(b=b<<8|b>>>24)>>>24]<<24|l[b>>>16&255]<<16|l[b>>>8&255]<<8|l[255&b],b^=p[s/o|0]<<24):o>6&&s%o==4&&(b=l[b>>>24]<<24|l[b>>>16&255]<<16|l[b>>>8&255]<<8|l[255&b]),d[s]=g=(d[s-o]^b)>>>0);for(a=0;a<n;a++)s=n-a,b=3&a?d[s]:d[s-4],c[a]=a<4||s<=4?b:f[l[b>>>24]]^h[l[b>>>16&255]]^m[l[b>>>8&255]]^y[l[255&b]],c[a]=c[a]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,r){for(var i,o,n=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,d=this.invSubMix,c=d[0],l=d[1],p=d[2],u=d[3],f=this.uint8ArrayToUint32Array_(r),h=f[0],m=f[1],y=f[2],g=f[3],b=new Int32Array(e),v=new Int32Array(b.length),E=void 0,R=void 0,A=void 0,T=void 0,_=void 0,w=void 0,L=void 0,C=void 0,S=void 0,k=void 0,x=void 0,P=void 0,B=this.networkToHostOrderSwap;t<b.length;){for(S=B(b[t]),k=B(b[t+1]),x=B(b[t+2]),P=B(b[t+3]),_=S^s[0],w=P^s[1],L=x^s[2],C=k^s[3],i=4,o=1;o<n;o++)E=c[_>>>24]^l[w>>16&255]^p[L>>8&255]^u[255&C]^s[i],R=c[w>>>24]^l[L>>16&255]^p[C>>8&255]^u[255&_]^s[i+1],A=c[L>>>24]^l[C>>16&255]^p[_>>8&255]^u[255&w]^s[i+2],T=c[C>>>24]^l[_>>16&255]^p[w>>8&255]^u[255&L]^s[i+3],_=E,w=R,L=A,C=T,i+=4;E=a[_>>>24]<<24^a[w>>16&255]<<16^a[L>>8&255]<<8^a[255&C]^s[i],R=a[w>>>24]<<24^a[L>>16&255]<<16^a[C>>8&255]<<8^a[255&_]^s[i+1],A=a[L>>>24]<<24^a[C>>16&255]<<16^a[_>>8&255]<<8^a[255&w]^s[i+2],T=a[C>>>24]<<24^a[_>>16&255]<<16^a[w>>8&255]<<8^a[255&L]^s[i+3],i+=3,v[t]=B(E^h),v[t+1]=B(T^m),v[t+2]=B(A^y),v[t+3]=B(R^g),h=S,m=k,y=x,g=P,t+=4}return v.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),c=r(2),l=r(0);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(t,r){p(this,e),this.observer=t,this.config=r,this.logEnabled=!0;try{var i=crypto||self.crypto;this.subtle=i.subtle||i.webkitSubtle}catch{}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,r,i){var n=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(l.b.log("JS AES decrypt"),this.logEnabled=!1);var a=this.decryptor;a||(this.decryptor=a=new d),a.expandKey(t),i(a.decrypt(e,0,r))}else{this.logEnabled&&(l.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new s(c,t)),this.fastAesKey.expandKey().then((function(s){new o(c,r).decrypt(e,s).catch((function(o){n.onWebCryptoError(o,e,t,r,i)})).then((function(e){i(e)}))})).catch((function(o){n.onWebCryptoError(o,e,t,r,i)}))}},e.prototype.onWebCryptoError=function(e,t,r,i,o){this.config.enableSoftwareAES?(l.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,i,o)):(l.b.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.a=u},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function n(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,a,d,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(s(r=this._events[e]))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(n(r))for(a=Array.prototype.slice.call(arguments,1),o=(c=r.slice()).length,d=0;d<o;d++)c[d].apply(this,a);return!0},r.prototype.addListener=function(e,t){var o;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n(this._events[e])&&!this._events[e].warned&&(o=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var r=!1;function o(){this.removeListener(e,o),r||(r=!0,t.apply(this,arguments))}return o.listener=t,this.on(e,o),this},r.prototype.removeListener=function(e,t){var r,o,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(r=this._events[e]).length,o=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(r)){for(a=s;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){o=a;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){var i,o,n,s,a;i=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/;?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=this.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var n=this.parseURL(t);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return r.alwaysNormalize?(n.path=a.normalizePath(n.path),a.buildURLFromParts(n)):t;var s=this.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var d=o.exec(s.path);s.netLoc=d[1],s.path=d[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(c.netLoc=s.netLoc,"/"!==n.path[0]))if(n.path){var l=s.path,p=l.substring(0,l.lastIndexOf("/")+1)+n.path;c.path=a.normalizePath(p)}else c.path=s.path,n.params||(c.params=s.params,n.query||(c.query=s.query));return null===c.path&&(c.path=r.alwaysNormalize?a.normalizePath(n.path):n.path),a.buildURLFromParts(c)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=a},function(e,t,r){var i=r(1),o=r(2),n=r(4),s=r(0);function a(e,t,r,i){var n,a,d,c,l,p=navigator.userAgent.toLowerCase(),u=i,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(n=1+((192&t[r+2])>>>6),!((a=(60&t[r+2])>>>2)>f.length-1))return c=(1&t[r+2])<<2,c|=(192&t[r+3])>>>6,s.b.log("manifest codec:"+i+",ADTS data:type:"+n+",sampleingIndex:"+a+"["+f[a]+"Hz],channelConfig:"+c),/firefox/i.test(p)?a>=6?(n=5,l=new Array(4),d=a-3):(n=2,l=new Array(2),d=a):-1!==p.indexOf("android")?(n=2,l=new Array(2),d=a):(n=5,l=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&a>=6?d=a-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(a>=6&&1===c||/vivaldi/i.test(p))||!i&&1===c)&&(n=2,l=new Array(2)),d=a)),l[0]=n<<3,l[0]|=(14&a)>>1,l[1]|=(1&a)<<7,l[1]|=c<<3,5===n&&(l[1]|=(14&d)>>1,l[2]=(1&d)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:f[a],channelCount:c,codec:"mp4a.40."+n,manifestCodec:u};e.trigger(Event.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a})}function d(e,t){return 255===e[t]&&240==(246&e[t+1])}function c(e,t){return 1&e[t+1]?7:9}function l(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function p(e,t){return!!(t+1<e.length&&d(e,t))}function u(e,t){if(t+1<e.length&&d(e,t)){var r=c(e,t);t+5<e.length&&(r=l(e,t));var i=t+r;if(i===e.length||i+1<e.length&&d(e,i))return!0}return!1}function f(e,t,r,i,o){if(!e.samplerate){var n=a(t,r,i,o);e.config=n.config,e.samplerate=n.samplerate,e.channelCount=n.channelCount,e.codec=n.codec,e.manifestCodec=n.manifestCodec,s.b.log("parsed codec:"+e.codec+",rate:"+n.samplerate+",nb channel:"+n.channelCount)}}function h(e){return 9216e4/e}function m(e,t,r,i,o){var n,s,a=e.length;if(n=c(e,t),s=l(e,t),(s-=n)>0&&t+n+s<=a)return{headerLength:n,frameLength:s,stamp:r+i*o}}function y(e,t,r,i,o){var n=m(t,r,i,o,h(e.samplerate));if(n){var s=n.stamp,a=n.headerLength,d=n.frameLength,c={unit:t.subarray(r+a,r+a+d),pts:s,dts:s};return e.samples.push(c),e.len+=d,{sample:c,length:d+a}}}var g=r(3);function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var v=function(){function e(t,r,i){b(this,e),this.observer=t,this.config=i,this.remuxer=r}return e.prototype.resetInitSegment=function(e,t,r,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(g.a.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(u(e,t))return s.b.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(e,t,r,i){for(var o=this._audioTrack,n=g.a.getID3Data(e,0)||[],a=g.a.getTimeStamp(n),d=a?90*a:9e4*t,c=0,l=d,u=e.length,h=n.length,m=[{pts:l,dts:l,data:n}];h<u-1;)if(p(e,h)&&h+5<u){f(o,this.observer,e,h,o.manifestCodec);var b=y(o,e,h,d,c);if(!b){s.b.log("Unable to parse AAC frame");break}h+=b.length,l=b.sample.pts,c++}else g.a.isHeader(e,h)?(n=g.a.getID3Data(e,h),m.push({pts:l,dts:l,data:n}),h+=n.length):h++;this.remuxer.remux(o,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},t,r,i)},e.prototype.destroy=function(){},e}();function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var R=Math.pow(2,32)-1,A=function(){function e(t,r){E(this,e),this.observer=t,this.remuxer=r}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,r,o,n){if(t&&t.byteLength){var s=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==o&&(o="avc1.42e01e");var a={};s.audio&&s.video?a.audiovideo={container:"video/mp4",codec:r+","+o,initSegment:n?t:null}:(s.audio&&(a.audio={container:"audio/mp4",codec:r,initSegment:n?t:null}),s.video&&(a.video={container:"video/mp4",codec:o,initSegment:n?t:null})),this.observer.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,{tracks:a})}else r&&(this.audioCodec=r),o&&(this.videoCodec=o)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var i,o,n,s,a,d,c=[];if(t.data?(a=t.start,n=t.end,t=t.data):(a=0,n=t.byteLength),!r.length)return null;for(i=a;i<n;)d=(o=e.readUint32(t,i))>1?i+o:n,e.bin2str(t.subarray(i+4,i+8))===r[0]&&(1===r.length?c.push({data:t,start:i+8,end:d}):(s=e.findBox({data:t,start:i+8,end:d},r.slice(1))).length&&(c=c.concat(s))),i=d;return c},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var o=i.data[i.start],n=0===o?12:20,a=e.readUint32(i,n),d=e.findBox(t,["mdia","mdhd"])[0];if(d){n=0===(o=d.data[d.start])?12:20;var c=e.readUint32(d,n),l=e.findBox(t,["mdia","hdlr"])[0];if(l){var p={soun:"audio",vide:"video"}[e.bin2str(l.data.subarray(l.start+8,l.start+12))];if(p){var u=e.findBox(t,["mdia","minf","stbl","stsd"]);if(u.length){u=u[0];var f=e.bin2str(u.data.subarray(u.start+12,u.start+16));s.b.log("MP4Demuxer:"+p+":"+f+" found")}r[a]={timescale:c,type:p},r[p]={timescale:c,id:a}}}}}})),r},e.getStartDTS=function(t,r){var i,o,n;return i=e.findBox(r,["moof","traf"]),o=[].concat.apply([],i.map((function(r){return e.findBox(r,["tfhd"]).map((function(i){var o,n;return o=e.readUint32(i,4),n=t[o].timescale||9e4,e.findBox(r,["tfdt"]).map((function(t){var r,i;return r=t.data[t.start],i=e.readUint32(t,4),1===r&&(i*=Math.pow(2,32),i+=e.readUint32(t,8)),i}))[0]/n}))}))),n=Math.min.apply(null,o),isFinite(n)?n:0},e.offsetStartDTS=function(t,r,i){e.findBox(r,["moof","traf"]).map((function(r){return e.findBox(r,["tfhd"]).map((function(o){var n=e.readUint32(o,4),s=t[n].timescale||9e4;e.findBox(r,["tfdt"]).map((function(t){var r=t.data[t.start],o=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,o-i*s);else{o*=Math.pow(2,32),o+=e.readUint32(t,8),o-=i*s,o=Math.max(o,0);var n=Math.floor(o/(R+1)),a=Math.floor(o%(R+1));e.writeUint32(t,4,n),e.writeUint32(t,8,a)}}))}))}))},e.prototype.append=function(t,r,o,n){var s=this.initData;s||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),s=this.initData);var a=void 0,d=this.initPTS;if(void 0===d){var c=e.getStartDTS(s,t);this.initPTS=d=c-r,this.observer.trigger(i.a.INIT_PTS_FOUND,{initPTS:d})}e.offsetStartDTS(s,t,d),a=e.getStartDTS(s,t),this.remuxer.remux(s.audio,s.video,null,null,a,o,n,t)},e.prototype.destroy=function(){},e}(),T={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,i,o){if(!(r+24>t.length)){var n=this.parseHeader(t,r);if(n&&r+n.frameLength<=t.length){var s=i+o*(9e4*n.samplesPerFrame/n.sampleRate),a={unit:t.subarray(r,r+n.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=n.channelCount,e.samplerate=n.sampleRate,e.samples.push(a),e.len+=n.frameLength,{sample:a,length:n.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,o=e[t+2]>>4&15,n=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==r&&0!==o&&15!==o&&3!==n){var a=3===r?3-i:3===i?3:4,d=1e3*T.BitratesMap[14*a+o-1],c=3===r?0:2===r?1:2,l=T.SamplingRateMap[3*c+n],p=e[t+3]>>6==3?1:2,u=T.SamplesCoefficients[r][i],f=T.BytesInSlot[i],h=8*u*f;return{sampleRate:l,channelCount:p,frameLength:parseInt(u*d/l+s,10)*f,samplesPerFrame:h}}},isHeaderPattern:function(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=4,i=this.parseHeader(e,t),o=r;i&&i.frameLength&&(o=i.frameLength);var n=t+o;if(n===e.length||n+1<e.length&&this.isHeaderPattern(e,n))return!0}return!1}},_=T;function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var L=function(){function e(t){w(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");i.set(e.subarray(r,r+o)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*o,this.bytesAvailable-=o},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&s.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,r=8,i=8;for(t=0;t<e;t++)0!==i&&(i=(r+this.readEG()+256)%256),r=0===i?r:i},e.prototype.readSPS=function(){var e,t,r,i,o,n,s,a=0,d=0,c=0,l=0,p=this.readUByte.bind(this),u=this.readBits.bind(this),f=this.readUEG.bind(this),h=this.readBoolean.bind(this),m=this.skipBits.bind(this),y=this.skipEG.bind(this),g=this.skipUEG.bind(this),b=this.skipScalingList.bind(this);if(p(),e=p(),u(5),m(3),p(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var v=f();if(3===v&&m(1),g(),g(),m(1),h())for(n=3!==v?8:12,s=0;s<n;s++)h()&&b(s<6?16:64)}g();var E=f();if(0===E)f();else if(1===E)for(m(1),y(),y(),t=f(),s=0;s<t;s++)y();g(),m(1),r=f(),i=f(),0===(o=u(1))&&m(1),m(1),h()&&(a=f(),d=f(),c=f(),l=f());var R=[1,1];if(h()&&h())switch(p()){case 1:R=[1,1];break;case 2:R=[12,11];break;case 3:R=[10,11];break;case 4:R=[16,11];break;case 5:R=[40,33];break;case 6:R=[24,11];break;case 7:R=[20,11];break;case 8:R=[32,11];break;case 9:R=[80,33];break;case 10:R=[18,11];break;case 11:R=[15,11];break;case 12:R=[64,33];break;case 13:R=[160,99];break;case 14:R=[4,3];break;case 15:R=[3,2];break;case 16:R=[2,1];break;case 255:R=[p()<<8|p(),p()<<8|p()]}return{width:Math.ceil(16*(r+1)-2*a-2*d),height:(2-o)*(i+1)*16-(o?2:4)*(c+l),pixelRatio:R}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var S=function(){function e(t,r,i,o){C(this,e),this.decryptdata=i,this.discardEPB=o,this.decrypter=new n.a(t,r)}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,r,i){var o=e[t].unit,n=o.subarray(16,o.length-o.length%16),s=n.buffer.slice(n.byteOffset,n.byteOffset+n.length),a=this;this.decryptBuffer(s,(function(n){n=new Uint8Array(n),o.set(n,16),i||a.decryptAacSamples(e,t+1,r)}))},e.prototype.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,i),!i)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),i=0,o=32;o<=e.length-16;o+=160,i+=16)r.set(e.subarray(o,o+16),i);return r},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,i=32;i<=e.length-16;i+=160,r+=16)e.set(t.subarray(r,r+16),i);return e},e.prototype.decryptAvcSample=function(e,t,r,i,o,n){var s=this.discardEPB(o.data),a=this.getAvcEncryptedData(s),d=this;this.decryptBuffer(a.buffer,(function(a){o.data=d.getAvcDecryptedUnit(s,a),n||d.decryptAvcSamples(e,t,r+1,i)}))},e.prototype.decryptAvcSamples=function(e,t,r,i){for(;;t++,r=0){if(t>=e.length)return void i();for(var o=e[t].units;!(r>=o.length);r++){var n=o[r];if(!(n.length<=48||1!==n.type&&5!==n.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,i,n,s),!s)return}}}},e}();function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var x={video:0,audio:1,id3:2,text:3},P=function(){function e(t,r,i,o){k(this,e),this.observer=t,this.config=i,this.typeSupported=o,this.remuxer=r,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new S(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0||(r&&s.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:x[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,r,i,o){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",o),this._audioTrack=e.createTrack("audio",o),this._id3Track=e.createTrack("id3",o),this._txtTrack=e.createTrack("text",o),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=i,this._duration=o},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,r,n,a){var d,c,l,p,u,f=t.length,h=!1;this.contiguous=n;var m=this.pmtParsed,y=this._avcTrack,g=this._audioTrack,b=this._id3Track,v=y.pid,E=g.pid,R=b.pid,A=this._pmtId,T=y.pesData,_=g.pesData,w=b.pesData,L=this._parsePAT,C=this._parsePMT,S=this._parsePES,k=this._parseAVCPES.bind(this),x=this._parseAACPES.bind(this),P=this._parseMPEGPES.bind(this),B=this._parseID3PES.bind(this),D=e._syncOffset(t);for(f-=(f+D)%188,d=D;d<f;d+=188)if(71===t[d]){if(c=!!(64&t[d+1]),l=((31&t[d+1])<<8)+t[d+2],(48&t[d+3])>>4>1){if((p=d+5+t[d+4])===d+188)continue}else p=d+4;switch(l){case v:c&&(T&&(u=S(T))&&k(u,!1),T={data:[],size:0}),T&&(T.data.push(t.subarray(p,d+188)),T.size+=d+188-p);break;case E:c&&(_&&(u=S(_))&&(g.isAAC?x(u):P(u)),_={data:[],size:0}),_&&(_.data.push(t.subarray(p,d+188)),_.size+=d+188-p);break;case R:c&&(w&&(u=S(w))&&B(u),w={data:[],size:0}),w&&(w.data.push(t.subarray(p,d+188)),w.size+=d+188-p);break;case 0:c&&(p+=t[p]+1),A=this._pmtId=L(t,p);break;case A:c&&(p+=t[p]+1);var I=C(t,p,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(v=I.avc)>0&&(y.pid=v),(E=I.audio)>0&&(g.pid=E,g.isAAC=I.isAAC),(R=I.id3)>0&&(b.pid=R),h&&!m&&(s.b.log("reparse from beginning"),h=!1,d=D-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});T&&(u=S(T))?(k(u,!0),y.pesData=null):y.pesData=T,_&&(u=S(_))?(g.isAAC?x(u):P(u),g.pesData=null):(_&&_.size&&s.b.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=_),w&&(u=S(w))?(B(u),b.pesData=null):b.pesData=w,null==this.sampleAes?this.remuxer.remux(g,y,b,this._txtTrack,r,n,a):this.decryptAndRemux(g,y,b,this._txtTrack,r,n,a)},e.prototype.decryptAndRemux=function(e,t,r,i,o,n,s){if(e.samples&&e.isAAC){var a=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){a.decryptAndRemuxAvc(e,t,r,i,o,n,s)}))}else this.decryptAndRemuxAvc(e,t,r,i,o,n,s)},e.prototype.decryptAndRemuxAvc=function(e,t,r,i,o,n,s){if(t.samples){var a=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){a.remuxer.remux(e,t,r,i,o,n,s)}))}else this.remuxer.remux(e,t,r,i,o,n,s)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,r,i){var o,n,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(o=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){switch(n=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){s.b.log("unkown stream type:"+e[t]);break}case 15:-1===a.audio&&(a.audio=n);break;case 21:-1===a.id3&&(a.id3=n);break;case 219:if(!i){s.b.log("unkown stream type:"+e[t]);break}case 27:-1===a.avc&&(a.avc=n);break;case 3:case 4:r?-1===a.audio&&(a.audio=n,a.isAAC=!1):s.b.log("MPEG audio found, not supported in this browser for now");break;case 36:s.b.warn("HEVC stream type found, not supported for now");break;default:s.b.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a},e.prototype._parsePES=function(e){var t,r,i,o,n,a,d,c,l=0,p=e.data;if(!e||0===e.size)return null;for(;p[0].length<19&&p.length>1;){var u=new Uint8Array(p[0].length+p[1].length);u.set(p[0]),u.set(p[1],p[0].length),p[0]=u,p.splice(1,1)}if(1===((t=p[0])[0]<<16)+(t[1]<<8)+t[2]){if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;192&(r=t[7])&&((a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(a-=8589934592),64&r?((d=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(d-=8589934592),a-d>54e5&&(s.b.warn(Math.round((a-d)/9e4)+"s delta between PTS and DTS, align them"),a=d)):d=a),c=(o=t[8])+9,e.size-=c,n=new Uint8Array(e.size);for(var f=0,h=p.length;f<h;f++){var m=(t=p[f]).byteLength;if(c){if(c>m){c-=m;continue}t=t.subarray(c),m-=c,c=0}n.set(t,l),l+=m}return i&&(i-=o+3),{data:n,pts:a,dts:d,len:i}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,i=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(i||this.contiguous)?(e.id=i,r.push(e)):t.dropped++}e.debug.length&&s.b.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var r,i,o,n=this,s=this._avcTrack,a=this._parseAVCNALu(e.data),d=this.avcSample,c=!1,l=this.pushAccesUnit.bind(this),p=function(e,t,r,i){return{key:e,pts:t,dts:r,units:[],debug:i}};e.data=null,d&&a.length&&!s.audFound&&(l(d,s),d=this.avcSample=p(!1,e.pts,e.dts,"")),a.forEach((function(t){switch(t.type){case 1:i=!0,d||(d=n.avcSample=p(!0,e.pts,e.dts,"")),d.frame=!0;var a=t.data;if(c&&a.length>4){var u=new L(a).readSliceType();(2===u||4===u||7===u||9===u)&&(d.key=!0)}break;case 5:i=!0,d||(d=n.avcSample=p(!0,e.pts,e.dts,"")),d.key=!0,d.frame=!0;break;case 6:i=!0,(r=new L(n.discardEPB(t.data))).readUByte();for(var f=0,h=0,m=!1,y=0;!m&&r.bytesAvailable>1;){f=0;do{f+=y=r.readUByte()}while(255===y);h=0;do{h+=y=r.readUByte()}while(255===y);if(4===f&&0!==r.bytesAvailable){if(m=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var g=r.readUByte(),b=31&g,v=[g,r.readUByte()];for(o=0;o<b;o++)v.push(r.readUByte()),v.push(r.readUByte()),v.push(r.readUByte());n._insertSampleInOrder(n._txtTrack.samples,{type:3,pts:e.pts,bytes:v})}}else if(h<r.bytesAvailable)for(o=0;o<h;o++)r.readUByte()}break;case 7:if(i=!0,c=!0,!s.sps){var E=(r=new L(t.data)).readSPS();s.width=E.width,s.height=E.height,s.pixelRatio=E.pixelRatio,s.sps=[t.data],s.duration=n._duration;var R=t.data.subarray(1,4),A="avc1.";for(o=0;o<3;o++){var T=R[o].toString(16);T.length<2&&(T="0"+T),A+=T}s.codec=A}break;case 8:i=!0,s.pps||(s.pps=[t.data]);break;case 9:i=!1,s.audFound=!0,d&&l(d,s),d=n.avcSample=p(!1,e.pts,e.dts,"");break;case 12:i=!1;break;default:i=!1,d&&(d.debug+="unknown NAL "+t.type+" ")}d&&i&&d.units.push(t)})),t&&d&&(l(d,s),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var i=r-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var r=this._avcTrack.samples;e=r[r.length-1]}if(e){var i=e.units;t=i[i.length-1]}return t},e.prototype._parseAVCNALu=function(e){var t,r,i,o,n=0,s=e.byteLength,a=this._avcTrack,d=a.naluState||0,c=d,l=[],p=-1;for(-1===d&&(p=0,o=31&e[0],d=0,n=1);n<s;)if(t=e[n++],d)if(1!==d)if(t)if(1===t){if(p>=0)i={data:e.subarray(p,n-d-1),type:o},l.push(i);else{var u=this._getLastNalUnit();if(u&&(c&&n<=4-c&&u.state&&(u.data=u.data.subarray(0,u.data.byteLength-c)),(r=n-d-1)>0)){var f=new Uint8Array(u.data.byteLength+r);f.set(u.data,0),f.set(e.subarray(0,r),u.data.byteLength),u.data=f}}n<s?(p=n,o=31&e[n],d=0):d=-1}else d=0;else d=3;else d=t?0:2;else d=t?0:1;if(p>=0&&d>=0&&(i={data:e.subarray(p,s),type:o,state:d},l.push(i)),0===l.length){var h=this._getLastNalUnit();if(h){var m=new Uint8Array(h.data.byteLength+e.byteLength);m.set(h.data,0),m.set(e,h.data.byteLength),h.data=m}}return a.naluState=d,l},e.prototype.discardEPB=function(e){for(var t,r,i=e.byteLength,o=[],n=1;n<i-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(o.push(n+2),n+=2):n++;if(0===o.length)return e;t=i-o.length,r=new Uint8Array(t);var s=0;for(n=0;n<t;s++,n++)s===o[0]&&(s++,o.shift()),r[n]=e[s];return r},e.prototype._parseAACPES=function(e){var t,r,n,a,d,c,l,u=this._audioTrack,m=e.data,g=e.pts,b=0,v=this.aacOverFlow,E=this.aacLastPTS;if(v){var R=new Uint8Array(v.byteLength+m.byteLength);R.set(v,0),R.set(m,v.byteLength),m=R}for(n=b,d=m.length;n<d-1&&!p(m,n);n++);if(!n||(n<d-1?(c="AAC PES did not start with ADTS header,offset:"+n,l=!1):(c="no ADTS header found in AAC PES",l=!0),s.b.warn("parsing error:"+c),this.observer.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_PARSING_ERROR,fatal:l,reason:c}),!l)){if(f(u,this.observer,m,n,this.audioCodec),r=0,t=h(u.samplerate),v&&E){var A=E+t;Math.abs(A-g)>1&&(s.b.log("AAC: align PTS for overlapping frames by "+Math.round((A-g)/90)),g=A)}for(;n<d;)if(p(m,n)&&n+5<d){var T=y(u,m,n,g,r);if(!T)break;n+=T.length,a=T.sample.pts,r++}else n++;v=n<d?m.subarray(n,d):null,this.aacOverFlow=v,this.aacLastPTS=a}},e.prototype._parseMPEGPES=function(e){for(var t=e.data,r=t.length,i=0,o=0,n=e.pts;o<r;)if(_.isHeader(t,o)){var s=_.appendFrame(this._audioTrack,t,o,n,i);if(!s)break;o+=s.length,i++}else o++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var D=function(){function e(t,r,i){B(this,e),this.observer=t,this.config=i,this.remuxer=r}return e.prototype.resetInitSegment=function(e,t,r,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,r,i=g.a.getID3Data(e,0);if(i&&void 0!==g.a.getTimeStamp(i))for(t=i.length,r=Math.min(e.length-1,t+100);t<r;t++)if(_.probe(e,t))return s.b.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,r,i){for(var o=g.a.getID3Data(e,0),n=g.a.getTimeStamp(o),s=n?90*n:9e4*t,a=o.length,d=e.length,c=0,l=0,p=this._audioTrack,u=[{pts:s,dts:s,data:o}];a<d;)if(_.isHeader(e,a)){var f=_.appendFrame(p,e,a,s,c);if(!f)break;a+=f.length,l=f.sample.pts,c++}else g.a.isHeader(e,a)?(o=g.a.getID3Data(e,a),u.push({pts:l,dts:l,data:o}),a+=o.length):a++;this.remuxer.remux(p,{samples:[]},{samples:u,inputTimeScale:9e4},{samples:[]},t,r,i)},e.prototype.destroy=function(){},e}();function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var U=function(){function e(){I(this,e)}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var K=Math.pow(2,32)-1,j=function(){function e(){O(this,e)}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:i};var o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=n,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),d=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,d,s,a),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,o))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),i=8,o=r.length,n=o;o--;)i+=r[o].byteLength;for((t=new Uint8Array(i))[0]=i>>24&255,t[1]=i>>16&255,t[2]=i>>8&255,t[3]=255&i,t.set(e,4),o=0,i=8;o<n;o++)t.set(r[o],i),i+=r[o].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(K+1)),o=Math.floor(r%(K+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,r))},e.moov=function(t){for(var r=t.length,i=[];r--;)i[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,i=[];r--;)i[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(K+1)),o=Math.floor(r%(K+1)),n=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,n)},e.sdtp=function(t){var r,i,o=t.samples||[],n=new Uint8Array(4+o.length);for(i=0;i<o.length;i++)r=o[i].flags,n[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,n)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,i,o,n=[],s=[];for(r=0;r<t.sps.length;r++)o=(i=t.sps[r]).byteLength,n.push(o>>>8&255),n.push(255&o),n=n.concat(Array.prototype.slice.call(i));for(r=0;r<t.pps.length;r++)o=(i=t.pps[r]).byteLength,s.push(o>>>8&255),s.push(255&o),s=s.concat(Array.prototype.slice.call(i));var a=e.box(e.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|t.sps.length].concat(n).concat([t.pps.length]).concat(s))),d=t.width,c=t.height,l=t.pixelRatio[0],p=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,255&d,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,p>>24,p>>16&255,p>>8&255,255&p])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,o=t.width,n=t.height,s=Math.floor(i/(K+1)),a=Math.floor(i%(K+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,n>>8&255,255&n,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),o=t.id,n=Math.floor(r/(K+1)),s=Math.floor(r%(K+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var i,o,n,s,a,d,c=t.samples||[],l=c.length,p=12+16*l,u=new Uint8Array(p);for(r+=8+p,u.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<l;i++)n=(o=c[i]).duration,s=o.size,a=o.flags,d=o.cts,u.set([n>>>24&255,n>>>16&255,n>>>8&255,255&n,s>>>24&255,s>>>16&255,s>>>8&255,255&s,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*i);return e.box(e.types.trun,u)},e.initSegment=function(t){e.types||e.init();var r,i=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+i.byteLength)).set(e.FTYP),r.set(i,e.FTYP.byteLength),r},e}(),N=j;function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var V=1e4,G=function(){function e(t,r,i,o){M(this,e),this.observer=t,this.config=r,this.typeSupported=i;var n=navigator.userAgent;this.isSafari=o&&o.indexOf("Apple")>-1&&n&&!n.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,r,o,n,a,d){if(this.ISGenerated||this.generateIS(e,t,n),this.ISGenerated){var c=e.samples.length,l=t.samples.length,p=n,u=n;if(c&&l){var f=(e.samples[0].dts-t.samples[0].dts)/t.inputTimeScale;p+=Math.max(0,f),u+=Math.max(0,-f)}if(c){e.timescale||(s.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,n));var h=this.remuxAudio(e,p,a,d);if(l){var m=void 0;h&&(m=h.endPTS-h.startPTS),t.timescale||(s.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,n)),this.remuxVideo(t,u,a,m,d)}}else{var y=void 0;l&&(y=this.remuxVideo(t,u,a,d)),y&&e.codec&&this.remuxEmptyAudio(e,p,a,y)}}r.samples.length&&this.remuxID3(r,n),o.samples.length&&this.remuxText(o,n),this.observer.trigger(i.a.FRAG_PARSED)},e.prototype.generateIS=function(e,t,r){var n,a,d=this.observer,c=e.samples,l=t.samples,p=this.typeSupported,u="audio/mp4",f={},h={tracks:f},m=void 0===this._initPTS;if(m&&(n=a=1/0),e.config&&c.length&&(e.timescale=e.samplerate,s.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(p.mpeg?(u="audio/mpeg",e.codec=""):p.mp3&&(e.codec="mp3")),f.audio={container:u,codec:e.codec,initSegment:!e.isAAC&&p.mpeg?new Uint8Array:N.initSegment([e]),metadata:{channelCount:e.channelCount}},m&&(n=a=c[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&l.length){var y=t.inputTimeScale;t.timescale=y,f.video={container:"video/mp4",codec:t.codec,initSegment:N.initSegment([t]),metadata:{width:t.width,height:t.height}},m&&(n=Math.min(n,l[0].pts-y*r),a=Math.min(a,l[0].dts-y*r),this.observer.trigger(i.a.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(f).length?(d.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,m&&(this._initPTS=n,this._initDTS=a)):d.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,r,n,a){var d,c,l,p,u,f,h,m=8,y=e.timescale,g=e.samples,b=[],v=g.length,E=this._PTSNormalize,R=this._initDTS,A=this.nextAvcDts,T=this.isSafari;T&&(r|=g.length&&A&&(a&&Math.abs(t-A/y)<.1||Math.abs(g[0].pts-A-R)<y/5)),r||(A=t*y),g.forEach((function(e){e.pts=E(e.pts-R,A),e.dts=E(e.dts-R,A)})),g.sort((function(e,t){var r=e.dts-t.dts,i=e.pts-t.pts;return r||i||e.id-t.id}));var _=g.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)}),0);if(_<0){s.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(_/90)+" ms to overcome this issue");for(var w=0;w<g.length;w++)g[w].dts+=_}var L=g[0];u=Math.max(L.dts,0),p=Math.max(L.pts,0);var C=Math.round((u-A)/90);r&&C&&(C>1?s.b.log("AVC:"+C+" ms hole between fragments detected,filling it"):C<-1&&s.b.log("AVC:"+-C+" ms overlapping between fragments detected"),u=A,g[0].dts=u,p=Math.max(p-C,A),g[0].pts=p,s.b.log("Video/PTS/DTS adjusted: "+Math.round(p/90)+"/"+Math.round(u/90)+",delta:"+C+" ms")),L=g[g.length-1],h=Math.max(L.dts,0),f=Math.max(L.pts,0,h),T&&(d=Math.round((h-u)/(g.length-1)));for(var S=0,k=0,x=0;x<v;x++){for(var P=g[x],B=P.units,D=B.length,I=0,U=0;U<D;U++)I+=B[U].data.length;k+=I,S+=D,P.length=I,P.dts=T?u+x*d:Math.max(P.dts,u),P.pts=Math.max(P.pts,P.dts)}var O=k+4*S+8;try{c=new Uint8Array(O)}catch{return void this.observer.trigger(i.a.ERROR,{type:o.b.MUX_ERROR,details:o.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:O,reason:"fail allocating video mdat "+O})}var K=new DataView(c.buffer);K.setUint32(0,O),c.set(N.types.mdat,4);for(var j=0;j<v;j++){for(var M=g[j],V=M.units,G=0,F=void 0,q=0,$=V.length;q<$;q++){var z=V[q],X=z.data,Z=z.data.byteLength;K.setUint32(m,Z),m+=4,c.set(X,m),m+=Z,G+=4+Z}if(T)F=Math.max(0,d*Math.round((M.pts-M.dts)/d));else{if(j<v-1)d=g[j+1].dts-M.dts;else{var W=this.config,H=M.dts-g[j>0?j-1:j].dts;if(W.stretchShortVideoTrack){var Y=W.maxBufferHole,Q=W.maxSeekHole,J=Math.floor(Math.min(Y,Q)*y),ee=(n?p+n*y:this.nextAudioPts)-M.pts;ee>J?((d=ee-H)<0&&(d=H),s.b.log("It is approximately "+ee/90+" ms to the next segment; using duration "+d/90+" ms for the last video frame.")):d=H}else d=H}F=Math.round(M.pts-M.dts)}b.push({size:G,duration:d,cts:F,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:M.key?2:1,isNonSync:M.key?0:1}})}this.nextAvcDts=h+d;var te=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var re=b[0].flags;re.dependsOn=2,re.isNonSync=0}e.samples=b,l=N.moof(e.sequenceNumber++,u,e),e.samples=[];var ie={data1:l,data2:c,startPTS:p/y,endPTS:(f+d)/y,startDTS:u/y,endDTS:this.nextAvcDts/y,type:"video",nb:b.length,dropped:te};return this.observer.trigger(i.a.FRAG_PARSING_DATA,ie),ie},e.prototype.remuxAudio=function(e,t,r,n){var a,d,c,l,p,u,f,h=e.inputTimeScale,m=e.timescale,y=h/m,g=(e.isAAC?1024:1152)*y,b=this._PTSNormalize,v=this._initDTS,E=!e.isAAC&&this.typeSupported.mpeg,R=e.samples,A=[],T=this.nextAudioPts;if(r|=R.length&&T&&(n&&Math.abs(t-T/h)<.1||Math.abs(R[0].pts-T-v)<20*g),R.forEach((function(e){e.pts=e.dts=b(e.pts-v,t*h)})),0!==(R=R.filter((function(e){return e.pts>=0}))).length){if(r||(T=n?t*h:R[0].pts),e.isAAC)for(var _=this.config.maxAudioFramesDrift,w=0,L=T;w<R.length;){var C,S=R[w];C=S.pts-L;var k=Math.abs(1e3*C/h);if(C<=-_*g)s.b.warn("Dropping 1 audio frame @ "+(L/h).toFixed(3)+"s due to "+Math.round(k)+" ms overlap."),R.splice(w,1),e.len-=S.unit.length;else if(C>=_*g&&k<V&&L){var x=Math.round(C/g);s.b.warn("Injecting "+x+" audio frame @ "+(L/h).toFixed(3)+"s due to "+Math.round(1e3*C/h)+" ms gap.");for(var P=0;P<x;P++){var B=Math.max(L,0);(c=U.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),c=S.unit.subarray()),R.splice(w,0,{unit:c,pts:B,dts:B}),e.len+=c.length,L+=g,w++}S.pts=S.dts=L,L+=g,w++}else S.pts=S.dts=L,L+=g,w++}for(var D=0,I=R.length;D<I;D++){var O=R[D],K=O.unit,j=O.pts;if(void 0!==f)d.duration=Math.round((j-f)/y);else{var M=Math.round(1e3*(j-T)/h),G=0;if(r&&e.isAAC&&M){if(M>0&&M<V)G=Math.round((j-T)/g),s.b.log(M+" ms hole between AAC samples detected,filling it"),G>0&&((c=U.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(c=K.subarray()),e.len+=G*c.length);else if(M<-12){s.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(T/h).toFixed(3)+"s/"+(j/h).toFixed(3)+"s/"+-M+"ms"),e.len-=K.byteLength;continue}j=T}if(u=j,!(e.len>0))return;var F=E?e.len:e.len+8;a=E?0:8;try{l=new Uint8Array(F)}catch{return void this.observer.trigger(i.a.ERROR,{type:o.b.MUX_ERROR,details:o.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating audio mdat "+F})}E||(new DataView(l.buffer).setUint32(0,F),l.set(N.types.mdat,4));for(var q=0;q<G;q++)(c=U.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),c=K.subarray()),l.set(c,a),a+=c.byteLength,d={size:c.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(d)}l.set(K,a);var $=K.byteLength;a+=$,d={size:$,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(d),f=j}var z=0,X=A.length;if(X>=2&&(z=A[X-2].duration,d.duration=z),X){this.nextAudioPts=T=f+y*z,e.len=0,e.samples=A,p=E?new Uint8Array:N.moof(e.sequenceNumber++,u/y,e),e.samples=[];var Z=u/h,W=T/h,H={data1:p,data2:l,startPTS:Z,endPTS:W,startDTS:Z,endDTS:W,type:"audio",nb:X};return this.observer.trigger(i.a.FRAG_PARSING_DATA,H),H}return null}},e.prototype.remuxEmptyAudio=function(e,t,r,i){var o=e.inputTimeScale,n=o/(e.samplerate?e.samplerate:o),a=this.nextAudioPts,d=(void 0!==a?a:i.startDTS*o)+this._initDTS,c=i.endDTS*o+this._initDTS,l=1024*n,p=Math.ceil((c-d)/l),u=U.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.b.warn("remux empty Audio"),u){for(var f=[],h=0;h<p;h++){var m=d+h*l;f.push({unit:u,pts:m,dts:m}),e.len+=u.length}e.samples=f,this.remuxAudio(e,t,r)}else s.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e,t){var r,o=e.samples.length,n=e.inputTimeScale,s=this._initPTS,a=this._initDTS;if(o){for(var d=0;d<o;d++)(r=e.samples[d]).pts=(r.pts-s)/n,r.dts=(r.dts-a)/n;this.observer.trigger(i.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e,t){e.samples.sort((function(e,t){return e.pts-t.pts}));var r,o=e.samples.length,n=e.inputTimeScale,s=this._initPTS;if(o){for(var a=0;a<o;a++)(r=e.samples[a]).pts=(r.pts-s)/n;this.observer.trigger(i.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e},e}();function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var q=function(){function e(t){F(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,r,o,n,s,a,d){var c=this.observer,l="";e&&(l+="audio"),t&&(l+="video"),c.trigger(i.a.FRAG_PARSING_DATA,{data1:d,startPTS:n,startDTS:n,type:l,nb:1,dropped:0}),c.trigger(i.a.FRAG_PARSED)},e}();function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var z=function(){function e(t,r,i,o){$(this,e),this.observer=t,this.typeSupported=r,this.config=i,this.vendor=o}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,r,o,s,a,d,c,l,p,u,f){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var h=this.decrypter;null==h&&(h=this.decrypter=new n.a(this.observer,this.config));var m,y=this;try{m=performance.now()}catch{m=Date.now()}h.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var n;try{n=performance.now()}catch{n=Date.now()}y.observer.trigger(i.a.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:n}}),y.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),o,s,a,d,c,l,p,u,f)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),o,s,a,d,c,l,p,u,f)},e.prototype.pushDecrypted=function(e,t,r,n,s,a,d,c,l,p,u,f){var h=this.demuxer;if(!h||d&&!this.probe(e)){for(var m=this.observer,y=this.typeSupported,g=this.config,b=[{demux:P,remux:G},{demux:A,remux:q},{demux:v,remux:G},{demux:D,remux:G}],E=0,R=b.length;E<R;E++){var T=b[E],_=T.demux.probe;if(_(e)){var w=this.remuxer=new T.remux(m,g,y,this.vendor);h=new T.demux(m,w,g,y),this.probe=_;break}}if(!h)return void m.trigger(i.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=h}var L=this.remuxer;(d||c)&&(h.resetInitSegment(r,n,s,p),L.resetInitSegment()),d&&(h.resetTimeStamp(f),L.resetTimeStamp(f)),"function"==typeof h.setDecryptData&&h.setDecryptData(t),h.append(e,a,l,u)},e}();t.a=z},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i={};r.d(i,"newCue",(function(){return Rt}));var o=r(6),n=r.n(o),s=r(1),a=r(2),d=r(0),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function(){function e(t){l(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.unregisterListeners()},e.prototype.isEventHandler=function(){return"object"===c(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)}),this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){var r=function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(t){d.b.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(s.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}(),u=p;function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=/^(\d+)x(\d+)$/,m=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,y=function(){function e(t){for(var r in f(this,e),"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}return e.prototype.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},e.prototype.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.prototype.enumeratedString=function(e){return this[e]},e.prototype.decimalResolution=function(e){var t=h.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};for(m.lastIndex=0;null!==(t=m.exec(e));){var i=t[2],o='"';0===i.indexOf(o)&&i.lastIndexOf(o)===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r},e}(),g={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function b(e,t){var r=g[t];return!!r&&!0===r[e.slice(0,4)]}function v(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var E=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,w=/#EXT-X-MEDIA:(.*)/g,L=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),C=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,S=function(){function e(){T(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return E(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=n.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),k=function(){function e(){T(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return e.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},e.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new S).method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r},e.prototype.cloneObj=function(e){return JSON.parse(JSON.stringify(e))},E(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=n.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}();function x(e,t){if(!e)return null;for(var r=null,i=0;i<e.length;i++){var o=e[i];o.id===t&&(r=o)}return r}var P=function(e){function t(r){T(this,t);var i=R(this,e.call(this,r,s.a.MANIFEST_LOADING,s.a.LEVEL_LOADING,s.a.AUDIO_TRACK_LOADING,s.a.SUBTITLE_TRACK_LOADING));return i.loaders={},i}return A(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},u.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(e){this.load(e.url,{type:"manifest"})},t.prototype.onLevelLoading=function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})},t.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:"audioTrack",id:e.id})},t.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})},t.prototype.load=function(e,t){var r=this.loaders[t.type];if(void 0!==r){var i=r.context;if(i&&i.url===e)return void d.b.trace("playlist request ongoing");d.b.warn("abort previous loader for type:"+t.type),r.abort()}var o=this.hls.config,n=void 0,s=void 0,a=void 0,c=void 0;"manifest"===t.type?(n=o.manifestLoadingMaxRetry,s=o.manifestLoadingTimeOut,a=o.manifestLoadingRetryDelay,c=o.manifestLoadingMaxRetryTimeout):"level"===t.type?(n=0,s=o.levelLoadingTimeOut):(n=o.levelLoadingMaxRetry,s=o.levelLoadingTimeOut,a=o.levelLoadingRetryDelay,c=o.levelLoadingMaxRetryTimeout,d.b.log("loading playlist for "+t.type+" "+(t.level||t.id))),r=this.loaders[t.type]=t.loader=typeof o.pLoader<"u"?new o.pLoader(o):new o.loader(o),t.url=e,t.responseType="";var l=void 0,p=void 0;l={timeout:s,maxRetry:n,retryDelay:a,maxRetryDelay:c},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(t,l,p)},t.prototype.resolve=function(e,t){return n.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.prototype.parseMasterPlaylist=function(e,t){var r=[],i=void 0;function o(e,t){["video","audio"].forEach((function(r){var i=e.filter((function(e){return b(e,r)}));if(i.length){var o=i.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=o.length>0?o[0]:i[0],e=e.filter((function(e){return-1===i.indexOf(e)}))}})),t.unknownCodecs=e}for(_.lastIndex=0;null!=(i=_.exec(e));){var n={},s=n.attrs=new y(i[1]);n.url=this.resolve(i[2],t);var a=s.decimalResolution("RESOLUTION");a&&(n.width=a.width,n.height=a.height),n.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),n.name=s.NAME,o([].concat((s.CODECS||"").split(/[ ,]+/)),n),n.videoCodec&&-1!==n.videoCodec.indexOf("avc1")&&(n.videoCodec=this.avc1toavcoti(n.videoCodec)),r.push(n)}return r},t.prototype.parseMasterPlaylistMedia=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=void 0,n=[],s=0;for(w.lastIndex=0;null!==(o=w.exec(e));){var a={},d=new y(o[1]);if(d.TYPE===r){if(a.groupId=d["GROUP-ID"],a.name=d.NAME,a.type=r,a.default="YES"===d.DEFAULT,a.autoselect="YES"===d.AUTOSELECT,a.forced="YES"===d.FORCED,d.URI&&(a.url=this.resolve(d.URI,t)),a.lang=d.LANGUAGE,a.name||(a.name=a.lang),i.length){var c=x(i,a.groupId);a.audioCodec=c?c.codec:i[0].codec}a.id=s++,n.push(a)}}return n},t.prototype.avc1toavcoti=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},t.prototype.parseLevelPlaylist=function(e,t,r,i){var o,n,s=0,a=0,c={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},l=new S,p=0,u=null,f=new k;for(L.lastIndex=0;null!==(o=L.exec(e));){var h=o[1];if(h){f.duration=parseFloat(h);var m=(" "+o[2]).slice(1);f.title=m||null,f.tagList.push(m?["INF",h,m]:["INF",h])}else if(o[3]){if(!isNaN(f.duration)){var g=s++;f.type=i,f.start=a,f.levelkey=l,f.sn=g,f.level=r,f.cc=p,f.baseurl=t,f.relurl=(" "+o[3]).slice(1),c.fragments.push(f),u=f,a+=f.duration,f=new k}}else if(o[4]){if(f.rawByteRange=(" "+o[4]).slice(1),u){var b=u.byteRangeEndOffset;b&&(f.lastByteRangeEndOffset=b)}}else if(o[5])f.rawProgramDateTime=(" "+o[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]),void 0===c.programDateTime&&(c.programDateTime=new Date(new Date(Date.parse(o[5]))-1e3*a));else{for(o=o[0].match(C),n=1;n<o.length&&void 0===o[n];n++);var v=(" "+o[n+1]).slice(1),E=(" "+o[n+2]).slice(1);switch(o[n]){case"#":f.tagList.push(E?[v,E]:[v]);break;case"PLAYLIST-TYPE":c.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":s=c.startSN=parseInt(v);break;case"TARGETDURATION":c.targetduration=parseFloat(v);break;case"VERSION":c.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":c.live=!1;break;case"DIS":p++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":p=parseInt(v);break;case"KEY":var R=new y(v),A=R.enumeratedString("METHOD"),T=R.URI,_=R.hexadecimalInteger("IV");A&&(l=new S,T&&["AES-128","SAMPLE-AES"].indexOf(A)>=0&&(l.method=A,l.baseuri=t,l.reluri=T,l.key=null,l.iv=_));break;case"START":var w=new y(v).decimalFloatingPoint("TIME-OFFSET");isNaN(w)||(c.startTimeOffset=w);break;case"MAP":var x=new y(v);f.relurl=x.URI,f.rawByteRange=x.BYTERANGE,f.baseurl=t,f.level=r,f.type=i,f.sn="initSegment",c.initSegment=f,f=new k;break;default:d.b.warn("line parsed but not handled: "+o)}}}return(f=u)&&!f.relurl&&(c.fragments.pop(),a-=f.duration),c.totalduration=a,c.averagetargetduration=a/c.fragments.length,c.endSN=s-1,c.startCC=c.fragments[0]?c.fragments[0].cc:0,c.endCC=p,c},t.prototype.loadsuccess=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.data,n=e.url,c=r.type,l=r.id,p=r.level,u=this.hls;if(this.loaders[c]=void 0,(void 0===n||0===n.indexOf("data:"))&&(n=r.url),t.tload=performance.now(),0===o.indexOf("#EXTM3U"))if(o.indexOf("#EXTINF:")>0){var f="audioTrack"!==c&&"subtitleTrack"!==c,h=isNaN(p)?isNaN(l)?0:l:p,m=this.parseLevelPlaylist(o,n,h,"audioTrack"===c?"audio":"subtitleTrack"===c?"subtitle":"main");m.tload=t.tload,"manifest"===c&&u.trigger(s.a.MANIFEST_LOADED,{levels:[{url:n,details:m}],audioTracks:[],url:n,stats:t,networkDetails:i}),t.tparsed=performance.now(),m.targetduration?f?u.trigger(s.a.LEVEL_LOADED,{details:m,level:p||0,id:l||0,stats:t,networkDetails:i}):"audioTrack"===c?u.trigger(s.a.AUDIO_TRACK_LOADED,{details:m,id:l,stats:t,networkDetails:i}):"subtitleTrack"===c&&u.trigger(s.a.SUBTITLE_TRACK_LOADED,{details:m,id:l,stats:t,networkDetails:i}):u.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.MANIFEST_PARSING_ERROR,fatal:!0,url:n,reason:"invalid targetduration",networkDetails:i})}else{var y=this.parseMasterPlaylist(o,n);if(y.length){var g=y.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),b=this.parseMasterPlaylistMedia(o,n,"AUDIO",g),v=this.parseMasterPlaylistMedia(o,n,"SUBTITLES");if(b.length){var E=!1;b.forEach((function(e){e.url||(E=!0)})),!1===E&&y[0].audioCodec&&!y[0].attrs.AUDIO&&(d.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),b.unshift({type:"main",name:"main"}))}u.trigger(s.a.MANIFEST_LOADED,{levels:y,audioTracks:b,subtitles:v,url:n,stats:t,networkDetails:i})}else u.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.MANIFEST_PARSING_ERROR,fatal:!0,url:n,reason:"no level found in manifest",networkDetails:i})}else u.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.MANIFEST_PARSING_ERROR,fatal:!0,url:n,reason:"no EXTM3U delimiter",networkDetails:i})},t.prototype.loaderror=function(e,t){var r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=t.loader;switch(t.type){case"manifest":r=a.a.MANIFEST_LOAD_ERROR,i=!0;break;case"level":r=a.a.LEVEL_LOAD_ERROR,i=!1;break;case"audioTrack":r=a.a.AUDIO_TRACK_LOAD_ERROR,i=!1}n&&(n.abort(),this.loaders[t.type]=void 0),this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:r,fatal:i,url:n.url,loader:n,response:e,context:t,networkDetails:o})},t.prototype.loadtimeout=function(e,t){var r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=t.loader;switch(t.type){case"manifest":r=a.a.MANIFEST_LOAD_TIMEOUT,i=!0;break;case"level":r=a.a.LEVEL_LOAD_TIMEOUT,i=!1;break;case"audioTrack":r=a.a.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}n&&(n.abort(),this.loaders[t.type]=void 0),this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:r,fatal:i,url:n.url,loader:n,context:t,networkDetails:o})},t}(u),B=P;function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=function(e){function t(r){D(this,t);var i=I(this,e.call(this,r,s.a.FRAG_LOADING));return i.loaders={},i}return U(t,e),t.prototype.destroy=function(){var e=this.loaders;for(var t in e){var r=e[t];r&&r.destroy()}this.loaders={},u.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag,r=t.type,i=this.loaders[r],o=this.hls.config;t.loaded=0,i&&(d.b.warn("abort previous fragment loader for type:"+r),i.abort()),i=this.loaders[r]=t.loader=typeof o.fLoader<"u"?new o.fLoader(o):new o.loader(o);var n=void 0,s=void 0,a=void 0;n={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var c=t.byteRangeStartOffset,l=t.byteRangeEndOffset;!isNaN(c)&&!isNaN(l)&&(n.rangeStart=c,n.rangeEnd=l),s={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:o.fragLoadingMaxRetryTimeout},a={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},i.load(n,s,a)},t.prototype.loadsuccess=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.data,n=r.frag;n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(s.a.FRAG_LOADED,{payload:o,frag:n,stats:t,networkDetails:i})},t.prototype.loaderror=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},t.prototype.loadtimeout=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},t.prototype.loadprogress=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=t.frag;o.loaded=e.loaded,this.hls.trigger(s.a.FRAG_LOAD_PROGRESS,{frag:o,stats:e,networkDetails:i})},t}(u),K=O;function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var V=function(e){function t(r){j(this,t);var i=N(this,e.call(this,r,s.a.KEY_LOADING));return i.loaders={},i.decryptkey=null,i.decrypturl=null,i}return M(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},u.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,r=t.type,i=this.loaders[r],o=t.decryptdata,n=o.uri;if(n!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;i&&(d.b.warn("abort previous key loader for type:"+r),i.abort()),t.loader=this.loaders[r]=new a.loader(a),this.decrypturl=n,this.decryptkey=null;var c=void 0,l=void 0,p=void 0;c={url:n,frag:t,responseType:"arraybuffer"},l={timeout:a.fragLoadingTimeOut,maxRetry:a.fragLoadingMaxRetry,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(c,l,p)}else this.decryptkey&&(o.key=this.decryptkey,this.hls.trigger(s.a.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,r){var i=r.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(s.a.KEY_LOADED,{frag:i})},t.prototype.loaderror=function(e,t){var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},t.prototype.loadtimeout=function(e,t){var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(s.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(u),G={search:function(e,t){for(var r=0,i=e.length-1,o=null,n=null;r<=i;){var s=t(n=e[o=(r+i)/2|0]);if(s>0)r=o+1;else{if(!(s<0))return n;i=o-1}}return null}},F={isBuffered:function(e,t){try{if(e)for(var r=e.buffered,i=0;i<r.length;i++)if(t>=r.start(i)&&t<=r.end(i))return!0}catch{}return!1},bufferInfo:function(e,t,r){try{if(e){var i,o=e.buffered,n=[];for(i=0;i<o.length;i++)n.push({start:o.start(i),end:o.end(i)});return this.bufferedInfo(n,t,r)}}catch{}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,r){var i,o,n,s,a,d=[];for(e.sort((function(e,t){return e.start-t.start||t.end-e.end})),a=0;a<e.length;a++){var c=d.length;if(c){var l=d[c-1].end;e[a].start-l<r?e[a].end>l&&(d[c-1].end=e[a].end):d.push(e[a])}else d.push(e[a])}for(a=0,i=0,o=n=t;a<d.length;a++){var p=d[a].start,u=d[a].end;if(t+r>=p&&t<u)o=p,i=(n=u)-t;else if(t+r<p){s=p;break}}return{len:i,start:o,end:n,nextStart:s}}},q=r(7),$=r(5),z=r.n($),X=r(9),Z=r.n(X);function W(){if(typeof window<"u")return window.MediaSource||window.WebKitMediaSource}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Y=W(),Q=function(){function e(t,r){H(this,e),this.hls=t,this.id=r;var i=this.observer=new z.a,o=t.config;i.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];i.emit.apply(i,[e,e].concat(r))},i.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];i.removeListener.apply(i,[e].concat(r))};var n=function(e,r){(r=r||{}).frag=this.frag,r.id=this.id,t.trigger(e,r)}.bind(this);i.on(s.a.FRAG_DECRYPTED,n),i.on(s.a.FRAG_PARSING_INIT_SEGMENT,n),i.on(s.a.FRAG_PARSING_DATA,n),i.on(s.a.FRAG_PARSED,n),i.on(s.a.ERROR,n),i.on(s.a.FRAG_PARSING_METADATA,n),i.on(s.a.FRAG_PARSING_USERDATA,n),i.on(s.a.INIT_PTS_FOUND,n);var c={mp4:Y.isTypeSupported("video/mp4"),mpeg:Y.isTypeSupported("audio/mpeg"),mp3:Y.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(o.enableWorker&&typeof Worker<"u"){d.b.log("demuxing in webworker");var p=void 0;try{p=this.w=Z()(10),this.onwmsg=this.onWorkerMessage.bind(this),p.addEventListener("message",this.onwmsg),p.onerror=function(e){t.trigger(s.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},p.postMessage({cmd:"init",typeSupported:c,vendor:l,id:r,config:JSON.stringify(o)})}catch{d.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),p&&URL.revokeObjectURL(p.objectURL),this.demuxer=new q.a(i,c,o,l),this.w=void 0}}else this.demuxer=new q.a(i,c,o,l)}return e.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},e.prototype.push=function(e,t,r,i,o,n,s,a){var c=this.w,l=isNaN(o.startDTS)?o.start:o.startDTS,p=o.decryptdata,u=this.frag,f=!(u&&o.cc===u.cc),h=!(u&&o.level===u.level),m=u&&o.sn===u.sn+1,y=!h&&m;if(f&&d.b.log(this.id+":discontinuity detected"),h&&d.b.log(this.id+":switch detected"),this.frag=o,c)c.postMessage({cmd:"demux",data:e,decryptdata:p,initSegment:t,audioCodec:r,videoCodec:i,timeOffset:l,discontinuity:f,trackSwitch:h,contiguous:y,duration:n,accurateTimeOffset:s,defaultInitPTS:a},e instanceof ArrayBuffer?[e]:[]);else{var g=this.demuxer;g&&g.push(e,p,t,r,i,l,f,h,y,n,s,a)}},e.prototype.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case s.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},e}(),J=Q;function ee(e,t,r){var i=e[t],o=e[r],n=o.startPTS;isNaN(n)?o.start=r>t?i.start+i.duration:Math.max(i.start-o.duration,0):r>t?(i.duration=n-i.start,i.duration<0&&d.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(o.duration=i.start-n,o.duration<0&&d.b.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!"))}function te(e,t,r,i,o,n){var s=r;if(!isNaN(t.startPTS)){var a=Math.abs(t.startPTS-r);isNaN(t.deltaPTS)?t.deltaPTS=a:t.deltaPTS=Math.max(a,t.deltaPTS),s=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),i=Math.max(i,t.endPTS),o=Math.min(o,t.startDTS),n=Math.max(n,t.endDTS)}var d=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=s,t.endPTS=i,t.startDTS=o,t.endDTS=n,t.duration=i-r;var c,l,p,u=t.sn;if(!e||u<e.startSN||u>e.endSN)return 0;for(c=u-e.startSN,(l=e.fragments)[c]=t,p=c;p>0;p--)ee(l,p,p-1);for(p=c;p<l.length-1;p++)ee(l,p,p+1);return e.PTSKnown=!0,d}function re(e,t){var r,i=Math.max(e.startSN,t.startSN)-t.startSN,o=Math.min(e.endSN,t.endSN)-t.startSN,n=t.startSN-e.startSN,s=e.fragments,a=t.fragments,c=0;if(o<i)t.PTSKnown=!1;else{for(var l=i;l<=o;l++){var p=s[n+l],u=a[l];u&&p&&(c=p.cc-u.cc,isNaN(p.startPTS)||(u.start=u.startPTS=p.startPTS,u.endPTS=p.endPTS,u.duration=p.duration,u.backtracked=p.backtracked,u.dropped=p.dropped,r=u))}if(c)for(d.b.log("discontinuity sliding from playlist, take drift into account"),l=0;l<a.length;l++)a[l].cc+=c;if(r)te(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(n>=0&&n<s.length){var f=s[n].start;for(l=0;l<a.length;l++)a[l].start+=f}t.PTSKnown=e.PTSKnown}}var ie={toString:function(e){for(var t="",r=e.length,i=0;i<r;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}};function oe(e,t){for(var r=null,i=0;i<e.length;i+=1){var o=e[i];if(o&&o.cc===t){r=o;break}}return r}function ne(e,t){return G.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}function se(e,t,r){var i=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(i=!0),i}function ae(e,t){var r=e.fragments,i=t.fragments;if(i.length&&r.length){var o=oe(r,i[0].cc);if(o&&(!o||o.startPTS))return o;d.b.log("No frag in previous level to align on")}else d.b.log("No fragments to align")}function de(e,t){t.fragments.forEach((function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}})),t.PTSKnown=!0}function ce(e,t,r){if(se(e,t,r)){var i=ae(t.details,r);i&&(d.b.log("Adjusting PTS using last level due to CC increase within current level"),de(i.start,r))}if(!1===r.PTSKnown&&t&&t.details){var o=t.details.programDateTime,n=(r.programDateTime-o)/1e3+t.details.fragments[0].start;isNaN(n)||(d.b.log("adjusting PTS using programDateTime delta, sliding:"+n.toFixed(3)),de(n,r))}}var le=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var he={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},me=function(e){function t(r){pe(this,t);var i=ue(this,e.call(this,r,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.MANIFEST_LOADING,s.a.MANIFEST_PARSED,s.a.LEVEL_LOADED,s.a.KEY_LOADED,s.a.FRAG_LOADED,s.a.FRAG_LOAD_EMERGENCY_ABORTED,s.a.FRAG_PARSING_INIT_SEGMENT,s.a.FRAG_PARSING_DATA,s.a.FRAG_PARSED,s.a.ERROR,s.a.AUDIO_TRACK_SWITCHING,s.a.AUDIO_TRACK_SWITCHED,s.a.BUFFER_CREATED,s.a.BUFFER_APPENDED,s.a.BUFFER_FLUSHED));return i.config=r.config,i.audioCodecSwap=!1,i.ticks=0,i._state=he.STOPPED,i.ontick=i.tick.bind(i),i}return fe(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),u.prototype.destroy.call(this),this.state=he.STOPPED},t.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=r.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(d.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=he.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=he.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=he.STOPPED,this.forceStartLoad=!1},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){switch(this.state){case he.ERROR:break;case he.BUFFER_FLUSHING:this.fragLoadError=0;break;case he.IDLE:this._doTickIdle();break;case he.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=he.IDLE);break;case he.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(d.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=he.IDLE)}this._checkBuffer(),this._checkFragmentChanged()},t.prototype._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch)){var i=void 0;i=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var o=e.nextLoadLevel,n=this.levels[o];if(n){var a=n.bitrate,c=void 0;c=a?Math.max(8*t.maxBufferSize/a,t.maxBufferLength):t.maxBufferLength,c=Math.min(c,t.maxMaxBufferLength);var l=F.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,i,t.maxBufferHole),p=l.len;if(!(p>=c)){d.b.trace("buffer length of "+p.toFixed(3)+" is below max of "+c.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=o;var u=n.details;if(void 0===u||!0===u.live&&this.levelLastLoaded!==o)return void(this.state=he.WAITING_LEVEL);var f=this.fragPrevious;if(!u.live&&f&&!f.backtracked&&f.sn===u.endSN&&!l.nextStart&&Math.min(r.duration,f.start+f.duration)-Math.max(l.end,f.start)<=Math.max(.2,f.duration)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(s.a.BUFFER_EOS,h),void(this.state=he.ENDED)}this._fetchPayloadOrEos(i,l,u)}}}},t.prototype._fetchPayloadOrEos=function(e,t,r){var i=this.fragPrevious,o=this.level,n=r.fragments,s=n.length;if(0!==s){var a=n[0].start,c=n[s-1].start+n[s-1].duration,l=t.end,p=void 0;if(r.initSegment&&!r.initSegment.data)p=r.initSegment;else if(r.live){var u=this.config.initialLiveManifestSize;if(s<u)return void d.b.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+u);if(null===(p=this._ensureFragmentAtLivePoint(r,l,a,c,i,n,s)))return}else l<a&&(p=n[0]);p||(p=this._findFragment(a,i,s,n,l,c,r)),p&&this._loadFragmentOrKey(p,o,r,e,l)}},t.prototype._ensureFragmentAtLivePoint=function(e,t,r,i,o,n,s){var a=this.hls.config,c=this.media,l=void 0,p=void 0!==a.liveMaxLatencyDuration?a.liveMaxLatencyDuration:a.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-a.maxFragLookUpTolerance,i-p)){var u=this.liveSyncPosition=this.computeLivePosition(r,e);d.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+u.toFixed(3)),t=u,c&&c.readyState&&c.duration>u&&(c.currentTime=u),this.nextLoadPosition=u}if(e.PTSKnown&&t>i&&c&&c.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(o){var f=o.sn+1;if(f>=e.startSN&&f<=e.endSN){var h=n[f-e.startSN];o.cc===h.cc&&(l=h,d.b.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=G.search(n,(function(e){return o.cc-e.cc})))&&d.b.log("live playlist, switching playlist, load frag with same CC: "+l.sn)}l||(l=n[Math.min(s-1,Math.round(s/2))],d.b.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l},t.prototype._findFragment=function(e,t,r,i,o,n,s){var a=this.hls.config,c=void 0,l=void 0,p=a.maxFragLookUpTolerance,u=t?i[t.sn-i[0].sn+1]:void 0,f=function(e){var t=Math.min(p,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-t<=o?1:e.start-t>o&&e.start?-1:0};if(o<n?(o>n-p&&(p=0),l=u&&!f(u)?u:G.search(i,f)):l=i[r-1],l){var h=(c=l).sn-s.startSN,m=t&&c.level===t.level,y=i[h-1],g=i[h+1];if(t&&c.sn===t.sn)if(m&&!c.backtracked)if(c.sn<s.endSN){var b=t.deltaPTS;b&&b>a.maxBufferHole&&t.dropped&&h?(c=y,d.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(c=g,d.b.log("SN just loaded, load next one: "+c.sn))}else c=null;else c.backtracked&&(g&&g.backtracked?(d.b.warn("Already backtracked from fragment "+g.sn+", will not backtrack to fragment "+c.sn+". Loading fragment "+g.sn),c=g):(d.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),c.dropped=0,y?(y.loadCounter&&y.loadCounter--,(c=y).backtracked=!0):h&&(c=null)))}return c},t.prototype._loadFragmentOrKey=function(e,t,r,i,o){var n=this.hls,c=n.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(d.b.log("Loading "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t+", currentTime:"+i.toFixed(3)+",bufferEnd:"+o.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var l=c.fragLoadingLoopThreshold;if(e.loadCounter>l&&Math.abs(this.fragLoadIdx-e.loadIdx)<l)return void n.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,e.autoLevel=n.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.fragCurrent=e,this.startFragRequested=!0,!isNaN(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),n.trigger(s.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new J(n,"main")),void(this.state=he.FRAG_LOADING)}d.b.log("Loading key for "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t),this.state=he.KEY_LOADING,n.trigger(s.a.KEY_LOADING,{frag:e})},t.prototype.getBufferedFrag=function(e){return G.search(this._bufferedFrags,(function(t){return e<t.startPTS?-1:e>t.endPTS?1:0}))},t.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},t.prototype._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),F.isBuffered(r,t)?e=this.getBufferedFrag(t):F.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(s.a.FRAG_CHANGED,{frag:i});var o=i.level;(!this.fragPlaying||this.fragPlaying.level!==o)&&this.hls.trigger(s.a.LEVEL_SWITCHED,{level:o}),this.fragPlaying=i}}},t.prototype.immediateLevelSwitch=function(){if(d.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,F.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},t.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t=void 0,r=void 0,i=void 0;if(void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),(r=this.getBufferedFrag(e.currentTime))&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var o=this.hls.nextLoadLevel,n=this.levels[o],s=this.fragLastKbps;t=s&&this.fragCurrent?this.fragCurrent.duration*n.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(e.currentTime+t))&&(i=this.followingBufferedFrag(i))){var a=this.fragCurrent;a&&a.loader&&a.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},t.prototype.flushMainBuffer=function(e,t){this.state=he.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(s.a.BUFFER_FLUSHING,r)},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(d.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.loadCounter=void 0,e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;isNaN(t)||d.b.log("media seeking to "+t.toFixed(3));var i=this.mediaBuffer?this.mediaBuffer:e,o=F.bufferInfo(i,t,this.config.maxBufferHole);if(this.state===he.FRAG_LOADING){var n=this.fragCurrent;if(0===o.len&&n){var s=r.maxFragLookUpTolerance,a=n.start-s,c=n.start+n.duration+s;t<a||t>c?(n.loader&&(d.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=he.IDLE):d.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===he.ENDED&&(0===o.len&&(this.fragPrevious=0),this.state=he.IDLE);e&&(this.lastCurrentTime=t),this.state!==he.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()},t.prototype.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||d.b.log("media seeked to "+t.toFixed(3)),this.tick()},t.prototype.onMediaEnded=function(){d.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestLoading=function(){d.b.log("trigger BUFFER_RESET"),this.hls.trigger(s.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestParsed=function(e){var t,r=!1,i=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=r&&i,this.audioCodecSwitch&&d.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var o=this.config;(o.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(o.startPosition)},t.prototype.onLevelLoaded=function(e){var t=e.details,r=e.level,i=this.levels[this.levelLastLoaded],o=this.levels[r],n=t.totalduration,a=0;if(d.b.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+n),t.live){var c=o.details;c&&t.fragments.length>0?(re(c,t),a=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,c),t.PTSKnown&&!isNaN(a)?d.b.log("live playlist sliding:"+a.toFixed(3)):(d.b.log("live playlist - outdated PTS, unknown sliding"),ce(this.fragPrevious,i,t))):(d.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,ce(this.fragPrevious,i,t))}else t.PTSKnown=!1;if(o.details=t,this.levelLastLoaded=r,this.hls.trigger(s.a.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=t.startTimeOffset;isNaN(l)?t.live?(this.startPosition=this.computeLivePosition(a,t),d.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(l<0&&(d.b.log("negative start time offset "+l+", count from end of last fragment"),l=a+n+l),d.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===he.WAITING_LEVEL&&(this.state=he.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===he.KEY_LOADING&&(this.state=he.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===he.FRAG_LOADING&&t&&"main"===r.type&&r.level===t.level&&r.sn===t.sn){var i=e.stats,o=this.levels[t.level],n=o.details;if(d.b.log("Loaded  "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=i,!0===r.bitrateTest&&this.hls.nextLoadLevel)this.state=he.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(s.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=he.IDLE,i.tparsed=i.tbuffered=performance.now(),n.initSegment.data=e.payload,this.hls.trigger(s.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else{this.state=he.PARSING;var a=n.totalduration,c=t.level,l=t.sn,p=this.config.defaultAudioCodec||o.audioCodec;this.audioCodecSwap&&(d.b.log("swapping playlist audio codec"),void 0===p&&(p=this.lastAudioCodec),p&&(p=-1!==p.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,d.b.log("Parsing "+l+" of ["+n.startSN+" ,"+n.endSN+"],level "+c+", cc "+t.cc);var u=this.demuxer;u||(u=this.demuxer=new J(this.hls,"main"));var f=this.media,h=!(f&&f.seeking)&&(n.PTSKnown||!n.live),m=n.initSegment?n.initSegment.data:[];u.push(e.payload,m,p,o.videoCodec,t,a,h,void 0)}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===he.PARSING){var i,o,n=e.tracks;if(n.audio&&this.altAudio&&delete n.audio,o=n.audio){var a=this.levels[this.level].audioCodec,c=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(d.b.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===c.indexOf("firefox")&&(a="mp4a.40.5"),-1!==c.indexOf("android")&&"audio/mpeg"!==o.container&&(a="mp4a.40.2",d.b.log("Android: force audio codec to "+a)),o.levelCodec=a,o.id=e.id}for(i in(o=n.video)&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=e.id),this.hls.trigger(s.a.BUFFER_CODECS,n),n){o=n[i],d.b.log("main track:"+i+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var l=o.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.a.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},t.prototype.onFragParsingData=function(e){var t=this,r=this.fragCurrent,i=e.frag;if(r&&"main"===e.id&&i.sn===r.sn&&i.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===he.PARSING){var o=this.levels[this.level],n=r;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),d.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(n.dropped=e.dropped,n.dropped)if(n.backtracked)d.b.warn("Already backtracked on this fragment, appending with the gap");else{var a=o.details;if(!a||n.sn!==a.startSN)return d.b.warn("missing video frame(s), backtracking fragment"),n.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=he.IDLE,this.fragPrevious=n,void this.tick();d.b.warn("missing video frame(s) on first frag, appending with gap")}else n.backtracked=!1;var c=te(o.details,n,e.startPTS,e.endPTS,e.startDTS,e.endDTS),l=this.hls;l.trigger(s.a.LEVEL_PTS_UPDATED,{details:o.details,level:this.level,drift:c,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(r){r&&r.length&&t.state===he.PARSING&&(t.appended=!0,t.pendingBuffering=!0,l.trigger(s.a.BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))})),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===he.PARSING&&(this.stats.tparsed=performance.now(),this.state=he.PARSED,this._checkAppendedParsed())},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url,r=e.id;if(!t){if(this.mediaBuffer!==this.media){d.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(d.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=he.IDLE}var o=this.hls;o.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),o.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},t.prototype.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(d.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r,this.tick()},t.prototype.onBufferCreated=function(e){var t=e.tracks,r=void 0,i=void 0,o=!1;for(var n in t){var s=t[n];"main"===s.id?(i=n,r=s,"video"===n&&(this.videoBuffer=t[n].buffer)):o=!0}o&&r?(d.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},t.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;(t===he.PARSING||t===he.PARSED)&&(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==he.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;d.b.log("main buffered : "+ie.toString(t.buffered));var r=this._bufferedFrags.filter((function(e){return F.isBuffered(t,(e.startPTS+e.endPTS)/2)}));r.push(e),this._bufferedFrags=r.sort((function(e,t){return e.startPTS-t.startPTS})),this.fragPrevious=e;var i=this.stats;i.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger(s.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.state=he.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=!!this.media&&F.isBuffered(this.media,this.media.currentTime)&&F.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);t.loadCounter=0,d.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=he.FRAG_LOADING_WAITING_RETRY}else d.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=he.ERROR;break;case a.a.FRAG_LOOP_LOADING_ERROR:e.fatal||(r?(this._reduceMaxBufferLength(t.duration),this.state=he.IDLE):(!t.autoLevel||0===t.level)&&(e.fatal=!0,this.state=he.ERROR));break;case a.a.LEVEL_LOAD_ERROR:case a.a.LEVEL_LOAD_TIMEOUT:this.state!==he.ERROR&&(e.fatal?(this.state=he.ERROR,d.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):!e.levelRetry&&this.state===he.WAITING_LEVEL&&(this.state=he.IDLE));break;case a.a.BUFFER_FULL_ERROR:"main"===e.parent&&(this.state===he.PARSING||this.state===he.PARSED)&&(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=he.IDLE):(d.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},t.prototype._reduceMaxBufferLength=function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,d.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*t.fragLoadingLoopThreshold))},t.prototype._checkBuffer=function(){var e=this.media,t=this.config;if(e&&e.readyState){var r=e.currentTime,i=this.mediaBuffer?this.mediaBuffer:e,o=i.buffered;if(!this.loadedmetadata&&o.length){this.loadedmetadata=!0;var n=e.seeking?r:this.startPosition,c=F.isBuffered(i,n),l=o.start(0),p=!c&&Math.abs(n-l)<t.maxSeekHole;(r!==n||p)&&(d.b.log("target start position:"+n),p&&(n=l,d.b.log("target start position not buffered, seek to buffered.start(0) "+n)),d.b.log("adjust currentTime from "+r+" to "+n),e.currentTime=n)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var u=F.bufferInfo(e,r,0),f=!(e.paused||e.ended||0===e.buffered.length),h=.5;if(r!==this.lastCurrentTime)this.stallReported&&(d.b.warn("playback not stuck anymore @"+r+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(f){var m=performance.now(),y=this.hls;if(this.stalled){var g=m-this.stalled,b=u.len,v=this.nudgeRetry||0;if(b<=h&&g>1e3*t.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,d.b.warn("playback stalling in low buffer @"+r),y.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:b}));var E=u.nextStart,R=E-r;if(E&&R<t.maxSeekHole&&R>0){this.nudgeRetry=++v;var A=v*t.nudgeOffset;d.b.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+E+" + nudge "+A),e.currentTime=E+A,this.stalled=void 0,y.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:E+A-r})}}else if(b>h&&g>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,d.b.warn("playback stalling in high buffer @"+r),y.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:b})),this.stalled=void 0,this.nudgeRetry=++v,v<t.nudgeMaxRetry){var T=e.currentTime,_=T+v*t.nudgeOffset;d.b.log("adjust currentTime from "+T+" to "+_),e.currentTime=_,y.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else d.b.error("still stuck in high buffer @"+r+" after "+t.nudgeMaxRetry+", raise fatal error"),y.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=m,this.stallReported=!1}}}},t.prototype.onFragLoadEmergencyAborted=function(){this.state=he.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter((function(t){return F.isBuffered(e,(t.startPTS+t.endPTS)/2)})),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state=he.IDLE,this.fragPrevious=null},t.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.prototype.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},le(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,d.b.log("main stream:"+t+"->"+e),this.hls.trigger(s.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(u),ye=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ee=function(e){function t(r){ge(this,t);var i=be(this,e.call(this,r,s.a.MANIFEST_LOADED,s.a.LEVEL_LOADED,s.a.FRAG_LOADED,s.a.ERROR));return i.canload=!1,i.currentLevelIndex=null,i.manualLevelIndex=-1,i.timer=null,i}return ve(t,e),t.prototype.destroy=function(){this.cleanTimer(),this.manualLevelIndex=-1},t.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t=[],r=void 0,i={},o=null,n=!1,c=!1,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),p=[];if(e.levels.forEach((function(e){e.loadError=0,e.fragmentError=!1,n=n||!!e.videoCodec,c=c||!!e.audioCodec||!(!e.attrs||!e.attrs.AUDIO),!0===l&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),void 0===(o=i[e.bitrate])?(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,t.push(e)):o.url.push(e.url)})),!0===n&&!0===c&&(t=t.filter((function(e){return!!e.videoCodec}))),t=t.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||v(t))&&(!r||v(r))})),e.audioTracks&&(p=e.audioTracks.filter((function(e){return!e.audioCodec||v(e.audioCodec,"audio")}))),t.length>0){r=t[0].bitrate,t.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=t;for(var u=0;u<t.length;u++)if(t[u].bitrate===r){this._firstLevel=u,d.b.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+r);break}this.hls.trigger(s.a.MANIFEST_PARSED,{levels:t,audioTracks:p,firstLevel:this._firstLevel,stats:e.stats,audio:c,video:n,altAudio:p.length>0})}else this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.prototype.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.cleanTimer(),this.currentLevelIndex!==e){d.b.log("switching to level "+e),this.currentLevelIndex=e;var i=t[e];i.level=e,r.trigger(s.a.LEVEL_SWITCH,i),r.trigger(s.a.LEVEL_SWITCHING,i)}var o=t[e],n=o.details;if(!n||!0===n.live){var c=o.urlId;r.trigger(s.a.LEVEL_LOADING,{url:o.url[c],level:e,id:c})}}else r.trigger(s.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},t.prototype.onError=function(e){if(!0!==e.fatal){var t=!1,r=!1,i=void 0;switch(e.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:case a.a.FRAG_LOOP_LOADING_ERROR:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:i=e.frag.level,r=!0;break;case a.a.LEVEL_LOAD_ERROR:case a.a.LEVEL_LOAD_TIMEOUT:i=e.context.level,t=!0;break;case a.a.REMUX_ALLOC_ERROR:i=e.level,t=!0}void 0!==i&&this.recoverLevel(e,i,t,r)}else e.type===a.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.recoverLevel=function(e,t,r,i){var o=this,n=this.hls.config,s=e.details,a=this._levels[t],c=void 0,l=void 0,p=void 0;if(a.loadError++,a.fragmentError=i,!0===r){if(!(this.levelRetryCount+1<=n.levelLoadingMaxRetry))return d.b.error("level controller, cannot recover from "+s+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(e.fatal=!0);l=Math.min(Math.pow(2,this.levelRetryCount)*n.levelLoadingRetryDelay,n.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return o.loadLevel()}),l),e.levelRetry=!0,this.levelRetryCount++,d.b.warn("level controller, "+s+", retry in "+l+" ms, current retry count is "+this.levelRetryCount)}(!0===r||!0===i)&&((c=a.url.length)>1&&a.loadError<c?(d.b.warn("level controller, "+s+" for level "+t+": switching to redundant stream id "+a.urlId),a.urlId=(a.urlId+1)%c,a.details=void 0):-1===this.manualLevelIndex?(p=0===t?this._levels.length-1:t-1,d.b.warn("level controller, "+s+": switch to "+p),this.hls.nextAutoLevel=this.currentLevelIndex=p):!0===i&&(d.b.warn("level controller, "+s+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,r=e.level;if(r===this.currentLevelIndex){var i=this._levels[r];!1===i.fragmentError&&(i.loadError=0,this.levelRetryCount=0);var o=e.details;if(o.live){var n=1e3*(o.averagetargetduration?o.averagetargetduration:o.targetduration),s=i.details;s&&o.endSN===s.endSN&&(n/=2,d.b.log("same live playlist, reload twice faster")),n-=performance.now()-e.stats.trequest,n=Math.max(1e3,Math.round(n)),d.b.log("live playlist, reload in "+n+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),n)}else this.cleanTimer()}},t.prototype.loadLevel=function(){var e=void 0,t=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(e=this._levels[this.currentLevelIndex])&&e.url.length>0&&(t=e.urlId,this.hls.trigger(s.a.LEVEL_LOADING,{url:e.url[t],level:this.currentLevelIndex,id:t}))},ye(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),(this.currentLevelIndex!==e||void 0===t[e].details)&&this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(u),Re=r(3);function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var we=function(e){function t(r){Ae(this,t);var i=Te(this,e.call(this,r,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.FRAG_PARSING_METADATA));return i.id3Track=void 0,i.media=void 0,i}return _e(t,e),t.prototype.destroy=function(){u.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){this.media=void 0},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,o=0;o<r.length;o++){var n=Re.a.getID3Frames(r[o].data);if(n){var s=r[o].pts,a=o<r.length-1?r[o+1].pts:t.endPTS;s===a&&(a+=1e-4);for(var d=0;d<n.length;d++){var c=n[d];if(!Re.a.isTimeStampFrame(c)){var l=new i(s,a,"");l.value=c,this.id3Track.addCue(l)}}}}},t}(u);function Le(){var e=W(),t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!i}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Se=function(){function e(t){Ce(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var xe=function(){function e(t,r,i,o){ke(this,e),this.hls=t,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Se(r),this.fast_=new Se(i)}return e.prototype.sample=function(e,t){var r=8e3*t/(e=Math.max(e,this.minDelayMs_)),i=e/1e3;this.fast_.sample(i,r),this.slow_.sample(i,r)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}(),Pe=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ue=function(e){function t(r){Be(this,t);var i=De(this,e.call(this,r,s.a.FRAG_LOADING,s.a.FRAG_LOADED,s.a.FRAG_BUFFERED,s.a.ERROR));return i.lastLoadedFragLevel=0,i._nextAutoLevel=-1,i.hls=r,i.timer=null,i._bwEstimator=null,i.onCheck=i._abandonRulesCheck.bind(i),i}return Ie(t,e),t.prototype.destroy=function(){this.clearTimer(),u.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var r=this.hls,i=e.frag.level,o=r.levels[i].details.live,n=r.config,s=void 0,a=void 0;o?(s=n.abrEwmaFastLive,a=n.abrEwmaSlowLive):(s=n.abrEwmaFastVoD,a=n.abrEwmaSlowVoD),this._bwEstimator=new xe(r,a,s,n.abrEwmaDefaultEstimate)}this.fragCurrent=t}},t.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent,i=r.loader,o=e.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return d.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var n=i.stats;if(t&&n&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var a=performance.now()-n.trequest,c=Math.abs(t.playbackRate);if(a>500*r.duration/c){var l=e.levels,p=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/a),u=l[r.level],f=u.realBitrate?Math.max(u.realBitrate,u.bitrate):u.bitrate,h=n.total?n.total:Math.max(n.loaded,Math.round(r.duration*f/8)),m=t.currentTime,y=(h-n.loaded)/p,g=(F.bufferInfo(t,m,e.config.maxBufferHole).end-m)/c;if(g<2*r.duration/c&&y>g){var b=void 0,v=void 0;for(v=r.level-1;v>o;v--){var E=l[v].realBitrate?Math.max(l[v].realBitrate,l[v].bitrate):l[v].bitrate;if((b=r.duration*E/(6.4*p))<g)break}b<y&&(d.b.warn("loading too slow, abort fragment loading and switch to level "+v+":fragLoadedDelay["+v+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+y.toFixed(1)+":"+g.toFixed(1)),e.nextLoadLevel=v,this._bwEstimator.sample(a,n.loaded),i.abort(),this.clearTimer(),e.trigger(s.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}},t.prototype.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],i=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,o=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:i,duration:o},r.realBitrate=Math.round(8*i/o)}if(e.frag.bitrateTest){var n=e.stats;n.tparsed=n.tbuffered=n.tload,this.onFragBuffered(e)}}},t.prototype.onFragBuffered=function(e){var t=e.stats,r=e.frag;if(!(!0===t.aborted||1!==r.loadCounter||"main"!==r.type||isNaN(r.sn)||r.bitrateTest&&t.tload!==t.tbuffered)){var i=t.tparsed-t.trequest;d.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},t.prototype.onError=function(e){switch(e.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},t.prototype._findBestLevel=function(e,t,r,i,o,n,s,a,c){for(var l=o;l>=i;l--){var p=c[l].details,u=p?p.totalduration/p.fragments.length:t,f=!!p&&p.live,h=void 0;h=l<=e?s*r:a*r;var m=c[l].realBitrate?Math.max(c[l].realBitrate,c[l].bitrate):c[l].bitrate,y=m*u/h;if(d.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(h)+"/"+m+"/"+u+"/"+n+"/"+y),h>m&&(!y||f&&!this.bitrateTestDelay||y<n))return l}return-1},Pe(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,i=e.config,o=e.minAutoLevel,n=e.media,s=this.lastLoadedFragLevel,a=this.fragCurrent?this.fragCurrent.duration:0,c=n?n.currentTime:0,l=n&&0!==n.playbackRate?Math.abs(n.playbackRate):1,p=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,u=(F.bufferInfo(n,c,i.maxBufferHole).end-c)/l,f=this._findBestLevel(s,a,p,o,t,u,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(f>=0)return f;d.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var h=a?Math.min(a,i.maxStarvationDelay):i.maxStarvationDelay,m=i.abrBandWidthFactor,y=i.abrBandWidthUpFactor;if(0===u){var g=this.bitrateTestDelay;g&&(h=(a?Math.min(a,i.maxLoadingDelay):i.maxLoadingDelay)-g,d.b.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*h)+" ms"),m=y=1)}return f=this._findBestLevel(s,a,p,o,t,u+h,m,y,r),Math.max(f,0)}}]),t}(u);function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ne=W(),Me=function(e){function t(r){Oe(this,t);var i=Ke(this,e.call(this,r,s.a.MEDIA_ATTACHING,s.a.MEDIA_DETACHING,s.a.MANIFEST_PARSED,s.a.BUFFER_RESET,s.a.BUFFER_APPENDING,s.a.BUFFER_CODECS,s.a.BUFFER_EOS,s.a.BUFFER_FLUSHING,s.a.LEVEL_PTS_UPDATED,s.a.LEVEL_UPDATED));return i._msDuration=null,i._levelDuration=null,i._live=null,i._objectUrl=null,i.onsbue=i.onSBUpdateEnd.bind(i),i.onsbe=i.onSBUpdateError.bind(i),i.pendingTracks={},i.tracks={},i}return je(t,e),t.prototype.destroy=function(){u.prototype.destroy.call(this)},t.prototype.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var i=this.sourceBuffer.audio;if(Math.abs(i.timestampOffset-e.start)>.1){var o=i.updating;try{i.abort()}catch(e){o=!0,d.b.warn("can not abort audio buffer: "+e)}o?this.audioTimestampOffset=e.start:(d.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+e.start),i.timestampOffset=e.start)}}},t.prototype.onManifestParsed=function(e){var t=e.audio,r=e.video||e.levels.length&&e.audio,i=0;e.altAudio&&(t||r)&&(i=(t?1:0)+(r?1:0),d.b.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i},t.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new Ne;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(r),this._objectUrl=t.src}},t.prototype.onMediaDetaching=function(){d.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){d.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):d.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(s.a.MEDIA_DETACHED)},t.prototype.onMediaSourceOpen=function(){d.b.log("media source opened"),this.hls.trigger(s.a.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},t.prototype.checkPendingTracks=function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},t.prototype.onMediaSourceClose=function(){d.b.log("media source closed")},t.prototype.onMediaSourceEnded=function(){d.b.log("media source ended")},t.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;d.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0);this.hls.trigger(s.a.BUFFER_APPENDED,{parent:t,pending:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},t.prototype.onSBUpdateError=function(e){d.b.error("sourceBuffer error:",e),this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch{}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},t.prototype.onBufferCodecs=function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}},t.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var i in e)if(!t[i]){var o=e[i],n=o.levelCodec||o.codec,c=o.container+";codecs="+n;d.b.log("creating sourceBuffer("+c+")");try{var l=t[i]=r.addSourceBuffer(c);l.addEventListener("updateend",this.onsbue),l.addEventListener("error",this.onsbe),this.tracks[i]={codec:n,container:o.container},o.buffer=l}catch(e){d.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:c})}}this.hls.trigger(s.a.BUFFER_CREATED,{tracks:e})},t.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},t.prototype.onBufferAppendFail=function(e){d.b.error("sourceBuffer error:",e.event),this.hls.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferEos=function(e){var t=this.sourceBuffer,r=e.type;for(var i in t)(!r||i===r)&&(t[i].ended||(t[i].ended=!0,d.b.log(i+" sourceBuffer now EOS")));this.checkEos()},t.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var i=e[r];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}d.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch{d.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},t.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},t.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._live=t.live,this.updateMediaElementDuration())},t.prototype.updateMediaElementDuration=function(){var e=this.hls.config,t=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer)if(!0===this.sourceBuffer[r].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(d.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||t===1/0||isNaN(t))&&(d.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},t.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var i in r)t+=r[i].buffered.length}catch{d.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(s.a.BUFFER_FLUSHED)}},t.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,r=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void d.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var i=r.shift();try{var o=t[i.type];o?o.updating?r.unshift(i):(o.ended=!1,this.parent=i.parent,o.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){d.b.error("error while trying to append buffer:"+t.message),r.unshift(i);var n={type:a.b.MEDIA_ERROR,parent:i.parent};if(22===t.code)return this.segments=[],n.details=a.a.BUFFER_FULL_ERROR,n.fatal=!1,void e.trigger(s.a.ERROR,n);if(this.appendError?this.appendError++:this.appendError=1,n.details=a.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return d.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],n.fatal=!0,void e.trigger(s.a.ERROR,n);n.fatal=!1,e.trigger(s.a.ERROR,n)}}}},t.prototype.flushBuffer=function(e,t,r){var i,o,n,s,a,c,l=this.sourceBuffer;if(Object.keys(l).length){if(d.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var p in l)if(!r||p===r){if((i=l[p]).ended=!1,i.updating)return d.b.warn("cannot flush, sb updating in progress"),!1;try{for(o=0;o<i.buffered.length;o++)if(n=i.buffered.start(o),s=i.buffered.end(o),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(a=e,c=t):(a=Math.max(n,e),c=Math.min(s,t)),Math.min(c,s)-a>.5)return this.flushBufferCounter++,d.b.log("flush "+p+" ["+a+","+c+"], of ["+n+","+s+"], pos:"+this.media.currentTime),i.remove(a,c),!1}catch{d.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else d.b.warn("abort flushing too many retries");d.b.log("buffer flushed")}return!0},t}(u),Ve=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var $e=function(e){function t(r){return Ge(this,t),Fe(this,e.call(this,r,s.a.FPS_DROP_LEVEL_CAPPING,s.a.MEDIA_ATTACHING,s.a.MANIFEST_PARSED))}return qe(t,e),t.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},t.prototype.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},t.prototype.onMediaAttaching=function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null},t.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.prototype.getMaxLevel=function(e){var r=this;if(!this.levels)return-1;var i=this.levels.filter((function(i,o){return t.isLevelAllowed(o,r.restrictedLevels)&&o<=e}));return t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},t.isLevelAllowed=function(e){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var i=function(e,t){return!t||e.width!==t.width||e.height!==t.height},o=e.length-1,n=0;n<e.length;n+=1){var s=e[n];if((s.width>=t||s.height>=r)&&i(s,e[n+1])){o=n;break}}return o},Ve(t,[{key:"mediaWidth",get:function(){var e=void 0,r=this.media;return r&&(e=r.width||r.clientWidth||r.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,r=this.media;return r&&(e=r.height||r.clientHeight||r.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch{}return e}}]),t}(u),ze=$e;function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function We(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var He=function(e){function t(r){return Xe(this,t),Ze(this,e.call(this,r,s.a.MEDIA_ATTACHING))}return We(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,r){var i=performance.now();if(t){if(this.lastTime){var o=i-this.lastTime,n=r-this.lastDroppedFrames,a=t-this.lastDecodedFrames,c=1e3*n/o,l=this.hls;if(l.trigger(s.a.FPS_DROP,{currentDropped:n,currentDecoded:a,totalDroppedFrames:r}),c>0&&n>l.config.fpsDroppedMonitoringThreshold*a){var p=l.currentLevel;d.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+p),p>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=p)&&(p-=1,l.trigger(s.a.FPS_DROP_LEVEL_CAPPING,{level:p,droppedLevel:l.currentLevel}),l.autoLevelCapping=p,l.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(u);function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Qe=function(){function e(t){Ye(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(e,t.url)}catch{e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,i=this.stats,o=this.context,n=this.config;if(!i.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===r){var s=t.status;if(s>=200&&s<300){i.tload=Math.max(i.tfirst,performance.now());var a=void 0,c=void 0;c="arraybuffer"===o.responseType?(a=t.response).byteLength:(a=t.responseText).length,i.loaded=i.total=c;var l={url:t.responseURL,data:a};this.callbacks.onSuccess(l,i,o,t)}else i.retry>=n.maxRetry||s>=400&&s<499?(d.b.error(s+" while loading "+o.url),this.callbacks.onError({code:s,text:t.statusText},o,t)):(d.b.warn(s+" while loading "+o.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,n.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),n.timeout)},e.prototype.loadtimeout=function(){d.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var i=this.callbacks.onProgress;i&&i(r,this.context,null,t)},e}(),Je=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function rt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var it=function(e){function t(r){et(this,t);var i=tt(this,e.call(this,r,s.a.MANIFEST_LOADING,s.a.MANIFEST_PARSED,s.a.AUDIO_TRACK_LOADED,s.a.ERROR));return i.ticks=0,i.ontick=i.tick.bind(i),i}return rt(t,e),t.prototype.destroy=function(){this.cleanTimer(),u.prototype.destroy.call(this)},t.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){this.updateTrack(this.trackId)},t.prototype.onError=function(e){e.fatal&&e.type===a.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestParsed=function(e){var t=this,r=e.audioTracks||[],i=!1;this.tracks=r,this.hls.trigger(s.a.AUDIO_TRACKS_UPDATED,{audioTracks:r});var o=0;r.forEach((function(e){if(e.default&&!i)return t.audioTrack=o,void(i=!0);o++})),!1===i&&r.length&&(d.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},t.prototype.onAudioTrackLoaded=function(e){e.id<this.tracks.length&&(d.b.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())},t.prototype.setAudioTrackInternal=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,d.b.log("switching to audioTrack "+e);var t=this.tracks[e],r=this.hls,i=t.type,o=t.url,n={id:e,type:i,url:o};r.trigger(s.a.AUDIO_TRACK_SWITCH,n),r.trigger(s.a.AUDIO_TRACK_SWITCHING,n);var a=t.details;o&&(void 0===a||!0===a.live)&&(d.b.log("(re)loading playlist for audioTrack "+e),r.trigger(s.a.AUDIO_TRACK_LOADING,{url:o,id:e}))}},t.prototype.updateTrack=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,d.b.log("updating audioTrack "+e);var t=this.tracks[e],r=t.url,i=t.details;r&&(void 0===i||!0===i.live)&&(d.b.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(s.a.AUDIO_TRACK_LOADING,{url:r,id:e}))}},Je(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){(this.trackId!==e||void 0===this.tracks[e].details)&&this.setAudioTrackInternal(e)}}]),t}(u),ot=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function st(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function at(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var dt={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},ct=function(e){function t(r){nt(this,t);var i=st(this,e.call(this,r,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.AUDIO_TRACKS_UPDATED,s.a.AUDIO_TRACK_SWITCHING,s.a.AUDIO_TRACK_LOADED,s.a.KEY_LOADED,s.a.FRAG_LOADED,s.a.FRAG_PARSING_INIT_SEGMENT,s.a.FRAG_PARSING_DATA,s.a.FRAG_PARSED,s.a.ERROR,s.a.BUFFER_RESET,s.a.BUFFER_CREATED,s.a.BUFFER_APPENDED,s.a.BUFFER_FLUSHED,s.a.INIT_PTS_FOUND));return i.config=r.config,i.audioCodecSwap=!1,i.ticks=0,i._state=dt.STOPPED,i.ontick=i.tick.bind(i),i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i}return at(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),u.prototype.destroy.call(this),this.state=dt.STOPPED},t.prototype.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,i=e.initPTS;"main"===t&&(this.initPTS[r]=i,this.videoTrackCC=r,d.b.log("InitPTS for cc:"+r+" found from video track:"+i),this.state===dt.WAITING_INIT_PTS&&this.tick())},t.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&-1===e?(d.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=dt.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=dt.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=dt.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=dt.STOPPED},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){var e,t,r,i=this.hls,o=i.config;switch(this.state){case dt.ERROR:case dt.PAUSED:case dt.BUFFER_FLUSHING:break;case dt.STARTING:this.state=dt.WAITING_TRACK,this.loadedmetadata=!1;break;case dt.IDLE:var n=this.tracks;if(!n||!this.media&&(this.startFragRequested||!o.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var c=this.mediaBuffer?this.mediaBuffer:this.media,l=this.videoBuffer?this.videoBuffer:this.media,p=F.bufferInfo(c,e,o.maxBufferHole),u=F.bufferInfo(l,e,o.maxBufferHole),f=p.len,h=p.end,m=this.fragPrevious,y=Math.max(o.maxBufferLength,u.len),g=this.audioSwitch,b=this.trackId;if((f<y||g)&&b<n.length){if(typeof(r=n[b].details)>"u"){this.state=dt.WAITING_TRACK;break}if(!g&&!r.live&&m&&m.sn===r.endSN&&!p.nextStart&&(!this.media.seeking||this.media.duration-h<m.duration/2)){this.hls.trigger(s.a.BUFFER_EOS,{type:"audio"}),this.state=dt.ENDED;break}var v=r.fragments,E=v.length,R=v[0].start,A=v[E-1].start+v[E-1].duration,T=void 0;if(g)if(r.live&&!r.PTSKnown)d.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),h=0;else if(h=e,r.PTSKnown&&e<R){if(!(p.end>R||p.nextStart))return;d.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=R+.05}if(r.initSegment&&!r.initSegment.data)T=r.initSegment;else if(h<=R){if(T=v[0],null!==this.videoTrackCC&&T.cc!==this.videoTrackCC&&(T=ne(v,this.videoTrackCC)),r.live&&T.loadIdx&&T.loadIdx===this.fragLoadIdx){var _=p.nextStart?p.nextStart:R;return d.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(_+.05)),void(this.media.currentTime=_+.05)}}else{var w=void 0,L=o.maxFragLookUpTolerance,C=m?v[m.sn-v[0].sn+1]:void 0,S=function(e){var t=Math.min(L,e.duration);return e.start+e.duration-t<=h?1:e.start-t>h&&e.start?-1:0};h<A?(h>A-L&&(L=0),w=C&&!S(C)?C:G.search(v,S)):w=v[E-1],w&&(T=w,R=w.start,m&&T.level===m.level&&T.sn===m.sn&&(T.sn<r.endSN?(T=v[T.sn+1-r.startSN],d.b.log("SN just loaded, load next one: "+T.sn)):T=null))}if(T)if(T.decryptdata&&null!=T.decryptdata.uri&&null==T.decryptdata.key)d.b.log("Loading key for "+T.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+b),this.state=dt.KEY_LOADING,i.trigger(s.a.KEY_LOADING,{frag:T});else{if(d.b.log("Loading "+T.sn+", cc: "+T.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+b+", currentTime:"+e+",bufferEnd:"+h.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,T.loadCounter){T.loadCounter++;var k=o.fragLoadingLoopThreshold;if(T.loadCounter>k&&Math.abs(this.fragLoadIdx-T.loadIdx)<k)return void i.trigger(s.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:T})}else T.loadCounter=1;T.loadIdx=this.fragLoadIdx,this.fragCurrent=T,this.startFragRequested=!0,isNaN(T.sn)||(this.nextLoadPosition=T.start+T.duration),i.trigger(s.a.FRAG_LOADING,{frag:T}),this.state=dt.FRAG_LOADING}}break;case dt.WAITING_TRACK:(t=this.tracks[this.trackId])&&t.details&&(this.state=dt.IDLE);break;case dt.FRAG_LOADING_WAITING_RETRY:var x=performance.now(),P=this.retryDate,B=(c=this.media)&&c.seeking;(!P||x>=P||B)&&(d.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=dt.IDLE);break;case dt.WAITING_INIT_PTS:var D=this.videoTrackCC;if(void 0===this.initPTS[D])break;var I=this.waitingFragment;if(I){var U=I.frag.cc;D!==U?(t=this.tracks[this.trackId]).details&&t.details.live&&(d.b.warn("Waiting fragment CC ("+U+") does not match video track CC ("+D+")"),this.waitingFragment=null,this.state=dt.IDLE):(this.state=dt.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=dt.IDLE}},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(d.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.loadCounter=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){this.state===dt.ENDED&&(this.state=dt.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},t.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.prototype.onAudioTracksUpdated=function(e){d.b.log("audio tracks updated"),this.tracks=e.audioTracks},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=dt.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=dt.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},t.prototype.onAudioTrackLoaded=function(e){var t=e.details,r=e.id,i=this.tracks[r],o=t.totalduration,n=0;if(d.b.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+o),t.live){var s=i.details;s&&t.fragments.length>0?(re(s,t),n=t.fragments[0].start,t.PTSKnown?d.b.log("live audio playlist sliding:"+n.toFixed(3)):d.b.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,d.b.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,!this.startFragRequested){if(-1===this.startPosition){var a=t.startTimeOffset;isNaN(a)?this.startPosition=0:(d.b.log("start time offset found in playlist, adjust startPosition to "+a),this.startPosition=a)}this.nextLoadPosition=this.startPosition}this.state===dt.WAITING_TRACK&&(this.state=dt.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===dt.KEY_LOADING&&(this.state=dt.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===dt.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var i=this.tracks[this.trackId],o=i.details,n=o.totalduration,a=t.level,c=t.sn,l=t.cc,p=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",u=this.stats=e.stats;if("initSegment"===c)this.state=dt.IDLE,u.tparsed=u.tbuffered=performance.now(),o.initSegment.data=e.payload,this.hls.trigger(s.a.FRAG_BUFFERED,{stats:u,frag:t,id:"audio"}),this.tick();else{this.state=dt.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new J(this.hls,"audio"));var f=this.initPTS[l],h=o.initSegment?o.initSegment.data:[];if(o.initSegment||void 0!==f){this.pendingBuffering=!0,d.b.log("Demuxing "+c+" of ["+o.startSN+" ,"+o.endSN+"],track "+a);var m=!1;this.demuxer.push(e.payload,h,p,null,t,n,m,f)}else d.b.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+c+" of ["+o.startSN+" ,"+o.endSN+"],track "+a),this.waitingFragment=e,this.state=dt.WAITING_INIT_PTS}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===dt.PARSING){var i=e.tracks,o=void 0;if(i.video&&delete i.video,o=i.audio){o.levelCodec=o.codec,o.id=e.id,this.hls.trigger(s.a.BUFFER_CODECS,i),d.b.log("audio track:audio,container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var n=o.initSegment;if(n){var a={type:"audio",data:n,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.a.BUFFER_APPENDING,a))}this.tick()}}},t.prototype.onFragParsingData=function(e){var t=this,r=this.fragCurrent,i=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&i.sn===r.sn&&i.level===r.level&&this.state===dt.PARSING){var o=this.trackId,n=this.tracks[o],a=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),d.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),te(n.details,r,e.startPTS,e.endPTS);var c=this.audioSwitch,l=this.media,p=!1;if(c&&l)if(l.readyState){var u=l.currentTime;d.b.log("switching audio track : currentTime:"+u),u>=e.startPTS&&(d.b.log("switching audio track : flushing all audio"),this.state=dt.BUFFER_FLUSHING,a.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),p=!0,this.audioSwitch=!1,a.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:o}))}else this.audioSwitch=!1,a.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:o});var f=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&f.push({type:e.type,data:t,parent:"audio",content:"data"})})),!p&&f.length&&(f.forEach((function(e){t.state===dt.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(s.a.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===dt.PARSING&&(this.stats.tparsed=performance.now(),this.state=dt.PARSED,this._checkAppendedParsed())},t.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},t.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},t.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;(t===dt.PARSING||t===dt.PARSED)&&(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==dt.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),r.trigger(s.a.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;d.b.log("audio buffered : "+ie.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=dt.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r<=i.fragLoadingMaxRetry){this.fragLoadError=r,t.loadCounter=0;var o=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);d.b.warn("audioStreamController: frag loading failed, retry in "+o+" ms"),this.retryDate=performance.now()+o,this.state=dt.FRAG_LOADING_WAITING_RETRY}else d.b.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=dt.ERROR}break;case a.a.FRAG_LOOP_LOADING_ERROR:case a.a.AUDIO_TRACK_LOAD_ERROR:case a.a.AUDIO_TRACK_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:this.state!==dt.ERROR&&(this.state=e.fatal?dt.ERROR:dt.IDLE,d.b.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case a.a.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===dt.PARSING||this.state===dt.PARSED)){var n=this.mediaBuffer,c=this.media.currentTime;if(n&&F.isBuffered(n,c)&&F.isBuffered(n,c+.5)){var l=this.config;l.maxMaxBufferLength>=l.maxBufferLength&&(l.maxMaxBufferLength/=2,d.b.warn("audio:reduce max buffer length to "+l.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*l.fragLoadingLoopThreshold),this.state=dt.IDLE}else d.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=dt.BUFFER_FLUSHING,this.hls.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},t.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(d.b.log("appending pending audio data on Buffer Flushed"),t.forEach((function(t){e.hls.trigger(s.a.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=dt.PARSED):(this.state=dt.IDLE,this.fragPrevious=null,this.tick())},ot(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,d.b.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(u),lt=function(){if(typeof window<"u"&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},r={start:!0,middle:!0,end:!0,left:!0,right:!0};function i(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function o(e){return"string"==typeof e&&!!r[e.toLowerCase()]&&e.toLowerCase()}function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]=r[i]}return e}function s(t,r,s){var a=this,d=function(){if(!(typeof navigator>"u"))return/MSIE\s8\.0/.test(navigator.userAgent)}(),c={};d?a=document.createElement("custom"):c.enumerable=!0,a.hasBeenReset=!1;var l="",p=!1,u=t,f=r,h=s,m=null,y="",g=!0,b="auto",v="start",E=50,R="middle",A=50,T="middle";if(Object.defineProperty(a,"id",n({},c,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(a,"pauseOnExit",n({},c,{get:function(){return p},set:function(e){p=!!e}})),Object.defineProperty(a,"startTime",n({},c,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",n({},c,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",n({},c,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",n({},c,{get:function(){return m},set:function(e){m=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",n({},c,{get:function(){return y},set:function(e){var t=i(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",n({},c,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",n({},c,{get:function(){return b},set:function(t){if("number"!=typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",n({},c,{get:function(){return v},set:function(e){var t=o(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",n({},c,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",n({},c,{get:function(){return R},set:function(e){var t=o(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");R=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",n({},c,{get:function(){return A},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");A=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",n({},c,{get:function(){return T},set:function(e){var t=o(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");T=t,this.hasBeenReset=!0}})),a.displayState=void 0,d)return a}return s.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},s}(),pt=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function ut(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new pt,this.regionList=[]}function ft(e){function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function ht(){this.values=Object.create(null)}function mt(e,t,r,i){var o=i?e.split(i):[e];for(var n in o)if("string"==typeof o[n]){var s=o[n].split(r);2===s.length&&t(s[0],s[1])}}ht.prototype={set:function(e,t){!this.get(e)&&""!==t&&(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var yt=new lt(0,0,0),gt="middle"===yt.align?"middle":"center";function bt(e,t,r){var i=e;function o(){var t=ft(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function n(e,t){var i=new ht;mt(e,(function(e,t){switch(e){case"region":for(var o=r.length-1;o>=0;o--)if(r[o].id===t){i.set(e,r[o].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),s=n[0];i.integer(e,s),i.percent(e,s)&&i.set("snapToLines",!1),i.alt(e,s,["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start",gt,"end"]);break;case"position":n=t.split(","),i.percent(e,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start",gt,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",gt,"end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var o=i.get("line","auto");"auto"===o&&-1===yt.line&&(o=-1),t.line=o,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",gt);var n=i.get("position","auto");"auto"===n&&50===yt.position&&(n="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=n}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=o(),s(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),s(),t.endTime=o(),s(),n(e,t)}function vt(e){return e.replace(/<br(?: \/)?>/gi,"\n")}ut.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=vt(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var i=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),i}function i(e){mt(e,(function(e,t){"Region"===e&&console.log("parse region",t)}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var o;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var n=(o=r()).match(/^()?WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var s=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:o=r(),t.state){case"HEADER":/:/.test(o)?i(o):o||(t.state="ID");continue;case"NOTE":o||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){t.state="NOTE";break}if(!o)continue;if(t.cue=new lt(0,0,""),t.state="CUE",-1===o.indexOf("--\x3e")){t.cue.id=o;continue}case"CUE":try{bt(o,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var a=-1!==o.indexOf("--\x3e");if(!o||a&&(s=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=o;continue;case"BADCUE":o||(t.state="ID");continue}}}catch{"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}};var Et=ut;function Rt(e,t,r,i){for(var o,n,s,a,d,c=window.VTTCue||window.TextTrackCue,l=0;l<i.rows.length;l++)if(s=!0,a=0,d="",!(o=i.rows[l]).isEmpty()){for(var p=0;p<o.chars.length;p++)o.chars[p].uchar.match(/\s/)&&s?a++:(d+=o.chars[p].uchar,s=!1);o.cueStartTime=t,t===r&&(r+=1e-4),n=new c(t,r,vt(d.trim())),a>=16?a--:a++,navigator.userAgent.match(/Firefox\//)?n.line=l+1:n.line=l>7?l-2:l+1,n.align="left",n.position=Math.max(0,Math.min(100,a/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(n)}}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Tt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},_t=function(e){var t=e;return Tt.hasOwnProperty(e)&&(t=Tt[e]),String.fromCharCode(t)},wt=15,Lt=100,Ct={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},St={17:2,18:4,21:6,22:8,23:10,19:13,20:15},kt={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},xt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Pt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Bt={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var r=this.verboseFilter[e];this.verboseLevel>=r&&console.log(this.time+" ["+e+"] "+t)}},Dt=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},It=function(){function e(t,r,i,o,n){At(this,e),this.foreground=t||"white",this.underline=r||!1,this.italics=i||!1,this.background=o||"black",this.flash=n||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Ut=function(){function e(t,r,i,o,n,s){At(this,e),this.uchar=t||" ",this.penState=new It(r,i,o,n,s)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Ot=function(){function e(){At(this,e),this.chars=[];for(var t=0;t<Lt;t++)this.chars.push(new Ut);this.pos=0,this.currPenState=new It}return e.prototype.equals=function(e){for(var t=!0,r=0;r<Lt;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<Lt;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<Lt;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(Bt.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>Lt&&(Bt.log("ERROR","Too large cursor position "+this.pos),this.pos=Lt)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=_t(e);this.pos>=Lt?Bt.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;t<Lt;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,r=0;r<Lt;r++){var i=this.chars[r].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Kt=function(){function e(){At(this,e),this.rows=[];for(var t=0;t<wt;t++)this.rows.push(new Ot);this.currRow=wt-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<wt;e++)this.rows[e].clear();this.currRow=wt-1},e.prototype.equals=function(e){for(var t=!0,r=0;r<wt;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<wt;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<wt;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){Bt.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){Bt.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<wt;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){var n=o.rows[i].cueStartTime;if(n&&n<Bt.time)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(o.rows[i+s])}}this.currRow=t;var a=this.rows[this.currRow];if(null!==e.indent){var d=e.indent,c=Math.max(d-1,0);a.setCursor(e.indent),e.color=a.chars[c].penState.foreground}var l={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(l)},e.prototype.setBkgData=function(e){Bt.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){Bt.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),Bt.log("INFO","Rolling up")}else Bt.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],r="",i=-1,o=0;o<wt;o++){var n=this.rows[o].getTextString();n&&(i=o+1,e?t.push("Row "+i+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},e.prototype.getTextAndFormat=function(){return this.rows},e}(),jt=function(){function e(t,r){At(this,e),this.chNr=t,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new Kt,this.nonDisplayedMemory=new Kt,this.lastOutputScreen=new Kt,this.currRollUpRow=this.displayedMemory.rows[wt-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[wt-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,Bt.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";Bt.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(Bt.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){Bt.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){Bt.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){Bt.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){Bt.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){Bt.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){Bt.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){Bt.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){Bt.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){Bt.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){Bt.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){Bt.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(Bt.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,Bt.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){Bt.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[r]}Bt.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Bt.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),Nt=function(){function e(t,r,i){At(this,e),this.field=t||1,this.outputs=[r,i],this.channels=[new jt(1,r),new jt(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var r,i,o,n=!1;this.lastTime=e,Bt.setTime(e);for(var s=0;s<t.length;s+=2)i=127&t[s],o=127&t[s+1],0!==i||0!==o?(Bt.log("DATA","["+Dt([t[s],t[s+1]])+"] -> ("+Dt([i,o])+")"),(r=this.parseCmd(i,o))||(r=this.parseMidrow(i,o)),r||(r=this.parsePAC(i,o)),r||(r=this.parseBackgroundAttributes(i,o)),!r&&(n=this.parseChars(i,o))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(n):Bt.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:n?this.dataCounters.char+=2:(this.dataCounters.other+=2,Bt.log("WARNING","Couldn't parse cleaned data "+Dt([i,o])+" orig: "+Dt([t[s],t[s+1]])))):this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var r=null;if(!((20===e||28===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Bt.log("DEBUG","Repeated command ("+Dt([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var i=this.channels[r-1];return 20===e||28===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.parseMidrow=function(e,t){var r=null;return(17===e||25===e)&&32<=t&&t<=47&&((r=17===e?1:2)!==this.currChNr?(Bt.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(t),Bt.log("DEBUG","MIDROW ("+Dt([e,t])+")"),!0))},e.prototype.parsePAC=function(e,t){var r=null,i=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,i=64<=t&&t<=95?1===r?Ct[e]:kt[e]:1===r?St[e]:xt[e];var o=this.interpretPAC(i,t);return this.channels[r-1].setPAC(o),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.interpretPAC=function(e,t){var r=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,i.underline=!(1&~r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i},e.prototype.parseChars=function(e,t){var r=null,i=null,o=null;if(e>=25?(r=2,o=e-8):(r=1,o=e),17<=o&&o<=19){var n=t;n=17===o?t+80:18===o?t+112:t+144,Bt.log("INFO","Special char '"+_t(n)+"' in channel "+r),i=[n]}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var s=Dt(i);Bt.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},e.prototype.parseBackgroundAttributes=function(e,t){var r,i,o;return!!((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(r={},16===e||24===e?(i=Math.floor((t-32)/2),r.background=Pt[i],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),o=e<24?1:2,this.channels[o-1].setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Vt=function(){function e(t,r){Mt(this,e),this.timelineController=t,this.track=r,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.track)},e}(),Gt=function(e,t,r){return e.substr(0,t.length)===t},Ft=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),o=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return isNaN(t)||isNaN(r)||isNaN(i)||isNaN(o)?-1:(t+=1e3*r,t+=6e4*i,t+=36e5*o)},qt=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},$t=function(e,t,r){var i=e[t],o=e[i.prevCC];if(!o||!o.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;o&&o.new;)e.ccOffset+=i.start-o.start,i.new=!1,o=e[(i=o).prevCC];e.presentationOffset=r},zt={parse:function(e,t,r,i,o,n){var s=/\r\n|\n\r|\n|\r/g,a=Object(Re.b)(new Uint8Array(e)).trim().replace(s,"\n").split("\n"),d="00:00.000",c=0,l=0,p=0,u=[],f=void 0,h=!0,m=new Et;m.oncue=function(e){var t=r[i],o=r.ccOffset;t&&t.new&&(void 0!==l?o=r.ccOffset=t.start:$t(r,i,p)),p&&(o=p+r.ccOffset-r.presentationOffset),e.startTime+=o-l,e.endTime+=o-l,e.id=qt(e.startTime.toString())+qt(e.endTime.toString())+qt(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&u.push(e)},m.onparsingerror=function(e){f=e},m.onflush=function(){f&&n?n(f):o(u)},a.forEach((function(e){if(h){if(Gt(e,"X-TIMESTAMP-MAP=")){h=!1,e.substr(16).split(",").forEach((function(e){Gt(e,"LOCAL:")?d=e.substr(6):Gt(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))}));try{c-=t=t<0?t+8589934592:t,l=Ft(d)/1e3,p=c/9e4,-1===l&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch{f=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(h=!1)}m.parse(e+"\n")})),m.flush()}};function Xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Wt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ht(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}function Yt(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function Qt(e,t,r,i){return Math.min(t,i)-Math.max(e,r)}var Jt=function(e){function t(r){Xt(this,t);var i=Zt(this,e.call(this,r,s.a.MEDIA_ATTACHING,s.a.MEDIA_DETACHING,s.a.FRAG_PARSING_USERDATA,s.a.FRAG_DECRYPTED,s.a.MANIFEST_LOADING,s.a.MANIFEST_LOADED,s.a.FRAG_LOADED,s.a.LEVEL_SWITCHING,s.a.INIT_PTS_FOUND));if(i.hls=r,i.config=r.config,i.enabled=!0,i.Cues=r.config.cueHandler,i.textTracks=[],i.tracks=[],i.unparsedVttFrags=[],i.initPTS=void 0,i.cueRanges=[],i.config.enableCEA708Captions){var o=new Vt(i,1),n=new Vt(i,2);i.cea608Parser=new Nt(0,o,n)}return i}return Wt(t,e),t.prototype.addCues=function(e,t,r,i){for(var o=this.cueRanges,n=!1,s=o.length;s--;){var a=o[s],d=Qt(a[0],a[1],t,r);if(d>=0&&(a[0]=Math.min(a[0],t),a[1]=Math.max(a[1],r),n=!0,d/(r-t)>.5))return}n||o.push([t,r]),this.Cues.newCue(this[e],t,r,i)},t.prototype.onInitPtsFound=function(e){var t=this;typeof this.initPTS>"u"&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach((function(e){t.onFragLoaded(e)})),this.unparsedVttFrags=[])},t.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var i=t.textTracks[r];if(!0===i["textTrack"+e])return i}return null},t.prototype.sendAddTrackEvent=function(e,t){var r=null;try{r=new window.Event("addtrack")}catch{(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)},t.prototype.createCaptionsTrack=function(e){var t="textTrack"+e;if(!this[t]){var r=this.getExistingTrack(e);if(r)this[t]=r,Ht(this[t]),this.sendAddTrackEvent(this[t],this.media);else{var i=this.createTextTrack("captions",this.config["captionsTextTrack"+e+"Label"],this.config.captionsTextTrack1LanguageCode);i&&(i[t]=!0,this[t]=i)}}},t.prototype.createTextTrack=function(e,t,r){var i=this.media;if(i)return i.addTextTrack(e,t,r)},t.prototype.destroy=function(){u.prototype.destroy.call(this)},t.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},t.prototype.onMediaDetaching=function(){Ht(this.textTrack1),Ht(this.textTrack2)},t.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},t.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)Ht(t[r])}},t.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,i){var o=void 0;if(i<r.length){var n=r[i];Yt(n,e)&&(o=n)}o||(o=t.createTextTrack("subtitles",e.name,e.lang)),o.mode=e.default?"showing":"hidden",t.textTracks.push(o)}))}},t.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},t.prototype.onFragLoaded=function(e){var t=e.frag,r=e.payload;if("main"===t.type){var i=t.sn;if(i!==this.lastSn+1){var o=this.cea608Parser;o&&o.reset()}this.lastSn=i}else if("subtitle"===t.type)if(r.byteLength){if(typeof this.initPTS>"u")return void this.unparsedVttFrags.push(e);var n=t.decryptdata;(null==n||null==n.key||"AES-128"!==n.method)&&this._parseVTTs(t,r)}else this.hls.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},t.prototype._parseVTTs=function(e,t){var r=this.vttCCs;r[e.cc]||(r[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var i=this.textTracks,o=this.hls;zt.parse(t,this.initPTS,r,e.cc,(function(t){var r=i[e.trackId];t.forEach((function(e){if(!r.cues.getCueById(e.id))try{r.addCue(e)}catch{var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,r.addCue(t)}})),o.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){d.b.log("Failed to parse VTT cue: "+t),o.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},t.prototype.onFragDecrypted=function(e){var t=e.payload,r=e.frag;if("subtitle"===r.type){if(typeof this.initPTS>"u")return void this.unparsedVttFrags.push(e);this._parseVTTs(r,t)}},t.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}},t.prototype.extractCea608Data=function(e){for(var t,r,i,o=31&e[0],n=2,s=[],a=0;a<o;a++)t=e[n++],r=127&e[n++],i=127&e[n++],(0!==r||0!==i)&&4&t&&!(3&t)&&(s.push(r),s.push(i));return s},t}(u),er=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ir(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function or(e){for(var t=[],r=0;r<e.length;r++)"subtitles"===e[r].kind&&t.push(e[r]);return t}var nr=function(e){function t(r){tr(this,t);var i=rr(this,e.call(this,r,s.a.MEDIA_ATTACHED,s.a.MEDIA_DETACHING,s.a.MANIFEST_LOADING,s.a.MANIFEST_LOADED,s.a.SUBTITLE_TRACK_LOADED));return i.tracks=[],i.trackId=-1,i.media=void 0,i.subtitleDisplay=!1,i}return ir(t,e),t.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=or(this.media.textTracks),r=0;r<t.length;r++)"showing"===t[r].mode&&(e=r);this.subtitleTrack=e}},t.prototype.destroy=function(){u.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.trackId=-1,this.hls.trigger(s.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},t.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var r=t.details;(void 0===r||!0===r.live)&&(d.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(s.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},t.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(d.b.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval((function(){t.onTick()}),1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},t.prototype.setSubtitleTrackInternal=function(e){if(!(e<-1||e>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var t=or(this.media.textTracks);if(-1!==this.trackId&&this.subtitleDisplay&&(t[this.trackId].mode="hidden"),this.trackId=e,d.b.log("switching to subtitle track "+e),this.hls.trigger(s.a.SUBTITLE_TRACK_SWITCH,{id:e}),-1!==e){var r=this.tracks[e];this.subtitleDisplay&&(t[e].mode="showing");var i=r.details;(void 0===i||!0===i.live)&&(d.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(s.a.SUBTITLE_TRACK_LOADING,{url:r.url,id:e}))}}},er(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(u),sr=r(4);function ar(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function cr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var lr={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},pr=function(e){function t(r){ar(this,t);var i=dr(this,e.call(this,r,s.a.MEDIA_ATTACHED,s.a.ERROR,s.a.KEY_LOADED,s.a.FRAG_LOADED,s.a.SUBTITLE_TRACKS_UPDATED,s.a.SUBTITLE_TRACK_SWITCH,s.a.SUBTITLE_TRACK_LOADED,s.a.SUBTITLE_FRAG_PROCESSED));return i.config=r.config,i.vttFragSNsProcessed={},i.vttFragQueues=void 0,i.currentlyProcessing=null,i.state=lr.STOPPED,i.currentTrackId=-1,i.ticks=0,i.decrypter=new sr.a(r.observer,r.config),i}return cr(t,e),t.prototype.destroy=function(){u.prototype.destroy.call(this),this.state=lr.STOPPED},t.prototype.clearVttFragQueues=function(){var e=this;this.vttFragQueues={},this.tracks.forEach((function(t){e.vttFragQueues[t.id]=[]}))},t.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=e,this.hls.trigger(s.a.FRAG_LOADING,{frag:e}),this.state=lr.FRAG_LOADING}},t.prototype.onSubtitleFragProcessed=function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.state=lr.IDLE,this.nextFrag()},t.prototype.onMediaAttached=function(){this.state=lr.IDLE},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},t.prototype.tick=function(){var e=this;this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout((function(){e.tick()}),1),this.ticks=0)},t.prototype.doTick=function(){var e=this;switch(this.state){case lr.IDLE:var t,r=this.tracks,i=this.currentTrackId,o=this.vttFragSNsProcessed[i],n=this.vttFragQueues[i],a=this.currentlyProcessing?this.currentlyProcessing.sn:-1,c=function(e){return o.indexOf(e.sn)>-1},l=function(e){return n.some((function(t){return t.sn===e.sn}))};if(!r)break;if(i<r.length&&(t=r[i].details),typeof t>"u")break;t.fragments.forEach((function(t){c(t)||t.sn===a||l(t)||(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key?(d.b.log("Loading key for "+t.sn),e.state=lr.KEY_LOADING,e.hls.trigger(s.a.KEY_LOADING,{frag:t})):(t.trackId=i,n.push(t),e.nextFrag()))}))}},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;d.b.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach((function(e){t.vttFragSNsProcessed[e.id]=[]}))},t.prototype.onSubtitleTrackSwitch=function(e){this.currentTrackId=e.id,this.clearVttFragQueues()},t.prototype.onSubtitleTrackLoaded=function(){this.tick()},t.prototype.onKeyLoaded=function(){this.state===lr.KEY_LOADING&&(this.state=lr.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,i=e.frag,o=this.hls;if(this.state===lr.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&null!=r&&null!=r.key&&"AES-128"===r.method){var n;try{n=performance.now()}catch{n=Date.now()}this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,(function(e){var t;try{t=performance.now()}catch{t=Date.now()}o.trigger(s.a.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:n,tdecrypt:t}})}))}},t}(u),ur={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Qe,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:Ue,bufferController:Me,capLevelController:ze,fpsController:He,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};ur.subtitleStreamController=pr,ur.subtitleTrackController=nr,ur.timelineController=Jt,ur.cueHandler=i,ur.enableCEA708Captions=!0,ur.enableWebVTT=!0,ur.captionsTextTrack1Label="English",ur.captionsTextTrack1LanguageCode="en",ur.captionsTextTrack2Label="Spanish",ur.captionsTextTrack2LanguageCode="es",ur.audioStreamController=ct,ur.audioTrackController=it;var fr=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var mr=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hr(this,e);var i=e.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var o in i)o in r||(r[o]=i[o]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(d.a)(r.debug),this.config=r,this._autoLevelCapping=-1;var n=this.observer=new z.a;n.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.emit.apply(n,[e,e].concat(r))},n.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.removeListener.apply(n,[e].concat(r))},this.on=n.on.bind(n),this.off=n.off.bind(n),this.trigger=n.trigger.bind(n);var s=this.abrController=new r.abrController(this),a=new r.bufferController(this),c=new r.capLevelController(this),l=new r.fpsController(this),p=new B(this),u=new K(this),f=new V(this),h=new we(this),m=[this.levelController=new Ee(this),this.streamController=new me(this)],y=r.audioStreamController;y&&m.push(new y(this)),this.networkControllers=m;var g=[p,u,f,s,a,c,l,h];if(y=r.audioTrackController){var b=new y(this);this.audioTrackController=b,g.push(b)}if(y=r.subtitleTrackController){var v=new y(this);this.subtitleTrackController=v,g.push(v)}[r.subtitleStreamController,r.timelineController].forEach((function(e){e&&g.push(new e(t))})),this.coreComponents=g}return e.isSupported=function(){return Le()},fr(e,null,[{key:"version",get:function(){return"0.8.9"}},{key:"Events",get:function(){return s.a}},{key:"ErrorTypes",get:function(){return a.b}},{key:"ErrorDetails",get:function(){return a.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:ur},set:function(t){e.defaultConfig=t}}]),e.prototype.destroy=function(){d.b.log("destroy"),this.trigger(s.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(e){d.b.log("attachMedia"),this.media=e,this.trigger(s.a.MEDIA_ATTACHING,{media:e})},e.prototype.detachMedia=function(){d.b.log("detachMedia"),this.trigger(s.a.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(e){e=n.a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),d.b.log("loadSource:"+e),this.url=e,this.trigger(s.a.MANIFEST_LOADING,{url:e})},e.prototype.startLoad=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;d.b.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},e.prototype.stopLoad=function(){d.b.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},e.prototype.swapAudioCodec=function(){d.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){d.b.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},fr(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){d.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){d.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){d.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){d.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){d.b.log("set startLevel:"+e);var t=this;-1!==e&&(e=Math.max(e,t.minAutoLevel)),t.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){d.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this,t=e.levels,r=e.config.minAutoBitrate,i=t?t.length:0,o=0;o<i;o++)if((t[o].realBitrate?Math.max(t[o].realBitrate,t[o].bitrate):t[o].bitrate)>r)return o;return 0}},{key:"maxAutoLevel",get:function(){var e=this,t=e.levels,r=e.autoLevelCapping;return-1===r&&t&&t.length?t.length-1:r}},{key:"nextAutoLevel",get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){var t=this;t.abrController.nextAutoLevel=Math.max(t.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),e}();t.default=mr},function(e,t,r){function i(e){var t={};function r(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var i=r(r.s=ENTRY_MODULE);return i.default||i}function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function n(e){var t=[],r=e.toString(),i=r.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!i)return t;for(var n,s=i[1],a=new RegExp("(\\\\n|\\W)"+o(s)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");n=a.exec(r);)t.push(n[3]);return t}function s(e,t){for(var r=[t],i=[],o={};r.length;){var s=r.pop();if(!o[s]&&e[s]){o[s]=!0,i.push(s);var a=n(e[s]);r=r.concat(a)}}return i}e.exports=function(e,t){t=t||{};var o=r.m,n=t.all?Object.keys(o):s(o,e),a="("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+n.map((function(e){return JSON.stringify(e)+": "+o[e].toString()})).join(",")+"})(self);",d=new window.Blob([a],{type:"text/javascript"});if(t.bare)return d;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(d),l=new window.Worker(c);return l.objectURL=c,l}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=r(7),o=r(1),n=r(0),s=r(5),a=r.n(s),d=function(e){var t=new a.a;t.trigger=function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t.removeListener.apply(t,[e].concat(i))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(o){var s=o.data;switch(s.cmd){case"init":var a=JSON.parse(s.config);e.demuxer=new i.a(t,s.typeSupported,a,s.vendor);try{Object(n.a)(!0===a.debug)}catch{console.warn("demuxerWorker: unable to enable logs")}r("init",null);break;case"demux":e.demuxer.push(s.data,s.decryptdata,s.initSegment,s.audioCodec,s.videoCodec,s.timeOffset,s.discontinuity,s.trackSwitch,s.contiguous,s.duration,s.accurateTimeOffset,s.defaultInitPTS)}})),t.on(o.a.FRAG_DECRYPTED,r),t.on(o.a.FRAG_PARSING_INIT_SEGMENT,r),t.on(o.a.FRAG_PARSED,r),t.on(o.a.ERROR,r),t.on(o.a.FRAG_PARSING_METADATA,r),t.on(o.a.FRAG_PARSING_USERDATA,r),t.on(o.a.INIT_PTS_FOUND,r),t.on(o.a.FRAG_PARSING_DATA,(function(t,r){var i=[],o={event:t,data:r};r.data1&&(o.data1=r.data1.buffer,i.push(r.data1.buffer),delete r.data1),r.data2&&(o.data2=r.data2.buffer,i.push(r.data2.buffer),delete r.data2),e.postMessage(o,i)}))};t.default=d}]).default;var mK=Xm.exports;const Ec=Lb(mK),Hm=({post:e,reason:t,isRoot:r})=>{if("app.bsky.embed.record#viewNotFound"===e.$type||"app.bsky.embed.record#viewBlocked"===e.$type)return null;if("app.bsky.graph.defs#listView"===e.$type)return{username:e.creator.displayName,handle:e.creator.handle,avatar:e.creator.avatar,text:[{val:e.description,setInnerHtml:!1}],createdAt:e.indexedAt,uri:e.uri,images:[],card:null,replyPost:null,isRepost:!1,repostBy:null};const i=e.record.facets||[],o=e.record.text,n=new Bc.RichText({text:o,facets:i}),s=[];for(const e of n.segments())e.isLink()?s.push({val:`<a href="${e.link?.uri}" target="_blank" rel="noopener" class="text-blue-500 underline">${e.text}</a>`,setInnerHtml:!0}):e.isMention()?s.push({val:`<a href="https://bsky.app/profile/${e.mention?.did}" target="_blank" rel="noopener" class="text-blue-500 underline">${e.text}</a>`,setInnerHtml:!0}):e.isTag()?s.push({val:`<a href="https://bsky.app/hashtag/${e.tag?.tag}" target="_blank" rel="noopener" class="text-blue-500 underline">${e.text}</a>`,setInnerHtml:!0}):s.push({val:e.text,setInnerHtml:!1});const a="app.bsky.embed.record#view"===e.embed?.$type?e.embed.record:"app.bsky.embed.record#viewRecord"===e.embed?.record?.record?.$type&&e.embed.record.record,d=a&&{...a,record:a.value||a.record,embed:(a?.embeds||[])[0]},c=e.author||e.creator;return{username:c.displayName,handle:c.handle,avatar:c.avatar,text:s,createdAt:e.record.createdAt,uri:e.uri,images:[...e.embed?.images||[],...e.embed?.media?.images||[],...[e.embed?.media?.external].filter(Boolean).map((e=>({...e,alt:e.title,thumb:e.uri})))],video:"app.bsky.embed.video#view"===e.embed?.$type&&e.embed,card:"app.bsky.embed.external#view"===e.embed?.$type&&e.embed?.external,replyPost:r&&d&&Hm({post:d,reason:{$type:"",by:{displayName:""}},isRoot:!1}),isRepost:"app.bsky.feed.defs#reasonRepost"===t?.$type,repostBy:t?.by?.displayName}},vc=e=>(e.feed||[]).map((e=>Hm({...e,isRoot:!0}))),Df=e=>{const t=e.lastIndexOf("/");return-1!==t?e.substring(t+1):e},yK=e=>{const t=6e4,r=60*t,i=24*r,o=30*i,n=365*i,s=(new Date).getTime()-e.getTime();return s<t?Math.floor(s/1e3)+"s":s<r?Math.floor(s/t)+"m":s<i?Math.floor(s/r)+"h":s<o?Math.floor(s/i)+"d":s<n?Math.floor(s/o)+" mo":Math.floor(s/n)+" yr"},bK=async(e,t,r=!1)=>{if(!("IntersectionObserver"in window))return void console.error("IntersectionObserver not supported");if(!t)return void console.error("Video element not found");new IntersectionObserver((async(i,o)=>{i.forEach((i=>{if(i.isIntersecting){if(Ec.isSupported()){var n=new Ec;n.loadSource(e.playlist),n.attachMedia(t),n.on(Ec.Events.MANIFEST_PARSED,(()=>{r||t.play()}))}else t.canPlayType("application/vnd.apple.mpegurl")&&(t.src=e.playlist,t.addEventListener("loadedmetadata",(()=>{r||t.play()})));o.unobserve(t)}}))}),{root:null,threshold:.5}).observe(t)};var gK=qt('<article class="p-4 border-b border-slate-300 dark:border-slate-800"><div class="flex gap-2"><div class="w-full max-w-[calc(100%-70px)]"><div class="flex items-center"><a class="text-ellipsis overflow-hidden whitespace-nowrap hover:underline dark:text-white"><span class="font-bold dark:text-white"></span><span> </span><span class="text-slate-500 dark:text-slate-400 text-sm">@</span></a><span class="text-slate-500 dark:text-slate-400 text-sm"><span class=mx-1></span><a class=hover:underline></a></span></div><p class="whitespace-pre-wrap dark:text-white">'),xK=qt('<p class="flex gap-1 items-center ml-10 text-slate-600 dark:text-slate-400"><svg viewBox="0 0 576 512"height=16 width=16 tabindex=-1 class=mr-1><path fill=currentColor d="M272 416c17.7 0 32-14.3 32-32s-14.3-32-32-32H160c-17.7 0-32-14.3-32-32V192h32c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-64-64c-12.5-12.5-32.8-12.5-45.3 0l-64 64c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8l32 0 0 128c0 53 43 96 96 96H272zM304 96c-17.7 0-32 14.3-32 32s14.3 32 32 32l112 0c17.7 0 32 14.3 32 32l0 128H416c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l64 64c12.5 12.5 32.8 12.5 45.3 0l64-64c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8l-32 0V192c0-53-43-96-96-96L304 96z"></path></svg><span class="text-sm text-slate-500 font-semibold">Reposted by '),EK=qt('<img alt="profile picture"class="w-14 h-14 rounded-full">'),vK=qt('<img alt="profile picture"class="w-4 h-4 mr-1 rounded-full">'),Pf=qt("<span>"),RK=qt("<div>"),AK=qt("<a><img class=rounded-md>"),_K=qt('<div class="mt-4 w-full"><video width=100% class="rounded-md w-full h-full object-cover"preload=none>'),wK=qt('<a target=_blank rel=noopener class="mt-4 rounded-md border border-slate-300 block"><div class=p-3><p class="text-slate-500 dark:text-slate-400 text-sm"></p><p class="font-bold dark:text-white mb-1"></p><p class="whitespace-pre-wrap dark:text-white">'),TK=qt('<img class=rounded-t-md alt="Post Thumbnail">'),SK=qt('<a target=_blank rel=noopener class="mt-4 rounded-md border border-slate-300 block">');const Zm=({linkTarget:e="_self",post:t,handleModalContent:r,isCard:i=!1,dateFormat:o,disableImages:n,disableVideos:s,disableAutoplay:a})=>{let d;return hb((()=>{!s&&t.video&&t.video.cid&&bK(t.video,d,a)})),(()=>{var c=gK(),l=c.firstChild,p=l.firstChild,u=p.firstChild,f=u.firstChild,h=f.firstChild,m=h.nextSibling.nextSibling;m.firstChild;var y,g=f.nextSibling.firstChild.nextSibling,b=u.nextSibling;return st(c,(y=Kr((()=>!!t.isRepost)),()=>{return y()&&(e=xK(),(r=e.firstChild.nextSibling).firstChild,st(r,(()=>t.repostBy),null),e);var e,r}),l),st(l,!i&&(()=>{var e=EK();return Er((()=>kt(e,"src",t.avatar))),e})(),p),st(u,i&&(()=>{var e=vK();return Er((()=>kt(e,"src",t.avatar))),e})(),f),kt(f,"target",e),kt(f,"rel","_blank"===e?"noopeener":""),st(h,(()=>t.username)),st(m,(()=>t.handle),null),kt(g,"target",e),kt(g,"rel","_blank"===e?"noopeener":""),st(g,(()=>{var e=Kr((()=>!(!o||"absolute"!==o.type)));return()=>e()?new Date(t.createdAt).toLocaleDateString(o.locale,o.options):yK(new Date(t.createdAt))})()),st(b,(()=>t.text.map((e=>{return e.setInnerHtml?(t=Pf(),Er((()=>t.innerHTML=e.val)),t):(()=>{var t=Pf();return st(t,(()=>e.val)),t})();var t})))),st(p,(()=>{var i=Kr((()=>!n&&t.images.length>0));return()=>{return i()&&(st(o=RK(),(()=>t.images.map((i=>{return o=AK(),n=o.firstChild,o.$$click=e=>r(e,i),kt(o,"target",e),kt(o,"rel","_blank"===e?"noopeener":""),Er((e=>{var r=`https://bsky.app/profile/${t.handle}/post/${Df(t.uri)}`,s=i.thumb,a=i.alt;return r!==e.e&&kt(o,"href",e.e=r),s!==e.t&&kt(n,"src",e.t=s),a!==e.a&&kt(n,"alt",e.a=a),e}),{e:void 0,t:void 0,a:void 0}),o;var o,n})))),Er((()=>zf(o,t.images.length>1?"mt-4 grid grid-cols-2 gap-2":"mt-4"))),o);var o}})(),null),st(p,(()=>{var e=Kr((()=>!(s||!t.video)));return()=>{return e()&&(r=_K(),i=r.firstChild,"function"==typeof d?Ac(d,i):d=i,i.autoplay=!1,i.controls=!0,i.muted=!0,Er((()=>kt(i,"poster",t.video.thumbnail))),r);var r,i}})(),null),st(p,(()=>{var e=Kr((()=>!!t.card));return()=>{return e()&&(i=wK(),o=i.firstChild,s=o.firstChild,a=s.nextSibling,d=a.nextSibling,st(i,(r=Kr((()=>!(!t.card.thumb||n))),()=>{return r()&&(e=TK(),Er((()=>kt(e,"src",t.card.thumb))),e);var e}),o),st(s,(()=>new URL(t.card.uri).hostname)),st(a,(()=>t.card.title)),st(d,(()=>t.card.description)),Er((()=>kt(i,"href",t.card.uri))),i);var r,i,o,s,a,d}})(),null),st(p,(()=>{var i=Kr((()=>!!t.replyPost));return()=>{return i()&&(st(o=SK(),Gf(Zm,vb({linkTarget:e,handleModalContent:r,disableImages:n,disableVideos:s,disableAutoplay:a},{get post(){return t.replyPost},isCard:!0}))),Er((()=>kt(o,"href",t.card.uri))),o);var o}})(),null),Er((e=>{var r=`https://bsky.app/profile/${t.handle}`,i=`https://bsky.app/profile/${t.handle}/post/${Df(t.uri)}`;return r!==e.e&&kt(f,"href",e.e=r),i!==e.t&&kt(g,"href",e.t=i),e}),{e:void 0,t:void 0}),c})()};qf(["click"]);var CK=qt('<section><dialog class="backdrop:bg-gray-800 backdrop:opacity-90"><form class="fixed top-5 right-5"><button type=submit aria-label=close formmethod=dialog formnovalidate class="bg-gray-900 rounded-full w-10 h-10 text-white flex items-center justify-center">X</button></form><img src=""alt=""class=max-h-[90vh]>'),Bf=qt("<style>"),LK=qt("<link rel=stylesheet>"),kK=qt("<div class=w-full>"),DK=qt('<article class="w-full flex gap-2 p-4 border-b border-slate-300 dark:border-slate-800 animate-pulse"><div class="bg-slate-200 w-14 h-14 rounded-full dark:bg-slate-800"></div><div class="flex-1 space-y-2 py-1"><div class="grid grid-cols-4 gap-4"><div class="h-2 bg-slate-200 rounded col-span-2 dark:bg-slate-800"></div></div><div class="h-2 bg-slate-200 rounded dark:bg-slate-800"></div><div class="h-2 bg-slate-200 rounded dark:bg-slate-800"></div><div class="h-2 bg-slate-200 rounded dark:bg-slate-800">'),PK=qt('<div class="mt-8 mb-16"><button id=bsky-load-more class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Load More Posts');const BK=({username:e,feed:t,limit:r=10,mode:i="",linkTarget:o="_self",linkImage:n=!1,customStyles:s="",customStylesFile:a,disableStyles:d=!1,search:c,loadMore:l=!1,dateFormat:p,disableImages:u=!1,disableVideos:f=!1,disableAutoplay:h=!1})=>{let m=null,y=null;const[g,b]=ia(!1),[v,E]=ia([]),[R]=ia(r),[A,T]=ia(void 0);Mf((()=>{b(!0),_()}),[e,t,c,R]);const _=async r=>{e?xc.app.bsky.feed.getAuthorFeed({limit:R(),actor:e,filter:"posts_no_replies",cursor:r}).then((({success:e,data:t})=>{if(e){const e=vc(t);C(e),b(!1),T(t.cursor)}})):t?xc.app.bsky.feed.getFeed({limit:R(),feed:t,cursor:r}).then((({success:e,data:t})=>{if(e){const e=vc(t);C(e),b(!1),T(t.cursor)}})):c&&xc.app.bsky.feed.searchPosts({limit:R(),q:c,cursor:r}).then((({success:e,data:t})=>{if(e){const e={...t,feed:t.posts.map((e=>({post:e})))},r=vc(e);C(r),b(!1),T(t.cursor)}}))},w=(e,t)=>{!n&&m&&y&&(e.preventDefault(),y.src=t.fullsize,y.alt=t.alt,m.showModal())},L=()=>{b(!0),_(A())},C=e=>{const t=[...v(),...e];E(t)};return[!d&&(S=Bf(),st(S,Cb),S),s&&(()=>{var e=Bf();return st(e,s),e})(),a&&(()=>{var e=LK();return kt(e,"href",a),e})(),(()=>{var e,t=CK(),n=t.firstChild,s=n.firstChild.nextSibling;return zf(t,`${i} max-w-screen-sm mx-auto flex flex-col items-center`),st(t,(e=Kr((()=>v().length>0)),()=>e()&&v().map(((e,t)=>{return kt(r=kK(),"id",`post-${t}`),st(r,Gf(Zm,{post:e,handleModalContent:w,linkTarget:o,dateFormat:p,disableImages:u,disableVideos:f,disableAutoplay:h})),r;var r}))),n),st(t,(()=>{var e=Kr((()=>!!g()));return()=>e()&&Array.from(Array(r)).map((()=>DK()))})(),n),Ac((e=>m=e),n),Ac((e=>y=e),s),st(t,(()=>{var e=Kr((()=>!(!l||!A())));return()=>{return e()&&((t=PK()).firstChild.$$click=L,t);var t}})(),null),t})()];var S};qf(["click"]),Sb("bsky-embed",{username:"",feed:"",limit:10,mode:"",linkTarget:"_self",linkImage:!1,customStyles:"",customStylesFile:"",disableStyles:!1,search:"",loadMore:!1,disableAutoplay:!1,disableImages:!1,disableVideos:!1,dateFormat:{}},BK);
//# sourceMappingURL=/sm/1cd0e2cfa010823a51d6e1dceb9c4149cf38089ffd0dd77fc8408733a47b9a43.map